<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-01-14 Tue 12:27 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org5bee635">1. communities</a></li>
<li><a href="#org21417b4">2. english terms</a></li>
<li><a href="#orgfa447d5">3. Основные определения</a></li>
<li><a href="#orgafa9ea1">4. level of sophistication of a Data Warehouse</a></li>
<li><a href="#orge30c122">5. History</a></li>
<li><a href="#orge0c92b7">6. Teory</a>
<ul>
<li><a href="#org54ba44b">6.1. evolution</a></li>
<li><a href="#org7d063a7">6.2. DW Development Approaches</a></li>
<li><a href="#org19e9589">6.3. Architecture - Организационная зрелость</a>
<ul>
<li><a href="#org9ff5794">6.3.1. Data operations per Users by Steps:</a></li>
<li><a href="#orga99bd52">6.3.2. Feature store</a></li>
</ul>
</li>
<li><a href="#org014d071">6.4. ML Data challenges:</a></li>
<li><a href="#org1ab5692">6.5. Operational vs analytical machine learning</a></li>
<li><a href="#org12e0fad">6.6. Best Practices</a></li>
<li><a href="#org9895673">6.7. Dimensional modeling</a></li>
<li><a href="#org73706df">6.8. Loading</a></li>
<li><a href="#orgbc17deb">6.9. Data management approaches</a></li>
</ul>
</li>
<li><a href="#org5cb508e">7. OLAP</a>
<ul>
<li><a href="#orgae1051f">7.1. OLAP terms:</a></li>
<li><a href="#org9532852">7.2. Типы OLAP </a></li>
<li><a href="#orgb71fc35">7.3. SQL OLAP extension</a></li>
<li><a href="#org54f65aa">7.4. Oracle OLAP</a>
<ul>
<li><a href="#org9b343aa">7.4.1. links</a></li>
</ul>
</li>
<li><a href="#org9e6da78">7.5. API</a></li>
<li><a href="#org81a3d92">7.6. features</a></li>
</ul>
</li>
<li><a href="#org23ea360">8. data warehouse and any data intergration system modeling</a>
<ul>
<li><a href="#org3c78884">8.1. <span class="todo TODO">TODO</span> Normalization vs. denormalization</a></li>
<li><a href="#org0404993">8.2. star schema - best data warehouse model  </a></li>
<li><a href="#orgadf2e0f">8.3. Data Model</a></li>
<li><a href="#org0a8d972">8.4. data mart</a></li>
<li><a href="#org51099be">8.5. Dimensional modeling</a>
<ul>
<li><a href="#org44939eb">8.5.1. Моделирование многомерных кубов на реляционной модели данных:</a></li>
<li><a href="#org1c59243">8.5.2. виды fact table</a></li>
</ul>
</li>
<li><a href="#org5e2fcdd">8.6. <span class="todo TODO">TODO</span> links</a></li>
</ul>
</li>
<li><a href="#org9c181e0">9. <span class="todo TODO">TODO</span> Predictive analytics</a></li>
<li><a href="#org85b7b9b">10. виды софта</a></li>
<li><a href="#org81882bd">11. Types of database management software</a>
<ul>
<li><a href="#org8018a69">11.1. Модели данных и языки запросов для баз данных</a></li>
</ul>
</li>
<li><a href="#orgac05dbe">12. <span class="todo TODO">TODO</span> problem Change-Data Capture (DELETE UPDATE)</a></li>
<li><a href="#org4be8c0d">13. time-to-market</a></li>
<li><a href="#org3f92353">14. выбор 2019</a></li>
<li><a href="#orge9d42e7">15. SQL builder tools</a></li>
<li><a href="#orgfb24e9d">16. APEX Oracle</a>
<ul>
<li><a href="#org63ead20">16.1. upload Excel file</a></li>
<li><a href="#orgde40242">16.2. create app upload from file</a></li>
<li><a href="#org3bc2ac1">16.3. https://docs.oracle.com/en/database/oracle/application-express/18/data_load_wizard/</a></li>
<li><a href="#orgc4316a2">16.4. plugin</a></li>
</ul>
</li>
<li><a href="#orge32033d">17. Oracle</a>
<ul>
<li><a href="#org646ad5c">17.1. column names and comments</a></li>
<li><a href="#orga3ea141">17.2. column info</a></li>
<li><a href="#orga3f72ce">17.3. psql</a></li>
<li><a href="#orgd6b9114">17.4. all available tables</a></li>
<li><a href="#org873ff97">17.5. get tables description</a></li>
</ul>
</li>
<li><a href="#org41288ab">18. Report and Dashboard (Data visualization)</a>
<ul>
<li><a href="#org82677e4">18.1. terms</a></li>
<li><a href="#orge21f5ad">18.2. Design best practives</a></li>
<li><a href="#orgaf72885">18.3. design tradeoff Generalist and Specialist</a></li>
<li><a href="#org68a66cc">18.4. Excel Power Pivot</a></li>
<li><a href="#org3945a1a">18.5. Power BI Desktop</a>
<ul>
<li><a href="#org681147c">18.5.1. connection types</a></li>
<li><a href="#org2319e42">18.5.2. features</a></li>
<li><a href="#org4c66d3e">18.5.3. Power Query</a></li>
<li><a href="#org7ee9edc">18.5.4. Data Analysis Expressions (DAX)</a></li>
<li><a href="#orga90ca0d">18.5.5. dataflow</a></li>
<li><a href="#orgcea1d2d">18.5.6. power query язык M</a></li>
<li><a href="#org256ca4d">18.5.7. report as one string but no OFFSET and LIMIT:</a></li>
<li><a href="#orgfc780a5">18.5.8. custom visal apps</a></li>
</ul>
</li>
<li><a href="#orgfa9226d">18.6. Tableau Public (Desktop Windows, mac)</a></li>
<li><a href="#org5f0fa36">18.7. Metabase</a></li>
<li><a href="#orgdc9c547">18.8. Redash</a></li>
<li><a href="#org03406ac">18.9. Qlik Sense Desktop</a></li>
<li><a href="#org4857014">18.10. SuperSet</a>
<ul>
<li><a href="#org8f07db4">18.10.1. create dashboard</a></li>
<li><a href="#org423d483">18.10.2. feature:</a></li>
<li><a href="#orgd6c66fc">18.10.3. install 1.4</a></li>
<li><a href="#orgee2cb33">18.10.4. config</a></li>
<li><a href="#org041e431">18.10.5. install old</a></li>
<li><a href="#org7f10001">18.10.6. architecture</a></li>
<li><a href="#org0afa099">18.10.7. docker-compose</a></li>
<li><a href="#org81ef4ce">18.10.8. pros and cons</a></li>
<li><a href="#org948c8c5">18.10.9. links</a></li>
<li><a href="#org6937606">18.10.10. security</a></li>
<li><a href="#orga28923a">18.10.11. semantic layer</a></li>
</ul>
</li>
<li><a href="#org56bf4e3">18.11. <span class="todo TODO">TODO</span> Google Data Studio</a></li>
<li><a href="#orga91817a">18.12. <span class="todo TODO">TODO</span> Looker</a></li>
<li><a href="#orgdb89123">18.13. как выбирать:</a></li>
<li><a href="#org9e8a34c">18.14. 4 качества хорошего дашборда</a></li>
<li><a href="#org19bd055">18.15. Виды отчетов и дашбордов⁣⁣</a></li>
<li><a href="#org330d168">18.16. советы 20</a></li>
<li><a href="#org660b13e">18.17. этапы построения</a></li>
<li><a href="#orgf84a032">18.18. дашборды на смартфоне</a></li>
</ul>
</li>
<li><a href="#orgc364095">19. report commercial</a>
<ul>
<li><a href="#org3da2b0d">19.1. SAP Crystal Reports</a></li>
</ul>
</li>
<li><a href="#orge873f24">20. Data Warehouse producsts</a>
<ul>
<li><a href="#org7db6f5e">20.1. Clickhouse</a>
<ul>
<li><a href="#orgfa4593e">20.1.1. Управление данными</a></li>
<li><a href="#orga72f6aa">20.1.2. sql</a></li>
<li><a href="#org1fdcd0a">20.1.3. error ssl</a></li>
<li><a href="#orgdaf0655">20.1.4. Aiflow</a></li>
<li><a href="#orgc4ccbef">20.1.5. Power BI</a></li>
<li><a href="#org739a911">20.1.6. <span class="todo TODO">TODO</span> compilation</a></li>
</ul>
</li>
<li><a href="#org22256db">20.2. MariaDB</a>
<ul>
<li><a href="#org33df296">20.2.1. install</a></li>
</ul>
</li>
<li><a href="#orga7fa3bf">20.3. PostgreSQL</a></li>
<li><a href="#orgab33562">20.4. Greenplum BD</a>
<ul>
<li><a href="#org3b590ec">20.4.1. MPP</a></li>
<li><a href="#orgcdddf73">20.4.2. Append-only tables</a></li>
<li><a href="#org67979f6">20.4.3. install for kubernetes</a></li>
<li><a href="#orgb209e31">20.4.4. psql</a></li>
<li><a href="#org7a6b673">20.4.5. Tablespaces not needed</a></li>
<li><a href="#org8ae2898">20.4.6. Create Tables</a></li>
<li><a href="#org5146995">20.4.7. data types</a></li>
<li><a href="#org9c21b60">20.4.8. ROLE</a></li>
<li><a href="#org32240cd">20.4.9. Greenplum ETL</a></li>
<li><a href="#org3aa7270">20.4.10. Power BI</a></li>
<li><a href="#org21cfca3">20.4.11. Serial</a></li>
<li><a href="#org28e75f0">20.4.12. userful SQL</a></li>
</ul>
</li>
<li><a href="#orgecaf3ad">20.5. Apache Druid</a></li>
<li><a href="#orgdb9c112">20.6. in memory additional DB with replication</a></li>
<li><a href="#orge161742">20.7. DB vertica community edition</a></li>
</ul>
</li>
<li><a href="#org2ed4d67">21. Oracle</a>
<ul>
<li><a href="#org9abcf52">21.1. Oracle Instant Client</a></li>
<li><a href="#org7e68114">21.2. SQL* plus</a></li>
<li><a href="#orgcbbe9c2">21.3. Constraints</a></li>
<li><a href="#orgb88ccb0">21.4. SQL useful</a></li>
<li><a href="#orgd8c5087">21.5. Memory Architecture</a></li>
<li><a href="#org70ea1ce">21.6. cx<sub>Oracle</sub> python</a></li>
<li><a href="#orgb4d9aa6">21.7. characters</a></li>
</ul>
</li>
<li><a href="#orgeca5bd7">22. ETL vs. ELT</a></li>
<li><a href="#org621ecf8">23. ETL Extract, Transform, Load- traditional ETL paradigm - batch-driven</a>
<ul>
<li><a href="#org843f719">23.1. targets</a></li>
<li><a href="#org4c8f95f">23.2. process</a></li>
<li><a href="#orga9ea040">23.3. Full and Incremental Loading</a></li>
<li><a href="#orgb02f5db">23.4. CDC</a></li>
<li><a href="#orgaa96166">23.5. Spring Cloud Data Flow</a></li>
<li><a href="#org3528b15">23.6. Talend Open Studio</a></li>
<li><a href="#org080ca52">23.7. staging tables Промежуточные таблицы</a></li>
<li><a href="#orgfea462a">23.8. concurrent vs sequential</a></li>
</ul>
</li>
<li><a href="#org922ce2e">24. Apache Airflow</a>
<ul>
<li><a href="#org46b5836">24.1. terms</a></li>
<li><a href="#orgb91a7b0">24.2. theory</a></li>
<li><a href="#org51c293a">24.3. variables</a></li>
<li><a href="#orgd5f2431">24.4. Hooks</a></li>
<li><a href="#org67e4979">24.5. components</a></li>
<li><a href="#orgab14af5">24.6. scheduler</a></li>
<li><a href="#org58c1199">24.7. dag</a>
<ul>
<li><a href="#org5667e5d">24.7.1. create dag:</a></li>
</ul>
</li>
<li><a href="#org2b1d877">24.8. Operator</a>
<ul>
<li><a href="#org4b1a56b">24.8.1. Pipeline difinition:</a></li>
<li><a href="#orge4a927e">24.8.2. OracleOperator</a></li>
<li><a href="#orgbded1bf">24.8.3. PythonOperator</a></li>
<li><a href="#org3e0905c">24.8.4. PythonOperator context</a></li>
</ul>
</li>
<li><a href="#org44074db">24.9. Tasks</a>
<ul>
<li><a href="#orgd535dc7">24.9.1. trigger<sub>rule</sub></a></li>
</ul>
</li>
<li><a href="#org7ae10bc">24.10. TaskGroup</a></li>
<li><a href="#orga507158">24.11. airflow.cfg</a></li>
<li><a href="#orgdf0e4a2">24.12. best practives</a>
<ul>
<li><a href="#org5746c7b">24.12.1. UPSERT in postgresql</a></li>
</ul>
</li>
<li><a href="#org6bcbc24">24.13. local server</a></li>
<li><a href="#org29fa90f">24.14. Incremental Record Filtering</a></li>
<li><a href="#org4ba8ea5">24.15. deployment</a>
<ul>
<li><a href="#org2ae7bbc">24.15.1. docker-compose</a></li>
<li><a href="#org35e87dd">24.15.2. Dockerfile</a></li>
<li><a href="#org4890c5b">24.15.3. ferenet.py</a></li>
<li><a href="#orga044f6e">24.15.4. mysqlconnect.py</a></li>
<li><a href="#org48813ae">24.15.5. airflow.sh</a></li>
</ul>
</li>
<li><a href="#org1b2da75">24.16. test</a>
<ul>
<li><a href="#org6c56e9b">24.16.1. operator</a></li>
<li><a href="#org00d6aa3">24.16.2. dag test</a></li>
<li><a href="#orgc25800b">24.16.3. task.execute</a></li>
</ul>
</li>
<li><a href="#orgb3eb42b">24.17. dynamic dag</a></li>
<li><a href="#org3b8b595">24.18. pass data between operators</a></li>
<li><a href="#org7c7fe1e">24.19. макросы Jinja в Airflow</a></li>
<li><a href="#orga5837ad">24.20. parallism config</a></li>
<li><a href="#orge1a02bf">24.21. skip task</a></li>
<li><a href="#org2261ae4">24.22. stop dag</a></li>
<li><a href="#org79a89c1">24.23. Executors</a></li>
<li><a href="#orgc0b0a58">24.24. Cross-DAG Dependencies (subdags)</a>
<ul>
<li><a href="#org58650ab">24.24.1. ExternalTaskSensor</a></li>
<li><a href="#org06b1dcc">24.24.2. <span class="todo TODO">TODO</span> TriggerDagRunOperator</a></li>
<li><a href="#orgd259bc2">24.24.3. <span class="todo TODO">TODO</span> dag.implicit<sub>dependencies</sub> = ['dag<sub>1</sub>', 'dag<sub>2</sub>']</a></li>
<li><a href="#orgcc15967">24.24.4. SubDagOperator</a></li>
</ul>
</li>
<li><a href="#org471e444">24.25. Trigger Dag - JSON</a></li>
<li><a href="#orgd85516f">24.26. update 2.0.2</a></li>
<li><a href="#org1a202d6">24.27. create connection</a></li>
<li><a href="#orgacb98fd">24.28. create user</a></li>
<li><a href="#org60c3720">24.29. restart</a></li>
<li><a href="#orgf404063">24.30. problems</a></li>
<li><a href="#org5c1cc40">24.31. how to change config:</a></li>
<li><a href="#org8fb9248">24.32. rest API</a></li>
<li><a href="#org49b9311">24.33. logs</a></li>
<li><a href="#orgc36d17b">24.34. Database of Airflow</a></li>
</ul>
</li>
<li><a href="#org10ec257">25. <span class="todo TODO">TODO</span> dbt - ETL</a></li>
<li><a href="#org4671a75">26. Data Lake (Озеро данных)</a>
<ul>
<li><a href="#org45fa598">26.1. критика</a></li>
</ul>
</li>
<li><a href="#orgfbb53f9">27. Управленческий учет</a></li>
<li><a href="#orgfd60750">28. <span class="todo TODO">TODO</span> Юнит-экономика (unit-экономика, unit economics)</a>
<ul>
<li><a href="#org410ff18">28.1. Зачем считать юнит-экономику</a></li>
<li><a href="#orga489996">28.2. Когда</a></li>
<li><a href="#org6cdbaf5">28.3. Как</a></li>
<li><a href="#org0b8cd64">28.4. Когортный анализ</a></li>
<li><a href="#orgfd121a8">28.5. links</a></li>
</ul>
</li>
<li><a href="#org98c1c9e">29. mail</a></li>
<li><a href="#org7e795ed">30. Congos</a></li>
<li><a href="#orga8928a8">31. цфт разаботка</a></li>
<li><a href="#orgc312efb">32. Data Science</a></li>
<li><a href="#org243c466">33. BI Platform video</a></li>
<li><a href="#orgecc857f">34. Big Data </a>
<ul>
<li><a href="#orgebab18a">34.1. frameworks:</a>
<ul>
<li><a href="#org9e64203">34.1.1. Apache: Hadoop vs Hive vs Spark</a></li>
<li><a href="#org37bd6db">34.1.2. Apache Spark</a></li>
<li><a href="#org6d990c4">34.1.3. Hadoop</a></li>
<li><a href="#org1b4d2f1">34.1.4. Apache Hive</a></li>
</ul>
</li>
<li><a href="#orgc392cf5">34.2. tools</a></li>
<li><a href="#org306527d">34.3. кодекс этики</a></li>
<li><a href="#orga303682">34.4. MapReduce</a></li>
<li><a href="#org13c7fde">34.5. news</a></li>
</ul>
</li>
<li><a href="#orgdd338f3">35. Аналитическая платформа - система принятия решений</a></li>
<li><a href="#org7dd21cc">36. система управления активами (ITAM)</a></li>
<li><a href="#orgb24d096">37. Digital Marketing metrics</a>
<ul>
<li><a href="#org8bc56b2">37.1. terms</a></li>
</ul>
</li>
<li><a href="#orgcc769ae">38. Data Strategy</a></li>
<li><a href="#orgbeca90c">39. Data Management Plan</a></li>
<li><a href="#org501e9c7">40. Data masking</a>
<ul>
<li><a href="#orgcfd3660">40.1. Terms:</a></li>
<li><a href="#org3af5fa7">40.2. For</a></li>
<li><a href="#org1ba09ef">40.3. Проблемы:</a></li>
<li><a href="#orgb9cb2f3">40.4. Варианты решения</a></li>
<li><a href="#orgdd9944c">40.5. Open source tools</a>
<ul>
<li><a href="#orga71848c">40.5.1. Delphix - not open</a></li>
<li><a href="#orgbc3c8a5">40.5.2. Fogger - PHP</a></li>
<li><a href="#orga3ea923">40.5.3. Masked-AI -  Python SDK + CLi</a></li>
<li><a href="#orge73e485">40.5.4. <span class="todo TODO">TODO</span> Percona Server</a></li>
<li><a href="#org6b7198f">40.5.5. RAGFlow</a></li>
<li><a href="#org0ab5f25">40.5.6. Verba</a></li>
</ul>
</li>
<li><a href="#orgf98402d">40.6. LLMs</a></li>
</ul>
</li>
<li><a href="#org49d0d29">41. Distributed Database System or Distributed DBMS</a>
<ul>
<li><a href="#orgee0641d">41.1. Concurrency Control</a></li>
<li><a href="#org3c06f56">41.2. links</a></li>
</ul>
</li>
<li><a href="#orgc3108aa">42. Analytics Engineering, DataOps - DBT tool</a>
<ul>
<li><a href="#orgfe0c738">42.1. features</a></li>
<li><a href="#org8452087">42.2. terms</a></li>
</ul>
</li>
<li><a href="#org453f770">43. SQLite</a>
<ul>
<li><a href="#orgfbf7bd1">43.1. features</a></li>
</ul>
</li>
<li><a href="#orgeee046c">44. Redis vs MongoDB</a></li>
<li><a href="#orgd246c4e">45. YDB</a>
<ul>
<li><a href="#orgc736a3d">45.1. provide</a></li>
<li><a href="#org24cfa3f">45.2. cases</a></li>
<li><a href="#orgcd158f8">45.3. links</a></li>
</ul>
</li>
<li><a href="#org24c591a">46. Business analysis</a></li>
<li><a href="#orgaa8e325">47. tmp</a>
<ul>
<li><a href="#orgf54b2d1">47.1. resume BI</a></li>
<li><a href="#orgf931482">47.2. my review</a></li>
<li><a href="#org997e252">47.3. my review2</a></li>
</ul>
</li>
<li><a href="#org66c104d">48. links</a></li>
</ul>
</div>
</div>
<p>
-<b>- mode: Org; fill-column: 110; coding: utf-8; -</b>-
</p>
<div id="outline-container-org5bee635" class="outline-2">
<h2 id="org5bee635"><span class="section-number-2">1.</span> communities</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>издательство «Открытые системы» <a href="https://">https://</a> www.osp.ru</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-org21417b4" class="outline-2">
<h2 id="org21417b4"><span class="section-number-2">2.</span> english terms</h2>
<div class="outline-text-2" id="text-2">
<p>
executives [ɪgˈzekjʊtɪv] - руководители
</p>
<ul class="org-ul">
<li>wrangling [ˈræŋglə] that data into well-formed, actionable information - уменьшать</li>
</ul>
</div>
</div>
<div id="outline-container-orgfa447d5" class="outline-2">
<h2 id="orgfa447d5"><span class="section-number-2">3.</span> Основные определения</h2>
<div class="outline-text-2" id="text-3">
<dl class="org-dl">
<dt>Data warehouse</dt><dd>['weə] склад, system used for reporting and data analysis, and is considered a
core component of business intelligence - long time horizon (up to 10 years)</dd>
<dt>Data mart</dt><dd>[mɑːt] a subset of the data warehouse (срез)</dd>
<dt>Dimensional modeling</dt><dd>is part of the <b>Business Dimensional Lifecycle</b> methodology developed by
<b>Ralph Kimball</b></dd>
<dt>Lake</dt><dd>One spot to work with data in work with data from applications like Salesforce, Hubspot, Jira, and
Zendesk
<ul class="org-ul">
<li>sources -&gt; Lake -&gt; Warehouse -&gt; mart</li>
<li>single SQL syntax</li>
</ul></dd>
<dt>data mesh</dt><dd>децентрализованная сеть данных, выходы разделены на домены</dd>
<dt>semi-structured data</dt><dd>CSV, логи, XML, JSON</dd>
<dt>wide-column store</dt><dd>two-dimensional key–value store. Apache Cassandra.</dd>
<dt>storage platform</dt><dd>object storage or block storage or file storage built on a common distributed cluster
foundation. Ceph, Hadoop Distributed File System (HDFS), Apache Spark.</dd>
</dl>

<p>
levels:
</p>
<ol class="org-ol">
<li><p>
<b>Business intelligence</b> as it is understood today is said to have evolved from the <b>decision support systems</b> (DSS)
</p>
<ul class="org-ul">
<li>several types of applications and technologies for acquiring, storing, analyzing, and providing</li>
</ul>
<p>
access to information to help users make more sound business decisions
</p>
<ul class="org-ul">
<li>include decision support systems, query and reporting, online analytical processing (OLAP), statistical analysis, and data mining</li>
</ul></li>
<li><b>decision support system</b>
<ul class="org-ul">
<li>model-oriented -</li>
<li>data-oriented - adhoc queries and reporting</li>
<li>executive information system (EIS), supports the strategic information needs of executive management</li>
</ul></li>
<li><b>online analytical processing (OLAP) programs</b></li>
</ol>

<p>
Roles:
</p>
<ul class="org-ul">
<li>Business Analyst - занимается поиском узких мест в бизнес процессах, формирует задачи, отслеживает
эффективность процессов  - бизнес задачи:
<ul class="org-ul">
<li>Автоматизация маркетинговых кампаний</li>
<li>Накопление информации по клиентам из всех возможных источников и ее использование</li>
<li>Автоматизация принятия на страхование, cкорингна предстраховойпроверкепо всем продуктам</li>
<li>Скорингна жизненном пути клиента в компании
<ul class="org-ul">
<li>Рост конверсии</li>
<li>Увеличение проникновения дополнительных продуктов на клиента</li>
<li>Принятие решений при урегулировании</li>
<li>Мошенничество</li>
<li>Отток</li>
</ul></li>
<li>Нестандартные задачи:
<ul class="org-ul">
<li>Оценка взаимодействиясотрудников и подразделений SAS SNA</li>
</ul></li>
</ul></li>
<li>Data miner - адаптирует и тиражирует шаблоны наработки Data Scientist</li>
<li>Data Scientist - строит шаблоны / алгоритмы анализа - сложные задачи
<ul class="org-ul">
<li>Python для точечных исследований</li>
</ul></li>
</ul>

<p>
Consolidation database -  TODO
</p>
</div>
</div>
<div id="outline-container-orgafa9ea1" class="outline-2">
<h2 id="orgafa9ea1"><span class="section-number-2">4.</span> level of sophistication of a Data Warehouse</h2>
<div class="outline-text-2" id="text-4">
<dl class="org-dl">
<dt>Offline operational data warehouse</dt><dd>daily, weekly or monthly - integrated reporting-oriented data</dd>
<dt>Offline data warehouse</dt><dd>regular basis - data structure designed</dd>
<dt>On time data warehouse</dt><dd>for every transaction</dd>
<dt>Integrated data warehouse</dt><dd>different areas of business</dd>
</dl>
</div>
</div>
<div id="outline-container-orge30c122" class="outline-2">
<h2 id="orge30c122"><span class="section-number-2">5.</span> History</h2>
<div class="outline-text-2" id="text-5">
<p>
master file -&gt; database -&gt; online apps &amp; central online database
batch -&gt; online transaction processing
</p>

<p>
Extract file - exctracted by one app from database and shipped to another app.
</p>

<p>
Lot of them - spiderweb problem. Realization that there were different data - <b>operational</b> ( daily operations
of a business) and <b>informational</b>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operational systems</th>
<th scope="col" class="org-left">Informational/DSS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Detailed</td>
<td class="org-left">Summarized</td>
</tr>

<tr>
<td class="org-left">Can be updated</td>
<td class="org-left">Snapshit records; no up</td>
</tr>

<tr>
<td class="org-left">Accurate up to the second</td>
<td class="org-left">Timestamp on each record</td>
</tr>

<tr>
<td class="org-left">for clerks</td>
<td class="org-left">used by management</td>
</tr>

<tr>
<td class="org-left">built based on requirements</td>
<td class="org-left">built without knowing reqs</td>
</tr>

<tr>
<td class="org-left">support small uniform tr-s</td>
<td class="org-left">support mixed workload</td>
</tr>

<tr>
<td class="org-left">yields 2-3-sec resp time</td>
<td class="org-left">yields 30-24-hour resp time</td>
</tr>

<tr>
<td class="org-left">Data designed for optimal storage(size)</td>
<td class="org-left">Data designed for optimal access(speed)</td>
</tr>

<tr>
<td class="org-left">data designed around functional usage</td>
<td class="org-left">data designed around subject areas</td>
</tr>

<tr>
<td class="org-left">very current data</td>
<td class="org-left">mainly historical data</td>
</tr>

<tr>
<td class="org-left">data is application oriented</td>
<td class="org-left">data is integrated</td>
</tr>

<tr>
<td class="org-left">referential integrity is useful</td>
<td class="org-left">referential integrity is not useful</td>
</tr>

<tr>
<td class="org-left">high availability is normal</td>
<td class="org-left">high availability is nice to have</td>
</tr>
</tbody>
</table>

<p>
Decision support system (DSS)
</p>

<p>
Operational processing was done out of an ERP systems like SAP. Information processing was done out of a data warehouse.
</p>
</div>
</div>
<div id="outline-container-orge0c92b7" class="outline-2">
<h2 id="orge0c92b7"><span class="section-number-2">6.</span> Teory</h2>
<div class="outline-text-2" id="text-6">
<p>
data -&gt; data warehouse (information) -&gt; analytical tools (knowledge) -&gt; rules&amp;model (insights) -&gt; experience
</p>

<p>
help to two main kinds of decisions:
</p>
<ul class="org-ul">
<li>strategic decisions - direction of the company</li>
<li>operational decisions - routine and tactical decisions, for greater efficiency</li>
</ul>
</div>

<div id="outline-container-org54ba44b" class="outline-3">
<h3 id="org54ba44b"><span class="section-number-3">6.1.</span> evolution</h3>
<div class="outline-text-3" id="text-6-1">
<p>
steps:
</p>
<ol class="org-ol">
<li>AWARE: Primary batched reports -  70% batch, 30% OLAP</li>
<li>DEVELOPING: ad-hoc queries and an-al data mining - 55% batch, OLAP 40%, 15% predictive modeling &amp; data
mining</li>
<li>PRACTICING: predictive - 30% batch, 45 OLAP, 30 mining</li>
<li>OPTIMIZING: predictive - 20% batch, 30 OLAP, 30 mining, 10 event-based triggering</li>
<li>LEADING: 20 20 20 20</li>
</ol>

<p>
stems 2:
</p>
<ul class="org-ul">
<li>manual spreadsheets - reports</li>
<li>data marts - KPIs</li>
<li>enterprise data warehouse</li>
<li>OLAP</li>
<li>propensity modeling - risk management</li>
<li>enterprise dashboard - events detection</li>
<li>relationship optimization</li>
</ul>

<p>
data -&gt; Data Lake -&gt; transfrom -&gt; DW and marts
</p>

<p>
data lakehouse - single repository for all your data (structured, semi-structured, and unstructured) while
 enabling best-in-class machine learning, business intelligence, and streaming capabilities.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Data Warehouse</th>
<th scope="col" class="org-left">Data Lake</th>
<th scope="col" class="org-left">Data Lakehouse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Storage Data Type</td>
<td class="org-left">Works well with</td>
<td class="org-left">Works well with semi-structured</td>
<td class="org-left">Can handle structured,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">structured data</td>
<td class="org-left">and unstructured data</td>
<td class="org-left">semi-structured, and unstructured data</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Purpose</td>
<td class="org-left">Optimal for data analytics</td>
<td class="org-left">Suitable for machine learning (ML)</td>
<td class="org-left">Suitable for both data analytics and</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">and business intelligence (BI) use-cases</td>
<td class="org-left">and artificial intelligence (AI) workloads</td>
<td class="org-left">machine learning workloads</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Cost</td>
<td class="org-left">Storage is costly and time-consuming</td>
<td class="org-left">Storage is cost-effective, fast,</td>
<td class="org-left">Storage is cost-effective, fast, and flexible</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">and flexible</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">ACID Compliance</td>
<td class="org-left">Records data in an ACID-compliant manner</td>
<td class="org-left">Non-ACID compliance: updates and</td>
<td class="org-left">ACID-compliant to ensure consistency as</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">to ensure the highest levels of integrity</td>
<td class="org-left">deletes are complex operations</td>
<td class="org-left">multiple parties concurrently read or write data</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
<p>
<a href="https://cinchy.com/blog/modern-data-architectures-a-guide">https://cinchy.com/blog/modern-data-architectures-a-guide</a>
</p>
</div>
</div>
<div id="outline-container-org7d063a7" class="outline-3">
<h3 id="org7d063a7"><span class="section-number-3">6.2.</span> DW Development Approaches</h3>
<div class="outline-text-3" id="text-6-2">
<dl class="org-dl">
<dt>top-down</dt><dd>Bill Inmon - Date Warehouse first</dd>
<dt>bottom-up</dt><dd>Kimball - Data Mart created first</dd>
</dl>
<p>
Disadvantages Of Top Down Design :
</p>
<ul class="org-ul">
<li>It represents a very large project and the cost of implementing the project is significant.</li>
<li>It is time consuming and more time required for initial set up</li>
<li>Highly skilled people required for set up</li>
</ul>


<p>
Disadvantage of Bottom Up Design  :
</p>
<ul class="org-ul">
<li>Initial cost is low but each subsequent phase will cost same</li>
<li>The positions of the data warehouse and the data marts are reversed in the bottom-up approach design.</li>
<li>It is difficult to maintain and often redundant and subject to revisions</li>
</ul>

<p>
Стандарт де факто, две базы (Data Warehouse and OLAP):
</p>
<ul class="org-ul">
<li>компактное хранение детализированных данных и поддержка очень больших БД, обеспечиваемые реляционными СУБД;</li>
<li>простота настройки и хорошие времена отклика, при работе с агрегированными данными, обеспечиваемые многомерными СУБД.</li>
</ul>
</div>
</div>
<div id="outline-container-org19e9589" class="outline-3">
<h3 id="org19e9589"><span class="section-number-3">6.3.</span> Architecture - Организационная зрелость</h3>
<div class="outline-text-3" id="text-6-3">
<ol class="org-ol">
<li>sources -&gt; Warehouse -&gt; Users</li>
<li>sources -&gt; Staging<sub>area</sub> -&gt; Warehouse -&gt; Users
<ul class="org-ul">
<li>Staging area - когда много источников и нужно несколько стадий комбинации данных</li>
</ul></li>
<li>sources -&gt; Staging<sub>area</sub> -&gt; Warehouse -&gt; Data Marts -&gt; Users
<ul class="org-ul">
<li>Data Marts - ускоренный слой - раздление данных по сферам деятельности</li>
</ul></li>
<li>sources -&gt; Staging<sub>area</sub> and data lake -&gt; Warehouse -&gt; (Feature Store -&gt; models), (data martes -&gt; users)
<ul class="org-ul">
<li>sources -&gt; Kafka, Kinesis -&gt; models, users</li>
</ul></li>
</ol>

<p>
terms:
</p>
<dl class="org-dl">
<dt>Data Lake</dt><dd>centralized repository that stores large volumes of raw, unprocessed data from various sources,
including structured, semi-structured, and unstructured data. In raw form. For data exploration,
manipulation, and analysis, for big data analytics.</dd>
<dt>Data Warehouse</dt><dd>stores integrated data in structured and formatted way. For to support standardized
business intelligence activities such as reporting, data analysis, and data mining.</dd>
<dt>Feature Store</dt><dd>stores features or variables derived from raw data, which are used to train machine
learning models or serve predictions in real-time applications. For monitoring features in production. For
operational machine learning and analytical (</dd>
<dt>Feature Server (type of feature store)</dt><dd>serving the latest feature values in production.</dd>
</dl>

<p>
sources
</p>
<ul class="org-ul">
<li>batches
<ul class="org-ul">
<li>Data warehouses / lakes</li>
<li>Transactional data sources</li>
</ul></li>
<li>streams - Kafka, Kinesis</li>
<li>Prediction request data - events (e.g. the query a user just entered into the search box)</li>
</ul>

<p>
requirements:
</p>
<ul class="org-ul">
<li>Data scientist: Build, Train, Deploy</li>
<li>Data Engineer: Can you give me access to this raw data? Can you put these features into production?</li>
<li>ML Engineer: put model in production automatic?</li>
<li>Lawyer: can I use this data for this model?</li>
<li>Product Enginer: Can you integrate this model and app?</li>
<li>Site Reliability Engineer: Can you set up monitoring?</li>
</ul>
</div>

<div id="outline-container-org9ff5794" class="outline-4">
<h4 id="org9ff5794"><span class="section-number-4">6.3.1.</span> Data operations per Users by Steps:</h4>
<div class="outline-text-4" id="text-6-3-1">
<ol class="org-ol">
<li>Data Scientist
<ul class="org-ul">
<li>1# Discover raw data</li>
<li>2# Develop features</li>
<li>3# Train model</li>
</ul></li>
<li>Data Engineer
<ul class="org-ul">
<li>4# Productionize Data Pipeline</li>
</ul></li>
<li>ML Engineer
<ul class="org-ul">
<li>5# Deploy model</li>
</ul></li>
<li>Product Engineer
<ul class="org-ul">
<li>6# Integrate service</li>
</ul></li>
<li>Site Reliability Engineer:
<ul class="org-ul">
<li>7# Set Up Monitoring</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orga99bd52" class="outline-4">
<h4 id="orga99bd52"><span class="section-number-4">6.3.2.</span> Feature store</h4>
<div class="outline-text-4" id="text-6-3-2">
<ul class="org-ul">
<li>Feature engineering</li>
<li>Automate feature computation, backfills, and logging</li>
<li>Share and reuse feature pipelines across teams</li>
<li>Track feature versions, lineage, and metadata</li>
<li>Achieve consistency between training and serving data</li>
<li>Monitor the health of feature pipelines in production</li>
</ul>
<p>
<a href="https://feastsite.wpenginepowered.com/blog/what-is-a-feature-store/">https://feastsite.wpenginepowered.com/blog/what-is-a-feature-store/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org014d071" class="outline-3">
<h3 id="org014d071"><span class="section-number-3">6.4.</span> ML Data challenges:</h3>
<div class="outline-text-3" id="text-6-4">
<ol class="org-ol">
<li>Accessing the right raw data source
<ul class="org-ul">
<li>Data discovery - where data?</li>
<li>Access approval</li>
<li>Raw data access - universal interface to all sources</li>
</ul></li>
<li>Building features from raw data</li>
<li>Combining features into training data</li>
<li>Calculating and serving features in production</li>
<li>Monitoring features in production</li>
</ol>
</div>
</div>
<div id="outline-container-org1ab5692" class="outline-3">
<h3 id="org1ab5692"><span class="section-number-3">6.5.</span> Operational vs analytical machine learning</h3>
<div class="outline-text-3" id="text-6-5">
<dl class="org-dl">
<dt>operational machine learning</dt><dd>which directly impact the end-user experience. when an application uses an
ML model to autonomously and continuously make decisions that impact the business in real time.  run
“online” in production on a company’s operational stack.
<ul class="org-ul">
<li>recommendation systems</li>
<li>search ranking</li>
<li>dynamic pricing</li>
<li>fraud detection</li>
<li>loan application approvals</li>
<li>Product recommendations</li>
<li>Traffic prediction</li>
<li>Real-time pricing</li>
</ul></dd>
<dt>analytical machine learning</dt><dd>use cases, which power analytical decision-making. Typically feed directly
into reports, dashboards, and business intelligence tools.
<ul class="org-ul">
<li>sales forecasting</li>
<li>Lead scoring</li>
<li>churn predictions</li>
<li>customer segmentation.</li>
</ul></dd>
</dl>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Analytical ML</th>
<th scope="col" class="org-left">Operational ML</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Decision Automation</td>
<td class="org-left">Human-in-the-loop</td>
<td class="org-left">Fully autonomous</td>
</tr>

<tr>
<td class="org-left">Decision Speed</td>
<td class="org-left">Human speed</td>
<td class="org-left">Real time</td>
</tr>

<tr>
<td class="org-left">Optimized For</td>
<td class="org-left">Large-scale batch processing</td>
<td class="org-left">Low latency and high availability</td>
</tr>

<tr>
<td class="org-left">Primary Audience</td>
<td class="org-left">Internal business user</td>
<td class="org-left">Customer</td>
</tr>

<tr>
<td class="org-left">Powers</td>
<td class="org-left">Reports &amp; dashboards</td>
<td class="org-left">Production applications</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org12e0fad" class="outline-3">
<h3 id="org12e0fad"><span class="section-number-3">6.6.</span> Best Practices</h3>
<div class="outline-text-3" id="text-6-6">
<ol class="org-ol">
<li>project must be managed by both IT and business professionals. DW design must be tested, redesign is much
more expensive.</li>
<li>should be built incrementally - with users respond. Users must be trained and absorb features of the system.</li>
<li>Only cleansed and high-quality data should be loaded. Quality and adaptability from the start.</li>
</ol>
</div>
</div>
<div id="outline-container-org9895673" class="outline-3">
<h3 id="org9895673"><span class="section-number-3">6.7.</span> Dimensional modeling</h3>
<div class="outline-text-3" id="text-6-7">
<p>
for data warehouse design -  entity-relationship modeling (ER)
</p>
<ul class="org-ul">
<li>facts (measures) - numeric values that can be aggregated</li>
<li>dimensions (context) - descriptors that define the facts, date</li>
</ul>

<p>
For example, sales amount is a fact; timestamp, product, register#, store#, etc. are elements of dimensions
</p>

<p>
it is usually a good idea to split <b>date and time</b> into two or more separate dimensions.
</p>
</div>
</div>

<div id="outline-container-org73706df" class="outline-3">
<h3 id="org73706df"><span class="section-number-3">6.8.</span> Loading</h3>
<div class="outline-text-3" id="text-6-8">
<ul class="org-ul">
<li>Full load - completely replaced, no timestamp</li>
<li>Incremental load
<ul class="org-ul">
<li>streaming incremental load - load only new.</li>
<li>batch incremental load - not easy to re-run the entire load if there's an error</li>
</ul></li>
</ul>

<p>
Challenges:
</p>
<ul class="org-ul">
<li>monitoring errors</li>
<li>compatibility - когда меняется тип поля с integer на float</li>
<li>order and dependencies</li>
<li>reconcilation - ensure data in an ETL Data Warehouse is correct and consistent - continuous process</li>
</ul>
</div>
</div>

<div id="outline-container-orgbc17deb" class="outline-3">
<h3 id="orgbc17deb"><span class="section-number-3">6.9.</span> Data management approaches</h3>
<div class="outline-text-3" id="text-6-9">
<p>
<b>Data Platform</b> - broad term include: infrastructure, tools, and services necessary to manage, process, and
 analyze data.
</p>

<p>
<b>Data Mesh</b> - decentralized data architecture.
</p>
<ul class="org-ul">
<li>organizes data by specific business domains, such as marketing, sales, or customer service.</li>
<li>Principles:
<ul class="org-ul">
<li>Domain Ownership - teams who produce the data are also responsible for its quality, documentation, and
access policies.</li>
<li>Data as a Product - data have lifecycle, ensuring it meets the needs of various consumers (other domains).</li>
<li>“Self-Service Data Infrastructure Platform” - create, manage, and use data products autonomously.
<ul class="org-ul">
<li>support for various types of storage such as relational databases (RDBMS), NoSQL databases, object storage, data warehouses, and data lakes.</li>
</ul></li>
<li>Federated Governance - ensures interoperability and standardization across the organization through
centralized governance. promotes adherence to organizational rules and industry regulations, ensuring data
quality and accessibility.</li>
</ul></li>
</ul>

<p>
<b>Data Lakes</b>
</p>

<p>
<b>Data Fabric</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org5cb508e" class="outline-2">
<h2 id="org5cb508e"><span class="section-number-2">7.</span> OLAP</h2>
<div class="outline-text-2" id="text-7">
<p>
SQL and relational database reporting tools can certainly query, report on, and analyze multidimensional data
stored in tables, but performance slows down as the data volumes increase. And it requires a lot of work to
reorganize the results to focus on different dimensions.
</p>

<p>
An OLAP server returns new data to Excel every time that you change the layout of the report.
</p>

<p>
OLAP databases contain two basic types of data:
</p>
<ul class="org-ul">
<li>measures - the quantities and averages that you use to make informed business decisions</li>
<li>dimensions - which are the categories that you use to organize these measures</li>
</ul>
</div>

<div id="outline-container-orgae1051f" class="outline-3">
<h3 id="orgae1051f"><span class="section-number-3">7.1.</span> OLAP terms:</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>cube - data structure</li>
<li>Measure - central value in cube</li>
<li>Member - item in a hierarchy representing one or more occurrences of data.
<ul class="org-ul">
<li>For example, 2007 and 2008 represent unique members in the year level of a time dimension, whereas January
represents nonunique members in the month level because there can be more than one January in the time
dimension if it contains data for more than one year.</li>
</ul></li>
<li>Calculated member - A member of a dimension whose value is calculated at run time by using an expression.
<ul class="org-ul">
<li>For example, a calculated member, Profit, can be determined by subtracting the value of the member, Costs,
from the value of the member, Sales.</li>
</ul></li>
<li>Dimension - A set of one or more organized hierarchies of levels in a cube that a user understands and uses
as the base for data analysis.</li>
<li>Hierarchy - A logical tree structure that organizes the members of a dimension such that each member has one
parent member and zero or more child members.
<ul class="org-ul">
<li>ex. Time hierarchy containing the levels Quarter, Month, and Day, January is a child of Qtr</li>
</ul></li>
<li>Level - Year, Quarter, Month, and Day levels in a Time hierarchy.</li>
</ul>
</div>
</div>
<div id="outline-container-org9532852" class="outline-3">
<h3 id="org9532852"><span class="section-number-3">7.2.</span> Типы OLAP <a id="org1e5bf54"></a></h3>
<div class="outline-text-3" id="text-7-2">
<p>
<b>MOLAP (Multidimensional OLAP)</b> содержит детальные и агрегированные данные
Преимущества:
</p>
<ul class="org-ul">
<li>Высокая производительность</li>
<li>Структура и интерфейсы наилучшим образом соответствуют структуре аналитических запросов.</li>
<li>есть разные встроенные функции</li>
</ul>
<p>
Недостатки:
</p>
<ul class="org-ul">
<li>Дороги, патентованные технологии</li>
<li>неэффективно используется внешняя памятью. Плохие механизмы транзакций</li>
<li>Отстутствие единых стандартов</li>
<li>Не поддерживают репликацию данные, часто используемую для загрузки данных</li>
</ul>

<p>
<b>ROLAP (Relational OLAP)</b> гиперкуб эмулируется из таблиц на логическом уровне
Преимущества:
</p>
<ul class="org-ul">
<li>размер хранилища не является критичным, развитые средства администрирования</li>
<li>так как источники обычно в реляционных СУБД то это более совместимо</li>
<li>частые изменения структуры измерений легче чем в MOLAP</li>
<li>менее требовательны к выч мощности</li>
</ul>
<p>
Недостатки:
</p>
<ul class="org-ul">
<li>ограниченные возможности с точки зрения расчета значений функционального типа????</li>
<li>меньшая производительность</li>
</ul>

<p>
<b>HOLAP (Hybrid OLAP)</b> детальные данные остаются в реляционной базе, агрегатные данные хранятся в многомерной
</p>
</div>
</div>

<div id="outline-container-orgb71fc35" class="outline-3">
<h3 id="orgb71fc35"><span class="section-number-3">7.3.</span> SQL OLAP extension</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li>SQL-99 introduced three extensions to the GROUP BY statement: the CUBE, ROLLUP and GROUPING SETS operator.
<a href="https://www.kdnuggets.com/2018/09/olap-queries-sql-refresher.html">https://www.kdnuggets.com/2018/09/olap-queries-sql-refresher.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-org54f65aa" class="outline-3">
<h3 id="org54f65aa"><span class="section-number-3">7.4.</span> Oracle OLAP</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Oracle Database 11g, the Oracle database optimizer can transparently redirect SQL queries to levels within the
OLAP Option cubes. The cubes are managed and can take the place of multi-dimensional materialized views,
simplifying Oracle data-warehouse management and speeding up query response.
</p>

<ul class="org-ul">
<li>OLAP DML for DDL and DML</li>
<li>an interface from SQL</li>
</ul>
</div>
<div id="outline-container-org9b343aa" class="outline-4">
<h4 id="org9b343aa"><span class="section-number-4">7.4.1.</span> links</h4>
<div class="outline-text-4" id="text-7-4-1">
<ul class="org-ul">
<li><a href="https://www.kdnuggets.com/2018/09/olap-queries-sql-refresher.html">https://www.kdnuggets.com/2018/09/olap-queries-sql-refresher.html</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9e6da78" class="outline-3">
<h3 id="org9e6da78"><span class="section-number-3">7.5.</span> API</h3>
<div class="outline-text-3" id="text-7-5">
<ul class="org-ul">
<li>OLE DB for OLAP - 1997</li>
<li>MDX query language - became the de facto standard</li>
<li>XML for Analysis - In 2001 Microsoft and Hyperion announced</li>
<li>LINQ - used to query SSAS OLAP cubes from Microsoft .NET.</li>
</ul>
</div>
</div>
<div id="outline-container-org81a3d92" class="outline-3">
<h3 id="org81a3d92"><span class="section-number-3">7.6.</span> features</h3>
<div class="outline-text-3" id="text-7-6">
<ul class="org-ul">
<li>query on raw data</li>
<li>“connect live” model</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org23ea360" class="outline-2">
<h2 id="org23ea360"><span class="section-number-2">8.</span> data warehouse and any data intergration system modeling</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>staging database - reduce the number of reads from the source operational system.
<ul class="org-ul">
<li>load data as-is from the data source into the staging database on a regular schedule.</li>
<li>separated your transformation dataflows from the staging dataflows</li>
</ul></li>
<li>Layered architecture - staging and transformation dataflows can be two layers of a multilayered dataflow -
separate tables</li>
</ul>
</div>

<div id="outline-container-org3c78884" class="outline-3">
<h3 id="org3c78884"><span class="section-number-3">8.1.</span> <span class="todo TODO">TODO</span> Normalization vs. denormalization</h3>
</div>

<div id="outline-container-org0404993" class="outline-3">
<h3 id="org0404993"><span class="section-number-3">8.2.</span> star schema - best data warehouse model  <a id="org8847b6e"></a></h3>
<div class="outline-text-3" id="text-8-2">
<p>
pros
</p>
<ul class="org-ul">
<li>to minimize the amount of time to query the data from the model</li>
<li>easy to understand for the data visualizer</li>
<li>простая структура и запросы</li>
<li>некоторые промышленные СУБД имею инструменты класса OLAP/Reporting работающие со звездой</li>
</ul>
<p>
Недостатки:
</p>
<ul class="org-ul">
<li>Денормализация вносит избыточность данных</li>
<li>Если агрегаты с исходными данными то в таблицах измерений дополнительный параметр  level ????</li>
</ul>

<p>
The data tables should be remodeled
</p>
<ul class="org-ul">
<li>dimension tables, which keeps the descriptive information
<ul class="org-ul">
<li>Entities can include products, people, places, and concepts including time itself.</li>
<li>date dimension table - most consistent table</li>
<li>for filtering and grouping</li>
</ul></li>
<li>one fact table, to keep the aggregable data
<ul class="org-ul">
<li>observations or events</li>
<li>сильно денормализована. Большое кол во строк</li>
<li>for summarization</li>
</ul></li>
</ul>

<p>
terms
</p>
<ul class="org-ul">
<li>dimensionality - dimension key columns</li>
<li>granularity - dimension key values</li>
</ul>

<p>
<b>Снежинка Snowflake Schema</b> - то же самаое, только у каждой dimensional table может быть еще dimensional table
</p>

<p>
То же что и звезда, только одно измерение может быть в нескольких таблицах - так реализуется многоуровневость.
Дополнительные таблицы измерений называют outrigger table. Например категоря для продуктов - измерения для
прода.  Преимущество: минимизация избыточности измерений и более эффективно выполнять запросы со структурой
измерений Недостаток - за нормализацию платить временем выполнения
</p>
</div>
</div>

<div id="outline-container-orgadf2e0f" class="outline-3">
<h3 id="orgadf2e0f"><span class="section-number-3">8.3.</span> Data Model</h3>
<div class="outline-text-3" id="text-8-3">
<ul class="org-ul">
<li>design of data warehouse.</li>
</ul>
<p>
At highest level, the data model is an <b>Entry relationship diagram(ERD)</b> - represents only granular data and no derived data.
<b>ERD</b> - consist of <span class="underline">Entities</span> and relationships.
Entities is futher detailed in <b>data item set(DIS)</b> - keys and attributes and futher at <b>physical design</b> for database management system.
<b>physical aspects</b> - partitioning, loading, indexing, storage media, timestamping.
</p>

<p>
One table relates to another by means of shared key or foreign key relationship.
Table represent <b>subject area</b> or subset of <b>subject area</b>.
</p>
<ul class="org-ul">
<li>Customer</li>
<li>Product    [ˈprɒdʌkt]</li>
<li>Shipment [ˈʃɪpmənt]</li>
<li>Vendor     [ˈvɛndɔː] продавец</li>
<li>Order       [ˈɔːdə]</li>
</ul>

<p>
It is patently a mistake to build the data warehouse in an all-at-once or "big bang" approach.
</p>

<p>
<b>Extract/transfer/load ETL</b> software - create interface to bring the data into the world of data warehouse.
In SAP BW it is so-called <span class="underline">Staging Engine</span> to perform simple transformation and conversion.
</p>
</div>
</div>
<div id="outline-container-org0a8d972" class="outline-3">
<h3 id="org0a8d972"><span class="section-number-3">8.4.</span> data mart</h3>
<div class="outline-text-3" id="text-8-4">
<p>
Reasons to create a Data Mart from a Data Warehouse
</p>
<ul class="org-ul">
<li>To create a passive copy of a few fact tables that does not change frequently for the purpose of analysis.</li>
<li>To decrease the query load on a data warehouse. A copy of the fact table is created in a separate database
located on a different server, and the reports are pointed to this server.</li>
<li>To simulate the critical business scenarios by changing the data in a data mart. The data in a data
warehouse cannot be manipulated without affecting the performance.</li>
</ul>
<p>
<a href="https://www.wideskills.com/data-warehousing/data-marts">https://www.wideskills.com/data-warehousing/data-marts</a>
</p>

<p>
cons
</p>
<ul class="org-ul">
<li>The continuous implementation of data marts poses a problem of tracking.</li>
<li>The numerous activities of data extractions, administration, and environmental impacts increase the hardware
and software expenses</li>
</ul>
</div>
</div>
<div id="outline-container-org51099be" class="outline-3">
<h3 id="org51099be"><span class="section-number-3">8.5.</span> Dimensional modeling</h3>
<div class="outline-text-3" id="text-8-5">
<ul class="org-ul">
<li><a href="https://www.intuit.ru/studies/courses/1145/214/lecture/5508?page=1">https://www.intuit.ru/studies/courses/1145/214/lecture/5508?page=1</a></li>
<li><a href="https://www.intuit.ru/studies/courses/1145/214/lecture/5508?page=2">https://www.intuit.ru/studies/courses/1145/214/lecture/5508?page=2</a></li>
</ul>

<p>
Data modelling is mainly about providing organization and understanding to the data. The advantages you stated
hold true regardless of the database platform you use.
</p>

<p>
columnar [kəˈlʌmnə] database:
</p>
<div class="org-src-container">
<pre class="src src-text">  About the only design decision that changes when using a columnar database is what to do with row level free
  form comments that one occasionally runs into. In a row oriented database the best practice is to put them in
  a junk dimension so the physical size of the data doesn't impead performance of queries that don't need the
  data. That is not the case with a columnar arrangement. In such a database, all it means is more vectors which
  are ignored if queries don't need the data. And, in fact, the number and size of such vectors would be the
  same had you created a separate dimension anyway... so there is no point in breaking such data out.
</pre>
</div>
<p>
Типы OLAP <a href="#org1e5bf54">7.2</a>
</p>
</div>
<div id="outline-container-org44939eb" class="outline-4">
<h4 id="org44939eb"><span class="section-number-4">8.5.1.</span> Моделирование многомерных кубов на реляционной модели данных:</h4>
<div class="outline-text-4" id="text-8-5-1">
<p>
<b>Звезда Star Schema</b>
<b>Снежинка Snowflake Schema</b> - то же самаое, только у каждой dimensional table может быть еще dimensional table
see <a href="#org8847b6e">8.2</a>
</p>
</div>
</div>
<div id="outline-container-org1c59243" class="outline-4">
<h4 id="org1c59243"><span class="section-number-4">8.5.2.</span> виды fact table</h4>
<div class="outline-text-4" id="text-8-5-2">
<ul class="org-ul">
<li>Transactional
<ul class="org-ul">
<li>by product</li>
<li>в отчете нужно вычислять сумму или на дату</li>
</ul></li>
<li>Snapshot
<ul class="org-ul">
<li>count after month - range of dates</li>
<li>в отчете нужно находить промежуточные значения</li>
</ul></li>
<li>Accumulater
<ul class="org-ul">
<li>by phases/stages of product</li>
<li>в отчете столбцы прикрепляются</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org5e2fcdd" class="outline-3">
<h3 id="org5e2fcdd"><span class="section-number-3">8.6.</span> <span class="todo TODO">TODO</span> links</h3>
<div class="outline-text-3" id="text-8-6">
<p>
<a href="https://docs.microsoft.com/en-us/power-query/dataflows/best-practices-for-data-warehouse-using-dataflows">https://docs.microsoft.com/en-us/power-query/dataflows/best-practices-for-data-warehouse-using-dataflows</a>
draw ER diagrams online <a href="http://dbdiagram.io">http://dbdiagram.io</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org9c181e0" class="outline-2">
<h2 id="org9c181e0"><span class="section-number-2">9.</span> <span class="todo TODO">TODO</span> Predictive analytics</h2>
<div class="outline-text-2" id="text-9">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Predictive_analytics">https://en.wikipedia.org/wiki/Predictive_analytics</a></li>
</ul>
</div>
</div>
<div id="outline-container-org85b7b9b" class="outline-2">
<h2 id="org85b7b9b"><span class="section-number-2">10.</span> виды софта</h2>
<div class="outline-text-2" id="text-10">
<ul class="org-ul">
<li>data visualization tools
<ul class="org-ul">
<li>Apache Superset</li>
<li>Apache Zeppelin</li>
<li>Power BI (Windows)</li>
<li>Grafana</li>
<li>Redash</li>
<li>Metabase</li>
<li>Tableau</li>
</ul></li>
<li>Spreadsheets</li>
<li>Reporting and querying software: applications that extract, sort, summarize, and present selected data</li>
<li>Online analytical processing (OLAP)</li>
<li>Digital dashboards</li>
<li>Data mining</li>
<li>Business activity monitoring</li>
<li>Data warehouse[7]</li>
<li>Local information systems</li>
<li>Data cleansing[8]</li>
<li>Dashboards - at-a-glance views of key performance indicators (KPIs). displayed on a web page which is linked</li>
</ul>
<p>
to a database that allows the report to be constantly updated
</p>
</div>
</div>
<div id="outline-container-org81882bd" class="outline-2">
<h2 id="org81882bd"><span class="section-number-2">11.</span> Types of database management software</h2>
<div class="outline-text-2" id="text-11">
<ul class="org-ul">
<li>traditional relational database management systems</li>
<li>analytic database management software
<ul class="org-ul">
<li>in-memory database</li>
<li>parallel database seeks to improve performance through parallelization for tasks such as loading data,
building indexes and evaluating queries.
<ul class="org-ul">
<li>Shared memory architecture</li>
<li>Shared disk architecture</li>
<li>Shared-nothing architecture</li>
</ul></li>
<li>Column-oriented DBMS - more efficient access to data when only querying a subset of columns and more
options for data compression,  less efficient for inserting new data</li>
<li>online analytical processing (OLAP) - support SQL OLAP extensions or realize own OLAP operations. Data is
organazed in such way to form OLAP cubes.</li>
</ul></li>
<li>active database - includes an event-driven architecture - Possible uses include security monitoring,
alerting, statistics gathering and authorization</li>
<li>in-memory database</li>
<li>document-oriented database is designed for storing, retrieving, and managing document-oriented</li>
<li>graph database is a kind of NoSQL database that uses graph structures with nodes, edges, and properties to
represent and store information</li>
<li>Vector Stores (such as Pinecone or Weaviate) - efficient storage/retrieval/similarity search or other
vector-based operations of high-dimensional numerical vectors. Used for LLM embedding vectors of
queries. Search Performance is critical. <b>pgvector</b> SQL extension commonly used. <a id="org773057c"></a></li>
</ul>
</div>

<div id="outline-container-org8018a69" class="outline-3">
<h3 id="org8018a69"><span class="section-number-3">11.1.</span> Модели данных и языки запросов для баз данных</h3>
<div class="outline-text-3" id="text-11-1">
<p>
Майкл Стоунбрейкер и Эндрю Павло
</p>

<p>
Модели данных и языки запросов
</p>
<ul class="org-ul">
<li><b>MapReduce</b>
<ul class="org-ul">
<li>Hadoop проложил дорогу для других платформ обработки данных: Spark, Flink (stream/batch-processing framework), начинавшихся как лучшие
реализации MapReduce с процедурными API, но добавивших себе поддержку SQL.</li>
</ul></li>
<li><b>Ключ-значение</b>
<ul class="org-ul">
<li>недостаток, что все операции нужно самому реализовывать</li>
<li>Redis, RocksDB</li>
</ul></li>
<li><b>Документоориентированные системы.</b>
<ul class="org-ul">
<li>JSON (MongoDB, Couchbase)</li>
<li>это такие же объектно-ориентированные СУБД</li>
</ul></li>
<li><b>column-family, wide-column</b>
<ul class="org-ul">
<li>разновидность систем NoSQL: BigTable, Cassandra и HBase.</li>
</ul></li>
<li><b>Текстовые поисковые системы</b>
<ul class="org-ul">
<li>Elasticsearch, Solr - они хорошо поддерживают хранение и индексирование текстовых данных, хотя почти не
предоставляют возможностей для транзакций</li>
</ul></li>
<li><b>СУБД массивов</b>
<ul class="org-ul">
<li>HDF5, Rasdaman, kdb+ и очередное изобретение Стоунбрейкера — SciDB, хранят данные в виде двумерных матриц.</li>
<li>обработка изображений со спутников, сетки данных научных экспериментов и т. п.</li>
</ul></li>
<li><b>Векторные СУБД</b>
<ul class="org-ul">
<li>Pineone, Milvus, Weaviate</li>
<li>РСУБД (Oracle Database, Rockset и ClickНouse) уже обзавелись векторными индексами. Тем не менее поисковые
системы, включая Elasticsearch и Solr</li>
</ul></li>
<li><b>Графовые СУБД.</b>
<ul class="org-ul">
<li>Neo4j, TigerGraph -  OLTP и OLAP на связанных данных</li>
<li>В стандарт SQL:2023 включены запросы графов свойств (SQL/PGQ) для определения и поддержки прохода графов в
реляционной СУБД.</li>
</ul></li>
</ul>

<p>
Системные архитектуры
</p>
<ul class="org-ul">
<li>Столбцовые системы</li>
<li>Облачные СУБД, Open Source СУБД попадут в орбиту крупных облачных провайдеров
<ul class="org-ul">
<li>MongoDB, Elasticsearch и DynamoDB</li>
<li>DBaaS и PaaS - Amazone Aurora либо Google Cloud SQL, - экономическая ценность (value proposition) этих
сервисов заключалась лишь в автоматизации развертывания и обработке</li>
</ul></li>
<li>«Дома» и озера данных. - объектные хранилищама.
<ul class="org-ul">
<li>lakehouse (гибрид хранилища данных и озера данных) - выполняют запросы SQL- и NoSQL, API Pandas DataFrame</li>
<li>архетип OLAP-СУБД на ближайшие десять лет</li>
<li>Табличные форматы (Apache Iceberg, Apache Hudi, Databricks Delta Lake) позволили любому приложению записывать в централизованное хранилище произвольные данные.</li>
<li>Databricks, Dremio, PrestoDB и Trino.</li>
</ul></li>
<li>Системы NewSQL - NoSQL, горизонтально масштабироваться при соблюдении требований ACID - не прижился</li>
<li>Аппаратные ускорители. - OLAP-нагрузок</li>
<li><p>
Системы баз данных на основе блокчейна. - одноранговых приложений, когда доверять никому нельзя
</p>
<ul class="org-ul">
<li>Эта технология сегодня работает, но главным образом в сфере криптовалют</li>
</ul>

<p>
перспективны тематические чат-боты, которые уточнят запрос и сформируют действие.
</p></li>
</ul>

<p>
<a href="https://www.osp.ru/os/2024/03/13058759">https://www.osp.ru/os/2024/03/13058759</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orgac05dbe" class="outline-2">
<h2 id="orgac05dbe"><span class="section-number-2">12.</span> <span class="todo TODO">TODO</span> problem Change-Data Capture (DELETE UPDATE)</h2>
<div class="outline-text-2" id="text-12">
<p>
MariaDB Platform - two Transactional + Analitical DB with replication
Update:
</p>
<ul class="org-ul">
<li>Oracle: PLSQL with row versions</li>
</ul>
</div>
</div>
<div id="outline-container-org4be8c0d" class="outline-2">
<h2 id="org4be8c0d"><span class="section-number-2">13.</span> time-to-market</h2>
<div class="outline-text-2" id="text-13">
<p>
In a market with 20% annual growth and 12% price-drop per annum,
technological products which arrive on the market six months late but
on budget generate 33% less profit over five years, whereas getting
the product to market on time but 50% over budget only reduces profits
by 4%.  (Ali et al., 1995).
</p>

<p>
На рынке с 20% годовым ростом и 12% падением цены.
Продукты которые прибывают с опозданием на 6 месяцев генерируют на 33% меньше прибыли в течении 5 лет.
В то время как продукты с 50% over budget приходящие вовремя генерируют прибыль только на 4% меньше.
</p>
</div>
</div>
<div id="outline-container-org3f92353" class="outline-2">
<h2 id="org3f92353"><span class="section-number-2">14.</span> выбор 2019</h2>
<div class="outline-text-2" id="text-14">
<p>
<b>OLAP</b> <a href="https://en.wikipedia.org/wiki/Comparison_of_OLAP_servers">https://en.wikipedia.org/wiki/Comparison_of_OLAP_servers</a>
</p>
<ul class="org-ul">
<li>Apache Kylin - Hadoop required</li>
<li>Druid -  Java - OLAP загрузка из всего, поддержка Kafka + Apache Superset- business intelligence web application
<a href="https://www.youtube.com/watch?v=24mvzMTdYXQ">https://www.youtube.com/watch?v=24mvzMTdYXQ</a>
<ul class="org-ul">
<li>платная поддержка <a href="https://imply.io/services">https://imply.io/services</a> <a href="https://hortonworks.com/open-source/druid/">https://hortonworks.com/open-source/druid/</a></li>
<li>require:
<ul class="org-ul">
<li>MySQL or PostgreSQL or Derby(test) - есть предсказуемый запас времени при отказе - можно заменить на
Cassandra-based DB</li>
<li>ZooKeeper</li>
<li>В организации есть эксперты по Java</li>
</ul></li>
<li>pros
<ul class="org-ul">
<li>быстро</li>
<li>масштабируемость - distributed data store - Большой кластер</li>
<li>open-source</li>
<li>предагрегация</li>
<li>Apache Superset GUI native support
<ul class="org-ul">
<li>LDAP</li>
<li>высокая интерактивность</li>
</ul></li>
</ul></li>
</ul></li>
<li>ClickHouse OLAP (yandex) - C++ - <a href="https://clickhouse.yandex">https://clickhouse.yandex</a> <a href="https://www.youtube.com/watch?v=w1-XsL3nbRg">https://www.youtube.com/watch?v=w1-XsL3nbRg</a>
<a href="https://www.youtube.com/watch?v=PLMSA_gDdyM">https://www.youtube.com/watch?v=PLMSA_gDdyM</a>
<ul class="org-ul">
<li>GUI
<ul class="org-ul">
<li>tabix <a href="https://www.youtube.com/watch?v=w1-XsL3nbRg">https://www.youtube.com/watch?v=w1-XsL3nbRg</a></li>
<li>Apache Superset</li>
<li>Apache Zeppelin - Web-based notebook that enables data-driven, interactive data analytics and
collaborative documents</li>
<li>Grafana</li>
</ul></li>
<li>платная поддержка <a href="https://www.altinity.com/">https://www.altinity.com/</a></li>
<li>pros
<ul class="org-ul">
<li>Linear scalability. It's possible to extend a cluster by adding servers. - Малый кластер</li>
</ul></li>
<li>cons:
<ul class="org-ul">
<li>no transactions.</li>
<li>В организации есть эксперты по C++</li>
</ul></li>
</ul></li>
<li>Apache Pinot - OLAP</li>
<li>Jedox OLAP Server - in-Memory Database - не хранит offline</li>
<li>Apache Pinot (Incubating)</li>
<li>Pentaho BI Suite - OLAP - есть CE но поменялась компания 2017. 2017 stable
<ul class="org-ul">
<li>Mondrian - 2017</li>
<li>cons - много ограничений. Сравнение EE и CΕ <a href="https://youtu.be/Z9gSDaQQscE?t=2467">https://youtu.be/Z9gSDaQQscE?t=2467</a></li>
</ul></li>
<li>JasperReports
<ul class="org-ul">
<li>JasperReports Server</li>
<li>Jaspersoft® Studio - design and run report templates Eclipse-based</li>
<li>JasperReports Library</li>
<li>Jaspersoft ETL - 2016</li>
<li>pros:
<ul class="org-ul">
<li>OLAP</li>
<li>богатый GUI</li>
<li>ювелирный построитель отчетов для A4 HTML, PDF, Excel, OpenOffice and Word.</li>
<li>история начиная с 2001 года.</li>
<li>Ability to make modifications to underlying data cube</li>
</ul></li>
<li>cons:
<ul class="org-ul">
<li>серьезные ограничения по функционалу в каждом продукте, но без лимитов</li>
<li>мало стороннего софта поддерживающего JasperReports Server</li>
<li>закрытый код</li>
</ul></li>
</ul></li>
</ul>

<p>
Data Science:
</p>
<ul class="org-ul">
<li>Metabase - simple but friendly</li>
<li><a href="https://reportserver.net">https://reportserver.net</a> ‐ EN only</li>
<li>BIRT Project - OLAP - Eclipse Public License - устарел</li>
</ul>
</div>
</div>

<div id="outline-container-orge9d42e7" class="outline-2">
<h2 id="orge9d42e7"><span class="section-number-2">15.</span> SQL builder tools</h2>
<div class="outline-text-2" id="text-15">
<ul class="org-ul">
<li>DBeaver</li>
<li>aginity.com</li>
</ul>
</div>
</div>
<div id="outline-container-orgfb24e9d" class="outline-2">
<h2 id="orgfb24e9d"><span class="section-number-2">16.</span> APEX Oracle</h2>
<div class="outline-text-2" id="text-16">
<p>
Oracle Application Express (APEX) - low-code development platform to build complex web applications
which can be used in most modern web browsers.
</p>
<ul class="org-ul">
<li>web-based</li>
<li>shipped with Oracle database, installed by default</li>
</ul>

<p>
<b>Workspace</b> is a logical domain where you define APEX applications
</p>
<ul class="org-ul">
<li>associated with one or more database schemas (database users) which are used to store</li>
</ul>

<p>
Has:
</p>
<ul class="org-ul">
<li>App Builder</li>
<li>SQL Workshop - create and maintain database objects</li>
<li>App Gallery - apps samples</li>
</ul>

<p>
<a href="https://explorer.co.uk/loading-excel-into-apex-19-1/">https://explorer.co.uk/loading-excel-into-apex-19-1/</a>
</p>
<ul class="org-ul">
<li>APEX<sub>DATA</sub><sub>PARSER</sub> API package <a href="https://blogs.oracle.com/apex/super-easy-csv-xlsx-json-or-xml-parsing-about-the-apex_data_parser-package">https://blogs.oracle.com/apex/super-easy-csv-xlsx-json-or-xml-parsing-about-the-apex_data_parser-package</a></li>
</ul>

<p>
upload methods <a href="https://www.slideshare.net/JeffreyKemp1/apex-data-loading-ausoug-2018">https://www.slideshare.net/JeffreyKemp1/apex-data-loading-ausoug-2018</a>
</p>
<ul class="org-ul">
<li>External Table / SQL*Loader ( from file on server)</li>
<li>XML – native SQL using XMLType</li>
<li>APEX Data Workshop (SQL Workshop - Utils - Data Workshop) (App Builder - Create - From File)</li>
<li>APEX Data Loader Wizard (Create App with page Data Loader) ( Fixed!)</li>
<li>Alexandria CSV<sub>UTIL</sub><sub>PKG</sub> (Fixed)</li>
<li>LOB2Table</li>
<li>Excel2Collection (plug-in)</li>
</ul>
</div>

<div id="outline-container-org63ead20" class="outline-3">
<h3 id="org63ead20"><span class="section-number-3">16.1.</span> upload Excel file</h3>
<div class="outline-text-3" id="text-16-1">
<p>
<a href="https://oracle.github.io/learning-library/developer-library/apex/spreadsheet/?page=README&amp;lab=lab-1-create-app-spreadsheet">https://oracle.github.io/learning-library/developer-library/apex/spreadsheet/?page=README&amp;lab=lab-1-create-app-spreadsheet</a>
<a href="https://blogs.oracle.com/apex/quick-and-easy-data-loading-with-apex-191">https://blogs.oracle.com/apex/quick-and-easy-data-loading-with-apex-191</a>
</p>
</div>
</div>

<div id="outline-container-orgde40242" class="outline-3">
<h3 id="orgde40242"><span class="section-number-3">16.2.</span> create app upload from file</h3>
<div class="outline-text-3" id="text-16-2">
<ol class="org-ol">
<li>Create new Workspace в INTERNAL workspace
<ul class="org-ul">
<li>create schema</li>
<li>schema password</li>
<li>create user of workspace</li>
</ul></li>
<li>Посмотреть название схемы и имя пользоватяля</li>
<li>Залогиниться под ним в workspace</li>
<li>Create Applicateion - Upload from file
<ul class="org-ul">
<li>upload file</li>
<li>ввсети название для Таблицы</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-org3bc2ac1" class="outline-3">
<h3 id="org3bc2ac1"><span class="section-number-3">16.3.</span> <a href="https://docs.oracle.com/en/database/oracle/application-express/18/data_load_wizard/">https://docs.oracle.com/en/database/oracle/application-express/18/data_load_wizard/</a></h3>
<div class="outline-text-3" id="text-16-3">
<p>
Creating a Data Load Wizard
</p>
</div>
</div>
<div id="outline-container-orgc4316a2" class="outline-3">
<h3 id="orgc4316a2"><span class="section-number-3">16.4.</span> plugin</h3>
<div class="outline-text-3" id="text-16-4">
<p>
<a href="https://github.com/gopalmallya/csv2table">https://github.com/gopalmallya/csv2table</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orge32033d" class="outline-2">
<h2 id="orge32033d"><span class="section-number-2">17.</span> Oracle</h2>
<div class="outline-text-2" id="text-17">
</div>
<div id="outline-container-org646ad5c" class="outline-3">
<h3 id="org646ad5c"><span class="section-number-3">17.1.</span> column names and comments</h3>
<div class="outline-text-3" id="text-17-1">
<div class="org-src-container">
<pre class="src src-sql">  <span style="color: #8ac6f2; font-weight: bold;">SELECT</span> * <span style="color: #8ac6f2; font-weight: bold;">FROM</span>  all_tab_columns "
                           "<span style="color: #8ac6f2; font-weight: bold;">LEFT</span> <span style="color: #8ac6f2; font-weight: bold;">JOIN</span> all_col_comments cc <span style="color: #8ac6f2; font-weight: bold;">ON</span> all_tab_columns.<span style="color: #8ac6f2; font-weight: bold;">table_name</span> = cc.<span style="color: #8ac6f2; font-weight: bold;">table_name</span> "
                           "<span style="color: #8ac6f2; font-weight: bold;">AND</span> cc.<span style="color: #8ac6f2; font-weight: bold;">column_name</span> = all_tab_columns.<span style="color: #8ac6f2; font-weight: bold;">column_name</span> "
                           "<span style="color: #8ac6f2; font-weight: bold;">WHERE</span> all_tab_columns.<span style="color: #8ac6f2; font-weight: bold;">table_name</span> = <span style="color: #95e454;">'MART_NORMA_AUTO'</span> "
                           "<span style="color: #8ac6f2; font-weight: bold;">ORDER</span> <span style="color: #8ac6f2; font-weight: bold;">BY</span> all_tab_columns.column_id

</pre>
</div>
</div>
</div>
<div id="outline-container-orga3ea141" class="outline-3">
<h3 id="orga3ea141"><span class="section-number-3">17.2.</span> column info</h3>
<div class="outline-text-3" id="text-17-2">
<p>
"SELECT column<sub>id</sub>, column<sub>name</sub>, data<sub>type</sub>, nullable, data<sub>length</sub>, data<sub>precision</sub>, data<sub>scale</sub>, avg<sub>col</sub><sub>len</sub> "
      "FROM user<sub>tab</sub><sub>columns</sub> WHERE table<sub>name</sub> = '"
</p>
<ul class="org-ul">
<li>target<sub>table</sub></li>
<li>"' ORDER BY column<sub>id</sub>"</li>
</ul>
</div>
</div>
<div id="outline-container-orga3f72ce" class="outline-3">
<h3 id="orga3f72ce"><span class="section-number-3">17.3.</span> psql</h3>
<div class="outline-text-3" id="text-17-3">
<p>
Psql -U superset - вход в коносль под определенным пользователем
</p>
<ul class="org-ul">
<li>\conninfo - информация о соединении</li>
<li>\q - выход из меню</li>
<li>\d - список таблиц</li>
</ul>

<p>
psql -U superset superset &lt; /home/backups.sql - восстановление из бэкапа
</p>
</div>
</div>

<div id="outline-container-orgd6b9114" class="outline-3">
<h3 id="orgd6b9114"><span class="section-number-3">17.4.</span> all available tables</h3>
<div class="outline-text-3" id="text-17-4">
<p>
oc.cur.execute("SELECT distinct table<sub>name</sub> FROM all<sub>col</sub><sub>comments</sub>")
oc.cur.execute("SELECT distinct table<sub>name</sub> FROM all<sub>tab</sub><sub>columns</sub>")
oc.cur.execute("SELECT owner, table<sub>name</sub> FROM sys.all<sub>tables</sub>")
</p>
</div>
</div>
<div id="outline-container-org873ff97" class="outline-3">
<h3 id="org873ff97"><span class="section-number-3">17.5.</span> get tables description</h3>
<div class="outline-text-3" id="text-17-5">
<ul class="org-ul">
<li>SELECT table<sub>name</sub>, comments FROM dba<sub>tab</sub><sub>comments</sub> WHERE owner='OE' AND table<sub>name</sub>='INVENTORIES';</li>
<li>SELECT table<sub>name</sub>, column<sub>name</sub>, comments FROM dba<sub>col</sub><sub>comments</sub> WHERE owner <code>'OE' AND table_name</code>'INVENTORIES';</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org41288ab" class="outline-2">
<h2 id="org41288ab"><span class="section-number-2">18.</span> Report and Dashboard (Data visualization)</h2>
<div class="outline-text-2" id="text-18">
<p>
Метаданные -  показывает BI системе каким образом организована система хранения данных источника или OLAP кубы
</p>
</div>
<div id="outline-container-org82677e4" class="outline-3">
<h3 id="org82677e4"><span class="section-number-3">18.1.</span> terms</h3>
<div class="outline-text-3" id="text-18-1">
<ul class="org-ul">
<li>dashboard [ˈdæʃbɔːd] - приборная панель</li>
<li>план-факт - отчет о результатах по целям, три колонки: план, фактическое, выполнение в процентах, опционально дельта</li>
</ul>
</div>
</div>
<div id="outline-container-orge21f5ad" class="outline-3">
<h3 id="orge21f5ad"><span class="section-number-3">18.2.</span> Design best practives</h3>
<div class="outline-text-3" id="text-18-2">
<ul class="org-ul">
<li>5-9 visualizations for each dashboard</li>
<li>answer business questions</li>
<li>visuals must be correct for business( in proper sequence)</li>
<li>reveals details as needed</li>
</ul>
</div>
</div>
<div id="outline-container-orgaf72885" class="outline-3">
<h3 id="orgaf72885"><span class="section-number-3">18.3.</span> design tradeoff Generalist and Specialist</h3>
<div class="outline-text-3" id="text-18-3">
<p>
is it better to be all-around or highly specialized?
</p>
<dl class="org-dl">
<dt>generalist species</dt><dd>is able to thrive in a wide variety of environmental conditions and can make use of a
variety of different resources.</dd>
<dt>A specialist species</dt><dd>can thrive only in a narrow range of environmental conditions or has a limited diet,
but optimized for that.</dd>
</dl>
</div>
</div>
<div id="outline-container-org68a66cc" class="outline-3">
<h3 id="org68a66cc"><span class="section-number-3">18.4.</span> Excel Power Pivot</h3>
<div class="outline-text-3" id="text-18-4">
<p>
build a ROLAP model in Power Pivot, and use pivot tables to explore
</p>
</div>
</div>
<div id="outline-container-org3945a1a" class="outline-3">
<h3 id="org3945a1a"><span class="section-number-3">18.5.</span> Power BI Desktop</h3>
<div class="outline-text-3" id="text-18-5">
<p>
Опирается на тип поля в запросе
</p>

<p>
Иерархия - Matrix with
</p>
<ul class="org-ul">
<li>Row headers - Stepped layout indentation</li>
</ul>
</div>
<div id="outline-container-org681147c" class="outline-4">
<h4 id="org681147c"><span class="section-number-4">18.5.1.</span> connection types</h4>
<div class="outline-text-4" id="text-18-5-1">
<ul class="org-ul">
<li>Import Data (or some call it Scheduled Refresh) - full load of source tables to memory and disk
<ul class="org-ul">
<li>there is compression engine of Power BI - xVelocity and works on a Column-store in-memory technology</li>
<li>no limitation in the functionality</li>
<li>for web: it is fastest: Data loaded into the memory of the server, and reports queries will be evaluated from the data
loaded into the memory.</li>
</ul></li>
<li>DirectQuery - Power BI will be a visualization layer, then query the data from the data source every time.
<ul class="org-ul">
<li>no data stored in the model.</li>
<li>limited amount of RDBMS: SAP HANA, Snowflake, Spark,SQL Server, Teradata Database, Impala &#x2026; etc.</li>
<li>Limited Functionality - Few Power Query Operations
<ul class="org-ul">
<li>can still configure relationships in some cases</li>
</ul></li>
<li>with slicing and dicing every time you are sending queries to the data source (OLAP)</li>
<li>work slow if table is not prepared with Clustered Column Store Index</li>
<li>tuning for every RDBMS is special</li>
<li>no DAX or MDX as the analytical language to help</li>
</ul></li>
<li>Live Connection - very similar to DirectQuery.
<ul class="org-ul">
<li>better modeling features than DirectQuery</li>
<li>No Power Query. Just Visualization</li>
<li>only supported for these data sources:
<ul class="org-ul">
<li>Azure Analysis Services</li>
<li>SQL Server Analysis Services (SSAS) Tabular</li>
<li>SQL Server Analysis Services (SSAS) Multi-Dimensional</li>
<li>Power BI Dataset in the Service</li>
</ul></li>
</ul></li>
<li>Composite Model - DirectQuery sources and Import Data sources combined in one dataset.</li>
</ul>

<p>
Import Data or Scheduled Refresh
</p>
<ul class="org-ul">
<li>Advantages
<ul class="org-ul">
<li>Fastest Possible Connection</li>
<li>Power BI Fully Functional</li>
<li>Combining Data from different sources</li>
<li>Full DAX expressions</li>
<li>Full Power Query transformations</li>
</ul></li>
<li>Disadvantages
<ul class="org-ul">
<li>Power BI file size limitation (It is different for Premium and Pro)</li>
</ul></li>
</ul>

<p>
DirectQuery
</p>
<ul class="org-ul">
<li>Advantages
<ul class="org-ul">
<li>Large Scale data sources supported. No size limitation.</li>
<li>Pre-Built models in some data sources can be used instantly</li>
</ul></li>
<li>Disadvantages
<ul class="org-ul">
<li>Very Limited Power Query functionality</li>
<li>Slower Connection type: Performance Tuning in the data source is MUST DO</li>
</ul></li>
</ul>

<p>
Live Connection
</p>
<ul class="org-ul">
<li>Advantages
<ul class="org-ul">
<li>Large Scale data sources supported. No size limitation as far as SSAS Supports.</li>
<li>Many organizations already have SSAS models built. So they can use it as a Live Connection without the need to replicate that into Power BI.</li>
<li>Report Level Measures</li>
<li>MDX or DAX analytical engines in the data source of SSAS can be a great asset for modeling compared to DirectQuery</li>
</ul></li>
<li>Disadvantages
<ul class="org-ul">
<li>No Power Query</li>
<li>Cannot combine data from multiple sources</li>
<li>Slower Connection type: Performance Tuning in the data source is MUST DO</li>
</ul></li>
</ul>

<p>
arch
</p>
<ul class="org-ul">
<li>Import Data for Agility and Performance</li>
<li>Live Connection for Enterprise Solution</li>
<li>Live Connection for Team Development</li>
<li>Direct Query for Non-Microsoft Sources</li>
</ul>

<p>
Gateway -  if the data source is located on-premises, you would need a gateway for it. otherwise not.
</p>
</div>
</div>
<div id="outline-container-org2319e42" class="outline-4">
<h4 id="org2319e42"><span class="section-number-4">18.5.2.</span> features</h4>
<div class="outline-text-4" id="text-18-5-2">
<ul class="org-ul">
<li>rich features - преобразования и очистка</li>
<li>использование R и Python для  очистки</li>
<li>in-memory работа с данными</li>
<li>интекрактивные визуализации 150</li>
</ul>

<p>
cons
</p>
<ul class="org-ul">
<li>все остальыне функции платные</li>
</ul>
</div>
</div>

<div id="outline-container-org4c66d3e" class="outline-4">
<h4 id="org4c66d3e"><span class="section-number-4">18.5.3.</span> Power Query</h4>
<div class="outline-text-4" id="text-18-5-3">
<p>
Home
</p>
<ul class="org-ul">
<li>Edit Queries -old</li>
<li>Transform data - now</li>
</ul>
</div>
</div>
<div id="outline-container-org7ee9edc" class="outline-4">
<h4 id="org7ee9edc"><span class="section-number-4">18.5.4.</span> Data Analysis Expressions (DAX)</h4>
<div class="outline-text-4" id="text-18-5-4">
<p>
<a href="https://docs.microsoft.com/en-us/dax/">https://docs.microsoft.com/en-us/dax/</a>
</p>
</div>
</div>
<div id="outline-container-orga90ca0d" class="outline-4">
<h4 id="orga90ca0d"><span class="section-number-4">18.5.5.</span> dataflow</h4>
<div class="outline-text-4" id="text-18-5-5">
<p>
DWH of microsoft
</p>
</div>
</div>
<div id="outline-container-orgcea1d2d" class="outline-4">
<h4 id="orgcea1d2d"><span class="section-number-4">18.5.6.</span> power query язык M</h4>
<div class="outline-text-4" id="text-18-5-6">
<ul class="org-ul">
<li><a href="https://needfordata.ru/blog/operator-let-v-power-bi-i-power-query">https://needfordata.ru/blog/operator-let-v-power-bi-i-power-query</a></li>
<li><a href="https://blog.crossjoin.co.uk/2016/05/22/understanding-let-expressions-in-m-for-power-bi-and-power-query/">https://blog.crossjoin.co.uk/2016/05/22/understanding-let-expressions-in-m-for-power-bi-and-power-query/</a></li>
<li>1 <a href="https://finalytics.pro/inform/m-for-powerquery/">https://finalytics.pro/inform/m-for-powerquery/</a></li>
<li>2 <a href="https://finalytics.pro/inform/m-powerquery2/">https://finalytics.pro/inform/m-powerquery2/</a></li>
<li>parameters in query <a href="https://www.biinsight.com/power-bi-desktop-query-parameters-part-1/">https://www.biinsight.com/power-bi-desktop-query-parameters-part-1/</a></li>
<li>trick Excel <a href="https://www.youtube.com/watch?v=iiNDq2VrZPY">https://www.youtube.com/watch?v=iiNDq2VrZPY</a></li>
<li>set parameter at start <a href="https://www.youtube.com/watch?v=YiKtgTkj8wk">https://www.youtube.com/watch?v=YiKtgTkj8wk</a></li>

<li>чувствителен к регистру</li>
<li>комментари:
<ul class="org-ul">
<li>одна строка //</li>
<li>несколько <i>* *</i></li>
</ul></li>
<li>логические = &lt; &lt;= &gt; &gt;= &lt;&gt;</li>
<li>if [Sales] &gt; 1000 then "более 1000" else if [Sales] &gt; 500 then "более 500" else "500 или меньше"</li>
<li>let позволяет вычислять набор значений, назначить имена, а затем используется в следующем выражении, которое
записывается в in.  let a = 2 in a+1</li>
</ul>
</div>
</div>

<div id="outline-container-org256ca4d" class="outline-4">
<h4 id="org256ca4d"><span class="section-number-4">18.5.7.</span> report as one string but no OFFSET and LIMIT:</h4>
<div class="outline-text-4" id="text-18-5-7">
<div class="org-src-container">
<pre class="src src-m">let
  q = "select * from main LEFT JOIN main_date ON main.dateID = main_date.id where main_date.end_date = '" &amp; Date.ToText(Дата, "yyyy-MM-dd") &amp; "' ;",
  Source = Odbc.Query("DRIVER={PostgreSQL Unicode(x64)};Server=10.77.51.121;Port=32232;DATABASE=obor;", q)
in
  Source
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc780a5" class="outline-4">
<h4 id="orgfc780a5"><span class="section-number-4">18.5.8.</span> custom visal apps</h4>
<div class="outline-text-4" id="text-18-5-8">
<ul class="org-ul">
<li><a href="https://docs.microsoft.com/ru-ru/power-bi/developer/custom-visual-develop-tutorial">https://docs.microsoft.com/ru-ru/power-bi/developer/custom-visual-develop-tutorial</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgfa9226d" class="outline-3">
<h3 id="orgfa9226d"><span class="section-number-3">18.6.</span> Tableau Public (Desktop Windows, mac)</h3>
<div class="outline-text-3" id="text-18-6">
<p>
cons:
</p>
<ul class="org-ul">
<li>Distribution: Cloud (you can not save Tableau Public workbooks locally)</li>
<li>Tableau Public has a limit of 10 million rows of data that is allowed in any single connection</li>
<li>Account Space: Each account holder will be able to save up to 10 gigabytes (GB) of content to Tableau Public</li>
</ul>
</div>
</div>
<div id="outline-container-org5f0fa36" class="outline-3">
<h3 id="org5f0fa36"><span class="section-number-3">18.7.</span> Metabase</h3>
<div class="outline-text-3" id="text-18-7">
<ul class="org-ul">
<li>java -jar</li>
<li>localhost:3000</li>
</ul>

<p>
cons:
</p>
<ul class="org-ul">
<li>slicer в виде фильтров без кнопок</li>
</ul>
<p>
pros:
</p>
<ul class="org-ul">
<li>можно изменять названия любых столбцов и меток</li>
<li>configuration is pretty straightforward and can be done within the tool UI once.</li>
<li>Easy and intuitive setup.</li>
</ul>

<p>
requires
</p>
<ul class="org-ul">
<li>only a DB connection that it uses for storing state.</li>
<li>one pod in your cluster</li>
</ul>

<p>
Cloud-based and on-premise platform for businesses of all sizes that helps with KPI monitoring, database
management, bug tracking, record filtering, debugging, query builder and more.
</p>
</div>
</div>

<div id="outline-container-orgdc9c547" class="outline-3">
<h3 id="orgdc9c547"><span class="section-number-3">18.8.</span> Redash</h3>
<div class="outline-text-3" id="text-18-8">
<p>
pros:
</p>
<ul class="org-ul">
<li>работа с SQL в первую очередь</li>
<li>можно именовать столбцы</li>
<li>No extra work is needed for the alert and schedulers as those are spun by default</li>
</ul>
<p>
cons:
</p>
<ul class="org-ul">
<li>мало возможностей и slicer нету</li>
<li>No official helm chart, however, the community one is part of the main redash repo, hence closely evolves
with redash itself.</li>
<li>you again end up with a bunch of worker pods.</li>
<li>The UI is buggy at places</li>
</ul>

<p>
Dependencies are redis and a database that are also spinnable through the chart.
</p>
</div>
</div>
<div id="outline-container-org03406ac" class="outline-3">
<h3 id="org03406ac"><span class="section-number-3">18.9.</span> Qlik Sense Desktop</h3>
<div class="outline-text-3" id="text-18-9">
<ul class="org-ul">
<li>Section Access is not supported - When loading a QlikView App with Section Access an error message will be displayed.</li>
<li>Hidden Script is not supported - Saving an App with hidden script will NOT save the hidden script - Data of hidden script will be lost in the next reload.</li>
</ul>
</div>
</div>

<div id="outline-container-org4857014" class="outline-3">
<h3 id="org4857014"><span class="section-number-3">18.10.</span> SuperSet</h3>
<div class="outline-text-3" id="text-18-10">
<p>
web-based stack application, Apache License 2.0
</p>

<ul class="org-ul">
<li>acts as a thin layer above your underlying databases or data engines</li>
<li>can execute queries and return results in a time frame that is acceptable to your users</li>
</ul>
</div>
<div id="outline-container-org8f07db4" class="outline-4">
<h4 id="org8f07db4"><span class="section-number-4">18.10.1.</span> create dashboard</h4>
<div class="outline-text-4" id="text-18-10-1">
<ol class="org-ol">
<li>create database</li>
<li>Data - Dataset - add table</li>
<li>Edit Dataset
<ul class="org-ul">
<li>Columns -
<ul class="org-ul">
<li>Is the column temporal? (should it be used for slicing &amp; dicing in time series charts?)</li>
<li>Should the column be filterable? - numbers?</li>
<li>Is the column dimensional? - regions?</li>
</ul></li>
<li>metrics - agregates - SUM(recovered) / SUM(confirmed))</li>
<li>calculated columns - CAST(recovery<sub>rate</sub> as float); - customize the appearance and behavior of a specific
column</li>
</ul></li>
<li>Creating charts
<ul class="org-ul">
<li>Explore: no-code viz builder. Select your dataset, select the chart, customize the appearance, and publish.</li>
<li>SQL Lab: SQL IDE for cleaning, joining, and preparing data for Explore workflow</li>
</ul></li>
<li>create dashboard</li>
</ol>
</div>
</div>
<div id="outline-container-org423d483" class="outline-4">
<h4 id="org423d483"><span class="section-number-4">18.10.2.</span> feature:</h4>
<div class="outline-text-4" id="text-18-10-2">
<ul class="org-ul">
<li>Dashboard creation
<ul class="org-ul">
<li>Drag and Drop crafting</li>
<li>ways of sharing your dashboard/charts (JSON, email, URL)</li>
</ul></li>
</ul>


<ul class="org-ul">
<li>Enterprise authentication (OpenID, LDAP, OAuth&#x2026;)</li>
<li>Integration with Apache ECharts - Open Source JavaScript Visualization Library (diagrams)</li>
<li>Lightweight semantic layer - ?</li>
<li>Visualization plugin support - ?</li>
<li>Compatible with most SQL-speaking datasources</li>
<li>in-memory asynchronous caching and queries</li>
</ul>

<p>
features2:
</p>
<ul class="org-ul">
<li>Comes with official support for helm.</li>
<li>Alerts, Reports and extra data source connectors - from interface</li>
<li>Dependencies are redis and a database, and it does provide you with an option to spin those up for you.</li>
<li>ends up with a bunch of pods, some of which workers other for scheduling.</li>
<li>control over custom granularity roles and row-level security filters</li>
<li>Data Exploration (Slice &amp; Dice):
<ul class="org-ul">
<li>Code-free visualization builder to extract and present datasets</li>
<li>Intuitive interface</li>
<li>Apply dozens of preset and custom visualization plugins instantly</li>
<li>User-defined metrics with scalable semantic layering</li>
<li>Lets you view the SQL statement for each visualization</li>
</ul></li>
<li>SQL Lab:
<ul class="org-ul">
<li>A feature-rich SQL IDE written in React</li>
<li>A multi-tab environment lets you work on multiple queries at once</li>
<li>Metadata browsing of tables, columns, indexes, and partitions</li>
<li>Supports long-running queries by persisting query results and dispatching handlers to workers (Celery)</li>
<li>Equipped with interactive querying, autocomplete, scheduling, query history, user-defined parameters (with JINJA templating through dbt CLI and dbt Cloud), etc.</li>
</ul></li>
</ul>

<p>
cons:
</p>
<ul class="org-ul">
<li>нельзя изменить названия полей</li>
<li>Requires helm tweaking to spin up its scheduler workers.</li>
<li>tables have to be joined beforehand either at a database level or in the SQL Lab as a virtual table</li>
<li>Cross-filtering between charts isn’t fully supported</li>
<li>doesn’t support NoSQL</li>
<li>Version control isn’t an explicit feature - of dashboards and chards</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgbb4869a"></a><span class="todo TODO">TODO</span> Time series forecasting. Prophet lib<br />
<div class="outline-text-5" id="text-18-10-2-1">
<p>
Prophet is a procedure for forecasting time series data based on an additive model where non-linear trends are
fit with yearly, weekly, and daily seasonality, plus holiday effects
</p>
<ul class="org-ul">
<li><a href="https://facebook.github.io/prophet/">https://facebook.github.io/prophet/</a></li>
</ul>
</div>
</li>
<li><a id="orgb3235d8"></a>Data sharing.<br />
<div class="outline-text-5" id="text-18-10-2-2">
<ul class="org-ul">
<li>share the dashboard page as live dashboard through email or by sharing the page link.</li>
<li>You can also share individual chart through email or sharing the link, exporting data through csv or sharing
the visualization as image after downloading it. In addition you can export the visualization data as json
formats or you can embed the entire chart to your external website.</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgd6c66fc" class="outline-4">
<h4 id="orgd6c66fc"><span class="section-number-4">18.10.3.</span> install 1.4</h4>
<div class="outline-text-4" id="text-18-10-3">
<ul class="org-ul">
<li>git clone &#x2013;depth=1 <a href="https://github.com/apache/superset.git">https://github.com/apache/superset.git</a> &#x2013;branch 1.4</li>
<li>edit docker-compose-non-dev.yaml
<ul class="org-ul">
<li>L87 after in RUM mkdir &#x2026; in # Final lean image - add:
<ul class="org-ul">
<li>apt-get install -y libaio1 \</li>
</ul></li>
<li>in L107 in section # Final lean image add:
<ul class="org-ul">
<li>&amp;&amp; pip install cx<sub>Oracle</sub></li>
</ul></li>
<li>in L114 section # Final lean image after COPY ./docker/docker-entrypoint.sh /usr/bin add:
<ul class="org-ul">
<li>COPY instantclient<sub>18</sub><sub>5</sub> /lib/oracle<sub>instantclient</sub><sub>18</sub><sub>5</sub></li>
<li>ENV LD<sub>LIBRARY</sub><sub>PATH</sub>="/lib/oracle<sub>instantclient</sub><sub>18</sub><sub>5</sub>:${LD<sub>LIBRARY</sub><sub>PATH</sub>}"</li>
</ul></li>
<li>x-superset-image: &amp;superset-image apache/superset:${TAG:-latest-dev}</li>
<li>comment section # Dev image&#x2026; for speed</li>
</ul></li>
<li></li>

<li>docker build &#x2013;force-rm -t apache/superset:1.4 .</li>
<li>TAG=1.4 docker-compose build -f docker-compose-non-dev.yaml &#x2013;force-rm</li>
<li>TAG=1.4 docker-compose -f docker-compose-non-dev.yaml down -v</li>
<li>TAG=1.4 docker-compose -f docker-compose-non-dev.yaml up -d</li>
</ul>

<p>
Language support:
</p>
<ul class="org-ul">
<li>/superset<sub>config.py</sub>:
<ul class="org-ul">
<li>LANGUAGES = {'en': {'flag':'us', 'name': 'English'}, 'ru':{'flag': 'ru', 'name': "Russian"}}</li>
</ul></li>
<li>COPY ./superset<sub>config.py</sub> ${PYTHONPATH}/</li>
</ul>

<p>
<a href="https://stackoverflow.com/questions/68182176/how-to-install-oracle-driver-on-apache-superset-without-internet-access">https://stackoverflow.com/questions/68182176/how-to-install-oracle-driver-on-apache-superset-without-internet-access</a>
</p>
</div>
</div>
<div id="outline-container-orgee2cb33" class="outline-4">
<h4 id="orgee2cb33"><span class="section-number-4">18.10.4.</span> config</h4>
<div class="outline-text-4" id="text-18-10-4">
<ul class="org-ul">
<li>главный конфиг superset/config.py - грузит ${PYTHONPATH}/superset<sub>config.py</sub></li>
<li>Dockerfile: COPY ./superset<sub>config.py</sub> ${PYTHONPATH}/</li>
<li>Docker Compose settings: docker/.env and docker/.env-non-dev</li>
<li>pythonpath<sub>dev</sub>/superset<sub>config.py</sub> and pythonpath<sub>dev</sub>/superset<sub>config</sub><sub>docker.py</sub></li>
</ul>


<ul class="org-ul">
<li>First you need to download oracle client with libraries and put them into superset image</li>
<li>install cx<sub>Oracle</sub> and libaio1 inside container
<ul class="org-ul">
<li>apt update; apt install -y libaio1; pip install cx<sub>Oracle</sub></li>
</ul></li>
<li>For normal language support set env variable in the docker/.env
<ul class="org-ul">
<li>NLS<sub>LANG</sub>=RUSSIAN<sub>RUSSIA.AL32UTF8</sub> # for Russian with UTF-8</li>
</ul></li>
<li>Superset does not detect oracle and uses postgres specs for that datasource. So you need to comment this
line to fix SQL Lab error
<ul class="org-ul">
<li>superset/db<sub>engine</sub><sub>specs</sub>/postgres.py +52</li>
<li># cursor.tzinfo<sub>factory</sub> = FixedOffsetTimezone</li>
</ul></li>
</ul>


<p>
superset-websocket - bidirectual channel
</p>
<ul class="org-ul">
<li>"GLOBAL<sub>ASYNC</sub><sub>QUERIES</sub>": True - to enable</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org9fd04c0"></a><span class="todo TODO">TODO</span> RuntimeWarning:You're running the worker with superuser privileges:this is absolutely not recommended<br />
<div class="outline-text-5" id="text-18-10-4-1">
<p>
<a href="https://stackoverflow.com/questions/59651428/runtimewarningyoure-running-the-worker-with-superuser-privilegesthis-is-absol">https://stackoverflow.com/questions/59651428/runtimewarningyoure-running-the-worker-with-superuser-privilegesthis-is-absol</a>
</p>
</div>
</li>
<li><a id="orgd516faf"></a><span class="todo TODO">TODO</span> theme superset/statis/assets/stylessheets/less/cosmo/variables.less<br />
<div class="outline-text-5" id="text-18-10-4-2">
<p>
theme <a href="https://debaatobiee.wordpress.com/2019/08/04/customizing-apache-superset-ui-config-theme-changes/">https://debaatobiee.wordpress.com/2019/08/04/customizing-apache-superset-ui-config-theme-changes/</a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org041e431" class="outline-4">
<h4 id="org041e431"><span class="section-number-4">18.10.5.</span> install old</h4>
<div class="outline-text-4" id="text-18-10-5">
<ul class="org-ul">
<li>Filter and Slicer <a href="https://www.youtube.com/watch?v=fpNj72aQn8M">https://www.youtube.com/watch?v=fpNj72aQn8M</a></li>
<li>python3.6 -m virtualenv venv</li>
<li>pip install &#x2013;upgrade setuptools pip</li>
<li>cd venv</li>
<li>(optional) chmod +x bin/activate</li>
<li>. bin/activate</li>
<li>pip uninstall pandas</li>
<li>pip install pandas==0.23.4</li>
<li>use pip install sqlalchemy==1.2.18</li>
<li>fabmanager create-admin &#x2013;app superset</li>
<li>superset db upgrade</li>
<li>superset init</li>
<li>superset runserver</li>
</ul>

<p>
<a href="https://github.com/cloudflare/sqlalchemy-clickhouse">https://github.com/cloudflare/sqlalchemy-clickhouse</a>
</p>
<ul class="org-ul">
<li>pip install sqlalchemy-clickhouse</li>
<li>export https<sub>proxy</sub>= &amp;&amp; export http<sub>proxy</sub>=</li>
<li>superset runserver</li>
<li>chromium <a href="http://0.0.0.0:8088">http://0.0.0.0:8088</a></li>
<li>admin admin</li>
<li>clickhouse://default:@localhost:8123/default</li>
</ul>
</div>
</div>

<div id="outline-container-org7f10001" class="outline-4">
<h4 id="org7f10001"><span class="section-number-4">18.10.6.</span> architecture</h4>
<div class="outline-text-4" id="text-18-10-6">
<ul class="org-ul">
<li>Web server (can run multiple instances) - flask python app, using sqlalchemy ORM to connect to any database</li>
<li>Metadata database - SQLite - to store databese connection info</li>
<li>Cache layer</li>
<li>Message queue for async queries</li>
<li>Results backend</li>
</ul>
<p>
<a href="https://www.startdataengineering.com/post/apache-superset-tutorial/">https://www.startdataengineering.com/post/apache-superset-tutorial/</a>
</p>
</div>
</div>
<div id="outline-container-org0afa099" class="outline-4">
<h4 id="org0afa099"><span class="section-number-4">18.10.7.</span> docker-compose</h4>
<div class="outline-text-4" id="text-18-10-7">
<ul class="org-ul">
<li>services:
<ul class="org-ul">
<li>redis</li>
<li>db - postgres</li>
<li>superset</li>
<li>superset-init</li>
<li>superset-websocket - web-frontend</li>
<li>superset-worker</li>
<li>superset-worker-beat</li>
</ul></li>
<li>volumes
<ul class="org-ul">
<li>superset<sub>home</sub></li>
<li>db<sub>home</sub></li>
<li>redis</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org81ef4ce" class="outline-4">
<h4 id="org81ef4ce"><span class="section-number-4">18.10.8.</span> pros and cons</h4>
<div class="outline-text-4" id="text-18-10-8">
<p>
Pros and Cons
Pros
</p>

<p>
Open source.
Large number of pre built visualizations.
Leverage Apache Superset to embed the dashboards into your data applications.
Amazing community (I was able to get super fast support on a weekend).
Simple web server architecture.
Granular user access control.
Rest API based on OpenAPI specification.
</p>

<p>
Cons
</p>

<p>
Cannot do joins in charts and exploration sections. The dataset has to be pre joined or be a view.
Users will need to know SQL. Engineers can help with creation of views, etc. But to be a fully self serve BI tool, end users will need to know SQL.
Without a good dev ops and data team, management can be difficult. Unless you get the managed version from preset.
</p>
</div>
</div>

<div id="outline-container-org948c8c5" class="outline-4">
<h4 id="org948c8c5"><span class="section-number-4">18.10.9.</span> links</h4>
<div class="outline-text-4" id="text-18-10-9">
<ul class="org-ul">
<li>doc <a href="https://superset.apache.org/docs/intro">https://superset.apache.org/docs/intro</a></li>
<li><a href="https://www.startdataengineering.com/post/apache-superset-tutorial/">https://www.startdataengineering.com/post/apache-superset-tutorial/</a></li>
</ul>
</div>
</div>
<div id="outline-container-org6937606" class="outline-4">
<h4 id="org6937606"><span class="section-number-4">18.10.10.</span> security</h4>
<div class="outline-text-4" id="text-18-10-10">
<ul class="org-ul">
<li>Flask AppBuilder (FAB) - framework on top of Flask
<ul class="org-ul">
<li>authentication, user management, permissions and roles</li>
</ul></li>
</ul>

<p>
You can:
</p>
<ul class="org-ul">
<li>create roles</li>
<li>create user and assign role or multiple roles</li>
<li>union roles to existing one</li>
<li>assign tables to roles</li>
<li>per model or view (can<sub>add</sub>, can<sub>delete</sub>, can<sub>show</sub>, can<sub>edit</sub> &#x2026;)</li>
<li>permissions:
<ul class="org-ul">
<li>Model &amp; Action - models are Dashboard, Slice, or User;</li>
<li>Views: views are individual web pages, like the Explore view or the SQL Lab view.</li>
<li>Data source - Slices or explore the data sources</li>
<li>Database: Granting access to a database allows for the user to access all data sources within that database</li>
</ul></li>
<li>Row Level Security - filter or clause (column = "calue" or column &gt; DATE<sub>SUB</sub>(NOW(), INTERVAL 30 DAY))
<ul class="org-ul">
<li>can be assigned to role - all tables accessed by role</li>
<li>clauses combined using AND</li>
</ul></li>
<li>Beyond FAB supported providers (Github, Twitter, LinkedIn, Google, Azure, etc), its easy to connect Superset
with other OAuth2</li>
</ul>

<p>
recommends:
</p>
<ul class="org-ul">
<li>We do not recommend altering the 3 base roles as there are a set of assumptions that Superset is built upon</li>
<li>give a user the Gamma role plus any other roles that would add access to specific data sources</li>
</ul>

<p>
Provided Roles:
</p>
<ul class="org-ul">
<li>Admin</li>
<li>Alpha - cannot grant or revoke access from other users.  limited to altering the objects that they own</li>
<li>Gamma - view the slices and dashboards made from data sources that they have access to</li>
<li>sql<sub>lab</sub></li>
<li>Public</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgcfaa442"></a>links<br />
<div class="outline-text-5" id="text-18-10-10-1">
<p>
<a href="https://flask-appbuilder.readthedocs.io/en/latest/security.html">https://flask-appbuilder.readthedocs.io/en/latest/security.html</a>
<a href="https://superset.apache.org/docs/security/">https://superset.apache.org/docs/security/</a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orga28923a" class="outline-4">
<h4 id="orga28923a"><span class="section-number-4">18.10.11.</span> semantic layer</h4>
<div class="outline-text-4" id="text-18-10-11">
<p>
physical datasets - table or view in your database
</p>
<ul class="org-ul">
<li>automatically pull in relevant information from the database (like schema and column types)</li>
<li>If a change to the underlying database table occurs, you can click <b>Sync Columns from Source</b> to force
Superset to update its internal data model.</li>
<li></li>
</ul>
<p>
virtual datasets -
</p>
<ul class="org-ul">
<li>column types (inferred from results of running the query)</li>
<li>ability to define metrics</li>
<li>ability to define calculated columns</li>
<li>ability to certify metrics or calculated columns</li>
<li>setting a cache timeout</li>
</ul>

<p>
virtual datasets - use cases:
</p>
<ul class="org-ul">
<li>Joining multiple tables (or self-joining against the same table)</li>
<li>Ad-hoc, one-off exploratory analysis</li>
<li>Transforming data in more nuanced ways than currently what Explore</li>
</ul>

<p>
features
</p>
<ul class="org-ul">
<li>Virtual Datasets</li>
<li>Metrics - line in select MAX, SUM, AVG, COUNT(*)
<ol class="org-ol">
<li>select a Time-series visualization type while in the Explore workflow. Then, you can quickly try a
few different metrics.</li>
<li>save in dataset</li>
</ol></li>
<li>Calculated Columns -</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org56bf4e3" class="outline-3">
<h3 id="org56bf4e3"><span class="section-number-3">18.11.</span> <span class="todo TODO">TODO</span> Google Data Studio</h3>
</div>
<div id="outline-container-orga91817a" class="outline-3">
<h3 id="orga91817a"><span class="section-number-3">18.12.</span> <span class="todo TODO">TODO</span> Looker</h3>
<div class="outline-text-3" id="text-18-12">
<p>
proprietary
</p>
</div>
</div>
<div id="outline-container-orgdb89123" class="outline-3">
<h3 id="orgdb89123"><span class="section-number-3">18.13.</span> как выбирать:</h3>
<div class="outline-text-3" id="text-18-13">
<ul class="org-ul">
<li>собрать все и самые популярные</li>
<li>выписать критерии
<ul class="org-ul">
<li>Price</li>
<li>Datasource support</li>
<li>Deployment&amp;Support</li>
<li>Popularity</li>
<li>functionality</li>
<li>Alerting and reporting capabilities</li>
<li>Single sign-on setup</li>
<li>UX and Dashboarding experience</li>
<li>Deployment - helm chart - own deployment methods and stack needs(Kubernetes, AWS Athena etc.)</li>
</ul></li>
<li>проверить что</li>
</ul>
</div>
</div>
<div id="outline-container-org9e8a34c" class="outline-3">
<h3 id="org9e8a34c"><span class="section-number-3">18.14.</span> 4 качества хорошего дашборда</h3>
<div class="outline-text-3" id="text-18-14">
<p>
Цель дашборда - представить сложную информацию в удобном для понимания формате для пользователей.
</p>

<p>
Удобная информационная панель должна обладать такими качествами:
</p>

<ol class="org-ol">
<li>Ясность</li>
</ol>
<p>
Хороший дашборд четко отображает необходимую информацию. Его назначение должно быть понятно пользователю уже через 5 секунд после того, как он в-первые увидел панель.
</p>

<ol class="org-ol">
<li>Значимость</li>
</ol>
<p>
Полезный дашборд содержит значимую, важную для принятия решений информацию.
Пользователь должен уловить историю, что стоит за дизайном.
</p>

<ol class="org-ol">
<li>Согласованность</li>
</ol>
<p>
Стиль, макет, содержание и организация дашборда должны быть согласованы между собой.
</p>

<ol class="org-ol">
<li>Простота</li>
</ol>
<p>
Если информационная панель сложна в восприятии, то она бесполезна. Дашборд нужен, чтобы подавать массивы информации в простом виде.
</p>

<p>
Как спроектировать такой дашборд?
</p>

<p>
Самый первый и важный шаг — понять кто и для чего будет пользоваться дашбордом.
</p>

<p>
Дашборд получается полезным, когда мы сосредоточиваем внимание на потребностях пользователя. Это помогает нам понять какие данные аудитории важно видеть.
</p>

<p>
Иногда пользователей у дашборда несколько. И им нужен разный уровень информации. В этом случае сегментируем аудиторию и разделяем информацию на базовый и расширенный контент.
</p>

<p>
Второй шаг - выбор правильных показателей (KPI)
Выбор правильных метрик является ключевым шагом в разработке удобных информационных панелей.
</p>

<p>
Резюме.
Создаём дашборд в соответствии с потребностями пользователей. При необходимости разделяем информацию по уровням пользования.
Выбираем правильные метрики исходя из потребностей аудитории.
</p>

<p>
Какие пункты вы бы добавили?
</p>
</div>
</div>
<div id="outline-container-org19bd055" class="outline-3">
<h3 id="org19bd055"><span class="section-number-3">18.15.</span> Виды отчетов и дашбордов⁣⁣</h3>
<div class="outline-text-3" id="text-18-15">
<p>
По аналогии с документами, отчеты бывают оперативные, аналитические и стратегические.⁣⁣
</p>

<ul class="org-ul">
<li>Оперативный отчет – это текущие данные по состоянию на сегодня. Для него не нужна красота, он просто
показывает состояние дел на сегодня. В нем не обязательны графики и визуализации: достаточно обычной
таблички.⁣⁣
<ul class="org-ul">
<li>план-факт</li>
<li>динамика выполнения плана - line chart</li>
<li>выполнение по каналам - план факт в виде bar plot</li>
<li>выбор: года месяца</li>
</ul></li>
<li>Аналитический отчет – содержит большой объем информации, которая трудно воспринимается в таблице.  Ее нужно
визуализировать. Поэтому нужен дашборд. Он показывает тренды, сводки по конкретной ситуации.
<ul class="org-ul">
<li>количество и прирост чего-то в процентах</li>
<li>товарооборот по брендам - scatter plot с разным размером точек (средний чек - ). Выбор-год, квартал, месяц</li>
<li>товарооборот по лицам или брендам - line plot заказчик гипермаркет Выбор - магазины клиенты визиты</li>
<li>таблица с вкладками - постоянные клиенты, клиенты притока, клиенты оттока</li>
</ul></li>
<li>Стратегический отчет предназначен для управленцев, предоставляется периодически, помогает принять
долгосрочные решения. Этому помогает визуализация данных, которая упрощает принятие решений. Поэтому
дашборды для управленцев очень нужны⁣⁣
<ul class="org-ul">
<li>вверху числа,</li>
<li>воронка чего-то</li>
<li>динамика этапов lineplot</li>
<li>средний срок barplot</li>
</ul></li>
</ul>

<p>
Важно: информация на управленческих дашбордах должна быть подана максимально просто. На панели показывают
основные данные и убирают лишнюю информацию.
</p>
</div>
</div>
<div id="outline-container-org330d168" class="outline-3">
<h3 id="org330d168"><span class="section-number-3">18.16.</span> советы 20</h3>
<div class="outline-text-3" id="text-18-16">
<p>
2 положительные значения зеленым, отрицательные красным
3 усечение числовой оси y в искажает информацию особенно в стобчатой диаграмме
4 для линейных диаграмм лучше усекать ось y, чтобы лучше видеть динамику
5 линейная диаграмма - толстые сглаженные линии скрывают реальные позиции, что плохо
6 круговая диаграмма - подписи рядом с долями, а не в стороне сами по себе, цвета разные
7 круговая диаграмма - не наносите подписи поверх кусков пирога, если они длинные
8 круговая диаграмма - отсортируйте куски от большего к меньшему
10 круговая диаграмма - если в центре что-то писать, то жертвуешь четкостью
11/12 сортировать столбчатую диаграмму (гистограмму)
13 горизонтальную столбчатую диаграмму для правильного отображения меток
14 линейная диаграмма хороша для коротких интервалов. На больших лучше заменить на столбчатую
</p>


<p>
F - паттерн - движение глаз
1 -&gt; 2
3 -&gt; 4
5 &#x2013;
</p>

<p>
<a href="https://vk.com/analyst_ba">https://vk.com/analyst_ba</a>
</p>
</div>
</div>
<div id="outline-container-org660b13e" class="outline-3">
<h3 id="org660b13e"><span class="section-number-3">18.17.</span> этапы построения</h3>
<div class="outline-text-3" id="text-18-17">
<ol class="org-ol">
<li>тех задание на салфетке</li>
<li>эскиз для себя</li>
<li>дизайн макетов для заказчика</li>
<li>список доработок</li>
<li>финальный макет</li>
</ol>
</div>
</div>
<div id="outline-container-orgf84a032" class="outline-3">
<h3 id="orgf84a032"><span class="section-number-3">18.18.</span> дашборды на смартфоне</h3>
<div class="outline-text-3" id="text-18-18">
<p>
должен давать ответы на основные вопросы пользователя
</p>
<ul class="org-ul">
<li>юзер в полевых условиях - только основное</li>
<li>упрощайте - исключить лишние метки осей</li>
<li>несколько маленьких диаграмм лучше одной большой</li>
<li>учитывайте ориентацию экрана. Для горизонтальной версии можно показать детализацию</li>
<li>выделите важное с помощью цвета</li>
<li>как диаграмма будет смотреться в темноте?</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc364095" class="outline-2">
<h2 id="orgc364095"><span class="section-number-2">19.</span> report commercial</h2>
<div class="outline-text-2" id="text-19">
</div>
<div id="outline-container-org3da2b0d" class="outline-3">
<h3 id="org3da2b0d"><span class="section-number-3">19.1.</span> SAP Crystal Reports</h3>
<div class="outline-text-3" id="text-19-1">
<p>
from  USD 495.00  per named user license
</p>
</div>
</div>
</div>
<div id="outline-container-orge873f24" class="outline-2">
<h2 id="orge873f24"><span class="section-number-2">20.</span> Data Warehouse producsts</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org7db6f5e" class="outline-3">
<h3 id="org7db6f5e"><span class="section-number-3">20.1.</span> Clickhouse</h3>
<div class="outline-text-3" id="text-20-1">
<ul class="org-ul">
<li>yandex <a href="https://habr.com/ru/company/yandex/blog/429956/">https://habr.com/ru/company/yandex/blog/429956/</a></li>
<li>Александр зайцев "переезжаем на yandex.clickhouse"</li>
<li>VK <a href="https://www.youtube.com/watch?v=pbbcMcrQoXw">https://www.youtube.com/watch?v=pbbcMcrQoXw</a></li>
<li><a href="https://habr.com/ru/company/smi2/blog/314558/">https://habr.com/ru/company/smi2/blog/314558/</a></li>
</ul>

<p>
cons:
</p>
<ul class="org-ul">
<li>специфический SQL, join только по колонкам с одинаковыми названиями</li>
<li>недокументированный UPDATE/DELETE</li>
</ul>

<p>
install debian:
</p>
<ul class="org-ul">
<li>deb <a href="http://repo.yandex.ru/clickhouse/deb/testing/">http://repo.yandex.ru/clickhouse/deb/testing/</a> main/ or deb <a href="http://repo.yandex.ru/clickhouse/deb/stable/">http://repo.yandex.ru/clickhouse/deb/stable/</a> main/</li>
<li>apt-get install dirmngr</li>
<li><a href="http://keyserver.ubuntu.com/">http://keyserver.ubuntu.com/</a>   string: 0xE0C56BD4  Search for a key</li>
<li>create file_ with &#x2013;&#x2014;BEGIN PGP PUBLI .. EY BLOCK&#x2013;&#x2014;</li>
<li>apt-key add file_</li>
<li>apt-get update</li>
<li>apt-get install clickhouse-client clickhouse-server</li>
<li>systemctl start clickhouse-server</li>
</ul>

<p>
Типа данных: <a href="https://clickhouse.yandex/docs/ru/interfaces/formats/#sootvetstvie-tipov-dannykh">https://clickhouse.yandex/docs/ru/interfaces/formats/#sootvetstvie-tipov-dannykh</a>
</p>

<ul class="org-ul">
<li>list databases: SHOW DATABASES;</li>
<li>выбрать текущую базу: USE db;</li>
<li>список таблиц: SHOW TABLES FROM system;</li>
<li>описание таблицы: DESCRIBE TABLE system.numbers;</li>
<li>UPDATE/DELETE: <a href="https://clickhouse.yandex/docs/ru/query_language/alter/#alter-mutations">https://clickhouse.yandex/docs/ru/query_language/alter/#alter-mutations</a></li>
<li>выполняющиеся запросы: SHOW PROCESSLIST; or: watch -n1 "clickhouse-client &#x2013;query='SHOW PROCESSLIST'"</li>
</ul>
</div>
<div id="outline-container-orgfa4593e" class="outline-4">
<h4 id="orgfa4593e"><span class="section-number-4">20.1.1.</span> Управление данными</h4>
<div class="outline-text-4" id="text-20-1-1">
<p>
В ClickHouse нет «сегментов», содержащих данные, попадающие в конкретные временные диапазоны. В нем нет
«глубокого хранения» для данных, узлы в кластере ClickHouse также отвечают и за обработку запросов, и
запостоянство/устойчивость данных, хранящихся на них. Так что вам <b>не потребуется HDFS</b> или облачное хранилище
данных вроде Amazon S3.
</p>

<p>
В ClickHouse имеются секционированные таблицы, состоящие из указанного набора узлов. Здесь нет «центральной
власти» или сервера метаданных. Все узлы, между которыми разделена та или иная таблица, содержат полные,
идентичные копии метаданных, включая адреса всех остальных узлов, на которых хранятся секции этой таблицы.
</p>

<p>
Метаданные секционированной таблицы включают «весы» узлов для распределения свежезаписываемых данных — к
примеру, 40% данных должны идти на узел A, 30% на узел B и 30% на C. Обычно же распределение должно
происходить равномерно, «перекоос», как в этом примере, требуется только тогда, когда к секционированной
таблице добавляется новый узел и нужно побыстрее заполнитьего какими-либо данными. <b>Обновления этих «весов»
должны выполняться вручную</b> администраторами кластера ClickHouse, или же автоматизированной системой,
построенной поверх ClickHouse.
</p>
</div>
</div>
<div id="outline-container-orga72f6aa" class="outline-4">
<h4 id="orga72f6aa"><span class="section-number-4">20.1.2.</span> sql</h4>
<div class="outline-text-4" id="text-20-1-2">
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #8ac6f2; font-weight: bold;">CREATE</span> DATABASE test;
<span style="color: #8ac6f2; font-weight: bold;">CREATE</span> <span style="color: #8ac6f2; font-weight: bold;">TABLE</span> <span style="color: #cae682; font-weight: bold;">test.t2</span> ( a Int32, b String ) ENGINE = MergeTree() <span style="color: #8ac6f2; font-weight: bold;">PRIMARY</span> <span style="color: #8ac6f2; font-weight: bold;">KEY</span> a <span style="color: #8ac6f2; font-weight: bold;">ORDER</span> <span style="color: #8ac6f2; font-weight: bold;">BY</span> a;

# <span style="color: #8ac6f2; font-weight: bold;">update</span>
<span style="color: #8ac6f2; font-weight: bold;">ALTER</span> <span style="color: #8ac6f2; font-weight: bold;">TABLE</span> <span style="color: #cae682; font-weight: bold;">test.t2</span> <span style="color: #8ac6f2; font-weight: bold;">UPDATE</span> b = <span style="color: #95e454;">'new text'</span> <span style="color: #8ac6f2; font-weight: bold;">WHERE</span> a = 1;

# <span style="color: #8ac6f2; font-weight: bold;">delete</span>
<span style="color: #8ac6f2; font-weight: bold;">ALTER</span> <span style="color: #8ac6f2; font-weight: bold;">TABLE</span> <span style="color: #cae682; font-weight: bold;">test.t2</span> <span style="color: #8ac6f2; font-weight: bold;">DELETE</span> <span style="color: #8ac6f2; font-weight: bold;">WHERE</span> a = 101;


</pre>
</div>
</div>
</div>
<div id="outline-container-org1fdcd0a" class="outline-4">
<h4 id="org1fdcd0a"><span class="section-number-4">20.1.3.</span> error ssl</h4>
<div class="outline-text-4" id="text-20-1-3">
<p>
140272112277136:error:25FFF06C:DSO support routines:CRYPTO<sub>internal</sub>:functionality not supported:../contrib/ssl/crypto/dso/dso<sub>lib.c</sub>:224:
140272112277136:error:0EFFF06E:configuration file routines:CRYPTO<sub>internal</sub>:error loading dso:../contrib/ssl/crypto/conf/conf<sub>mod.c</sub>:273:module=ssl<sub>conf</sub>, path=ssl<sub>conf</sub>
140272112277136:error:0EFFF071:configuration file routines:CRYPTO<sub>internal</sub>:unknown module name:../contrib/ssl/crypto/conf/conf<sub>mod.c</sub>:214:module=ssl<sub>conf</sub>
</p>

<ul class="org-ul">
<li>I don't have a proper fix, but a workaround is to comment the ssl<sub>conf</sub> = ssl<sub>sect</sub> line you may have in your /etc/ssl/openssl.cnf under [default<sub>conf</sub>]</li>
</ul>
</div>
</div>
<div id="outline-container-orgdaf0655" class="outline-4">
<h4 id="orgdaf0655"><span class="section-number-4">20.1.4.</span> Aiflow</h4>
<div class="outline-text-4" id="text-20-1-4">
<p>
pip install clickhouse-driver
</p>
<ul class="org-ul">
<li>doc <a href="https://clickhouse-driver.readthedocs.io/en/latest/">https://clickhouse-driver.readthedocs.io/en/latest/</a></li>
<li>git <a href="https://github.com/mymarilyn/clickhouse-driver">https://github.com/mymarilyn/clickhouse-driver</a></li>
<li>Hook <a href="https://github.com/WesleyBatista/clickhouse_plugin">https://github.com/WesleyBatista/clickhouse_plugin</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgc4ccbef" class="outline-4">
<h4 id="orgc4ccbef"><span class="section-number-4">20.1.5.</span> Power BI</h4>
<div class="outline-text-4" id="text-20-1-5">
<ul class="org-ul">
<li>SQL URL <a href="https://renta.im/ru/blog/clickhouse/">https://renta.im/ru/blog/clickhouse/</a></li>
<li>ODBC <a href="https://github.com/yandex/clickhouse-odbc/releases">https://github.com/yandex/clickhouse-odbc/releases</a></li>
<li>Строка подключения: "Driver=ClickHouse Unicode;Database=default;Server=localhost;Port=8123;"</li>
</ul>
</div>
</div>
<div id="outline-container-org739a911" class="outline-4">
<h4 id="org739a911"><span class="section-number-4">20.1.6.</span> <span class="todo TODO">TODO</span> compilation</h4>
<div class="outline-text-4" id="text-20-1-6">
<p>
<a href="https://clickhouse.com/docs/en/development/build">https://clickhouse.com/docs/en/development/build</a>
<a href="https://github.com/kmeaw/clickhouse-overlay/blob/master/dev-db/clickhouse/clickhouse-18.16.1.ebuild">https://github.com/kmeaw/clickhouse-overlay/blob/master/dev-db/clickhouse/clickhouse-18.16.1.ebuild</a>
<a href="https://github.com/Perlovka/portage-overlay/tree/master/dev-db/clickhouse-bin">https://github.com/Perlovka/portage-overlay/tree/master/dev-db/clickhouse-bin</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org22256db" class="outline-3">
<h3 id="org22256db"><span class="section-number-3">20.2.</span> MariaDB</h3>
<div class="outline-text-3" id="text-20-2">
<p>
for a wide variety of use cases as replacement for MySQL
<a href="https://mariadb.com/kb/en/library/installing-and-configuring-a-single-server-columnstore-system-12x/">https://mariadb.com/kb/en/library/installing-and-configuring-a-single-server-columnstore-system-12x/</a>
cons:
</p>
<ul class="org-ul">
<li>на основе MySQL</li>
</ul>
<p>
pros:
</p>
<ul class="org-ul">
<li>single server or multi-server</li>
<li>columnar storage optimized for interactive</li>
<li>ad hoc analytics</li>
<li>scaling out as needed</li>
</ul>


<p>
create database classicmodels;
</p>

<p>
mysql -p 'classicmodels' &lt; my.sql
</p>

<p>
GRANT ALL PRIVILEGES ON classicmodels.* TO 'u'@'%' IDENTIFIED BY '123' WITH GRANT OPTION;
</p>

<p>
CREATE TABLE tmp.ta (
    id INT PRIMARY KEY,
);
</p>
</div>
<div id="outline-container-org33df296" class="outline-4">
<h4 id="org33df296"><span class="section-number-4">20.2.1.</span> install</h4>
<div class="outline-text-4" id="text-20-2-1">
<ul class="org-ul">
<li><a href="https://mariadb.com/kb/en/library/7758/#debian-9">https://mariadb.com/kb/en/library/7758/#debian-9</a></li>
<li>apt-get install libdbi-perl rsync libboost-all-dev libreadline5 expect tcl-expect libjemalloc1</li>
<li>скачать вручную deb <a href="https://packages.debian.org/ru/stretch/libjemalloc1">https://packages.debian.org/ru/stretch/libjemalloc1</a></li>
<li>libboost<sub>system.so.1.62.0</sub></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga7fa3bf" class="outline-3">
<h3 id="orga7fa3bf"><span class="section-number-3">20.3.</span> PostgreSQL</h3>
<div class="outline-text-3" id="text-20-3">
<p>
PostgreSQL - cstore<sub>fdw</sub>, vops
</p>
</div>
</div>
<div id="outline-container-orgab33562" class="outline-3">
<h3 id="orgab33562"><span class="section-number-3">20.4.</span> Greenplum BD</h3>
<div class="outline-text-3" id="text-20-4">
<ul class="org-ul">
<li>Опыт внедрения <a href="https://pgconf.ru/2017/94499">https://pgconf.ru/2017/94499</a></li>
</ul>
<p>
official links:
</p>
<ul class="org-ul">
<li>ODBC driver <a href="https://network.pivotal.io/products/pivotal-gpdb/#/releases/396409/file_groups/1829">https://network.pivotal.io/products/pivotal-gpdb/#/releases/396409/file_groups/1829</a></li>
</ul>
<p>
articles:
</p>
<ul class="org-ul">
<li>tinkoff <a href="https://habr.com/en/company/tinkoff/blog/267733/">https://habr.com/en/company/tinkoff/blog/267733/</a></li>
<li>tinkoff repl</li>
<li><a href="https://github.com/gtoonstra/etl-with-airflow/blob/master/examples/etl-example/dags/orders_staging.py">https://github.com/gtoonstra/etl-with-airflow/blob/master/examples/etl-example/dags/orders_staging.py</a></li>
</ul>
<p>
Forked from the main PostgreSQL line at version 8.2.15
</p>

<p>
designed to manage large-scale analytic data warehouses and business intelligence workloads.
</p>
<ul class="org-ul">
<li>на основе PostgreSQL - лучше MySQL</li>
<li>massively parallel processing (MPP)</li>
<li>PostgreSQL interface</li>
<li>performs best with a denormalized schema design</li>
<li>Greenplum provides both row-oriented and <b>column-oriented</b> table types</li>
<li>logically partition table data, either by range or by a list of values - each partition of a single table
can utilize its own storage method (row vs. column orientation)</li>
</ul>

<p>
Ограничения:
</p>
<ul class="org-ul">
<li>нельзя обновлять поле колонка которого есть ключ дистрибуции</li>
<li>column-tables обновляются чуть меньше</li>
</ul>
<p>
Рекомендации:
</p>
<ul class="org-ul">
<li>предназначенная для небольшого числа одновременных запросов. Большое число (более 600 queries per second)
лёгких запросов/транзакций, выполняющих одну операцию, негативно сказывается на производительности
базы. Хорошей практикой является агрегация большого числа update/insert в батчи.</li>
<li>один CPU на сегмент, поэтому на одну ноду от 6-8 сегментов, чтобы задействовать многопроцессорность - но это не точно</li>
<li>10 гигабит interconnection</li>
<li>чем больше дисков тем лучше</li>
<li>на серверах лучше вырубить swap. потому что он его слишком юзает</li>
<li>автовакум выключен, вакум раз в сутка, а то заблоутится буть здоров</li>
</ul>


<p>
продукт InfluxDB собирает метрики
</p>

<p>
Агрегаторы - таблицы сум по которым опять делаются выборки - от них можно отказаться
</p>
</div>


<div id="outline-container-org3b590ec" class="outline-4">
<h4 id="org3b590ec"><span class="section-number-4">20.4.1.</span> MPP</h4>
<div class="outline-text-4" id="text-20-4-1">
<ul class="org-ul">
<li>data is distributed in chunks to all the nodes in the cluster - <b>xsegments</b></li>
<li>master/worker MPP architecture</li>
<li>Only metadata is stored on the master</li>
</ul>
</div>
</div>
<div id="outline-container-orgcdddf73" class="outline-4">
<h4 id="orgcdddf73"><span class="section-number-4">20.4.2.</span> Append-only tables</h4>
<div class="outline-text-4" id="text-20-4-2">
<ul class="org-ul">
<li><a href="https://it.toolbox.com/blogs/omerbrandis/working-with-append-only-tables-part-i-061112">https://it.toolbox.com/blogs/omerbrandis/working-with-append-only-tables-part-i-061112</a></li>
<li><a href="https://it.toolbox.com/blogs/omerbrandis/working-with-append-only-tables-part-ii-061812">https://it.toolbox.com/blogs/omerbrandis/working-with-append-only-tables-part-ii-061812</a></li>
</ul>

<p>
create table table t1 ( id int,  value<sub>col</sub> int).
</p>

<p>
insert into t1 select id,(:new<sub>value</sub> - t1.value<sub>col</sub>) from t1 where id = 11). # 11 - id
</p>

<p>
Update as insert of delta value.Drawbacks:
</p>
<ul class="org-ul">
<li>Each "object" is stored using multiple rows.</li>
<li>You may not be able to perform the insert on in parallel on multiple rows.</li>
<li>This method doesn't support non numerical types as non key columns</li>
<li>You may not be able to perform the insert on in parallel on multiple rows.</li>
</ul>
</div>
</div>

<div id="outline-container-org67979f6" class="outline-4">
<h4 id="org67979f6"><span class="section-number-4">20.4.3.</span> install for kubernetes</h4>
<div class="outline-text-4" id="text-20-4-3">
<p>
После деплоя в кубер, в манифесте кубера нужно добавить в ДНС строки с правильными адресами
</p>
</div>
</div>
<div id="outline-container-orgb209e31" class="outline-4">
<h4 id="orgb209e31"><span class="section-number-4">20.4.4.</span> psql</h4>
<div class="outline-text-4" id="text-20-4-4">
<p>
<a href="https://gpdb.docs.pivotal.io/530/utility_guide/client_utilities/psql.html">https://gpdb.docs.pivotal.io/530/utility_guide/client_utilities/psql.html</a>
-\?
-\h - sql
</p>
<ul class="org-ul">
<li>list of databases - \l or SELECT datname from pg<sub>database</sub>;</li>
<li>change database - \c test - REQUIRED</li>
<li>list tables - \dt</li>
<li>table definition \d+ t<sub>name</sub></li>
<li>change password - \password or ALTER user gpadmin with password '123';</li>
<li>количество столбцов в таблице - select count(*) from information<sub>schema.columns</sub> where table<sub>name</sub>='test';</li>
<li>roles -</li>
</ul>
</div>
</div>

<div id="outline-container-org7a6b673" class="outline-4">
<h4 id="org7a6b673"><span class="section-number-4">20.4.5.</span> Tablespaces not needed</h4>
<div class="outline-text-4" id="text-20-4-5">
<p>
SELECT spcname as tblspc, fsname as filespc,
          fsedbid as seg<sub>dbid</sub>, fselocation as datadir
   FROM   pg<sub>tablespace</sub> pgts, pg<sub>filespace</sub> pgfs,
          pg<sub>filespace</sub><sub>entry</sub> pgfse
   WHERE  pgts.spcfsoid=pgfse.fsefsoid
          AND pgfse.fsefsoid=pgfs.oid
   ORDER BY tblspc, seg<sub>dbid</sub>;
</p>

<ul class="org-ul">
<li>pg<sub>global</sub> for shared system catalogs</li>
<li>pg<sub>default</sub>, the default tablespace. Used by the template1 and template0 databases.</li>
<li>pg<sub>system</sub> -  data directory location created at system initialization</li>
</ul>
</div>
</div>
<div id="outline-container-org8ae2898" class="outline-4">
<h4 id="org8ae2898"><span class="section-number-4">20.4.6.</span> Create Tables</h4>
<div class="outline-text-4" id="text-20-4-6">
<p>
Two major types of table <b>storage techniques</b>:
</p>
<ul class="org-ul">
<li>HEAP - default
<ul class="org-ul">
<li>MVCC)</li>
<li>CREATE TABLE c(a int PRIMARY KEY, b text)  DISTRIBUTED BY(a);</li>
<li>good for dimension tables often UPDATE/DELETE - Compression not available</li>
<li>UNIQUE - table must be hash-distributed (not DISTRIBUTED RANDOMLY) and constraint columns must be the same
as (or a superset of) the table's distribution key columns</li>
</ul></li>
<li>Append Only or Append Optimized starting with 4.3</li>
<li><ul class="org-ul">
<li>allow UPDATE</li>
<li>CREATE TABLE bar (a int, b text)  WITH (appendonly=true, orientation=column) DISTRIBUTED BY(a)</li>
<li>UNIQUE and PRIMARY KEY constraints are not allowed on append-optimized tables</li>
<li>Allow Column-level Compression (default -  no compression):
<ul class="org-ul">
<li>WITH (appendonly=true, compresstype=zlib, compresslevel=5);</li>
<li>Table Orientation:
<ul class="org-ul">
<li>Row: ZLIB and QUICKLZ</li>
<li>Column: RLE<sub>TYPE</sub>,
<ul class="org-ul">
<li>ZLIB - лучше сжимает  compresslevel=1 - 9</li>
<li>QUICKLZ - быстрее на compresslevel=1 (1 - default)</li>
</ul></li>
</ul></li>
<li>column<sub>name</sub> data<sub>type</sub> ENCODING (compresstype=zlib, compresslevel=6) - specifies for individual columns</li>
</ul></li>
</ul></li>
</ul>

<p>
<b>Append Optimized</b>:
</p>
<ul class="org-ul">
<li>Insert:
<ol class="org-ol">
<li>INSERT INTO &#x2026;</li>
<li>ANALYZE ao<sub>table</sub>; - собирает статистическую информацию Впоследствии планировщик запросов будет использовать эту статистику для выбора
наиболее эффективных планов выполнения запросов.</li>
</ol></li>
<li>works best with denormalized fact tables</li>
</ul>

<p>
All tables
</p>
<ul class="org-ul">
<li>are distributed - table rows
<ul class="org-ul">
<li>DISTRIBUTED BY field (hash distribution) - default - p key or first field</li>
<li>DISTRIBUTED RANDOMLY (round-robin distribution)  - no unique field(s)</li>
</ul></li>
<li>primary key is distribution key for the table by default</li>
<li>Choose a distribution key that is unique for each record, such as the primary key</li>
<li>Foreign keys are not supported. You can declare them, but referential integrity is not enforced.</li>

<li>default - Row-oriented heap tables</li>
<li>append-optimized - UPDATE and DELETE are not allowed.
<ul class="org-ul">
<li>Column-oriented storage - aggregations over a small number of columns, or for single columns that require
regular updates without modifying other column data. - many columns where you access a small subset of
columns in your queries</li>
</ul></li>
<li>Compression - greater adjacent compression achieved, the more difficult random access can become</li>
</ul>
</div>
</div>

<div id="outline-container-org5146995" class="outline-4">
<h4 id="org5146995"><span class="section-number-4">20.4.7.</span> data types</h4>
<div class="outline-text-4" id="text-20-4-7">
<ul class="org-ul">
<li>Use the smallest numeric data type</li>
<li>int smalles as possible for dimensions -  appropriate for fact</li>
<li>text - VARCHAR or TEXT, (CHAR is not recommended)</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Alias</th>
<th scope="col" class="org-left">Size</th>
<th scope="col" class="org-left">Desc</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bigint</td>
<td class="org-left">int8</td>
<td class="org-left">8 bytes</td>
<td class="org-left">large range integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">bigserial</td>
<td class="org-left">serial8</td>
<td class="org-left">8 bytes</td>
<td class="org-left">large autoincrementing integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">bit [ (n) ]</td>
<td class="org-left">n bits</td>
<td class="org-left">bit string</td>
<td class="org-left">fixed-length bit string</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">bit varying [ (n) ]</td>
<td class="org-left">varbit</td>
<td class="org-left">actual number of bits</td>
<td class="org-left">variable-length bit string</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">boolean</td>
<td class="org-left">bool</td>
<td class="org-left">1 byte</td>
<td class="org-left">true/false</td>
<td class="org-left">logical boolean (true/false)</td>
</tr>
</tbody>
</table>
<p>
box 	  	32 bytes 	((x1,y1),(x2,y2)) 	rectangular box in the plane - not allowed in distribution key columns.
bytea1 	  	1 byte + binary string 	sequence of octets 	variable-length binary string
character [ (n) ]1 	char [ (n) ] 	1 byte + n 	strings up to n characters in length 	fixed-length, blank padded
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">character varying[(n)]</td>
<td class="org-left">varchar[(n)]</td>
<td class="org-left">1 byte + string size</td>
<td class="org-left">variable-length with limit</td>
</tr>
</tbody>
</table>
<p>
cidr 	  	12 or 24 bytes 	  	IPv4 and IPv6 networks
circle 	  	24 bytes 	&lt;(x,y),r&gt; (center and radius) 	circle in the plane - not allowed in distribution key columns.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">date</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">4 bytes</td>
<td class="org-left">calendar date (year, month, day)</td>
</tr>
</tbody>
</table>
<p>
decimal [ (p, s) ]1 	numeric [ (p, s) ] 	variable 	no limit 	user-specified precision, exact
double precision 	float8
</p>

<p>
float
	8 bytes 	15 decimal digits precision 	variable-precision, inexact
inet 	  	12 or 24 bytes 	  	IPv4 and IPv6 hosts and networks
integer 	int, int4 	4 bytes 	-2147483648 to +2147483647 	usual choice for integer
interval [ (p) ] 	  	12 bytes 	-178000000 years - 178000000 years 	time span
json 	  	1 byte + json size 	json of any length 	variable unlimited length
lseg 	  	32 bytes 	((x1,y1),(x2,y2)) 	line segment in the plane - not allowed in distribution key columns.
macaddr 	  	6 bytes 	  	MAC addresses
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">money</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">8 bytes</td>
<td class="org-left">currency amount</td>
</tr>
</tbody>
</table>
<p>
path1 	  	16+16n bytes 	[(x1,y1),&#x2026;] 	geometric path in the plane - not allowed in distribution key columns.
point 	  	16 bytes 	(x,y) 	geometric point in the plane - not allowed in distribution key columns.
polygon 	  	40+16n bytes 	((x1,y1),&#x2026;) 	closed geometric path in the plane - not allowed in distribution key columns.
real 	float4 	4 bytes 	6 decimal digits precision 	variable-precision, inexact
serial 	serial4 	4 bytes 	1 to 2147483647 	autoincrementing integer
smallint 	int2 	2 bytes 	-32768 to +32767 	small range integer
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">text</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">1 byte + string size</td>
<td class="org-left">variable unlimited length</td>
</tr>
</tbody>
</table>
<p>
time [ (p) ] [ without time zone ] 	  	8 bytes 	00:00:00[.000000] - 24:00:00[.000000] 	time of day only
time [ (p) ] with time zone 	timetz 	12 bytes 	00:00:00+1359 - 24:00:00-1359 	time of day only, with time zone
timestamp [ (p) ] [ without time zone ] 	  	8 bytes 	4713 BC - 294,277 AD 	both date and time
timestamp [ (p) ] with time zone 	timestamptz 	8 bytes 	4713 BC - 294,277 AD 	both date and time, with time zone
uuid 	  	32 bytes 	  	Universally Unique Identifiers according to RFC 4122, ISO/IEC 9834-8:2005
xml1 	  	1 byte + xml size 	xml of any length 	variable unlimited length
txid<sub>snapshot</sub>
</p>
</div>
</div>
<div id="outline-container-org9c21b60" class="outline-4">
<h4 id="org9c21b60"><span class="section-number-4">20.4.8.</span> ROLE</h4>
<div class="outline-text-4" id="text-20-4-8">
<p>
create role
</p>
<ul class="org-ul">
<li>CREATE ROLE gpuser WITH NOSUPERUSER LOGIN PASSWORD '123';</li>
<li>\c db</li>
<li>GRANT CONNECT ON DATABASE obor to gpuser;</li>
<li>GRANT SELECT ON table TO user1;</li>
</ul>
<p>
drop role:
</p>
<ol class="org-ol">
<li>DROP OWNED BY doomed<sub>role</sub>;</li>
<li>DROP ROLE doomed<sub>role</sub>;</li>
</ol>
</div>
</div>
<div id="outline-container-org32240cd" class="outline-4">
<h4 id="org32240cd"><span class="section-number-4">20.4.9.</span> Greenplum ETL</h4>
<div class="outline-text-4" id="text-20-4-9">
<ul class="org-ul">
<li><a href="https://greenplum.org/greenplum-etl/">https://greenplum.org/greenplum-etl/</a></li>
<li>directly to master</li>
<li>Pg<sub>dump</sub> -  command line tool that can extract data from a table to a file and restore</li>
<li>copy - SQL command of Postgres and Greenplum</li>
<li>SDK interface:  libpq, ODBC and JDBC</li>
<li>Gpfdist - can load data in parallel on every segment directly without bothering the master</li>
</ul>
</div>
</div>

<div id="outline-container-org3aa7270" class="outline-4">
<h4 id="org3aa7270"><span class="section-number-4">20.4.10.</span> Power BI</h4>
<div class="outline-text-4" id="text-20-4-10">
<ul class="org-ul">
<li><a href="https://www.postgresql.org/ftp/odbc/versions/msi/">https://www.postgresql.org/ftp/odbc/versions/msi/</a></li>
<li>Driver={PostgreSQL ANSI(x64)};Server=10.77.51.121 address;Port=31412;Database=test;</li>
<li>DRIVER={PostgreSQL Unicode(x64)};Server=10.77.51.121;Port=32232;DATABASE=obor;</li>
</ul>
</div>
</div>

<div id="outline-container-org21cfca3" class="outline-4">
<h4 id="org21cfca3"><span class="section-number-4">20.4.11.</span> Serial</h4>
</div>
<div id="outline-container-org28e75f0" class="outline-4">
<h4 id="org28e75f0"><span class="section-number-4">20.4.12.</span> userful SQL</h4>
<div class="outline-text-4" id="text-20-4-12">
<ul class="org-ul">
<li>SELECT * FROM pg<sub>stat</sub><sub>activity</sub> - Viewing current PostgreSQL queries</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgecaf3ad" class="outline-3">
<h3 id="orgecaf3ad"><span class="section-number-3">20.5.</span> Apache Druid</h3>
<div class="outline-text-3" id="text-20-5">
<ul class="org-ul">
<li><a href="https://druid.apache.org/docs/latest/design/index.html">https://druid.apache.org/docs/latest/design/index.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgdb9c112" class="outline-3">
<h3 id="orgdb9c112"><span class="section-number-3">20.6.</span> in memory additional DB with replication</h3>
<div class="outline-text-3" id="text-20-6">
<p>
move database files to tmpfs
</p>
</div>
</div>
<div id="outline-container-orge161742" class="outline-3">
<h3 id="orge161742"><span class="section-number-3">20.7.</span> DB vertica community edition</h3>
<div class="outline-text-3" id="text-20-7">
<p>
limited to 1TB of data and 3 database nodes
</p>
</div>
</div>
</div>

<div id="outline-container-org2ed4d67" class="outline-2">
<h2 id="org2ed4d67"><span class="section-number-2">21.</span> Oracle</h2>
<div class="outline-text-2" id="text-21">
</div>
<div id="outline-container-org9abcf52" class="outline-3">
<h3 id="org9abcf52"><span class="section-number-3">21.1.</span> Oracle Instant Client</h3>
<div class="outline-text-3" id="text-21-1">
<p>
set of libraries and utilites to connecto to Oracle database
 <a href="https://www.oracle.com/database/technologies/instant-client.html">https://www.oracle.com/database/technologies/instant-client.html</a>
</p>
</div>
</div>
<div id="outline-container-org7e68114" class="outline-3">
<h3 id="org7e68114"><span class="section-number-3">21.2.</span> SQL* plus</h3>
<div class="outline-text-3" id="text-21-2">
<ul class="org-ul">
<li>export NLS<sub>LANG</sub>=AMERICAN<sub>AMERICA.AL32UTF8</sub>;</li>
<li>set colsep '|' set linesize 167 set pagesize 30 set pagesize 1000</li>
<li>connection:
<ul class="org-ul">
<li>sqlplus username/password@host:port/servicex</li>
<li>or username/password@'(DESCRIPTION = (ADDRESS<sub>LIST</sub> = (ADDRESS = (PROTOCOL = TCP)(HOST = ip<sub>or</sub><sub>dns</sub>)(PORT = p))) (CONNECT<sub>DATA</sub> = (SERVICE<sub>NAME</sub> = s)))</li>
<li>or with /opt/oracle/instantclient<sub>19</sub><sub>3</sub>/network/admin/tnsnames.ora - sqlplus x/y@myDb</li>
</ul></li>
</ul>
<ul class="org-ul">
<li>DBever <a href="https://github.com/dbeaver">https://github.com/dbeaver</a>
<ul class="org-ul">
<li>Небходим instance client и несколько дополнительных jar библиотек с оф сайта</li>
</ul></li>
</ul>
<div class="org-src-container">
<pre class="src src-sql">myDb  =
 (DESCRIPTION =
   (ADDRESS_LIST =
     (ADDRESS = (PROTOCOL = TCP)(<span style="color: #8ac6f2; font-weight: bold;">Host</span> = c)(Port =a))
   )
 (CONNECT_DATA =
   (SERVICE_NAME =b)
 )
)
</pre>
</div>

<p>
<b>SID and SERVICE<sub>NAME</sub></b>
</p>
<ul class="org-ul">
<li><a href="https://www.erpgreat.com/oracle-database/finding-oracle-sid-of-a-database.htm">https://www.erpgreat.com/oracle-database/finding-oracle-sid-of-a-database.htm</a></li>
<li><a href="http://qaru.site/questions/44184/how-sid-is-different-from-service-name-in-oracle-tnsnamesora">http://qaru.site/questions/44184/how-sid-is-different-from-service-name-in-oracle-tnsnamesora</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgcbbe9c2" class="outline-3">
<h3 id="orgcbbe9c2"><span class="section-number-3">21.3.</span> Constraints</h3>
<div class="outline-text-3" id="text-21-3">
<dl class="org-dl">
<dt>C</dt><dd>Check on a table - Column</dd>
<dt>O</dt><dd>Read Only on a view - Object</dd>
<dt>P</dt><dd>Primary Key - Object</dd>
<dt>R</dt><dd>Referential AKA Foreign Key - Column</dd>
<dt>U</dt><dd>Unique Key - Column</dd>
<dt>V</dt><dd>Check Option on a view - Object</dd>
</dl>
</div>
</div>
<div id="outline-container-orgb88ccb0" class="outline-3">
<h3 id="orgb88ccb0"><span class="section-number-3">21.4.</span> SQL useful</h3>
<div class="outline-text-3" id="text-21-4">
<ul class="org-ul">
<li><a href="http://sql.fliplinux.com/oracle-5.html">http://sql.fliplinux.com/oracle-5.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Oracle_metadata">https://en.wikipedia.org/wiki/Oracle_metadata</a></li>
<li>dependencies - select * from dba<sub>dependencies</sub> where referenced<sub>type</sub>='TABLE' and referenced<sub>name</sub>='Z#POOLING';</li>
<li>constrains - SELECT table<sub>name</sub>, constraint<sub>name</sub>, constraint<sub>type</sub> FROM user<sub>constraints</sub>;</li>
<li>поля таблицы - DESC tbname;</li>
</ul>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">All foregn keys:</span>
<span style="color: #8ac6f2; font-weight: bold;">SELECT</span>
        c_list.<span style="color: #8ac6f2; font-weight: bold;">CONSTRAINT_NAME</span> <span style="color: #8ac6f2; font-weight: bold;">as</span> <span style="color: #8ac6f2; font-weight: bold;">NAME</span>,
        c_src.<span style="color: #8ac6f2; font-weight: bold;">TABLE_NAME</span> <span style="color: #8ac6f2; font-weight: bold;">as</span> SRC_TABLE,
        c_src.<span style="color: #8ac6f2; font-weight: bold;">COLUMN_NAME</span> <span style="color: #8ac6f2; font-weight: bold;">as</span> SRC_COLUMN,
        c_dest.<span style="color: #8ac6f2; font-weight: bold;">TABLE_NAME</span> <span style="color: #8ac6f2; font-weight: bold;">as</span> DEST_TABLE, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">primary key table</span>
        c_dest.<span style="color: #8ac6f2; font-weight: bold;">COLUMN_NAME</span> <span style="color: #8ac6f2; font-weight: bold;">as</span> DEST_COLUMN
<span style="color: #8ac6f2; font-weight: bold;">FROM</span> ALL_CONSTRAINTS c_list,
     ALL_CONS_COLUMNS c_src,
     ALL_CONS_COLUMNS c_dest
<span style="color: #8ac6f2; font-weight: bold;">WHERE</span> c_list.<span style="color: #8ac6f2; font-weight: bold;">CONSTRAINT_NAME</span> = c_src.<span style="color: #8ac6f2; font-weight: bold;">CONSTRAINT_NAME</span>
  <span style="color: #8ac6f2; font-weight: bold;">AND</span> c_list.R_CONSTRAINT_NAME = c_dest.<span style="color: #8ac6f2; font-weight: bold;">CONSTRAINT_NAME</span>
  <span style="color: #8ac6f2; font-weight: bold;">AND</span> c_list.CONSTRAINT_TYPE = <span style="color: #95e454;">'R'</span>
  <span style="color: #8ac6f2; font-weight: bold;">AND</span> c_src.<span style="color: #8ac6f2; font-weight: bold;">TABLE_NAME</span> = <span style="color: #95e454;">'Z#NU_AT_DEP_PRC'</span> <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">table with foreign keys</span>
<span style="color: #8ac6f2; font-weight: bold;">GROUP</span> <span style="color: #8ac6f2; font-weight: bold;">BY</span> c_list.<span style="color: #8ac6f2; font-weight: bold;">CONSTRAINT_NAME</span>,
          c_src.<span style="color: #8ac6f2; font-weight: bold;">TABLE_NAME</span>,
         c_src.<span style="color: #8ac6f2; font-weight: bold;">COLUMN_NAME</span>,
         c_dest.<span style="color: #8ac6f2; font-weight: bold;">TABLE_NAME</span>,
         c_dest.<span style="color: #8ac6f2; font-weight: bold;">COLUMN_NAME</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd8c5087" class="outline-3">
<h3 id="orgd8c5087"><span class="section-number-3">21.5.</span> Memory Architecture</h3>
<div class="outline-text-3" id="text-21-5">
<ul class="org-ul">
<li><a href="https://docs.oracle.com/database/121/CNCPT/memory.htm">https://docs.oracle.com/database/121/CNCPT/memory.htm</a></li>
<li></li>

<li>System global area (SGA) - for one Oracle Database instance - All server and background processes share the
SGA
<ul class="org-ul">
<li>Database Buffer Cache</li>
<li>In-Memory Column Store</li>
<li>Redo Log Buffer</li>
<li>Shared Pool</li>
<li>Large Pool</li>
<li>Java Pool</li>
<li>Streams Pool</li>
<li>Fixed SGA</li>
</ul></li>
<li>Program global area (PGA) - exists for each server process and background process. The collection of
individual PGAs is the total instance PGA, or instance PGA.
<ul class="org-ul">
<li>пространство стека - это память, хранящая переменные сеансов, массивы сеансов и т.д.</li>
<li>информация сеанса - если Oracle работает не в мультинитевом режиме, то информация сеанса хранится в PGA. В
противном случае, информация сеанса хранится в SGA.</li>
<li>приватная SQL-область - это часть PGA, где хранятся связанные переменные и буферы реального времени</li>
</ul></li>
<li>User global area (UGA) - user session</li>
<li>Software code areas - areas are portions of memory used to store code that is being run or can be run</li>
</ul>

<p>
Процессы:
</p>
<ul class="org-ul">
<li>пользовательские процессы - управляет вводом и взаимодействует с серверными процессами</li>
<li>процессы Oracle
<ul class="org-ul">
<li>серверные процессы (выполняющие функции для активных процессов)</li>
<li>фоновые процессы (выполняют функции СУРБД в целом).</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org70ea1ce" class="outline-3">
<h3 id="org70ea1ce"><span class="section-number-3">21.6.</span> cx<sub>Oracle</sub> python</h3>
<div class="outline-text-3" id="text-21-6">
<p>
<a href="https://www.oracle.com/technetwork/articles/dsl/prez-python-queries-101587.html">https://www.oracle.com/technetwork/articles/dsl/prez-python-queries-101587.html</a>
</p>

<p>
<b>INSTALL</b>
</p>
<ul class="org-ul">
<li>bashrc:
<ul class="org-ul">
<li>export LD<sub>LIBRARY</sub><sub>PATH</sub>=/opt/oracle/instantclient<sub>19</sub><sub>3</sub>:$LD<sub>LIBRARY</sub><sub>PATH</sub></li>
<li>export PATH=/opt/oracle/instantclient<sub>19</sub><sub>3</sub>:$PATH</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgb4d9aa6" class="outline-3">
<h3 id="orgb4d9aa6"><span class="section-number-3">21.7.</span> characters</h3>
<div class="outline-text-3" id="text-21-7">
<ul class="org-ul">
<li>если создать таблицу с именами полей в кавычках, то к ним можно обращаться только в кавычках</li>
<li>By default, Oracle identifiers (table names, column names, etc.) are case- insensitive.</li>
<li>You can make them case-sensitive by using quotes around them (eg: SELECT * FROM "My<sub>Table</sub>" WHERE
"my<sub>field</sub>" = 1 )</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgeca5bd7" class="outline-2">
<h2 id="orgeca5bd7"><span class="section-number-2">22.</span> ETL vs. ELT</h2>
<div class="outline-text-2" id="text-22">
<ul class="org-ul">
<li>ETL (Extract, Transform, Load) - Extract -&gt; Staging<sub>Area</sub> -&gt; T&amp;L</li>
<li>ELT (Extract, Load, Transform) - Extract&amp;Load -&gt; Hadoop -&gt; Transform -&gt; PureData System for analysisn and analisys</li>
</ul>
</div>
</div>
<div id="outline-container-org621ecf8" class="outline-2">
<h2 id="org621ecf8"><span class="section-number-2">23.</span> ETL Extract, Transform, Load- traditional ETL paradigm - batch-driven</h2>
<div class="outline-text-2" id="text-23">
<ul class="org-ul">
<li>new ETL paradigm - Kafka - Change Data Capture(CDC) - stream - event-driven</li>
</ul>
</div>

<div id="outline-container-org843f719" class="outline-3">
<h3 id="org843f719"><span class="section-number-3">23.1.</span> targets</h3>
<div class="outline-text-3" id="text-23-1">
<ul class="org-ul">
<li>Привести все данные к единой системе значений и детализации, попутно обеспечив их качество и
надежность;</li>
<li>после преобразования можно было понять, из каких именно исходных данных и сумм собралась каждая
строчка преобразованных данных.</li>
</ul>
</div>
</div>

<div id="outline-container-org4c8f95f" class="outline-3">
<h3 id="org4c8f95f"><span class="section-number-3">23.2.</span> process</h3>
<div class="outline-text-3" id="text-23-2">
<ul class="org-ul">
<li>загрузка</li>
<li>очистка от ошибок - проверяются на корректность и полноту, составляется отчет об ошибках для
исправления; -&gt; валидационная таблица</li>
<li>мэппинг со справочниками целевой системы</li>
<li>консолидация от транзакций до агрегатов - Процесс агрегации данных -</li>
<li>drill-down из целевой системы</li>
</ul>
</div>
</div>


<div id="outline-container-orga9ea040" class="outline-3">
<h3 id="orga9ea040"><span class="section-number-3">23.3.</span> Full and Incremental Loading</h3>
<div class="outline-text-3" id="text-23-3">
<p>
incrementa:
</p>
<ul class="org-ul">
<li>streaming incremental load</li>
<li>batch incremental load</li>
</ul>
</div>
</div>
<div id="outline-container-orgb02f5db" class="outline-3">
<h3 id="orgb02f5db"><span class="section-number-3">23.4.</span> CDC</h3>
<div class="outline-text-3" id="text-23-4">
<ul class="org-ul">
<li>Triggers attached to tables -  significant performance impact</li>
<li>logical Replication - feature of RDBMS</li>
</ul>
</div>
</div>
<div id="outline-container-orgaa96166" class="outline-3">
<h3 id="orgaa96166"><span class="section-number-3">23.5.</span> Spring Cloud Data Flow</h3>
<div class="outline-text-3" id="text-23-5">
<p>
for building real-time data pipelines and batch processes
</p>
</div>
</div>
<div id="outline-container-org3528b15" class="outline-3">
<h3 id="org3528b15"><span class="section-number-3">23.6.</span> Talend Open Studio</h3>
<div class="outline-text-3" id="text-23-6">
<p>
limits: <a href="https://www.talend.com/products/application-integration/application-integration-compare-all/?_ga=2.8246066.1816291292.1561098962-859926622.1561098962">https://www.talend.com/products/application-integration/application-integration-compare-all/?_ga=2.8246066.1816291292.1561098962-859926622.1561098962</a>
</p>
<ul class="org-ul">
<li>Open Source ETL and Free Data Integration</li>
</ul>
<p>
cons:
</p>
<ul class="org-ul">
<li>windows, mac</li>
</ul>
</div>
</div>
<div id="outline-container-org080ca52" class="outline-3">
<h3 id="org080ca52"><span class="section-number-3">23.7.</span> staging tables Промежуточные таблицы</h3>
<div class="outline-text-3" id="text-23-7">
<p>
лучше в отдельной базе данных или схеме
</p>
</div>
</div>
<div id="outline-container-orgfea462a" class="outline-3">
<h3 id="orgfea462a"><span class="section-number-3">23.8.</span> concurrent vs sequential</h3>
<div class="outline-text-3" id="text-23-8">
<ol class="org-ol">
<li>нет ли зависимостей между тасками-сессиями</li>
<li>поддерживает ли источник и таргет паралельную загрузку. Concurrent capability</li>
<li>restartability - насколько проблематично будет рестартовать, все ли
таски будут перестартовывать или только та что упала</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org922ce2e" class="outline-2">
<h2 id="org922ce2e"><span class="section-number-2">24.</span> Apache Airflow</h2>
<div class="outline-text-2" id="text-24">
<ul class="org-ul">
<li><a href="https://airflow.readthedocs.io/en/stable/">https://airflow.readthedocs.io/en/stable/</a></li>
<li><a href="https://airflow.apache.org/docs/stable/start.html">https://airflow.apache.org/docs/stable/start.html</a></li>
<li><a href="https://github.com/apache/airflow">https://github.com/apache/airflow</a></li>
</ul>
</div>

<div id="outline-container-org46b5836" class="outline-3">
<h3 id="org46b5836"><span class="section-number-3">24.1.</span> terms</h3>
<div class="outline-text-3" id="text-24-1">
<ul class="org-ul">
<li><b>upstream tasks</b> t1 &gt;&gt; t2 - t1 upstream for t2</li>
<li>Dag - graph of tasks-operators - code, define tasks - (no data processing) must executed quickly - seconds</li>
<li>task - implementation of operator - inherit arguments from dag
<ul class="org-ul">
<li>task<sub>id</sub></li>
<li>dag - a reference to the dag the task is attached to (if any)</li>
<li>start<sub>date</sub> (not required)</li>
</ul></li>
<li>Operator - create object that became node in the dag</li>
<li>Hooks - keep authentication code and information out of pipelines</li>
</ul>
</div>
</div>

<div id="outline-container-orgb91a7b0" class="outline-3">
<h3 id="orgb91a7b0"><span class="section-number-3">24.2.</span> theory</h3>
<div class="outline-text-3" id="text-24-2">
<ul class="org-ul">
<li><a href="https://habr.com/ru/company/mailru/blog/339392/">https://habr.com/ru/company/mailru/blog/339392/</a></li>
<li>practice <a href="https://github.com/DerekWaiFuChung/DerekWiki/wiki/airflow">https://github.com/DerekWaiFuChung/DerekWiki/wiki/airflow</a></li>
<li>pro <a href="https://medium.com/datareply/airflow-lesser-known-tips-tricks-and-best-practises-cf4d4a90f8f">https://medium.com/datareply/airflow-lesser-known-tips-tricks-and-best-practises-cf4d4a90f8f</a></li>
</ul>
<p>
cons:
</p>
<ul class="org-ul">
<li>is not a data streaming solution. Tasks do not move data from one to the other (though tasks can exchange
metadata!)</li>
<li>Workflows are expected to be mostly static or slowly changing</li>
</ul>

<p>
Проблемы:
</p>
<ul class="org-ul">
<li>limited memory for load of task - чаще, динамический DAG(не ясно), резервированные таски, staging</li>
<li>сохранять данные которые свалили таску - logging</li>

<li>find out Hooks to store connection information</li>
<li>look at hooks and install required libraries</li>
<li>just write ETL code (separate connections-conn!)</li>
<li>create operator with test</li>
<li>write DAG</li>
</ul>

<p>
quick:
</p>
<ul class="org-ul">
<li>pip install 'apache-airflow[mysql]' &#x2013;user</li>
<li>add export PATH=$PATH:~/.local/bin</li>
<li>airflow initdb</li>
<li>airflow webserver -p 8080</li>
<li>airflow scheduler ???????</li>
</ul>

<p>
25 дней назад
</p>
<ul class="org-ul">
<li>Возобновление дага после завершения по dag<sub>timeout</sub> возможно, а после принудительной остановки - нет</li>
<li>чтобы возобновить даг с нужной таски нужнос сначала выставить его статус - Success</li>
<li>у тасок завершившихся по таймауту дага нет никаких отличий - нужно проверить лог каждой таски</li>
</ul>
</div>
</div>
<div id="outline-container-org51c293a" class="outline-3">
<h3 id="org51c293a"><span class="section-number-3">24.3.</span> variables</h3>
<div class="outline-text-3" id="text-24-3">
<p>
<a href="https://airflow.apache.org/docs/apache-airflow/stable/howto/variable.html">https://airflow.apache.org/docs/apache-airflow/stable/howto/variable.html</a>
<a href="https://airflow.apache.org/docs/apache-airflow/stable/concepts.html#concepts-variables">https://airflow.apache.org/docs/apache-airflow/stable/concepts.html#concepts-variables</a>
</p>

<p>
from airflow.models import Variable
foo = Variable.get("foo")
</p>
</div>
</div>

<div id="outline-container-orgd5f2431" class="outline-3">
<h3 id="orgd5f2431"><span class="section-number-3">24.4.</span> Hooks</h3>
<div class="outline-text-3" id="text-24-4">
<p>
<a href="https://pacuna.io/data-engineering/etl/2018/07/29/etl-postgres-to-postgres.html">https://pacuna.io/data-engineering/etl/2018/07/29/etl-postgres-to-postgres.html</a>
</p>
<ul class="org-ul">
<li>PostgresqlHook &lt;- DbApiHook &lt;- BaseHook</li>
<li>airflow.hooks.postgres<sub>hook.PostgresHook</sub> <a href="https://airflow.apache.org/_api/airflow/hooks/postgres_hook/index.html">https://airflow.apache.org/_api/airflow/hooks/postgres_hook/index.html</a></li>
<li>airflow/hooks/dbapi<sub>hook.py</sub> <a href="https://github.com/apache/airflow/blob/master/airflow/hooks/dbapi_hook.py">https://github.com/apache/airflow/blob/master/airflow/hooks/dbapi_hook.py</a></li>
<li>airflow/hooks/base<sub>hook.py</sub> <a href="https://github.com/apache/airflow/blob/master/airflow/hooks/base_hook.py">https://github.com/apache/airflow/blob/master/airflow/hooks/base_hook.py</a></li>
</ul>
</div>
</div>

<div id="outline-container-org67e4979" class="outline-3">
<h3 id="org67e4979"><span class="section-number-3">24.5.</span> components</h3>
<div class="outline-text-3" id="text-24-5">
<p>
webserver -
scheduler -
database - may be any
</p>

<p>
Airflow CLI doesn’t depend on the Webserver or Scheduler, but it depends on the DB backend.
</p>
</div>
</div>
<div id="outline-container-orgab14af5" class="outline-3">
<h3 id="orgab14af5"><span class="section-number-3">24.6.</span> scheduler</h3>
<div class="outline-text-3" id="text-24-6">
<ul class="org-ul">
<li>scheduler runs your job one <b>schedule<sub>interval</sub></b> AFTER the start date, at the END of the period</li>
<li>first run created based on start<sub>date</sub>, next on schedule<sub>interval</sub></li>
</ul>

<p>
catchup - запуск дага за интервал, если даг был выключен какое-то время.
</p>
<ul class="org-ul">
<li>используется для инкрементальной загрузки по датам, например.</li>
<li>если  "depends<sub>on</sub><sub>past</sub>": False, - запуск будет запущен и тут же остановлен</li>
</ul>
</div>
</div>
<div id="outline-container-org58c1199" class="outline-3">
<h3 id="org58c1199"><span class="section-number-3">24.7.</span> dag</h3>
<div class="outline-text-3" id="text-24-7">
<p>
required
</p>
<ul class="org-ul">
<li>dag<sub>id</sub></li>
</ul>


<p>
not required:
</p>
<ul class="org-ul">
<li>start<sub>date</sub> - начала отсчета</li>
<li>schedule<sub>interval</sub> - start<sub>date</sub>+schedule<sub>interval</sub> - первый запуск.  - None - @once - @hourly - @daily -
@weekly - @monthly - @yearly</li>
<li>max<sub>active</sub><sub>runs</sub></li>
<li>end<sub>date</sub> - прекратить запуски</li>
<li>default<sub>args</sub>: dict - used as constructor keyword parameters when
initialising operators.</li>
<li>params (dict) – a dictionary of DAG level parameters that are made accessible in templates,
namespaced under params. These params can be overridden at the task level.</li>

<li>concurrency (int) – the number of task instances allowed to run concurrently</li>
<li>max<sub>active</sub><sub>runs</sub> (int) – maximum number of active DAG runs</li>
</ul>

<p>
task dependency
op1 &gt;&gt; [op2,op3] &gt;&gt; op4
</p>

<p>
1 определить связи - выдилить блоки которые имеют одну зависимость и блоки которые имеют несколько зависимостей
2 построить без отношения многие ко многим
3 реализовать отношение многие ко многим путем повторения связей
</p>
</div>
<div id="outline-container-org5667e5d" class="outline-4">
<h4 id="org5667e5d"><span class="section-number-4">24.7.1.</span> create dag:</h4>
<div class="outline-text-4" id="text-24-7-1">
<ul class="org-ul">
<li>mdir ~/airflow/dags</li>
<li>touch /airflow/dags/hello.py</li>
<li>pkill -F ~/airflow/airflow-webserver.pid ; rm ~/airflow/airflow-webserver.pid</li>
<li>airflow initdb</li>
<li>airflow webserver -p 8080</li>
<li>airflow scheduler</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org2b1d877" class="outline-3">
<h3 id="org2b1d877"><span class="section-number-3">24.8.</span> Operator</h3>
<div class="outline-text-3" id="text-24-8">
<ul class="org-ul">
<li>BaseOperator <a href="https://github.com/apache/airflow/blob/master/airflow/models/baseoperator.py">https://github.com/apache/airflow/blob/master/airflow/models/baseoperator.py</a></li>
<li>Custom operator <a href="https://airflow.apache.org/docs/stable/howto/custom-operator.html">https://airflow.apache.org/docs/stable/howto/custom-operator.html</a></li>
</ul>
<p>
Operators:
</p>
<ul class="org-ul">
<li>BashOperator - bash command</li>
<li>PythonOperator - PythonOperator</li>
<li>EmailOperator</li>
<li>SimpleHttpOperator - HTTP request</li>
<li>MySqlOperator, PostgresOperator, JdbcOperator - wrappers for hooks</li>
</ul>
</div>

<div id="outline-container-org4b1a56b" class="outline-4">
<h4 id="org4b1a56b"><span class="section-number-4">24.8.1.</span> Pipeline difinition:</h4>
<div class="outline-text-4" id="text-24-8-1">
<p>
t1&gt;&gt;[t2,t3]
</p>
<ul class="org-ul">
<li>t2 is downstream of t1</li>
</ul>


<ul class="org-ul">
<li>depends<sub>on</sub><sub>past</sub> = False - a task should not be triggered unless the previous instance of a task completed successfully</li>
<li>wait<sub>for</sub><sub>downstream</sub> = False - wait for preview instance this instance downstream instance! Becouse
downstrem one may change same data of our task.</li>
</ul>
</div>
</div>

<div id="outline-container-orge4a927e" class="outline-4">
<h4 id="orge4a927e"><span class="section-number-4">24.8.2.</span> OracleOperator</h4>
<div class="outline-text-4" id="text-24-8-2">
<p>
<a href="https://stackoverflow.com/questions/59785674/airflow-oracle-operator">https://stackoverflow.com/questions/59785674/airflow-oracle-operator</a>
<a href="https://airflow.apache.org/docs/stable/_modules/airflow/operators/oracle_operator.html">https://airflow.apache.org/docs/stable/_modules/airflow/operators/oracle_operator.html</a>
</p>
</div>
</div>
<div id="outline-container-orgbded1bf" class="outline-4">
<h4 id="orgbded1bf"><span class="section-number-4">24.8.3.</span> PythonOperator</h4>
<div class="outline-text-4" id="text-24-8-3">
<div class="org-src-container">
<pre class="src src-python"> <span style="color: #8ac6f2; font-weight: bold;">def</span> <span style="color: #cae682; font-weight: bold;">my_sleeping_function</span>(random_base):
     <span style="color: #f08080; font-style: italic;">"""This is a function that will run within the DAG execution"""</span>
     time.sleep(random_base)

 <span style="color: #cae682;">task</span> = PythonOperator(
         task_id=<span style="color: #95e454;">'sleep_for_'</span> + <span style="color: #e5786d;">str</span>(i),
         python_callable=my_sleeping_function,
         op_kwargs={<span style="color: #95e454;">'random_base'</span>: <span style="color: #e5786d;">float</span>(i) / 10},
         dag=dag,
     )
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e0905c" class="outline-4">
<h4 id="org3e0905c"><span class="section-number-4">24.8.4.</span> PythonOperator context</h4>
<div class="outline-text-4" id="text-24-8-4">
<div class="org-src-container">
<pre class="src src-python">
 {
             <span style="color: #95e454;">'dag'</span>: task.dag,
             <span style="color: #95e454;">'ds'</span>: ds,
             <span style="color: #95e454;">'next_ds'</span>: next_ds,
             <span style="color: #95e454;">'next_ds_nodash'</span>: next_ds_nodash,
             <span style="color: #95e454;">'prev_ds'</span>: prev_ds,
             <span style="color: #95e454;">'prev_ds_nodash'</span>: prev_ds_nodash,
             <span style="color: #95e454;">'ds_nodash'</span>: ds_nodash,
             <span style="color: #95e454;">'ts'</span>: ts,
             <span style="color: #95e454;">'ts_nodash'</span>: ts_nodash,
             <span style="color: #95e454;">'ts_nodash_with_tz'</span>: ts_nodash_with_tz,
             <span style="color: #95e454;">'yesterday_ds'</span>: yesterday_ds,
             <span style="color: #95e454;">'yesterday_ds_nodash'</span>: yesterday_ds_nodash,
             <span style="color: #95e454;">'tomorrow_ds'</span>: tomorrow_ds,
             <span style="color: #95e454;">'tomorrow_ds_nodash'</span>: tomorrow_ds_nodash,
             <span style="color: #95e454;">'END_DATE'</span>: ds,
             <span style="color: #95e454;">'end_date'</span>: ds,
             <span style="color: #95e454;">'dag_run'</span>: dag_run,
             <span style="color: #95e454;">'run_id'</span>: run_id,
             <span style="color: #95e454;">'execution_date'</span>: <span style="color: #8ac6f2; font-weight: bold;">self</span>.execution_date,
             <span style="color: #95e454;">'prev_execution_date'</span>: prev_execution_date,
             <span style="color: #95e454;">'next_execution_date'</span>: next_execution_date,
             <span style="color: #95e454;">'latest_date'</span>: ds,
             <span style="color: #95e454;">'macros'</span>: macros,
             <span style="color: #95e454;">'params'</span>: params,
             <span style="color: #95e454;">'tables'</span>: tables,
             <span style="color: #95e454;">'task'</span>: task,
             <span style="color: #95e454;">'task_instance'</span>: <span style="color: #8ac6f2; font-weight: bold;">self</span>,
             <span style="color: #95e454;">'ti'</span>: <span style="color: #8ac6f2; font-weight: bold;">self</span>,
             <span style="color: #95e454;">'task_instance_key_str'</span>: ti_key_str,
             <span style="color: #95e454;">'conf'</span>: configuration,
             <span style="color: #95e454;">'test_mode'</span>: <span style="color: #8ac6f2; font-weight: bold;">self</span>.test_mode,
             <span style="color: #95e454;">'var'</span>: {
                 <span style="color: #95e454;">'value'</span>: VariableAccessor(),
                 <span style="color: #95e454;">'json'</span>: VariableJsonAccessor()
             },
             <span style="color: #95e454;">'inlets'</span>: task.inlets,
             <span style="color: #95e454;">'outlets'</span>: task.outlets,
 }
</pre>
</div>

<p>
{'conf': &lt;airflow.configuration.AirflowConfigParser object at 0x7fd577193b20&gt;,
'dag': &lt;DAG: t2&gt;,
'ds': '2021-04-07',
'next<sub>ds</sub>':
'2021-04-07',
'next<sub>ds</sub><sub>nodash</sub>': '20210407',
'prev<sub>ds</sub>': '2021-04-07',
'prev<sub>ds</sub><sub>nodash</sub>': '20210407',
'ds<sub>nodash</sub>': '20210407',
'ts': '2021-04-07T01:20:00+00:00',
'ts<sub>nodash</sub>': '20210407T012000',
'ts<sub>nodash</sub><sub>with</sub><sub>tz</sub>': '20210407T012000+0000',
'yesterday<sub>ds</sub>': '2021-04-06',
 'yesterday<sub>ds</sub><sub>nodash</sub>': '20210406',
'tomorrow<sub>ds</sub>': '2021-04-08',
'tomorrow<sub>ds</sub><sub>nodash</sub>': '20210408',
'END<sub>DATE</sub>': '2021-04-07',
'end<sub>date</sub>':
'2021-04-07',
'dag<sub>run</sub>': &lt;DagRun t2 @ 2021-04-07 01:20:00+00:00: scheduled_<sub>2021</sub>-04-07T01:20:00+00:00, externally triggered: False&gt;,
</p>

<p>
'run<sub>id</sub>': 'scheduled_<sub>2021</sub>-04-07T01:20:00+00:00',
'execution<sub>date</sub>': &lt;Pendulum [2021-04-07T01:20:00+00:00]&gt;,
'prev<sub>execution</sub><sub>date</sub>': &lt;Pendulum [2021-04-07T01:15:00+00:00]&gt;,
'prev<sub>execution</sub><sub>date</sub><sub>success</sub>': &lt;Proxy at 0x7fd5723666c0 with factory &lt;function TaskInstance.get<sub>template</sub><sub>context</sub>.&lt;locals&gt;.&lt;lambda&gt; at 0x7fd5723c1f70&gt;&gt;,
 'prev<sub>start</sub><sub>date</sub><sub>success</sub>': &lt;Proxy at 0x7fd572368c80 with factory &lt;function TaskInstance.get<sub>template</sub><sub>context</sub>.&lt;locals&gt;.&lt;lambda&gt; at 0x7fd5723750d0&gt;&gt;,
 'next<sub>execution</sub><sub>date</sub>': &lt;Pendulum [2021-04-07T01:25:00+00:00]&gt;,
'latest<sub>date</sub>': '2021-04-07',
'macros': &lt;module 'airflow.macros' from '<i>home/u2</i>.local/lib/python3.8/site-packages/airflow/macros/_<sub>init</sub>_<sub>.py</sub>'&gt;,
'params': {},
'tables': None,
'task': &lt;Task(BranchPythonOperator): branc<sub>op</sub>&gt;,
'task<sub>instance</sub>': &lt;TaskInstance: t2.branc<sub>op</sub> 2021-04-07T01:20:00+00:00 [running]&gt;,
'ti': &lt;TaskInstance: t2.branc<sub>op</sub> 2021-04-07T01:20:00+00:00 [running]&gt;,
'task<sub>instance</sub><sub>key</sub><sub>str</sub>': 't2_<sub>branc</sub><sub>op</sub>_<sub>20210407</sub>',
'test<sub>mode</sub>': False,
'var': {'value': None, 'json': None},
'inlets': [],
'outlets': [],
'templates<sub>dict</sub>': None}
</p>
</div>
</div>
</div>

<div id="outline-container-org44074db" class="outline-3">
<h3 id="org44074db"><span class="section-number-3">24.9.</span> Tasks</h3>
<div class="outline-text-3" id="text-24-9">
<p>
<a href="https://airflow.apache.org/docs/apache-airflow/stable/concepts.html#trigger-rules">https://airflow.apache.org/docs/apache-airflow/stable/concepts.html#trigger-rules</a>
</p>
</div>

<div id="outline-container-orgd535dc7" class="outline-4">
<h4 id="orgd535dc7"><span class="section-number-4">24.9.1.</span> trigger<sub>rule</sub></h4>
<div class="outline-text-4" id="text-24-9-1">
<p>
all<sub>success</sub>: (default) all parents have succeeded
</p>

<p>
all<sub>failed</sub>: all parents are in a failed or upstream<sub>failed</sub> state
</p>

<p>
all<sub>done</sub>: all parents are done with their execution
</p>

<p>
one<sub>failed</sub>: fires as soon as at least one parent has failed, it does not wait for all parents to be done
</p>

<p>
one<sub>success</sub>: fires as soon as at least one parent succeeds, it does not wait for all parents to be done
</p>

<p>
none<sub>failed</sub>: all parents have not failed (failed or upstream<sub>failed</sub>) i.e. all parents have succeeded or been skipped
</p>

<p>
none<sub>failed</sub><sub>or</sub><sub>skipped</sub>: all parents have not failed (failed or upstream<sub>failed</sub>) and at least one parent has succeeded.
</p>

<p>
none<sub>skipped</sub>: no parent is in a skipped state, i.e. all parents are in a success, failed, or upstream<sub>failed</sub> state
</p>

<p>
dummy: dependencies are just for show, trigger at will
</p>
</div>
</div>
</div>
<div id="outline-container-org7ae10bc" class="outline-3">
<h3 id="org7ae10bc"><span class="section-number-3">24.10.</span> TaskGroup</h3>
<div class="outline-text-3" id="text-24-10">
<p>
from airflow.utils.task<sub>group</sub> import TaskGroup
</p>

<p>
with TaskGroup("group1") as group1:
    task1 = DummyOperator(task<sub>id</sub>="task1")
    task2 = DummyOperator(task<sub>id</sub>="task2")
</p>

<p>
task3 = DummyOperator(task<sub>id</sub>="task3")
</p>

<p>
group1 &gt;&gt; task3
</p>
</div>
</div>

<div id="outline-container-orga507158" class="outline-3">
<h3 id="orga507158"><span class="section-number-3">24.11.</span> airflow.cfg</h3>
<div class="outline-text-3" id="text-24-11">
<p>
Executors:
</p>
<ul class="org-ul">
<li>SequentialExecutor</li>
<li>LocalExecutor - good for single node, use parallelism</li>
<li>CeleryExecutor - distributed</li>
<li>KubernetesExecutor - temporary pod for each task to run</li>
</ul>
</div>
</div>
<div id="outline-container-orgdf0e4a2" class="outline-3">
<h3 id="orgdf0e4a2"><span class="section-number-3">24.12.</span> best practives</h3>
<div class="outline-text-3" id="text-24-12">
<ul class="org-ul">
<li>example dag <a href="https://github.com/apache/airflow/tree/master/airflow/example_dags">https://github.com/apache/airflow/tree/master/airflow/example_dags</a></li>
<li><a href="https://gtoonstra.github.io/etl-with-airflow/principles.html">https://gtoonstra.github.io/etl-with-airflow/principles.html</a>
<ul class="org-ul">
<li><a href="https://github.com/gtoonstra/etl-with-airflow/tree/master/examples">https://github.com/gtoonstra/etl-with-airflow/tree/master/examples</a></li>
</ul></li>
<li><a href="https://github.com/astronomer/airflow-guides/blob/master/guides/dag-best-practices.md">https://github.com/astronomer/airflow-guides/blob/master/guides/dag-best-practices.md</a></li>

<li>provide atomicy inside task (Airflow can retry a task if it fails)</li>
<li>tasks should produce the same outcome on every re-run
<ul class="org-ul">
<li>replace INSERT with UPSER</li>
<li>Never read the latest available data in a task. Read and write in a specific partition.</li>
<li>datetime.now() - should never be used inside a task</li>
</ul></li>
</ul>

<p>
<b>start<sub>date</sub></b> parameter in a DAG - reexecution of historical data
</p>
</div>

<div id="outline-container-org5746c7b" class="outline-4">
<h4 id="org5746c7b"><span class="section-number-4">24.12.1.</span> UPSERT in postgresql</h4>
<div class="outline-text-4" id="text-24-12-1">
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #8ac6f2; font-weight: bold;">INSERT</span> <span style="color: #8ac6f2; font-weight: bold;">INTO</span> customers (<span style="color: #8ac6f2; font-weight: bold;">NAME</span>, email)
<span style="color: #8ac6f2; font-weight: bold;">VALUES</span>(<span style="color: #95e454;">'Microsoft'</span>,<span style="color: #95e454;">'hotline@microsoft.com'</span>)
<span style="color: #8ac6f2; font-weight: bold;">ON</span> CONFLICT <span style="color: #8ac6f2; font-weight: bold;">ON</span> <span style="color: #8ac6f2; font-weight: bold;">CONSTRAINT</span> customers_name_key
DO NOTHING;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6bcbc24" class="outline-3">
<h3 id="org6bcbc24"><span class="section-number-3">24.13.</span> local server</h3>
<div class="outline-text-3" id="text-24-13">
<p>
pip3 install apache-airflow &#x2013;user
cd ~/airflow
airflow initdb # only first time
airflow scheduler &amp;
airflow webserver -p 8080 &amp;
wait
</p>
</div>
</div>

<div id="outline-container-org29fa90f" class="outline-3">
<h3 id="org29fa90f"><span class="section-number-3">24.14.</span> Incremental Record Filtering</h3>
<div class="outline-text-3" id="text-24-14">
<ul class="org-ul">
<li>break out your pipelines into incremental extracts and loads
<ul class="org-ul">
<li>Last Modified Date - each record in your source system contains a column containing the last time the
record was modified</li>
<li>Sequence IDs - last modified date is not available
<ul class="org-ul">
<li>when the source records are only being appended to and never updated</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4ba8ea5" class="outline-3">
<h3 id="org4ba8ea5"><span class="section-number-3">24.15.</span> deployment</h3>
<div class="outline-text-3" id="text-24-15">
<ul class="org-ul">
<li><a href="https://towardsdatascience.com/getting-started-with-airflow-locally-and-remotely-d068df7fcb4">https://towardsdatascience.com/getting-started-with-airflow-locally-and-remotely-d068df7fcb4</a></li>
<li>pycharm + docker <a href="https://medium.com/ninjavan-tech/setting-up-a-complete-local-development-environment-for-airflow-docker-pycharm-and-tests-3577ddb4ca94">https://medium.com/ninjavan-tech/setting-up-a-complete-local-development-environment-for-airflow-docker-pycharm-and-tests-3577ddb4ca94</a>
<ul class="org-ul">
<li><a href="https://github.com/ninja-van/airflow-boilerplate">https://github.com/ninja-van/airflow-boilerplate</a></li>
</ul></li>

<li><a href="https://www.gradiant.org/en/blog/apache-airflow-docker-en/">https://www.gradiant.org/en/blog/apache-airflow-docker-en/</a></li>
<li><a href="https://airflow.apache.org/docs/apache-airflow/2.0.2/start/docker.html">https://airflow.apache.org/docs/apache-airflow/2.0.2/start/docker.html</a></li>
</ul>
<p>
cd /home/airflow &amp;&amp; docker-compose down &amp;&amp; docker-compose up -d
</p>
</div>
<div id="outline-container-org2ae7bbc" class="outline-4">
<h4 id="org2ae7bbc"><span class="section-number-4">24.15.1.</span> docker-compose</h4>
<div class="outline-text-4" id="text-24-15-1">
<p>
&#x2014;
version: "3.7"
</p>

<p>
services:
</p>

<p>
backend:
  image: mysql:latest
  restart: unless-stopped
  command: &#x2013;default-authentication-plugin=mysql<sub>native</sub><sub>password</sub>
  networks:
</p>
<ul class="org-ul">
<li>internal</li>
</ul>
<p>
volumes:
</p>
<ul class="org-ul">
<li>"backend:/var/lib/mysql"</li>
</ul>
<p>
env<sub>file</sub>:
</p>
<ul class="org-ul">
<li>mysql.env</li>
</ul>

<p>
engine:
  restart: unless-stopped
  build: ./airflow-engine
  depends<sub>on</sub>:
</p>
<ul class="org-ul">
<li>backend</li>
</ul>
<p>
init: true
networks:
</p>
<ul class="org-ul">
<li>internal</li>
</ul>
<p>
volumes:
</p>
<ul class="org-ul">
<li>"engine:/root/airflow/"</li>
<li>./dags:/root/airflow/dags</li>
</ul>
<p>
ports:
</p>
<ul class="org-ul">
<li>"8080:8080"</li>
</ul>
<p>
env<sub>file</sub>:
</p>
<ul class="org-ul">
<li>mysql.env</li>
</ul>

<p>
networks:
  internal:
</p>

<p>
volumes:
  engine:
  backend:
</p>
</div>
</div>

<div id="outline-container-org35e87dd" class="outline-4">
<h4 id="org35e87dd"><span class="section-number-4">24.15.2.</span> Dockerfile</h4>
<div class="outline-text-4" id="text-24-15-2">
<p>
FROM python:3.7
</p>

<p>
RUN pip3 install 'apache-airflow[mysql,crypto]' mysql-connector-python
</p>

<p>
WORKDIR <i>root/airflow</i>
COPY airflow.sh airflow.sh
RUN chmod +x airflow.sh
COPY fernet.py fernet.py
COPY mysqlconnect.py mysqlconnect.py
CMD ./airflow.sh
</p>
</div>
</div>

<div id="outline-container-org4890c5b" class="outline-4">
<h4 id="org4890c5b"><span class="section-number-4">24.15.3.</span> ferenet.py</h4>
<div class="outline-text-4" id="text-24-15-3">
<p>
from cryptography.fernet import Fernet
import configparser
</p>

<p>
fernet<sub>key</sub> = Fernet.generate<sub>key</sub>().decode()
</p>

<p>
config = configparser.ConfigParser()
config.read('/root/airflow/airflow.cfg')
config['core']['fernet<sub>key</sub>'] = fernet<sub>key</sub>
with open('/root/airflow/airflow.cfg', 'w') as f:
   config.write(f)
</p>
</div>
</div>

<div id="outline-container-orga044f6e" class="outline-4">
<h4 id="orga044f6e"><span class="section-number-4">24.15.4.</span> mysqlconnect.py</h4>
<div class="outline-text-4" id="text-24-15-4">
<p>
from os import environ as env
import configparser
</p>

<p>
config = configparser.ConfigParser()
config.read('/root/airflow/airflow.cfg')
</p>

<p>
config['core']['sql<sub>alchemy</sub><sub>conn</sub>'] = 'mysql://{user}:{password}@backend/{db}'.format(user=env.get('MYSQL<sub>USER</sub>'), password=env.get('MYSQL<sub>PASSWORD</sub>'), db=env.get('MYSQL<sub>DATABASE</sub>'))
config['core']['executor'] = 'LocalExecutor'
with open('/root/airflow/airflow.cfg', 'w') as f:
     config.write(f)
</p>
</div>
</div>

<div id="outline-container-org48813ae" class="outline-4">
<h4 id="org48813ae"><span class="section-number-4">24.15.5.</span> airflow.sh</h4>
<div class="outline-text-4" id="text-24-15-5">
<p>
INIT<sub>FILE</sub>=.airflowinitialized
if [ ! -f "$INIT<sub>FILE</sub>" ]; then
</p>

<p>
airflow initdb
rm /root/airflow/airflow.db
</p>

<p>
python fernet.py
</p>

<p>
sleep 20
</p>

<p>
python mysqlconnect.py
airflow initdb
</p>

<p>
apt update &amp;&amp; apt install -y default-mysql-client
echo 'ALTER TABLE xcom MODIFY value LONGBLOB;' | mysql –h backend –u root –p$MYSQL<sub>ROOT</sub><sub>PASSWORD</sub> airflowdb
apt remove -y default-mysql-client
</p>

<p>
    touch "$INIT<sub>FILE</sub>"
fi
</p>

<p>
airflow scheduler &amp;
airflow webserver &amp;
wait
</p>
</div>
</div>
</div>

<div id="outline-container-org1b2da75" class="outline-3">
<h3 id="org1b2da75"><span class="section-number-3">24.16.</span> test</h3>
<div class="outline-text-3" id="text-24-16">
<p>
<a href="https://blog.usejournal.com/testing-in-airflow-part-1-dag-validation-tests-dag-definition-tests-and-unit-tests-2aa94970570c">https://blog.usejournal.com/testing-in-airflow-part-1-dag-validation-tests-dag-definition-tests-and-unit-tests-2aa94970570c</a>
</p>

<p>
airflow list<sub>dags</sub> - show errors
</p>
</div>

<div id="outline-container-org6c56e9b" class="outline-4">
<h4 id="org6c56e9b"><span class="section-number-4">24.16.1.</span> operator</h4>
<div class="outline-text-4" id="text-24-16-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #8ac6f2; font-weight: bold;">import</span> logging

<span style="color: #8ac6f2; font-weight: bold;">from</span> airflow.hooks.postgres_hook <span style="color: #8ac6f2; font-weight: bold;">import</span> PostgresHook
<span style="color: #8ac6f2; font-weight: bold;">from</span> airflow.hooks.oracle_hook <span style="color: #8ac6f2; font-weight: bold;">import</span> OracleHook
<span style="color: #8ac6f2; font-weight: bold;">from</span> airflow.models <span style="color: #8ac6f2; font-weight: bold;">import</span> BaseOperator
<span style="color: #8ac6f2; font-weight: bold;">from</span> airflow.utils.decorators <span style="color: #8ac6f2; font-weight: bold;">import</span> apply_defaults


<span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">PostgresToOracleOperator</span>(BaseOperator):
    <span style="color: #92a65e; font-weight: bold;">@apply_defaults</span>
    <span style="color: #8ac6f2; font-weight: bold;">def</span> <span style="color: #cae682; font-weight: bold;">__init__</span>(<span style="color: #8ac6f2; font-weight: bold;">self</span>, task_id, *args, **kwargs):
        <span style="color: #e5786d;">super</span>().__init__(task_id=task_id, *args, **kwargs)

    <span style="color: #8ac6f2; font-weight: bold;">def</span> <span style="color: #cae682; font-weight: bold;">execute</span>(<span style="color: #8ac6f2; font-weight: bold;">self</span>, context):
        <span style="color: #e5786d;">print</span>(<span style="color: #95e454;">"ok"</span>)




<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Operator Test</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> <span style="color: #e5786d;">__name__</span> == <span style="color: #95e454;">'__main__'</span>:
    <span style="color: #8ac6f2; font-weight: bold;">from</span> airflow <span style="color: #8ac6f2; font-weight: bold;">import</span> DAG
    <span style="color: #8ac6f2; font-weight: bold;">from</span> datetime <span style="color: #8ac6f2; font-weight: bold;">import</span> datetime
    <span style="color: #8ac6f2; font-weight: bold;">from</span> airflow.models <span style="color: #8ac6f2; font-weight: bold;">import</span> TaskInstance

    <span style="color: #cae682;">dag</span> = DAG(dag_id=<span style="color: #95e454;">'anydag'</span>, start_date=datetime.now())
    <span style="color: #cae682;">task</span> = PostgresToOracleOperator(dag=dag, task_id=<span style="color: #95e454;">'s'</span>)
    <span style="color: #cae682;">ti</span> = TaskInstance(task=task, execution_date=datetime.now())
    task.execute(ti.get_template_context())

</pre>
</div>
</div>
</div>
<div id="outline-container-org00d6aa3" class="outline-4">
<h4 id="org00d6aa3"><span class="section-number-4">24.16.2.</span> dag test</h4>
<div class="outline-text-4" id="text-24-16-2">
</div>
<ol class="org-ol">
<li><a id="org56f6545"></a>DAG Validation Test<br />
<div class="outline-text-5" id="text-24-16-2-1">
<p>
test for import errors
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgc25800b" class="outline-4">
<h4 id="orgc25800b"><span class="section-number-4">24.16.3.</span> task.execute</h4>
<div class="outline-text-4" id="text-24-16-3">
<ul class="org-ul">
<li>reqire database initialized</li>
<li>$airflow config get-value core sql<sub>alchemy</sub><sub>conn</sub> - path to database</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgb3eb42b" class="outline-3">
<h3 id="orgb3eb42b"><span class="section-number-3">24.17.</span> dynamic dag</h3>
<div class="outline-text-3" id="text-24-17">
<ul class="org-ul">
<li><a href="https://habr.com/en/company/mailru/blog/344398/">https://habr.com/en/company/mailru/blog/344398/</a></li>
<li><a href="https://stackoverflow.com/questions/39133376/airflow-dynamic-dag-and-task-ids">https://stackoverflow.com/questions/39133376/airflow-dynamic-dag-and-task-ids</a></li>
</ul>
</div>
</div>
<div id="outline-container-org3b8b595" class="outline-3">
<h3 id="org3b8b595"><span class="section-number-3">24.18.</span> pass data between operators</h3>
<div class="outline-text-3" id="text-24-18">
<p>
<b>Variables</b>
</p>
<ul class="org-ul">
<li><a href="https://github.com/gtoonstra/etl-with-airflow/blob/master/examples/etl-example/dags/orders_staging.py">https://github.com/gtoonstra/etl-with-airflow/blob/master/examples/etl-example/dags/orders_staging.py</a></li>
<li>Admin-Variables</li>
<li>baz = Variable.get("baz", default<sub>var</sub>=None)</li>
</ul>
</div>
</div>

<div id="outline-container-org7c7fe1e" class="outline-3">
<h3 id="org7c7fe1e"><span class="section-number-3">24.19.</span> макросы Jinja в Airflow</h3>
<div class="outline-text-3" id="text-24-19">
<ul class="org-ul">
<li><a href="https://habr.com/ru/company/mailru/blog/344398/">https://habr.com/ru/company/mailru/blog/344398/</a></li>
</ul>

<p>
Defined in context of BaseOperator.execute(self, context: Any)
</p>
<ul class="org-ul">
<li>get<sub>template</sub><sub>context</sub>  <a href="https://github.com/apache/airflow/blob/main/airflow/models/taskinstance.py">https://github.com/apache/airflow/blob/main/airflow/models/taskinstance.py</a></li>
<li>reference <a href="https://airflow.apache.org/docs/apache-airflow/stable/macros-ref.html">https://airflow.apache.org/docs/apache-airflow/stable/macros-ref.html</a></li>
</ul>


<ul class="org-ul">
<li>"{{ ds }}" - execution date</li>
<li>task.render<sub>template</sub>("{{ ds }}")</li>
</ul>

<p>
dates:
</p>
<ul class="org-ul">
<li>start<sub>date</sub> - от чего вообще начинаем</li>
<li>end<sub>date</sub> - когда больше не будем</li>
<li>execution<sub>date</sub> - как и ds показывается для какой даты сейчас запущен</li>
</ul>
</div>
</div>

<div id="outline-container-orga5837ad" class="outline-3">
<h3 id="orga5837ad"><span class="section-number-3">24.20.</span> parallism config</h3>
<div class="outline-text-3" id="text-24-20">
<p>
<b>dag parameters</b>:
</p>
<ul class="org-ul">
<li>max<sub>active</sub><sub>runs</sub>=1 - не больше одного дага паралельно запущенного</li>
</ul>



<p>
<b>config parameters</b>:
</p>

<p>
parallelism = 32
</p>

<p>
dag<sub>concurrency</sub> = 16
</p>

<p>
dags<sub>are</sub><sub>paused</sub><sub>at</sub><sub>creation</sub> = True
</p>

<p>
non<sub>pooled</sub><sub>task</sub><sub>slot</sub><sub>count</sub> = 128
</p>

<p>
max<sub>active</sub><sub>runs</sub><sub>per</sub><sub>dag</sub> = 16
</p>
</div>
</div>
<div id="outline-container-orge1a02bf" class="outline-3">
<h3 id="orge1a02bf"><span class="section-number-3">24.21.</span> skip task</h3>
<div class="outline-text-3" id="text-24-21">
<p>
You can leverage a SensorOperator more specifically the FileSensorOperator to check if a file exists. You can
then use the soft<sub>fail</sub> arg to mark the tasks as "skipped" when the file does not exist. This will allow the
DAG to succeed while maintaining the proper history of what occurred on the file check.
</p>
</div>
</div>

<div id="outline-container-org2261ae4" class="outline-3">
<h3 id="org2261ae4"><span class="section-number-3">24.22.</span> stop dag</h3>
<div class="outline-text-3" id="text-24-22">
<ol class="org-ol">
<li>kwargs['dag'].set<sub>dag</sub><sub>runs</sub><sub>state</sub>(State.FAILED) # without retry</li>
<li>raise AirflowException("asdas!") or ValueError("")</li>
</ol>
</div>
</div>
<div id="outline-container-org79a89c1" class="outline-3">
<h3 id="org79a89c1"><span class="section-number-3">24.23.</span> Executors</h3>
<div class="outline-text-3" id="text-24-23">
<p>
Are the mechanism by which task instances get run.
</p>
<ul class="org-ul">
<li>default - SequentialExecutor</li>
</ul>
</div>
</div>

<div id="outline-container-orgc0b0a58" class="outline-3">
<h3 id="orgc0b0a58"><span class="section-number-3">24.24.</span> Cross-DAG Dependencies (subdags)</h3>
<div class="outline-text-3" id="text-24-24">
<ul class="org-ul">
<li>visualize <a href="https://github.com/ms32035/airflow-dag-dependencies">https://github.com/ms32035/airflow-dag-dependencies</a></li>
</ul>
</div>
<div id="outline-container-org58650ab" class="outline-4">
<h4 id="org58650ab"><span class="section-number-4">24.24.1.</span> ExternalTaskSensor</h4>
<div class="outline-text-4" id="text-24-24-1">
<ul class="org-ul">
<li><a href="https://towardsdatascience.com/dependencies-between-dags-in-apache-airflow-2f5935cde3f0">https://towardsdatascience.com/dependencies-between-dags-in-apache-airflow-2f5935cde3f0</a></li>
<li><a href="https://airflow.apache.org/docs/apache-airflow/stable/howto/operator/external_task_sensor.html">https://airflow.apache.org/docs/apache-airflow/stable/howto/operator/external_task_sensor.html</a></li>
</ul>
<p>
ExternalTaskSensor
ExternalTaskMarker
</p>

<p>
trigger<sub>dagrun</sub>
</p>
</div>
</div>
<div id="outline-container-org06b1dcc" class="outline-4">
<h4 id="org06b1dcc"><span class="section-number-4">24.24.2.</span> <span class="todo TODO">TODO</span> TriggerDagRunOperator</h4>
</div>
<div id="outline-container-orgd259bc2" class="outline-4">
<h4 id="orgd259bc2"><span class="section-number-4">24.24.3.</span> <span class="todo TODO">TODO</span> dag.implicit<sub>dependencies</sub> = ['dag<sub>1</sub>', 'dag<sub>2</sub>']</h4>
</div>
<div id="outline-container-orgcc15967" class="outline-4">
<h4 id="orgcc15967"><span class="section-number-4">24.24.4.</span> SubDagOperator</h4>
<div class="outline-text-4" id="text-24-24-4">
<p>
Astronomer highly recommends staying away from SubDags. Airflow 1.10 has changed the default SubDag
execution method to use the Sequential Executor to work around deadlocks caused by SubDags
</p>

<p>
Since SubDAGs have been deprecated, the best practice is to use other Airflow features:
</p>
<ul class="org-ul">
<li>TaskGroups:</li>
<li>Cross-DAG dependencies - TriggerDagRunOperator, ExternalTaskSensor</li>
</ul>

<p>
<a href="https://www.astronomer.io/guides/subdags/">https://www.astronomer.io/guides/subdags/</a>
<a href="https://www.adoclib.com/blog/airflow-subdagoperator-deadlock.html">https://www.adoclib.com/blog/airflow-subdagoperator-deadlock.html</a>
<a href="https://medium.com/gumgum-tech/implement-dag-dependencies-using-triggerdagrun-operator-318b46036347">https://medium.com/gumgum-tech/implement-dag-dependencies-using-triggerdagrun-operator-318b46036347</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org471e444" class="outline-3">
<h3 id="org471e444"><span class="section-number-3">24.25.</span> Trigger Dag - JSON</h3>
<div class="outline-text-3" id="text-24-25">
<p>
{'kay':'value'}
</p>

<p>
PythonOperator
has property - provide<sub>context</sub> (deafult False)
</p>

<p>
two ways in which one can access the parameters:
</p>
<ul class="org-ul">
<li>kwargs['dag<sub>run</sub>'].conf - None or {'key':'123'}</li>
<li>.get('key')</li>
<li>{{ dag<sub>run.conf</sub>['key'] }}</li>
</ul>
</div>
</div>
<div id="outline-container-orgd85516f" class="outline-3">
<h3 id="orgd85516f"><span class="section-number-3">24.26.</span> update 2.0.2</h3>
<div class="outline-text-3" id="text-24-26">
<p>
<a href="https://airflow.apache.org/docs/apache-airflow/stable/upgrading-to-2.html">https://airflow.apache.org/docs/apache-airflow/stable/upgrading-to-2.html</a>
3.6+ not 3.9
</p>

<ol class="org-ol">
<li>airflow initdb -&gt; airflow db init</li>
<li></li>
</ol>
<p>
[webserver] rbac = True
</p>
<ol class="org-ol">
<li>airflow users create \
&#x2013;role Admin \
&#x2013;username admin \
&#x2013;firstname FIRST<sub>NAME</sub> \
&#x2013;lastname LAST<sub>NAME</sub> \
&#x2013;email EMAIL@example.org</li>
<li>add "airflow db init" to airflow.sh</li>
<li>run once</li>
<li>remove "airflow db init" from airflow.sh</li>
</ol>
</div>
</div>
<div id="outline-container-org1a202d6" class="outline-3">
<h3 id="org1a202d6"><span class="section-number-3">24.27.</span> create connection</h3>
<div class="outline-text-3" id="text-24-27">
<p>
   from airflow.models import Connection
from airflow import settings
</p>

<p>
def create<sub>conn</sub>(username, password, host=None):
    new<sub>conn</sub> = Connection(conn<sub>id</sub>=f'{username}<sub>connection</sub>',
                                  login=username,
                                  host=host if host else None)
    new<sub>conn.set</sub><sub>password</sub>(password)
</p>

<p>
session = settings.Session()
session.add(new<sub>conn</sub>)
session.commit()
</p>
</div>
</div>

<div id="outline-container-orgacb98fd" class="outline-3">
<h3 id="orgacb98fd"><span class="section-number-3">24.28.</span> create user</h3>
<div class="outline-text-3" id="text-24-28">
<p>
docker exec -it airflow<sub>engine</sub> bash -c 'airflow user create &#x2013;role Admin &#x2013;username admin &#x2013;firstname V
&#x2013;lastname C &#x2013;email cv@r.ru'
</p>
</div>
</div>
<div id="outline-container-org60c3720" class="outline-3">
<h3 id="org60c3720"><span class="section-number-3">24.29.</span> restart</h3>
<div class="outline-text-3" id="text-24-29">
<p>
docker-compose down &amp;&amp; docker-compose up -d
</p>
</div>
</div>
<div id="outline-container-orgf404063" class="outline-3">
<h3 id="orgf404063"><span class="section-number-3">24.30.</span> problems</h3>
<div class="outline-text-3" id="text-24-30">
<ul class="org-ul">
<li>execution<sub>timeout</sub> is not working</li>
<li>Own Operators require hard testing</li>
<li>all Python dependencies from each workflow need to be installed on each Airflow Worker</li>
</ul>
</div>
</div>

<div id="outline-container-org5c1cc40" class="outline-3">
<h3 id="org5c1cc40"><span class="section-number-3">24.31.</span> how to change config:</h3>
<div class="outline-text-3" id="text-24-31">
<ul class="org-ul">
<li>connect to running airflow<sub>engine</sub> and cat airflow.cfg</li>
<li>change config</li>
</ul>
</div>
</div>
<div id="outline-container-org8fb9248" class="outline-3">
<h3 id="org8fb9248"><span class="section-number-3">24.32.</span> rest API</h3>
<div class="outline-text-3" id="text-24-32">
<ul class="org-ul">
<li>authentication <a href="https://airflow.apache.org/docs/apache-airflow/stable/security/api.html">https://airflow.apache.org/docs/apache-airflow/stable/security/api.html</a></li>
<li><a href="https://airflow.apache.org/docs/apache-airflow/stable/stable-rest-api-ref.html">https://airflow.apache.org/docs/apache-airflow/stable/stable-rest-api-ref.html</a></li>
<li><a href="https://airflow.apache.org/docs/apache-airflow/1.10.2/api.html">https://airflow.apache.org/docs/apache-airflow/1.10.2/api.html</a></li>
</ul>
<pre class="example">
[api]
auth_backends = airflow.api.auth.backend.basic_auth
</pre>


<p>
check:
</p>
<pre class="example">
$ airflow config get-value api auth_backends
airflow.api.auth.backend.basic_auth
</pre>


<p>
Необходимо подождать некоторое время, авторизация возможно не сразу включается.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #cae682;">ENDPOINT_URL</span>=<span style="color: #95e454;">"http://localhost:8080/"</span>
curl -X GET --insecure --user <span style="color: #95e454;">"username:password"</span> <span style="color: #95e454;">\</span>
    <span style="color: #95e454;">"${ENDPOINT_URL}/api/v1/pools"</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org49b9311" class="outline-3">
<h3 id="org49b9311"><span class="section-number-3">24.33.</span> logs</h3>
<div class="outline-text-3" id="text-24-33">
<p>
logging.Logger - 4 loggers by default:
</p>
<ul class="org-ul">
<li>root</li>
<li>flask<sub>appbuilder</sub></li>
<li>airflow.processor</li>
<li>airflow.task</li>
</ul>

<p>
logging.Formatter
</p>
<ul class="org-ul">
<li>airflow<sub>colored</sub></li>
<li>airflow</li>
</ul>

<p>
locations:
</p>
<ul class="org-ul">
<li>Scheduler logs: /usr/local/airflow/logs/scheduler</li>
<li>Webserver logs appear in the console by default: docker logs &lt;webserver<sub>container</sub><sub>id</sub>&gt;</li>
<li>Metadata database logs: docker logs &lt;postgres<sub>container</sub><sub>id</sub>&gt;</li>
<li>docker logs &lt;triggerer<sub>container</sub><sub>id</sub>&gt;</li>
<li>Task logs are in <i>usr/local/airflow/logs</i></li>
</ul>

<p>
links:
</p>
<ul class="org-ul">
<li><a href="https://www.astronomer.io/guides/logging/">https://www.astronomer.io/guides/logging/</a></li>
<li><a href="https://airflow.apache.org/docs/apache-airflow/stable/logging-monitoring/logging-architecture.html">https://airflow.apache.org/docs/apache-airflow/stable/logging-monitoring/logging-architecture.html</a></li>
<li><a href="https://airflow.apache.org/docs/apache-airflow/stable/logging-monitoring/logging-tasks.html#serving-logs-from-workers">https://airflow.apache.org/docs/apache-airflow/stable/logging-monitoring/logging-tasks.html#serving-logs-from-workers</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgc36d17b" class="outline-3">
<h3 id="orgc36d17b"><span class="section-number-3">24.34.</span> Database of Airflow</h3>
<div class="outline-text-3" id="text-24-34">
<p>
recent runs
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #8ac6f2; font-weight: bold;">SELECT</span>
    dag_run.dag_id,
    dag_run.<span style="color: #8ac6f2; font-weight: bold;">state</span>
<span style="color: #8ac6f2; font-weight: bold;">FROM</span> dag_run
<span style="color: #8ac6f2; font-weight: bold;">INNER</span> <span style="color: #8ac6f2; font-weight: bold;">JOIN</span> (<span style="color: #8ac6f2; font-weight: bold;">SELECT</span>
                dag_id,
                <span style="color: #e5786d;">MAX</span>(execution_date) <span style="color: #8ac6f2; font-weight: bold;">AS</span> <span style="color: #92a65e; font-weight: bold;">date</span>
            <span style="color: #8ac6f2; font-weight: bold;">FROM</span> dag_run
            <span style="color: #8ac6f2; font-weight: bold;">GROUP</span> <span style="color: #8ac6f2; font-weight: bold;">BY</span> dag_id) mx
    <span style="color: #8ac6f2; font-weight: bold;">ON</span>
    dag_run.dag_id = mx.dag_id
    <span style="color: #8ac6f2; font-weight: bold;">AND</span> dag_run.execution_date = mx.<span style="color: #92a65e; font-weight: bold;">date</span>
<span style="color: #8ac6f2; font-weight: bold;">JOIN</span> dag <span style="color: #8ac6f2; font-weight: bold;">ON</span> dag.dag_id = dag_run.dag_id <span style="color: #8ac6f2; font-weight: bold;">AND</span> is_active = 1 <span style="color: #8ac6f2; font-weight: bold;">AND</span> is_paused = 0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org10ec257" class="outline-2">
<h2 id="org10ec257"><span class="section-number-2">25.</span> <span class="todo TODO">TODO</span> dbt - ETL</h2>
<div class="outline-text-2" id="text-25">
<ul class="org-ul">
<li>writing test</li>
<li>generate documentation</li>
<li>SQL, yaml</li>
</ul>
<p>
A dbt model is basically a .sql file with a SELECT statement.
</p>
</div>
</div>
<div id="outline-container-org4671a75" class="outline-2">
<h2 id="org4671a75"><span class="section-number-2">26.</span> Data Lake (Озеро данных)</h2>
<div class="outline-text-2" id="text-26">
<p>
это система или репозиторий данных , хранящихся в естественном / необработанном формате
</p>

<p>
A болото данных - это испорченное и неуправляемое озеро данных, которое либо недоступно для предполагаемых пользователей, либо представляет небольшую ценность. Википедия  site:wikichi.ru
</p>

<p>
Джеймс Диксон Pentaho, придумал этот термин, чтобы противопоставить его витрине данных , который
представляет собой небольшое хранилище интересных атрибутов
</p>

<p>
использование
</p>
<ul class="org-ul">
<li>Озеро данных было помечено как резервуар необработанных данных или хаб для разгрузки ETL</li>
<li>Озеро данных было определено как центральный узел для самообслуживания.</li>
</ul>

<p>
может включать
</p>
<ul class="org-ul">
<li>структурированные данные из реляционных баз данных (строки и столбцы)</li>
<li>полуструктурированные данные (CSV , журналы, XML , JSON )</li>
<li>неструктурированные данные (электронные письма, документы, PDF-файлы)</li>
<li>двоичные данные (изображения, аудио , видео)</li>
</ul>

<p>
terms
</p>
<ul class="org-ul">
<li>источники — sources;</li>
<li>настройки каналов — pipelines;</li>
<li>регулярность обновлений — schedulers;</li>
<li>владельцы — custodians;</li>
<li>время хранения — retention time;</li>
<li>метаданные — другие «данные о данных».</li>
</ul>

<p>
хранилища данных (HDFS, EDW, IMDG, Cloud и т.д.)
</p>
<ul class="org-ul">
<li>Google Cloud Storage и Amazon S3</li>
<li>распределенную файловую систему, такую ​​как Apache Хадуп</li>
</ul>
</div>

<div id="outline-container-org45fa598" class="outline-3">
<h3 id="org45fa598"><span class="section-number-3">26.1.</span> критика</h3>
<div class="outline-text-3" id="text-26-1">
<p>
Мы видим, как заказчики создают кладбища больших данных, сбрасывают все в распределенную файловую
систему Hadoop (HDFS) и надеются что-то с этим сделать в будущем. Но затем они просто теряют из виду
то, что там есть
</p>
</div>
</div>
</div>
<div id="outline-container-orgfbb53f9" class="outline-2">
<h2 id="orgfbb53f9"><span class="section-number-2">27.</span> Управленческий учет</h2>
<div class="outline-text-2" id="text-27">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Management_accounting">https://en.wikipedia.org/wiki/Management_accounting</a></li>
</ul>
<p>
areas:
</p>
<ul class="org-ul">
<li>Strategic management</li>
<li>Performance management</li>
<li>Risk management</li>
</ul>
</div>
</div>
<div id="outline-container-orgfd60750" class="outline-2">
<h2 id="orgfd60750"><span class="section-number-2">28.</span> <span class="todo TODO">TODO</span> Юнит-экономика (unit-экономика, unit economics)</h2>
<div class="outline-text-2" id="text-28">
<p>
метод экономического моделирования, который помогает определить прибыльность бизнеса через расчет прибыльности
бизнес-юнита (единицы товара или одного клиента). Эффективен для digital-проектов.
</p>

<p>
позволяет увидеть, сколько вы зарабатываете с потока клиентов — поток состоит из юнитов
</p>
</div>


<div id="outline-container-org410ff18" class="outline-3">
<h3 id="org410ff18"><span class="section-number-3">28.1.</span> Зачем считать юнит-экономику</h3>
<div class="outline-text-3" id="text-28-1">
<ul class="org-ul">
<li>Определить эффективность основных каналов продаж.</li>
<li>Оценить перспективы компании, понять, куда она движется.</li>
<li>Чтобы определить прибыльность бизнеса на этапе идеи.</li>
<li>Найти точку безубыточности и просчитать доходность инвестиций.</li>
<li>Понять, сколько нужно привлечь клиентов; узнать, сколько будет стоить каждый из них.</li>
<li>Объективно рассказать инвесторам о перспективах бизнеса.</li>
</ul>

<p>
С помощью юнит-экономики вы можете рассчитать, сколько единиц товара нужно продать, чтобы покрыть постоянные затраты.
</p>
</div>
</div>
<div id="outline-container-orga489996" class="outline-3">
<h3 id="orga489996"><span class="section-number-3">28.2.</span> Когда</h3>
<div class="outline-text-3" id="text-28-2">
<ul class="org-ul">
<li>Вы хотите привлечь инвесторов.</li>
<li>Вы планируете масштабировать бизнес.</li>
<li>Вы запускаете стартап.</li>
<li>Основные затраты на привлечение клиента и совершение сделки — продвижение и реклама.</li>
</ul>
</div>
</div>
<div id="outline-container-org6cdbaf5" class="outline-3">
<h3 id="org6cdbaf5"><span class="section-number-3">28.3.</span> Как</h3>
<div class="outline-text-3" id="text-28-3">
<p>
Юнит-экономика основана на принципах управленческого учета и микроэкономики
</p>

<p>
формула прибыли:
</p>
<ul class="org-ul">
<li>Прибыль = Маржинальная прибыль - Постоянные затраты</li>
<li>Маржинальная прибыль = Выручка - Переменные затраты</li>
<li>Прибыль = Выручка - Переменные затраты - Постоянные</li>
</ul>

<p>
Если маржинальная прибыль выше постоянных затрат, бизнес успешен
</p>

<p>
совокупная маржинальная прибыль определяется как общее число проданных товаров, умноженное на их цену за вычетом себестоимости.
</p>

<p>
прибыль или убыток с одной единицы товара
</p>
<ul class="org-ul">
<li>Цена продажи - Расходы = Прибыль (Убыток)</li>
</ul>

<p>
расчета точки безубыточности используется
</p>
<ul class="org-ul">
<li>Постоянные затраты / Прибыль с 1 продажи = Необходимое</li>
</ul>

<p>
COGS (Cost of Good Sold) - Затраты на каждую продажу, ее себестоимость. Это переменные затраты, которые
увеличиваются пропорционально объемам продаж. Например, сюда относится доставка.
</p>

<p>
1sCOGS (First sale COGS) - Дополнительные расходы, которые приходится нести, чтобы совершить первую продажу.
</p>
</div>
</div>


<div id="outline-container-org0b8cd64" class="outline-3">
<h3 id="org0b8cd64"><span class="section-number-3">28.4.</span> Когортный анализ</h3>
<div class="outline-text-3" id="text-28-4">
<p>
инструмент аналитики, при котором пользователи рассматриваются в группах, связанных по определенному признаку.
</p>
</div>
</div>


<div id="outline-container-orgfd121a8" class="outline-3">
<h3 id="orgfd121a8"><span class="section-number-3">28.5.</span> links</h3>
<div class="outline-text-3" id="text-28-5">
<ul class="org-ul">
<li><a href="https://www.uplab.ru/blog/unit-economics-how-to-evaluate-the-success-of-the-business/">https://www.uplab.ru/blog/unit-economics-how-to-evaluate-the-success-of-the-business/</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org98c1c9e" class="outline-2">
<h2 id="org98c1c9e"><span class="section-number-2">29.</span> mail</h2>
<div class="outline-text-2" id="text-29">
<p>
Data warehouse:
</p>

<ul class="org-ul">
<li>Greenplum BD</li>
</ul>

<p>
designed to manage large-scale analytic data warehouses and business intelligence workloads.
</p>
<ul class="org-ul">
<li>на основе PostgreSQL - лучше MySQL</li>
<li>massively parallel processing (MPP)</li>
<li>PostgreSQL interface</li>
<li>performs best with a denormalized schema design</li>
<li>Greenplum provides both row-oriented and <b>column-oriented</b> table types</li>
<li>logically partition table data, either by range or by a list of values - each partition of a single table
can utilize its own storage method (row vs. column orientation)</li>

<li>MariaBD</li>
</ul>

<p>
for a wide variety of use cases as replacement for MySQL
</p>
<ul class="org-ul">
<li>single server or multi-server</li>
<li>columnar storage optimized for interactive</li>
<li>ad hoc analytics</li>
<li>scaling out as needed</li>
</ul>

<p>
Bad:  Vertica CE (limited to 1TB of data and 3 database nodes), Clickhouse (сырая, недокум-ные Upd/Del),
</p>

<p>
Report system:
</p>

<ul class="org-ul">
<li>Power BI Desktop</li>
</ul>

<p>
один из лучших, отчет сохраняется в виде файла и открывается в том виде как был создан.
-cons:
</p>
<ul class="org-ul">
<li>Windows на одном рабочем месте, нужно предварительно установить и проверить соединение с базой</li>

<li>Metabase</li>
</ul>

<p>
можно развернуть в докере и дать доступ через веб.
</p>
<ul class="org-ul">
<li>cons: мало инструментов и нет Slicer</li>

<li>Microstrategy Desktop Free - аналог Power BI, требует изучение</li>

<li>Saiku Analytics - нужно присмотреться, есть ограничения <a href="https://www.meteorite.bi/saiku-product-comparison">https://www.meteorite.bi/saiku-product-comparison</a></li>
</ul>


<p>
Bad: Apahce SuperSet (нельзя изменить названия полей),
Pentaho BI Suite (много ограничений по функционалу, поменялась компания 2017. 2017 stable),
Vertica CE (limited to 1TB of data and 3 database nodes),
Exasol CE(Can store up to 200 GB or raw data, single machine)
</p>
</div>
</div>

<div id="outline-container-org7e795ed" class="outline-2">
<h2 id="org7e795ed"><span class="section-number-2">30.</span> Congos</h2>
<div class="outline-text-2" id="text-30">
<p>
IBM® Cognos Business Intelligence - комплект программ для бизнес-аналитики
IBM Cognos Analytics - инструмент бизнес-аналитики
IBM Cognos
</p>
</div>
</div>
<div id="outline-container-orga8928a8" class="outline-2">
<h2 id="orga8928a8"><span class="section-number-2">31.</span> цфт разаботка</h2>
<div class="outline-text-2" id="text-31">
<ul class="org-ul">
<li>EXEC ibs.EXECUTOR.SET<sub>CONTEXT</sub>('DATE<sub>SLEPOK</sub><sub>BEGIN</sub>', to<sub>char</sub>(trunc(sysdate),'dd/mm/yyyy'));</li>
<li>EXEC ibs.EXECUTOR.SET<sub>CONTEXT</sub>('DATE<sub>SLEPOK</sub><sub>BEGIN</sub>', '01/01/2019');</li>
<li>EXEC ibs.EXECUTOR.SET<sub>CONTEXT</sub>('DATE<sub>SLEPOK</sub><sub>END</sub>', '03/07/2019');</li>
<li>SELECT SYS<sub>CONTEXT</sub>('IBS<sub>USER</sub>','DATE<sub>SLEPOK</sub><sub>BEGIN</sub>') FROM DUAL;</li>
</ul>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #8ac6f2; font-weight: bold;">begin</span>
ibs.EXECUTOR.SET_CONTEXT(<span style="color: #95e454;">'DATE_SLEPOK_BEGIN'</span>, to_char(trunc(sysdate),<span style="color: #95e454;">'dd/mm/yyyy'</span>));
<span style="color: #8ac6f2; font-weight: bold;">END</span>;

<span style="color: #8ac6f2; font-weight: bold;">begin</span>
ibs.EXECUTOR.SET_CONTEXT(<span style="color: #95e454;">'DATE_SLEPOK_END'</span>, to_char(trunc(sysdate),<span style="color: #95e454;">'dd/mm/yyyy'</span>));
<span style="color: #8ac6f2; font-weight: bold;">END</span>;

<span style="color: #8ac6f2; font-weight: bold;">SELECT</span> * <span style="color: #8ac6f2; font-weight: bold;">FROM</span> VW_RPT_RNB_UU_ACF_BAL_OB;

</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql">
<span style="color: #8ac6f2; font-weight: bold;">SELECT</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">ID -- 0 NUMBER</span>
CLI_ID, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER &#1053;&#1086;&#1084;&#1077;&#1088; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</span>
CLI_INN, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(12) &#1048;&#1053;&#1053;</span>
BS1, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(12) &#1041;&#1057;1</span>
BS2, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(5) &#1041;&#1057;2</span>
BSS, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(10) &#1041;&#1057;&#1057;</span>
ACC, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(25) &#1051;&#1057;</span>
ACC_FIL, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(26) &#1051;&#1057;&#1060;</span>
ACC_NAME, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(160) &#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1057;&#1095;&#1077;&#1090;&#1072;</span>
CLI_NAME, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(160) &#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</span>
CLI_CLASS, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(128) &#1058;&#1080;&#1087;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</span>
CUR, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3) &#1042;&#1072;&#1083;&#1102;&#1090;&#1072;&#1057;&#1095;&#1077;&#1090;&#1072;</span>
VAL, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3) &#1042;&#1072;&#1083;&#1102;&#1090;&#1072;</span>
FILIAL, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3) &#1060;&#1080;&#1083;&#1080;&#1072;&#1083;</span>
DEPART, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(20) &#1054;&#1090;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1077;</span>
MARKET, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1056;&#1099;&#1085;&#1086;&#1082;</span>
BLOCK, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1041;&#1080;&#1079;&#1085;&#1077;&#1089; &#1073;&#1083;&#1086;&#1082;</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SEC_UL VARCHAR2(300) &#1057;&#1077;&#1075;&#1084;&#1077;&#1085;&#1090;&#1070;&#1051; -</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SEC_FL VARCHAR2(300) &#1057;&#1077;&#1075;&#1084;&#1077;&#1085;&#1090;&#1060;&#1051; -</span>
ACC_OTV, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(100) &#1052;&#1077;&#1085;&#1077;&#1076;&#1078;&#1077;&#1088;</span>
ATTR, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1040;&#1082;&#1090;&#1080;&#1074;&#1055;&#1072;&#1089;&#1089;&#1080;&#1074;</span>
ZNAK, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1047;&#1053;&#1040;&#1050;</span>
NAME_CB, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1062;&#1041;</span>
KOD_PROC, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1050;&#1054;&#1044;_&#1055;&#1056;&#1054;&#1062;</span>
SROK1, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;1</span>
SROK2, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;1</span>
SROK3, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;1</span>
REZIDENT, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1056;&#1077;&#1079;&#1080;&#1076;&#1077;&#1085;&#1090;&#1085;&#1086;&#1089;&#1090;&#1100;</span>
VID_SOBSTV, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1042;&#1080;&#1076;&#1057;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1089;&#1090;&#1080;</span>
ACC_AMORT, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1095;&#1077;&#1090;&#1072;&#1040;&#1084;&#1086;&#1088;&#1090;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080;</span>
ACC_RESERV, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1095;&#1077;&#1090;&#1072;&#1056;&#1077;&#1079;&#1077;&#1088;&#1074;&#1086;&#1074;</span>
ACC_REVAL, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1095;&#1077;&#1090;&#1072;&#1055;&#1077;&#1088;&#1077;&#1086;&#1094;&#1077;&#1085;&#1082;&#1080;</span>
RAZDEL, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1056;&#1040;&#1047;&#1044;&#1045;&#1051;</span>
SUBRAZD, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1055;&#1054;&#1044;&#1056;&#1040;&#1047;&#1044;&#1045;&#1051;</span>
ARTICLE, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1057;&#1058;&#1040;&#1058;&#1068;&#1071;</span>
SUBENTRY, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1055;&#1054;&#1044;&#1057;&#1058;&#1040;&#1058;&#1068;&#1071;</span>
GRUPPA, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1043;&#1056;&#1059;&#1055;&#1055;&#1040;</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SUBGRUP, -- VARCHAR2(300)</span>
PRODUCT, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300) &#1055;&#1088;&#1086;&#1076;&#1091;&#1082;&#1090;</span>
VID_PROD, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">&#1058;&#1080;&#1087;&#1086;&#1074;&#1086;&#1081;&#1044;&#1086;&#1075;&#1086;&#1074;&#1086;&#1088; VARCHAR2(300),  -- (text) Null, - 12312</span>
NUM_DOG, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2 &#1053;&#1086;&#1084;&#1077;&#1088;&#1044;&#1086;&#1075;&#1086;&#1074;&#1086;&#1088;&#1072;</span>
DATE_BEG, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DATE &#1044;&#1072;&#1090;&#1072;_&#1053;</span>
DATE_END, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DATE &#1044;&#1072;&#1090;&#1072;_&#1054;</span>
SM_NT_BEG, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER 01/01/2019</span>
OB_NT_DEB, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER &#1054;&#1041;&#1054;&#1056;&#1054;&#1058;_&#1044;&#1073;_&#1056;&#1059;&#1041;</span>
OB_NT_CRED, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER &#1054;&#1041;&#1054;&#1056;&#1054;&#1058;_&#1050;&#1090;_&#1056;&#1059;&#1041;</span>
SM_END, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER &#1048;&#1057;&#1061;&#1054;&#1044;_&#1042;&#1040;&#1051;</span>
SM_NT_END <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER &#1048;&#1057;&#1061;&#1054;&#1044;_&#1056;&#1059;&#1041;</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DELTA NUMBER</span>
<span style="color: #8ac6f2; font-weight: bold;">FROM</span> VW_RPT_RNB_UU_ACF_BAL_OB;


</pre>
</div>

<p>
q
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #8ac6f2; font-weight: bold;">SELECT</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">ID -- 0 NUMBER</span>
CLI_ID <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1053;&#1086;&#1084;&#1077;&#1088;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
CLI_INN <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1048;&#1053;&#1053;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(12)</span>
BS1 <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1041;&#1057;1, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(12)</span>
BS2 <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1041;&#1057;2, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(5)</span>
BSS <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1041;&#1057;&#1057;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(10)</span>
ACC <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1051;&#1057;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(25)</span>
ACC_FIL <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1051;&#1057;&#1060;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(26)</span>
ACC_NAME <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1057;&#1095;&#1077;&#1090;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(160)</span>
CLI_NAME <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(160)</span>
CLI_CLASS <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1058;&#1080;&#1087;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(128)</span>
CUR <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1042;&#1072;&#1083;&#1102;&#1090;&#1072;&#1057;&#1095;&#1077;&#1090;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3)</span>
VAL <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1042;&#1072;&#1083;&#1102;&#1090;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3)</span>
FILIAL <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1060;&#1080;&#1083;&#1080;&#1072;&#1083;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3)</span>
DEPART <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1054;&#1090;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1077;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(20)</span>
MARKET <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1056;&#1099;&#1085;&#1086;&#1082;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
BLOCK <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1041;&#1080;&#1079;&#1085;&#1077;&#1089;&#1041;&#1083;&#1086;&#1082;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SEC_UL VARCHAR2(300) &#1057;&#1077;&#1075;&#1084;&#1077;&#1085;&#1090;&#1070;&#1051; -</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SEC_FL VARCHAR2(300) &#1057;&#1077;&#1075;&#1084;&#1077;&#1085;&#1090;&#1060;&#1051; -</span>
ACC_OTV <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1052;&#1077;&#1085;&#1077;&#1076;&#1078;&#1077;&#1088;,  <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(100)</span>
ATTR <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1040;&#1082;&#1090;&#1080;&#1074;&#1055;&#1072;&#1089;&#1089;&#1080;&#1074;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
ZNAK <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1047;&#1053;&#1040;&#1050;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
NAME_CB <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1062;&#1041;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
KOD_PROC <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1050;&#1054;&#1044;_&#1055;&#1056;&#1054;&#1062;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
SROK1 <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;1, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
SROK2 <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;2, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
SROK3 <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;3, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
REZIDENT <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1056;&#1077;&#1079;&#1080;&#1076;&#1077;&#1085;&#1090;&#1085;&#1086;&#1089;&#1090;&#1100;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
VID_SOBSTV <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1042;&#1080;&#1076;&#1057;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1089;&#1090;&#1080;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
ACC_AMORT <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1095;&#1077;&#1090;&#1072;&#1040;&#1084;&#1086;&#1088;&#1090;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
ACC_RESERV <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1095;&#1077;&#1090;&#1072;&#1056;&#1077;&#1079;&#1077;&#1088;&#1074;&#1086;&#1074;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
ACC_REVAL <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1095;&#1077;&#1090;&#1072;&#1055;&#1077;&#1088;&#1077;&#1086;&#1094;&#1077;&#1085;&#1082;&#1080;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
RAZDEL <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1056;&#1040;&#1047;&#1044;&#1045;&#1051;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
SUBRAZD <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1055;&#1054;&#1044;&#1056;&#1040;&#1047;&#1044;&#1045;&#1051;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
ARTICLE <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1057;&#1058;&#1040;&#1058;&#1068;&#1071;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
SUBENTRY <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1055;&#1054;&#1044;&#1057;&#1058;&#1040;&#1058;&#1068;&#1071;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
GRUPPA <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1043;&#1056;&#1059;&#1055;&#1055;&#1040;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SUBGRUP, -- VARCHAR2(300)</span>
PRODUCT <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1055;&#1088;&#1086;&#1076;&#1091;&#1082;&#1090;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
VID_PROD <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1058;&#1080;&#1087;&#1086;&#1074;&#1086;&#1081;&#1044;&#1086;&#1075;&#1086;&#1074;&#1086;&#1088;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300),  -- (text) Null, - 12312</span>
NUM_DOG <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1053;&#1086;&#1084;&#1077;&#1088;&#1044;&#1086;&#1075;&#1086;&#1074;&#1086;&#1088;&#1072;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2</span>
DATE_BEG <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1044;&#1072;&#1090;&#1072;_&#1053;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DATE</span>
DATE_END <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1044;&#1072;&#1090;&#1072;_&#1054;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DATE</span>
SM_NT_BEG <span style="color: #8ac6f2; font-weight: bold;">as</span> 01/01/2019, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
OB_NT_DEB <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1054;&#1041;&#1054;&#1056;&#1054;&#1058;_&#1044;&#1073;_&#1056;&#1059;&#1041;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
OB_NT_CRED <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1054;&#1041;&#1054;&#1056;&#1054;&#1058;_&#1050;&#1090;_&#1056;&#1059;&#1041;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
SM_END <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1048;&#1057;&#1061;&#1054;&#1044;_&#1042;&#1040;&#1051;, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
SM_NT_END <span style="color: #8ac6f2; font-weight: bold;">as</span> &#1048;&#1057;&#1061;&#1054;&#1044;_&#1056;&#1059;&#1041; <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DELTA NUMBER</span>
<span style="color: #8ac6f2; font-weight: bold;">FROM</span> VW_RPT_RNB_UU_ACF_BAL_OB;
</pre>
</div>

<p>
green create
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">CREATE TABLE c(a int PRIMARY KEY, b text)  DISTRIBUTED BY(a);</span>
<span style="color: #8ac6f2; font-weight: bold;">CREATE</span> <span style="color: #8ac6f2; font-weight: bold;">TABLE</span> <span style="color: #cae682; font-weight: bold;">test</span> (
&#1044;&#1072;&#1090;&#1072; <span style="color: #92a65e; font-weight: bold;">date</span>,
&#1053;&#1086;&#1084;&#1077;&#1088;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; bigint, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
&#1048;&#1053;&#1053; <span style="color: #92a65e; font-weight: bold;">varchar</span>(12), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(12)</span>
&#1041;&#1057;1 <span style="color: #92a65e; font-weight: bold;">varchar</span>(12), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(12)</span>
&#1041;&#1057;2 <span style="color: #92a65e; font-weight: bold;">varchar</span>(5), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(5)</span>
&#1041;&#1057;&#1057; <span style="color: #92a65e; font-weight: bold;">varchar</span>(10), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(10)</span>
&#1051;&#1057; <span style="color: #92a65e; font-weight: bold;">varchar</span>(12), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(25)</span>
&#1051;&#1057;&#1060; <span style="color: #92a65e; font-weight: bold;">varchar</span>(26), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(26)</span>
&#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1057;&#1095;&#1077;&#1090;&#1072; <span style="color: #92a65e; font-weight: bold;">varchar</span>(160), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(160)</span>
&#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; <span style="color: #92a65e; font-weight: bold;">varchar</span>(160), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(160)</span>
&#1058;&#1080;&#1087;&#1050;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; <span style="color: #92a65e; font-weight: bold;">varchar</span>(128), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(128)</span>
&#1042;&#1072;&#1083;&#1102;&#1090;&#1072;&#1057;&#1095;&#1077;&#1090;&#1072; <span style="color: #92a65e; font-weight: bold;">varchar</span>(3), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3)</span>
&#1042;&#1072;&#1083;&#1102;&#1090;&#1072; <span style="color: #92a65e; font-weight: bold;">varchar</span>(3), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3)</span>
&#1060;&#1080;&#1083;&#1080;&#1072;&#1083; <span style="color: #92a65e; font-weight: bold;">varchar</span>(3), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(3)</span>
&#1054;&#1090;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1077; <span style="color: #92a65e; font-weight: bold;">varchar</span>(20), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(20)</span>
&#1056;&#1099;&#1085;&#1086;&#1082; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1041;&#1080;&#1079;&#1085;&#1077;&#1089;&#1041;&#1083;&#1086;&#1082; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SEC_UL VARCHAR2(300) &#1057;&#1077;&#1075;&#1084;&#1077;&#1085;&#1090;&#1070;&#1051; -</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SEC_FL VARCHAR2(300) &#1057;&#1077;&#1075;&#1084;&#1077;&#1085;&#1090;&#1060;&#1051; -</span>
&#1052;&#1077;&#1085;&#1077;&#1076;&#1078;&#1077;&#1088; <span style="color: #92a65e; font-weight: bold;">varchar</span>(100),  <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(100)</span>
&#1040;&#1082;&#1090;&#1080;&#1074;&#1055;&#1072;&#1089;&#1089;&#1080;&#1074; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1047;&#1053;&#1040;&#1050; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1053;&#1072;&#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1062;&#1041; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1050;&#1054;&#1044;_&#1055;&#1056;&#1054;&#1062; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;1 <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;2 <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1088;&#1086;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;3 <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1056;&#1077;&#1079;&#1080;&#1076;&#1077;&#1085;&#1090;&#1085;&#1086;&#1089;&#1090;&#1100; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1042;&#1080;&#1076;&#1057;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1089;&#1090;&#1080; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1095;&#1077;&#1090;&#1072;&#1040;&#1084;&#1086;&#1088;&#1090;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1095;&#1077;&#1090;&#1072;&#1056;&#1077;&#1079;&#1077;&#1088;&#1074;&#1086;&#1074; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1095;&#1077;&#1090;&#1072;&#1055;&#1077;&#1088;&#1077;&#1086;&#1094;&#1077;&#1085;&#1082;&#1080; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1056;&#1040;&#1047;&#1044;&#1045;&#1051; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1055;&#1054;&#1044;&#1056;&#1040;&#1047;&#1044;&#1045;&#1051; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1057;&#1058;&#1040;&#1058;&#1068;&#1071; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1055;&#1054;&#1044;&#1057;&#1058;&#1040;&#1058;&#1068;&#1071; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1043;&#1056;&#1059;&#1055;&#1055;&#1040; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
<span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">SUBGRUP, -- VARCHAR2(300)</span>
&#1055;&#1088;&#1086;&#1076;&#1091;&#1082;&#1090; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300)</span>
&#1058;&#1080;&#1087;&#1086;&#1074;&#1086;&#1081;&#1044;&#1086;&#1075;&#1086;&#1074;&#1086;&#1088; <span style="color: #92a65e; font-weight: bold;">varchar</span>(300), <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2(300),  -- (text) Null, - 12312</span>
&#1053;&#1086;&#1084;&#1077;&#1088;&#1044;&#1086;&#1075;&#1086;&#1074;&#1086;&#1088;&#1072; <span style="color: #92a65e; font-weight: bold;">varchar</span>, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">VARCHAR2</span>
&#1044;&#1072;&#1090;&#1072;_&#1053; <span style="color: #92a65e; font-weight: bold;">date</span>, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DATE</span>
&#1044;&#1072;&#1090;&#1072;_&#1054; <span style="color: #92a65e; font-weight: bold;">date</span>, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">DATE</span>
main money, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
&#1054;&#1041;&#1054;&#1056;&#1054;&#1058;_&#1044;&#1073;_&#1056;&#1059;&#1041; money, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
&#1054;&#1041;&#1054;&#1056;&#1054;&#1058;_&#1050;&#1090;_&#1056;&#1059;&#1041; money, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
&#1048;&#1057;&#1061;&#1054;&#1044;_&#1042;&#1040;&#1051; money, <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
&#1048;&#1057;&#1061;&#1054;&#1044;_&#1056;&#1059;&#1041; money <span style="color: #fa8072;">-- </span><span style="color: #99968b; font-style: italic;">NUMBER</span>
)
<span style="color: #8ac6f2; font-weight: bold;">WITH</span> (appendonly=<span style="color: #8ac6f2; font-weight: bold;">true</span>, orientation=<span style="color: #8ac6f2; font-weight: bold;">column</span>) DISTRIBUTED <span style="color: #8ac6f2; font-weight: bold;">BY</span>(a)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc312efb" class="outline-2">
<h2 id="orgc312efb"><span class="section-number-2">32.</span> Data Science</h2>
<div class="outline-text-2" id="text-32">
<p>
-<a href="https://www.kdnuggets.com/2018/06/data-science-predicting-future.html">https://www.kdnuggets.com/2018/06/data-science-predicting-future.html</a>
</p>

<p>
When and Why:
</p>
<ul class="org-ul">
<li>When: after BI reports</li>
<li>Why you need it: reports and dashboards business insights, Predictive Analytics</li>
</ul>

<p>
Fraud detection: machine learning, specifically supervised learning. When these models detect even the
slightest probability of theft, they flag the transactions, and prevent the fraud in real time.
</p>

<p>
Client retention: ‘personal touch’ - minimizing marketing costs and maximizing profits
</p>
</div>
</div>

<div id="outline-container-org243c466" class="outline-2">
<h2 id="org243c466"><span class="section-number-2">33.</span> BI Platform video</h2>
<div class="outline-text-2" id="text-33">
<p>
У BI платформы - Когда больше 1000? пользовтелей и 1000? строк - Внезапная деградация производительности
</p>

<ol class="org-ol">
<li>Разрозненные источники</li>
<li>Информационно-аналитическая система</li>
<li>Аналитические отчеты</li>
</ol>

<p>
Самывй крутой подход:
BI Platform (ROLAM Engine) -sql&gt; DataWarehouse
</p>
<ul class="org-ul">
<li>медленно</li>
<li>низкое использование кэши</li>
</ul>

<p>
Другой подход:
До террабайта данные поднимаются в in-Memory OLAP Engine
</p>

<p>
Ентерпрайс - оба подхода - горячие данные в InMemory холодные из DataWarehouse
</p>
<ul class="org-ul">
<li>необходимо разделить данные на холодные горячие</li>
</ul>

<p>
тестирование аналитической нагрузки
TPC-H - типовые запросы
</p>

<p>
Способы оптимизации под аналитические запросы
</p>
<ul class="org-ul">
<li>колоночное хранение
<ul class="org-ul">
<li>эффективное использование кэша процессора</li>
</ul></li>
<li>сжатие в IN-NEMORY OLAP
<ul class="org-ul">
<li>LZ4</li>
<li>RLE RUN-LENGTH ENCODING - на данных с низкой кординальностью(повторяется одно и то же)
<ul class="org-ul">
<li>все данные отсортировать не возможно и не нужно</li>
</ul></li>
</ul></li>
<li>векторные инструкции процессоров</li>
<li>поздняя материализация - при выполнении SQL - поздный JOIN столбцов</li>
<li>Эвристические оптимизаци BI платформы:
<ul class="org-ul">
<li>автоматическая нормализация-денормализация таблиц</li>
<li>сортировка по календарному измерению - НЕ ИСПОЛЬЗОВАТЬ ДАТУ В ВИДЕ СТРОКИ</li>
<li>разделяемый пользовательский кэш - несолько позователей у BI</li>
<li>разделяемый кэш подзапросов</li>
<li>обратные индексы для строковых полей</li>
</ul></li>
</ul>

<p>
Как убить IN-MEMORY OLAP
</p>
<ul class="org-ul">
<li>Применять выражения, на которых плохо работает векторизация(нелинейное вырожение используещее много строк)</li>
<li>Использовать вложенные запросы с большим промежуточным результатом (заставляет ранюю материализацию)</li>
<li>часто обновлять данные, не используя специальные инструменты для Real-time(заст частую инвалидацию и низ эфф кэша)</li>
<li>оставлять маленький запас свободной RAM</li>
<li>Грузить в BI поля с высокой кардинальностью - комментарии к заказу, сообщения</li>
</ul>

<p>
Реалтайм если нужен его лучше выделить в отдельный виджет - за отдельный час там
</p>

<p>
Было бы здорово - Измерить прямую заполнения кэша у BI платформы - редка позволяют
</p>

<p>
медленно изменяющиеся измерения - один сотрудник меняет должность что-то
</p>
<ul class="org-ul">
<li>срезы - по квартально (когда меняется структура статей финансовых и локаций)</li>
<li>таблицы фактов с именениями - каждый переход сотрудника - это факт</li>
</ul>

<p>
INMEMORY better then MOLAP
</p>

<p>
BI имеющие in-memory
visiolagy
ploimatic
</p>

<p>
для мониторинга событий - SCADA - специальные системы
</p>

<p>
пределы in-memory
</p>
<ul class="org-ul">
<li>сотен тысяч записей - начинаются проблемы</li>
<li>единиц милионов - проблемы</li>
</ul>

<p>
GPU для in-memory - неочень эффекивно есть вероятность потерять быстродейтвие для ряда задач
</p>

<p>
в ClickHouse есть специализация под разные виды запросов это и дает оптимизацию
</p>
</div>
</div>
<div id="outline-container-orgecc857f" class="outline-2">
<h2 id="orgecc857f"><span class="section-number-2">34.</span> Big Data <a id="org65f95c7"></a></h2>
<div class="outline-text-2" id="text-34">
</div>
<div id="outline-container-orgebab18a" class="outline-3">
<h3 id="orgebab18a"><span class="section-number-3">34.1.</span> frameworks:</h3>
<div class="outline-text-3" id="text-34-1">
<p>
big data framework -  manipulate datasets on top of a distributed processing system
</p>

<p>
Pandas and Dask - for small companies
</p>
</div>

<div id="outline-container-org9e64203" class="outline-4">
<h4 id="org9e64203"><span class="section-number-4">34.1.1.</span> Apache: Hadoop vs Hive vs Spark</h4>
<div class="outline-text-4" id="text-34-1-1">
<dl class="org-dl">
<dt>Hadoop</dt><dd>обеспечивает основу для хранения и обработки данных</dd>
<dt>Hive</dt><dd>упрощает доступ к данным (Hadoop) с помощью SQL. Преобразует запросы в MapReduce</dd>
<dt>Spark</dt><dd>обеспечивает высокопроизводительную обработку данных.</dd>
</dl>
</div>
</div>
<div id="outline-container-org37bd6db" class="outline-4">
<h4 id="org37bd6db"><span class="section-number-4">34.1.2.</span> Apache Spark</h4>
<div class="outline-text-4" id="text-34-1-2">
<p>
faster than libraries like Pandas and Dask, and can handle larger amounts of data than these frameworks.
</p>
<ul class="org-ul">
<li>training algorithms for machine learning systems - orientation</li>
</ul>
<p>
<b>resilient distributed dataset (RDD)</b> - a read-only multiset of data items distributed over a cluster of
 machines, that is maintained in a fault-tolerant way.
</p>

<p>
Spark's RDDs function as a working set for distributed programs that offers a (deliberately) restricted form
 of distributed shared memory.??????
</p>

<p>
workflow is managed as a directed acyclic graph (DAG). Nodes represent RDDs while edges represent the
 operations on the RDDs. (in contrast, MapReduce is linear)
</p>

<p>
Dataframe API
</p>

<p>
For cluster management, Spark supports:
</p>
<ul class="org-ul">
<li>testing cluster - native Spark cluster</li>
<li>Hadoop YARN, Apache Mesos or Kubernetes</li>
</ul>

<p>
For distributed storage:
</p>
<ul class="org-ul">
<li>Alluxio, Hadoop Distributed File System (HDFS),[12] MapR File System (MapR-FS),[13] Cassandra,[14] OpenStack
Swift, Amazon S3, Kudu, Lustre file system</li>
</ul>

<p>
programming style:
</p>
<ul class="org-ul">
<li>RDD-oriented functional style of programming</li>
<li>two restricted forms of shared variables: <b>broadcast variables</b> reference read-only data that needs to be
available on all nodes, while <b>accumulators</b> can be used to program reductions in an imperative style.</li>
</ul>
</div>
</div>
<div id="outline-container-org6d990c4" class="outline-4">
<h4 id="org6d990c4"><span class="section-number-4">34.1.3.</span> Hadoop</h4>
<div class="outline-text-4" id="text-34-1-3">
<p>
distributed system
</p>

<p>
Apache Hadoop's MapReduce and HDFS components were inspired by Google papers on MapReduce and Google File
 System.
</p>

<p>
Open-source distributed data warehousing database which operates on Hadoop Distributed File System.
</p>
<ul class="org-ul">
<li>data is stored in the form of tables (just like RDBMS)</li>
<li>specially built for data warehousing operations and is not an option for OLTP or OLAP.</li>
<li>It is an RDBMS-like database, but is not 100% RDBMS ( support for ANSI SQL standards)</li>
<li>database which scales horizontally</li>
</ul>

<p>
<a href="https://en.wikipedia.org/wiki/MapReduce">https://en.wikipedia.org/wiki/MapReduce</a>
</p>
</div>
</div>
<div id="outline-container-org1b4d2f1" class="outline-4">
<h4 id="org1b4d2f1"><span class="section-number-4">34.1.4.</span> Apache Hive</h4>
<div class="outline-text-4" id="text-34-1-4">
<p>
Hive uses Hadoop as its storage engine and only runs on HDFS.
</p>
<ul class="org-ul">
<li>for providing data query and analysis</li>
<li>gives an SQL-like interface (HiveQL) to query data stored in various databases and file systems that integrate with
Hadoop. Traditional SQL queries must be implemented in the MapReduce Java API to execute SQL applications and
queries over distributed data. it reduces the complexity of MapReduce frameworks</li>
</ul>

<p>
Hive can also be integrated with data streaming tools such as Spark, Kafka and Flume.
</p>

<ul class="org-ul">
<li>is not an option for unstructured data.</li>
<li>is not an ideal for OLTP or OLAP kinds of operations.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc392cf5" class="outline-3">
<h3 id="orgc392cf5"><span class="section-number-3">34.2.</span> tools</h3>
<div class="outline-text-3" id="text-34-2">
<ul class="org-ul">
<li>Apache Samza</li>
<li>Apache Kafka</li>
<li>Dask</li>
<li>Apache Beam</li>
<li>Apache Hive</li>
<li>Apache Hadoop/MapReduce</li>
<li>Apache Spark</li>
<li>Apache Tez</li>
<li>Apache Flink</li>
<li>ClickHouse</li>
</ul>
</div>
</div>
<div id="outline-container-org306527d" class="outline-3">
<h3 id="org306527d"><span class="section-number-3">34.3.</span> кодекс этики</h3>
<div class="outline-text-3" id="text-34-3">
<p>
<a href="https://ac.gov.ru/projects/project/kodeks-etiki-ispolzovania-dannyh-5">https://ac.gov.ru/projects/project/kodeks-etiki-ispolzovania-dannyh-5</a>
</p>

<p>
«Яндекс», Mail.ru Group, Сбербанк, Газпромбанк, «МегаФон», «Ростелеком» и другие компании
</p>
</div>
</div>
<div id="outline-container-orga303682" class="outline-3">
<h3 id="orga303682"><span class="section-number-3">34.4.</span> MapReduce</h3>
<div class="outline-text-3" id="text-34-4">
<p>
programming model - for processing and generating big data sets with a parallel, distributed algorithm on a
 cluster.
</p>
<ul class="org-ul">
<li>orchestrates the processing by <b>marshalling</b> the distributed servers, running the various tasks in parallel,
managing all communications and data transfers between the various parts of the system, and providing for
<b>redundancy</b> and <b>fault tolerance</b>.</li>
</ul>

<p>
procedures:
</p>
<dl class="org-dl">
<dt>Map</dt><dd>filtering and sorting</dd>
<dt>Reduce</dt><dd>summary operation</dd>
</dl>

<p>
cons:
</p>
<ul class="org-ul">
<li>forces a particular linear dataflow structure on distributed programs: MapReduce programs read input data
from disk, map a function across the data, reduce the results of the map, and store reduction results on disk.</li>
</ul>
</div>
</div>
<div id="outline-container-org13c7fde" class="outline-3">
<h3 id="org13c7fde"><span class="section-number-3">34.5.</span> news</h3>
<div class="outline-text-3" id="text-34-5">
<p>
По оценке АБД, российский рынок больших данных на данный момент составляет 10–30 млрд рублей в год, а к 2024 году он достигнет 300 млрд рублей.
</p>
</div>
</div>
</div>
<div id="outline-container-orgdd338f3" class="outline-2">
<h2 id="orgdd338f3"><span class="section-number-2">35.</span> Аналитическая платформа - система принятия решений</h2>
<div class="outline-text-2" id="text-35">
<ul class="org-ul">
<li>numerical-analysis software <a href="https://en.wikipedia.org/wiki/List_of_numerical-analysis_software">https://en.wikipedia.org/wiki/List_of_numerical-analysis_software</a></li>
<li><a href="https://en.wikipedia.org/wiki/Automated_machine_learning">https://en.wikipedia.org/wiki/Automated_machine_learning</a></li>
<li><a href="https://en.wikipedia.org/wiki/Business_intelligence">https://en.wikipedia.org/wiki/Business_intelligence</a></li>
</ul>

<p>
Aналитическая платформа Loginom
</p>
<ul class="org-ul">
<li>хранилище данных</li>
<li>стетистический анализ</li>
<li>репозиторий моделей</li>
</ul>

<p>
Weka (machine learning)
</p>
<ul class="org-ul">
<li>data mining tasks, more specifically, data preprocessing, clustering, classification, regression,
visualization, and feature selection</li>
<li>access to SQL databases using Java Database Connectivity</li>
<li>provides access to deep learning with Deeplearning4j</li>
</ul>
</div>
</div>

<div id="outline-container-org7dd21cc" class="outline-2">
<h2 id="org7dd21cc"><span class="section-number-2">36.</span> система управления активами (ITAM)</h2>
<div class="outline-text-2" id="text-36">
<p>
ИТ-активы — это и оборудование, и лицензии на программное обеспечение.
</p>
<ul class="org-ul">
<li>собрать все сведения об ИТ-ресурсах в одном месте, установить связи между активами, услугами, договорами, задачами</li>
</ul>
</div>
</div>

<div id="outline-container-orgb24d096" class="outline-2">
<h2 id="orgb24d096"><span class="section-number-2">37.</span> Digital Marketing metrics</h2>
<div class="outline-text-2" id="text-37">
<ul class="org-ul">
<li>CLV - customer lifetime value - is a prognostication of the net profit contributed to the whole future
relationship with a customer.</li>
<li>ARPU - Average revenue per account/user/customer - total revenue divided by the number of subscribers. per
unit time, typically per year or month.</li>
<li>ARPDAU or ARPAU (Average Revenue Per Daily Active User) - how much revenue is generated from daily active users over
a 24-hour period. To see how some changes or events are affecting your revenue.</li>
<li>Conversion Rate (CR) - Number of conversions / Total number of visitors × 100%</li>
<li>Click-Through Rate (CTR) - Number of clicks / Number of impressions × 100%</li>
<li>Cost per Click (CPC) -  = Ad costs / Number of clicks</li>
<li>Cost per Action (CPA) - = number of actions completed / Ad costs . see "CPA case study"</li>
<li>Cost per Lead (CPL) - Ad costs / Number of acquired leads - you pay for the contact information of a person
potentially interested in your offer.</li>
<li>Customer Acquisition Cost (CAC) - is the cost of convincing someone to buy. = cost + cost + cost</li>
<li>Abandon Rate - calls/carts = Abandoned calls / Total number of inbound calls × 100%</li>
<li>Return on Ad Spend (ROAS) - measuring ad performance = Revenue derived from the ad / Cost of the ad</li>
<li>Return on Investment (ROI, or ROMI for marketing) = ((Gain from investment — Cost of investment) / Cost of
investment )× 100%
<ul class="org-ul">
<li>for almost every process</li>
</ul></li>
<li>Time to Payback CAC - how long it’ll take to earn back marketing costs spent on acquiring a customer
<ul class="org-ul">
<li>= Customer acquisition cost (CAC) / (Average revenue per account (ARPA) × Gross profit)</li>
<li>Gross Profit = Revenue — Cost of goods/services sold</li>
</ul></li>
<li>Monthly Recurring Revenue (MRR)
<ul class="org-ul">
<li>= Total fees paid by customers monthly</li>
<li>or = ARPA per month × Total number of customers per month</li>
</ul></li>
<li>Churn Rate - percentage of customers or subscribers who discontinue their subscriptions during a given
period.
<ul class="org-ul">
<li>Customer Churn - percentage of customers that stopped using your company's product</li>
<li>= number of churned customers in the given period / total number of customers at the start of the perion</li>
</ul></li>
<li>Revenue Churn (MRR) - monthly recurring revenue = (Churned MRR in the period / MRR at the start of the
period) × 100%</li>
<li>Share of Market (SOM) - how big your share of the market is. = (Company sales / Sales in the entire market)
× 100%</li>
<li>Share of Wallet (SOW) - percentage of dollars in customers’ pockets that they spend on you
<ul class="org-ul">
<li>= (Total cost of purchases a customer has made from your company / Total cost of purchases the customer
has made in the same product or service class) × 100%</li>
</ul></li>
<li>Customer Retention Rate (CRR) or reversed customer churn - percentage of customers retained over a period of
time. Though a 100% customer retention rate is idea.
<ul class="org-ul">
<li>= (Total customers at end of period - new customers acquired) / customers at begining of period * 100</li>
<li>= (Number of customers at the start of the period - number of customers acquired during the period) /
number of customers at the end of the period * 100 - ?????7</li>
</ul></li>
<li>DAU/MAU ratio (stickiness) - daily active users to monthly active users ratio, measures the number of days
per month that users engage with an application. For example, if the DAU/MAU ratio is 75%, users are
engaging with an app 75% of the time or 22.5 days per month, on average. A 100% DAU/MAU score means users
are visiting an app every day.
<ul class="org-ul">
<li>active user is a customer that completes one or more actions on an app</li>
<li>Average DAU - Sum of each day's unique users / Number of days in the month</li>
<li>Average MAU = Sum of each month's unique users / 12</li>
</ul></li>
<li>Cohort retention -</li>
<li>Customer acquisition cost - how much money, resources, time and effort it takes to attract prospects and turn them into paying customers</li>
<li>Customer churn rate - rate at which customers cease subscribing to a service or supporting a business</li>
<li>Conversion rate - rate at which a user who is visiting a website becomes a paying customer by making a purchase</li>
</ul>
</div>
<div id="outline-container-org8bc56b2" class="outline-3">
<h3 id="org8bc56b2"><span class="section-number-3">37.1.</span> terms</h3>
<div class="outline-text-3" id="text-37-1">
<ul class="org-ul">
<li>marketing/purchase/customer/sales/conversion funnel - consumer-focused: Awareness -&gt; Interest -&gt; Desire -&gt;
Action -&gt; Loyalty</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcc769ae" class="outline-2">
<h2 id="orgcc769ae"><span class="section-number-2">38.</span> Data Strategy</h2>
<div class="outline-text-2" id="text-38">
<p>
outlines the people, processes, and technology your organization needs to achieve its business goals
</p>
<ul class="org-ul">
<li>How can you use data to support your business goals and solve business problems?</li>
<li>Will the data sourced provide insights that will allow you to better understand your customers and their needs?</li>
<li>What processes are required to ensure the data is of high quality?</li>
<li>What technology will enable the storage, sharing, and analysis of data?</li>
</ul>
</div>
</div>
<div id="outline-container-orgbeca90c" class="outline-2">
<h2 id="orgbeca90c"><span class="section-number-2">39.</span> Data Management Plan</h2>
<div class="outline-text-2" id="text-39">
<p>
eliminating data silos and reducing data quality issues
</p>
<ul class="org-ul">
<li>to Define how to manage, secure, and use your data throughout its full lifecycle</li>
<li>Enable business users to have access to meaningful data</li>
</ul>

<p>
No matter the type or size of your company, Data helps you innovate digitally while mitigating risks.
</p>
</div>
</div>

<div id="outline-container-org501e9c7" class="outline-2">
<h2 id="org501e9c7"><span class="section-number-2">40.</span> Data masking</h2>
<div class="outline-text-2" id="text-40">
<p>
<a href="https://codeberg.org/h5hackathon">https://codeberg.org/h5hackathon</a>
</p>
</div>
<div id="outline-container-orgcfd3660" class="outline-3">
<h3 id="orgcfd3660"><span class="section-number-3">40.1.</span> Terms:</h3>
<div class="outline-text-3" id="text-40-1">
<ul class="org-ul">
<li>Masking</li>
<li>Process Private Data</li>
<li>Обезличивание данных</li>
<li>discovering - поиск приватных данных в маскированных, определение типа путем сопоставления с частью открытой базы</li>
<li>стратегии - таблица: приватный тип -&gt; способ для правдоподобного маскирования</li>
<li>seed-таблица - хэш таблица замены.</li>
<li>Personally Identifiable Information (PII)</li>
</ul>

<p>
Sensitive data identification
</p>
<dl class="org-dl">
<dt>Column-level profiling</dt><dd>REGEX expressions to scan the column names (metadata) of the selected data sources</dd>
<dt>data-level profiling</dt><dd>REGEX expressions, but to scan the actual data instead of the metadata.</dd>
</dl>

<p>
Securing
</p>
<ul class="org-ul">
<li>masking (anonymization) - replacing values with realistic yet fictitious data</li>
<li>tokenization (pseudonymization) - reversible algorithms so that the data can be returned to its original
state. form of encryption.</li>
</ul>
</div>
</div>
<div id="outline-container-org3af5fa7" class="outline-3">
<h3 id="org3af5fa7"><span class="section-number-3">40.2.</span> For</h3>
<div class="outline-text-3" id="text-40-2">
<p>
Для чего? PCI DSS требования Центробанка и законы о персональных данных. Отдел разработки не может просто взять персональные данные (ПДн) и проверить на них новую фичу, обучить Machine Learning-модель. Этот момент регулируют законы и отраслевые стандарты.
</p>

<p>
152-ФЗ, персональные данные — это любая информация, которая относится к физическому лицу (или юридическому), в том числе его ФИО, дата и место рождения, семейное положение, образование, профессия и другая информация.
</p>

<p>
Две цели: скрыть данные и пройти проверку корректности данных
</p>
</div>
</div>

<div id="outline-container-org1ba09ef" class="outline-3">
<h3 id="org1ba09ef"><span class="section-number-3">40.3.</span> Проблемы:</h3>
<div class="outline-text-3" id="text-40-3">
<ul class="org-ul">
<li>если есть хэш таблица замены, то можно это все взломать</li>
<li>генерация правдоподобной замены для обучения AI</li>
</ul>

<p>
Зарекомендовал себя ETL-процесс, который считывает данные с базы в продакшн, на лету модифицирует значения
 полей с критичной информацией и записывает результат в базу-приёмник.
</p>

<ul class="org-ul">
<li>seed-таблица <a href="https://habr.com/ru/companies/T1Holding/articles/490740/">https://habr.com/ru/companies/T1Holding/articles/490740/</a></li>
<li>поиску ПД <a href="https://habr.com/ru/companies/T1Holding/articles/706870/">https://habr.com/ru/companies/T1Holding/articles/706870/</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgb9cb2f3" class="outline-3">
<h3 id="orgb9cb2f3"><span class="section-number-3">40.4.</span> Варианты решения</h3>
<div class="outline-text-3" id="text-40-4">
<p>
Варианты решения: ПОИСК ПРИВАТНЫХ ДАННЫ:
</p>
<ul class="org-ul">
<li>разметка резулярными выражениями + ручная доразметка. Поиск сущностей, векторизация и классификация.</li>
</ul>

<p>
Варианты решения: ГЕНЕРАЦИЯ ПРАВДОПОДЫБНЫХ ДАННЫХ:
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Format-preserving_encryption">https://en.wikipedia.org/wiki/Format-preserving_encryption</a> + с понижением размерности алфавита и
постобработкой. Берем используемый алфавит и вычисляем хеш-суммы всех его символов. Для этого используем
AES-hash с неким ключом. Полученные хеш-суммы используем для сортировки символов и получения таблицы
подстановки. удалением из «целевого» алфавита части символов. Тогда шифрование становится шифрованием с
потерей данных — то есть необратимым. добавили beautify-функцию, которая делает слова более приятными для
слуха.</li>
</ul>
</div>
</div>

<div id="outline-container-orgdd9944c" class="outline-3">
<h3 id="orgdd9944c"><span class="section-number-3">40.5.</span> Open source tools</h3>
<div class="outline-text-3" id="text-40-5">
</div>
<div id="outline-container-orga71848c" class="outline-4">
<h4 id="orga71848c"><span class="section-number-4">40.5.1.</span> Delphix - not open</h4>
<div class="outline-text-4" id="text-40-5-1">
<p>
the main data masking engine and many of its connectors are proprietary and not open source.
</p>

<p>
Data Masking Tool <a href="https://www.delphix.com/">https://www.delphix.com/</a>
</p>
<ul class="org-ul">
<li>pull this data from production, scrub it, and mask some of the confidential components of it, and easily
deploy that through our ecosystem</li>
</ul>

<p>
Multicloud data automation, compliance, and governance for the application lifecycle.
</p>

<p>
Data sources apps:
</p>
<ul class="org-ul">
<li>SaaS/PaaS/IaaS</li>
<li>On-Prem/Private Cloud</li>
<li>Legacy/Mainframe</li>
</ul>

<p>
Data target environments:
</p>
<ul class="org-ul">
<li>Dev/Test</li>
<li>Production support</li>
<li>Analytics</li>
</ul>

<p>
Data privacy laws:
</p>
<ul class="org-ul">
<li>GLBA - the Gramm-Leach-Bliley Act</li>
<li>PCI DSS</li>
<li>GDPR - General Data Protection Regulation</li>
<li>HIPAA</li>
<li>LGPD</li>
<li>CCPA</li>
<li>152-ФЗ, персональные данные</li>
</ul>
</div>
</div>
<div id="outline-container-orgbc3c8a5" class="outline-4">
<h4 id="orgbc3c8a5"><span class="section-number-4">40.5.2.</span> Fogger - PHP</h4>
<div class="outline-text-4" id="text-40-5-2">
<p>
[<a href="https://github.com/TheSoftwareHouse/fogger">https://github.com/TheSoftwareHouse/fogger</a>]
</p>
</div>
</div>
<div id="outline-container-orga3ea923" class="outline-4">
<h4 id="orga3ea923"><span class="section-number-4">40.5.3.</span> Masked-AI -  Python SDK + CLi</h4>
<div class="outline-text-4" id="text-40-5-3">
<ul class="org-ul">
<li>[<a href="https://github.com/cado-security/masked-ai">https://github.com/cado-security/masked-ai</a>]</li>
<li>[<a href="https://www.cadosecurity.com/blog/introducing-masked-ai-an-open-source-library-that-enables-the-usage-of-llm-apis-more-securely">https://www.cadosecurity.com/blog/introducing-masked-ai-an-open-source-library-that-enables-the-usage-of-llm-apis-more-securely</a>]</li>
</ul>

<p>
features:
</p>
<ul class="org-ul">
<li>masking - persons names, credit card numbers, email addresses, phone numbers, web links and IP addresses,
using either Regex or the NLTK library.</li>
<li>reversing - Storing a lookup table for the placeholders  -&gt; data, to be used later to reconstruct the response</li>
<li>allow to send and receive request to OpenAI</li>
<li>easely extension by regex</li>
</ul>

<p>
requirements:
</p>
<ul class="org-ul">
<li>nltk==3.8.1</li>
<li>numpy==1.24.2</li>
</ul>
</div>
</div>

<div id="outline-container-orge73e485" class="outline-4">
<h4 id="orge73e485"><span class="section-number-4">40.5.4.</span> <span class="todo TODO">TODO</span> Percona Server</h4>
</div>
<div id="outline-container-org6b7198f" class="outline-4">
<h4 id="org6b7198f"><span class="section-number-4">40.5.5.</span> RAGFlow</h4>
<div class="outline-text-4" id="text-40-5-5">
<p>
<a href="https://github.com/infiniflow/ragflow">https://github.com/infiniflow/ragflow</a>
</p>

<p>
crazy dependencies
</p>
</div>
</div>
<div id="outline-container-org0ab5f25" class="outline-4">
<h4 id="org0ab5f25"><span class="section-number-4">40.5.6.</span> Verba</h4>
<div class="outline-text-4" id="text-40-5-6">
<p>
<b>"weaviate-client==3.23.1",</b>
"python-dotenv==1.0.0",
<b>"openai==0.27.9",</b>
"wasabi==1.1.2",
"fastapi==0.102.0",
"uvicorn[standard]==0.29.0",
"click==8.1.7",
"asyncio==3.4.3",
"tiktoken==0.6.0",
"requests==2.31.0",
"pypdf==4.2.0",
"python-docx==1.1.2",
</p>

<p>
<a href="https://github.com/weaviate/Verba">https://github.com/weaviate/Verba</a>
<a href="https://github.com/openai/openai-python">https://github.com/openai/openai-python</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgf98402d" class="outline-3">
<h3 id="orgf98402d"><span class="section-number-3">40.6.</span> LLMs</h3>
<div class="outline-text-3" id="text-40-6">
<p>
<a href="https://huggingface.co/iiiorg/piiranha-v1-detect-personal-information">https://huggingface.co/iiiorg/piiranha-v1-detect-personal-information</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org49d0d29" class="outline-2">
<h2 id="org49d0d29"><span class="section-number-2">41.</span> Distributed Database System or Distributed DBMS</h2>
<div class="outline-text-2" id="text-41">
<p>
Types: Homogeneous/ Heterogeneous Database - OS, DBMS and data structures all the same or different
</p>

<p>
Types: Replication/Fragmentation -
</p>
<ul class="org-ul">
<li>Horizontal fragmentation - Splitting by rows</li>
<li>Vertical fragmentation - Splitting by columns</li>
</ul>

<p>
Partially Replicated (caching) - distribution of the tables is done in accordance to the frequency of access.
</p>

<p>
Mixed Distribution - a combination of fragmentation and partial replications.
</p>

<p>
Architectures:
</p>
<ul class="org-ul">
<li>client-server</li>
<li>Peer-to-peer - each to all other</li>
<li>Federated - integrated through a middleware layer providing interface (master nodes).</li>
</ul>


<p>
Distribution Transparency - details hidden from the users.
</p>
<ul class="org-ul">
<li>Location transparency - user can query on any table(s) or fragment(s) of a table as if they were stored locally</li>
<li>Fragmentation transparency -  enables users to query upon any table as if it were unfragmented</li>
<li>Replication transparency - to query upon a table as if only a single copy of the table exists.</li>
</ul>

<p>
styles of table distribution:
</p>
<dl class="org-dl">
<dt>Hash Distribution or Distributed Key</dt><dd>the values of the fields used to determine how data is distributed.
<ul class="org-ul">
<li>if 80% of records have the same value, 80% values being stored in the same node.</li>
</ul></dd>
<dt>Round-Robin Distribution</dt><dd>.
<ul class="org-ul">
<li>identical values may get stored on different nodes - may slow down some queries.</li>
</ul></dd>
</dl>
</div>
<div id="outline-container-orgee0641d" class="outline-3">
<h3 id="orgee0641d"><span class="section-number-3">41.1.</span> Concurrency Control</h3>
<div class="outline-text-3" id="text-41-1">
<ul class="org-ul">
<li>Distributed Two-phase Locking Algorithm
<ul class="org-ul">
<li>Centralized two-phase locking</li>
<li>Primary copy two-phase locking</li>
<li>Distributed two-phase locking</li>
</ul></li>
<li>Distributed Timestamp Concurrency Control</li>
<li>Conflict Graphs</li>
<li>Distributed Optimistic Concurrency Control Algorithm</li>
</ul>
</div>
</div>
<div id="outline-container-org3c06f56" class="outline-3">
<h3 id="org3c06f56"><span class="section-number-3">41.2.</span> links</h3>
<div class="outline-text-3" id="text-41-2">
<p>
<a href="https://www.tutorialspoint.com/distributed_dbms/distributed_dbms_quick_guide.htm">https://www.tutorialspoint.com/distributed_dbms/distributed_dbms_quick_guide.htm</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgc3108aa" class="outline-2">
<h2 id="orgc3108aa"><span class="section-number-2">42.</span> Analytics Engineering, DataOps - DBT tool</h2>
<div class="outline-text-2" id="text-42">
<ul class="org-ul">
<li><a href="https://handbook.gitlab.com/handbook/enterprise-data/platform/dbt-guide/">https://handbook.gitlab.com/handbook/enterprise-data/platform/dbt-guide/</a></li>
</ul>

<p>
<b>dbt</b> is the T in ELT. For:
</p>
<ul class="org-ul">
<li>Redshift, Snowflake, and BigQuery - popular Data Warehouse databases that scallable and performant.
<ul class="org-ul">
<li>So data transformation use cases with them can be much more effectively handled in-database.</li>
</ul></li>
</ul>

<p>
How: dbt code (SQL and Jinja), compiled it to SQL, and then run against your database.
</p>
</div>
<div id="outline-container-orgfe0c738" class="outline-3">
<h3 id="orgfe0c738"><span class="section-number-3">42.1.</span> features</h3>
<div class="outline-text-3" id="text-42-1">
<p>
automated testing, documentation, extensibility, CI/CD, data governance
</p>
</div>
</div>
<div id="outline-container-org8452087" class="outline-3">
<h3 id="org8452087"><span class="section-number-3">42.2.</span> terms</h3>
<div class="outline-text-3" id="text-42-2">
<ul class="org-ul">
<li>model: a data transformation, expressed in a single SELECT statement.</li>
<li>materialization: the strategy by which a data model is built in the warehouse.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org453f770" class="outline-2">
<h2 id="org453f770"><span class="section-number-2">43.</span> SQLite</h2>
<div class="outline-text-2" id="text-43">
<p>
License: public domain
</p>
</div>
<div id="outline-container-orgfbf7bd1" class="outline-3">
<h3 id="orgfbf7bd1"><span class="section-number-3">43.1.</span> features</h3>
<div class="outline-text-3" id="text-43-1">
<ul class="org-ul">
<li>json</li>
<li>R-Tree structure for geospatial systems.</li>
<li>CSV virtual table - directly read and query RFC 4180 formatted files.</li>
<li>FTS5 table -  full-text search (FTS5 Extension)</li>
<li>Partial Indexes</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgeee046c" class="outline-2">
<h2 id="orgeee046c"><span class="section-number-2">44.</span> Redis vs MongoDB</h2>
<div class="outline-text-2" id="text-44">
<ul class="org-ul">
<li>MongoDB: scalability, reliability, and handling large volumes of data
<ul class="org-ul">
<li>JSON-like documents (BSON - Binary JSON) in collections.</li>
<li>multi-document atomic, consistent, isolated, and durable (ACID) transactions, ensuring data consistency
across multiple operations</li>
<li>MongoDB Query Language (MQL).</li>
</ul></li>
<li>Redis: performance, especially for real-time data processing and caching scenarios.
<ul class="org-ul">
<li>key-value store model</li>
<li>single atomic operations. Rollbacks must be managed in the application code.</li>
<li>commands for querying data</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd246c4e" class="outline-2">
<h2 id="orgd246c4e"><span class="section-number-2">45.</span> YDB</h2>
<div class="outline-text-2" id="text-45">
<p>
обладает доступностью 99,99%, способна обрабатывать более 7 млн транзакций в секунду и позволяет создавать как
 транзакционные приложения, так и корпоративные хранилища данных для аналитических сценариев.
</p>
</div>

<div id="outline-container-orgc736a3d" class="outline-3">
<h3 id="orgc736a3d"><span class="section-number-3">45.1.</span> provide</h3>
<div class="outline-text-3" id="text-45-1">
<ul class="org-ul">
<li>Apache License 2.0</li>
<li>Strict consistency which can be relaxed to increase performance.</li>
<li>Support for queries written in YQL (an SQL dialect for working with big data).</li>
<li>Automatic data replication.</li>
<li>High availability with automatic failover in case a server, rack, or availability zone goes offline.</li>
<li>Automatic data partitioning as data or load grows.</li>
<li>relational data model and manages row-oriented and column-oriented tables with a predefined schema.</li>
<li>YDB natively supports different processing options, such as OLTP and OLAP</li>
<li>Client applications interact with YDB based on gRPC that has an open specification.</li>
</ul>
</div>
</div>
<div id="outline-container-org24cfa3f" class="outline-3">
<h3 id="org24cfa3f"><span class="section-number-3">45.2.</span> cases</h3>
<div class="outline-text-3" id="text-45-2">
<ul class="org-ul">
<li>When using NoSQL systems, if strong data consistency is required.</li>
<li>When using NoSQL systems, if you need to make transactional updates to data stored in different rows of one or more tables.</li>
<li>In systems that need to process and store large amounts of data and allow for virtually unlimited horizontal
scalability (using industrial clusters of 5000+ nodes, processing millions of RPS, and storing petabytes of
data).</li>
<li>In low-load systems, when supporting a separate DB instance would be a waste of money (consider using YDB in
serverless mode instead).</li>
<li>In systems with unpredictable or seasonally fluctuating load (you can add/reduce computing resources on
request and/or in serverless mode).</li>
<li>In high-load systems that shard load across relational DB instances.</li>
<li>When developing a new product with no reliable load forecast or with an expected high load beyond the
capabilities of conventional relational databases.</li>
<li>In projects where the simultaneous handling of transactional and analytical workloads is required.</li>
</ul>
</div>
</div>


<div id="outline-container-orgcd158f8" class="outline-3">
<h3 id="orgcd158f8"><span class="section-number-3">45.3.</span> links</h3>
<div class="outline-text-3" id="text-45-3">
<p>
<a href="https://github.com/ydb-platform">https://github.com/ydb-platform</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org24c591a" class="outline-2">
<h2 id="org24c591a"><span class="section-number-2">46.</span> Business analysis</h2>
<div class="outline-text-2" id="text-46">
<p>
цели:
</p>
<ul class="org-ul">
<li>снизить затраты - выявить причины и предложить способы</li>
<li>найти решение проблемы - найти причину, решения, выбрать лучшее</li>
<li>вовремя закончить проект - спланировать, сформулировать ресурсы рисик зависимости, контролировать выполнение и соответствие тредованиям</li>
<li>повысить эффективность - проанализировать текущие бизнес процессы, выявить узкие мести и решения</li>
<li>найти новые возможности для роста - изучить внешнюю и внутреннюю среду, выявить сильные и слабые стороны, определить потребности рынка, предложить новые продукты.</li>
</ul>

<p>
виды
</p>
<ul class="org-ul">
<li>анализ предприятия</li>
<li>анализ области или нарпавления</li>
<li>анализ бизнес процесса или правила</li>
<li>анализ требований</li>
</ul>

<p>
принципы
</p>
<dl class="org-dl">
<dt>целевая ориентированность</dt><dd>конкретное намерение, измеримое, реалистичное и сответствующее стратегии компании</dd>
<dt>системный подход</dt><dd>аналитик должен рассмотривать все факторы как систему учитывая все связи.</dd>
<dt>критическое мышление</dt><dd>основываться только на фактах, а не на мнениях. проверять достоверность и актуальность источников. сравнивать разные решения</dd>
<dt>коммуникабельность</dt><dd>четко и понятно излагать свои мысли и предложения.</dd>
<dt>гибкость</dt><dd>адаптироваться к изменениям бизнес планов</dd>
</dl>

<p>
методы
</p>
<dl class="org-dl">
<dt>моделирование</dt><dd>.</dd>
<dt>аналитическая отчетность</dt><dd>показать основные показатели, тенденции или закономерности в бизнесе.</dd>
<dt>Оперативная аналитическая обработка данных (OLAP)</dt><dd>использовать в работе</dd>
<dt>Интеллектуальный анализ данных (Data Mining)</dt><dd>чтобы прогнозировать будущее поведение или результаты,
определять аномалии или отклонения в данных.</dd>
</dl>

<p>
шаги
</p>
<ol class="org-ol">
<li>Определение проблемы или потребности.</li>
<li>Сбор данных и информации.</li>
<li>Анализ данных и информации.</li>
<li>Предложение решений или рекомендаций.</li>
<li>Объявление результатов анализа.</li>
<li>Оценка и проверка правильности решения.</li>
</ol>
</div>
</div>
<div id="outline-container-orgaa8e325" class="outline-2">
<h2 id="orgaa8e325"><span class="section-number-2">47.</span> tmp</h2>
<div class="outline-text-2" id="text-47">
</div>
<div id="outline-container-orgf54b2d1" class="outline-3">
<h3 id="orgf54b2d1"><span class="section-number-3">47.1.</span> resume BI</h3>
<div class="outline-text-3" id="text-47-1">
<p>
Technology:
PostgreSQL, Pentaho data integration, Pentaho report designer, apachesuperset, MS power BI.
</p>


<p>
автоматизация ETL процедур посредством Apache Airflow
разработка и внедрение дашбордов с использованием ApacheSuperset
</p>


<p>
Корпоративноехранилищеданных(PostgreSQL, Pentaho BI, ApacheSuperset)
</p>


<p>
Рабочий процесс: Airflow Apache, Superset, Doсker
</p>

<p>
Технологии: PostgreSQL,PentahoDI, HP Vertica
</p>

<p>
Генерация гипотез о поведении пользователей и факторах влияющих на ключевые метрики (LTV, ARPU, ARPAU, Retention, ROMI и т.п.);
</p>


<p>
Разработка процессов извлечения, обработки и хранения данных (ETL) с использованием Python и Ruby скриптов. Оптимизация запросов к БД (Redshift, Vertica) и проектирование структуры хранения данных из разных источников (логи сервера, события из web и мобильных приложений, данные из production базы).
</p>

<p>
Пилотное внедрениехранилищданныхна основе Clickhouse и Exasol.
</p>


<p>
ETL Инструментарий: Oracle 11gR2, Informatica PowerCenter 9.x, Perl, Python 2.x, AIX shell,PentahoData Integration.
</p>


<p>
Внедрение аналитической системы прототипированием, перевод и рефакторинг всей имевшейся производственной отчетности за 3 мес (Oracle BI +PentahoDI + MS)
</p>


<p>
• разработка отчётов для одного из крупнейших интеграторов в РФ (Pentaho, Saiku);
</p>


<p>
Ашан: Используемые инструменты: Microstrategy, Oracle PL\SQL, SQL, Sparx EA, Talend Studio
</p>

<p>
(vertica, clickhouse, exasol, python, qlikview).
</p>

<p>
Работа с : Greenplum, Aginity
</p>

<p>
<a href="https://habr.com/ru/post/444758/">https://habr.com/ru/post/444758/</a>
</p>

<p>
<a href="https://arenadata.tech/products/aaw/">https://arenadata.tech/products/aaw/</a>
</p>
</div>
</div>

<div id="outline-container-orgf931482" class="outline-3">
<h3 id="orgf931482"><span class="section-number-3">47.2.</span> my review</h3>
<div class="outline-text-3" id="text-47-2">
<p>
<b>Data warehouse:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Greenplum BD</span></li>
</ul>

<p>
designed to manage large-scale analytic data warehouses and business intelligence workloads.
</p>
<ul class="org-ul">
<li>на основе PostgreSQL</li>
<li>massively parallel processing (MPP)</li>
<li>PostgreSQL interface</li>
<li>performs best with a denormalized schema design</li>
<li>Greenplum provides both row-oriented and <b>column-oriented</b> table types</li>
<li>logically partition table data, either by range or by a list of values - each partition of a single table
can utilize its own storage method (row vs. column orientation)</li>

<li><span class="underline">MariaBD</span></li>
</ul>

<p>
for a wide variety of use cases as replacement for MySQL
</p>
<ul class="org-ul">
<li>single server or multi-server</li>
<li>columnar storage optimized for interactive</li>
<li>ad hoc analytics</li>
<li>scaling out as needed</li>
</ul>

<p>
Bad:  Vertica CE (limited to 1TB of data and 3 database nodes), Clickhouse (сырая, недокум-ные Upd/Del),
</p>

<p>
<b>Report system:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Power BI Desktop</span></li>
</ul>

<p>
один из лучших, отчет сохраняется в виде файла и открывается в том виде как был создан.
-cons:
</p>
<ul class="org-ul">
<li>Windows на одном рабочем месте, нужно предварительно установить и проверить соединение с базой</li>

<li><span class="underline">Metabase</span></li>
</ul>

<p>
можно развернуть в докере и дать доступ через веб.
-cons: мало средств визуализации, неудобный фильтр
</p>

<ul class="org-ul">
<li><span class="underline">Microstrategy</span> Desktop Free - аналог Power BI, требует изучение</li>

<li><span class="underline">Saiku Analytics</span> - web c ограничениями <a href="https://www.meteorite.bi/saiku-product-comparison">https://www.meteorite.bi/saiku-product-comparison</a></li>
</ul>


<p>
Bad: Apahce <span class="underline">SuperSet</span> (нельзя изменить названия полей),
<span class="underline">Pentaho</span> BI Suite (много ограничений по функционалу, поменялась компания 2017. 2017 stable),
<span class="underline">Vertica</span> CE (limited to 1TB of data and 3 database nodes),
<span class="underline">Exasol</span> CE(Can store up to 200 GB or raw data, single machine)
</p>

<p>
Отметил ELT интсрументы Apache Airflow и Talend Open Studio
</p>
</div>
</div>
<div id="outline-container-org997e252" class="outline-3">
<h3 id="org997e252"><span class="section-number-3">47.3.</span> my review2</h3>
<div class="outline-text-3" id="text-47-3">
<p>
Qlik Sense Desktop (Windows) аналог Power BI
</p>
<ul class="org-ul">
<li>limits:</li>
<li>Section Access is not supported - When loading a QlikView App with Section Access an error message will be displayed.</li>
<li>Hidden Script is not supported - Saving an App with hidden script will NOT save the hidden script - Data of hidden script will be lost in the next reload.</li>
</ul>

<p>
Tableau Public (Desktop Windows, mac)
 cons:
</p>
<ul class="org-ul">
<li>Distribution: Cloud (you can not save Tableau Public workbooks locally)</li>
<li>Tableau Public has a limit of 10 million rows of data that is allowed in any single connection</li>
<li>Account Space: Each account holder will be able to save up to 10 gigabytes (GB) of content to Tableau Public</li>
</ul>

<p>
IBM Cognos платный инструмент с многообещающими особенностями. Лицензированием специалистов.
</p>
</div>
</div>
</div>

<div id="outline-container-org66c104d" class="outline-2">
<h2 id="org66c104d"><span class="section-number-2">48.</span> links</h2>
<div class="outline-text-2" id="text-48">
<p>
<a href="https://dataschool.com/data-governance/">https://dataschool.com/data-governance/</a>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2025-01-14 Tue 12:27</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
