<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-01-14 Tue 12:49 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgc6f8836">1. common use cases</a></li>
<li><a href="#org4fc4ea2">2. theory - linux kernel</a>
<ul>
<li><a href="#orga5db330">2.1. Symmetric Multi-Processing</a></li>
</ul>
</li>
<li><a href="#org7a267e9">3. links</a></li>
<li><a href="#org171849e">4. dev and filesystem</a>
<ul>
<li><a href="#org038d9cc">4.1. divice file</a></li>
<li><a href="#orgeceaa72">4.2. disks</a></li>
<li><a href="#org8f2bf40">4.3. bad blocks</a></li>
<li><a href="#org4c9dacc">4.4. partition table theory</a></li>
<li><a href="#orge1a0e6d">4.5. boot BIOS/UEFI/MBR/GPT</a></li>
<li><a href="#org4d11b4a">4.6. btrfs</a>
<ul>
<li><a href="#orgc203b69">4.6.1. mount options</a></li>
</ul>
</li>
<li><a href="#org1d76e18">4.7. boot sequence</a></li>
<li><a href="#org8f817a1">4.8. clone hard drive</a></li>
<li><a href="#orgc0225b9">4.9. backup</a>
<ul>
<li><a href="#org8477925">4.9.1. rsync:</a></li>
<li><a href="#org56ab502">4.9.2. <span class="todo TODO">TODO</span> cpio</a></li>
<li><a href="#orgeda1d57">4.9.3. tar</a></li>
<li><a href="#orgc9c93cb">4.9.4. <span class="todo TODO">TODO</span> backup-tar</a></li>
<li><a href="#orga334d03">4.9.5. links</a></li>
</ul>
</li>
<li><a href="#org61d944d">4.10. hierarchy</a></li>
<li><a href="#org2f3f3a6">4.11. chroot</a>
<ul>
<li><a href="#org737d5e5">4.11.1. chroot</a></li>
<li><a href="#org87a03fb">4.11.2. btrs subvolumes</a></li>
<li><a href="#org2c5d38a">4.11.3. Logical Volume Management (LVM) subvolumes</a></li>
</ul>
</li>
<li><a href="#org2ee745d">4.12. filesystem attributes</a>
<ul>
<li><a href="#orgeff588c">4.12.1. traditional permissions Unix and POSIX</a></li>
<li><a href="#orgb25b5f3">4.12.2. extended attributes (abbreviated xattr)</a></li>
<li><a href="#orgfea8016">4.12.3. POSIX ACLs</a></li>
</ul>
</li>
<li><a href="#orgaca9426">4.13. SSD</a></li>
</ul>
</li>
<li><a href="#org6f26262">5. disk encryption</a>
<ul>
<li><a href="#org9532a1d">5.1. LUKS partition</a></li>
<li><a href="#org1b36461">5.2. LUKS with a detached header</a>
<ul>
<li><a href="#orgd845c3c">5.2.1. create/restore backup header</a></li>
</ul>
</li>
<li><a href="#org89f1eb5">5.3. LVM (Logical Volume Manager)</a>
<ul>
<li><a href="#org7b6235a">5.3.1. LVM terminology:</a></li>
</ul>
</li>
<li><a href="#org7c14501">5.4. Bootable USB Key</a></li>
<li><a href="#orgd7fb48c">5.5. simple full</a></li>
<li><a href="#org91e5e1e">5.6. Dracut</a>
<ul>
<li><a href="#orge9aa22a">5.6.1. inspect initramfs</a></li>
<li><a href="#org5435f1a">5.6.2. tmp</a></li>
<li><a href="#orga1422e8">5.6.3. 91crypt-gpg</a></li>
<li><a href="#orgf8468b3">5.6.4. kernel command line</a></li>
</ul>
</li>
<li><a href="#org525d066">5.7. links</a></li>
</ul>
</li>
<li><a href="#org53f686b">6. bootloader</a>
<ul>
<li><a href="#org1669618">6.1. limine</a>
<ul>
<li><a href="#org994a6de">6.1.1. links</a></li>
</ul>
</li>
<li><a href="#orgcfc21d1">6.2. grub</a>
<ul>
<li><a href="#org6e740cb">6.2.1. notes</a></li>
<li><a href="#orgc4a5a62">6.2.2. disable menu</a></li>
</ul>
</li>
<li><a href="#org8c1ef50">6.3. links</a></li>
</ul>
</li>
<li><a href="#org06d2a7e">7. linux<sub>kernel</sub></a>
<ul>
<li><a href="#orgd8bb004">7.1. theory</a>
<ul>
<li><a href="#org477758c">7.1.1. initrams</a></li>
</ul>
</li>
<li><a href="#org7fdaa7c">7.2. usage </a></li>
<li><a href="#orgb8db82b">7.3. config for dracut </a></li>
<li><a href="#orgc7e1c62">7.4. security config </a></li>
<li><a href="#orgcb241fa">7.5. hardening</a></li>
<li><a href="#orgf006d74">7.6. nconfig search</a></li>
<li><a href="#org2696c5b">7.7. menuconfig search</a></li>
<li><a href="#org0a862cb">7.8. add binary driver to kernel</a></li>
<li><a href="#orgf1e6493">7.9. modules parameters</a></li>
<li><a href="#org2599956">7.10. renaming vmlinuz and System.map </a></li>
<li><a href="#org43ec86c">7.11. GNU Linux-libre</a></li>
<li><a href="#orgd7122c0">7.12. Linux Libre</a>
<ul>
<li><a href="#org2e1e238">7.12.1. kernel deblob script of GNU Linux-libre project</a></li>
<li><a href="#org254180e">7.12.2. librewolf</a></li>
</ul>
</li>
<li><a href="#org3882daa">7.13. links</a></li>
</ul>
</li>
<li><a href="#org4c4354b">8. keyboard</a>
<ul>
<li><a href="#orge6c7221">8.1. xmodmap</a>
<ul>
<li><a href="#org0fef1dd">8.1.1. .xmodmap</a></li>
<li><a href="#org7d859c2">8.1.2. usage Firefox &amp; IJKL</a></li>
<li><a href="#org89aad51">8.1.3. Ctrl as a CapsLook</a></li>
</ul>
</li>
<li><a href="#orgf434b0c">8.2. xkb</a>
<ul>
<li><a href="#orgd02d917">8.2.1. files to autostart</a></li>
<li><a href="#org0ec0c59">8.2.2. LINKS</a></li>
<li><a href="#org21cbdea">8.2.3. <span class="todo TODO">TODO</span> Ctrl+key</a></li>
<li><a href="#org600988e">8.2.4. Ctrl+Shift problem</a></li>
<li><a href="#org963d993">8.2.5. disable capslock</a></li>
<li><a href="#orgdc689e5">8.2.6. Right Alt as Ctrl</a></li>
</ul>
</li>
<li><a href="#org9df93e5">8.3. keyboard theory</a></li>
<li><a href="#orgc4cad80">8.4. Tab to right Alt</a></li>
<li><a href="#org59489d5">8.5. GTK Emacs</a></li>
<li><a href="#org411e599">8.6. <span class="todo TODO">TODO</span> unicode characters and emoji</a></li>
<li><a href="#orgea211b7">8.7. rebind</a>
<ul>
<li><a href="#orgbf33723">8.7.1. C++ http://yashiromann.sakura.ne.jp/x11keymacs/index-en.html</a></li>
<li><a href="#org1384161">8.7.2. C https://github.com/kawao/x-set-keys</a></li>
<li><a href="#org3d44394">8.7.3. XCompose - cannot bind to Return</a></li>
<li><a href="#org80f85cc">8.7.4. xkb ISO<sub>Level3</sub><sub>Shift</sub> - require unused key</a></li>
</ul>
</li>
<li><a href="#org7f4c0b9">8.8. pynput - cannot suppress pressed</a></li>
<li><a href="#orge30b69d">8.9. kaymap with dumpkeys/loadkeys</a>
<ul>
<li><a href="#org106d7d9">8.9.1. pressing Caps Lock key once or more sets the keyboard in CapsLock state and pressing either of the Shift keys releases it.</a></li>
</ul>
</li>
<li><a href="#org33aded3">8.10. /usr/share/X11/xkb/symbols/pc</a></li>
<li><a href="#org341a82c">8.11. mouse emulation</a></li>
</ul>
</li>
<li><a href="#org00c504c">9. monitor</a>
<ul>
<li><a href="#org4368ea1">9.1. brightness</a></li>
<li><a href="#org793263b">9.2. colours</a></li>
</ul>
</li>
<li><a href="#orgdab096d">10. software debuging</a>
<ul>
<li>
<ul>
<li><a href="#org95fff58">10.0.1. network requests by Process</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgffe5b12">11. processes communcation</a>
<ul>
<li><a href="#org7eac8ad">11.1. Inter-process communication</a>
<ul>
<li><a href="#org888df8a">11.1.1. Unix Domain Sockets</a></li>
<li><a href="#org4422145">11.1.2. shared memory and message queues:</a></li>
<li><a href="#org44dcabf">11.1.3. pipelines</a></li>
<li><a href="#org5dae7bf">11.1.4. Message Queues: Message queues provide a way for processes to exchange messages in a way that is guaranteed to be delivered, even if the sending or receiving process is not currently running.</a></li>
</ul>
</li>
<li><a href="#org172f6df">11.2. D-Bus</a></li>
<li><a href="#org4a1ee53">11.3. links</a></li>
</ul>
</li>
<li><a href="#org0cffb7b">12. install tarball - (from source, install sources)</a></li>
<li><a href="#org2b91337">13. GPG - GNU Privacy Guard</a>
<ul>
<li><a href="#org861f506">13.1. install</a></li>
<li><a href="#orgb972dc1">13.2. about</a></li>
<li><a href="#org0020eee">13.3. theory</a>
<ul>
<li><a href="#org5d100ec">13.3.1. Криптосистема с открытым ключом</a></li>
<li><a href="#org877d755">13.3.2. Цифровая подпись Digital signature</a></li>
<li><a href="#org2a6b262">13.3.3. keyservers</a></li>
<li><a href="#orgaf163a1">13.3.4. <span class="todo TODO">TODO</span> signing keys</a></li>
<li><a href="#orge4c85ad">13.3.5. subkeys</a></li>
</ul>
</li>
<li><a href="#org564f38c">13.4. therms</a></li>
<li><a href="#orgf6230f0">13.5. create key</a></li>
<li><a href="#orgcd57335">13.6. list-keys</a></li>
<li><a href="#orgdad0b23">13.7. Correct way to replace a GPG key</a></li>
<li><a href="#org4f26afe">13.8. USE CASES</a>
<ul>
<li><a href="#org6c3892c">13.8.1. create keys</a></li>
<li><a href="#org7ae33e5">13.8.2. delete keys</a></li>
<li><a href="#org7297f8a">13.8.3. keyserver get key</a></li>
<li><a href="#orgd6868d7">13.8.4. upload your key</a></li>
<li><a href="#org0ae5917">13.8.5. trust level for key</a></li>
<li><a href="#orga07bc50">13.8.6. import key</a></li>
<li><a href="#org3309292">13.8.7. verify .sign</a></li>
<li><a href="#orgbeafe27">13.8.8. export public for share</a></li>
<li><a href="#orgd56f672">13.8.9. Backup and restore your GPG key pair</a></li>
<li><a href="#org11a3e9f">13.8.10. sign keys (after importing)</a></li>
<li><a href="#orgaace857">13.8.11. encripting file</a></li>
<li><a href="#org1322e6a">13.8.12. decrypt file</a></li>
<li><a href="#orgb093e3c">13.8.13. encrypt/decrypt with password (symmetric) (armored)</a></li>
<li><a href="#org3db52c2">13.8.14. generate password</a></li>
<li><a href="#org9ea3f99">13.8.15. password storage in file</a></li>
</ul>
</li>
<li><a href="#orgb8896bd">13.9. trust model (Web of trust or Trust on first use)</a></li>
<li><a href="#org512ddfe">13.10. GPG agent</a></li>
<li><a href="#org2e3fd33">13.11. как шифрвоать</a></li>
<li><a href="#org952336f">13.12. <span class="todo TODO">TODO</span> Emacs EasyPG Assistant</a></li>
<li><a href="#orgeb064a0">13.13. links</a>
<ul>
<li><a href="#org97006a5">13.13.1. extend validity of the main key</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org0d5c170">14. The X Window System (X11 or X)</a>
<ul>
<li><a href="#org9e7ca20">14.1. terms</a></li>
<li><a href="#org5419412">14.2. lock screen</a></li>
<li><a href="#org3581309">14.3. unused terminals</a></li>
<li><a href="#org90b8211">14.4. amdgpu</a>
<ul>
<li><a href="#orge20c20f">14.4.1. vga<sub>switcheroo</sub></a></li>
</ul>
</li>
<li><a href="#org8c70b9e">14.5. xorg.conf.d</a></li>
<li><a href="#orgeb40278">14.6. <span class="todo TODO">TODO</span> tilling</a></li>
</ul>
</li>
<li><a href="#org4e06255">15. xfce4</a>
<ul>
<li><a href="#org27f5631">15.1. history</a></li>
<li><a href="#org11781a7">15.2. Emacs - conflict</a></li>
<li><a href="#org3865caa">15.3. xfce4-terminal</a>
<ul>
<li><a href="#orgd3032e5">15.3.1. hotkeys</a></li>
<li><a href="#orgcfb7fc7">15.3.2. set title and execute command</a></li>
</ul>
</li>
<li><a href="#orgb8d9d3c">15.4. insert unicode</a></li>
<li><a href="#orge90afe1">15.5. bind keys to applications</a></li>
<li><a href="#org4ca5bdb">15.6. accessibility - mouse emulation</a></li>
</ul>
</li>
<li><a href="#org00566d9">16. Wayland</a>
<ul>
<li><a href="#org8d9731b">16.1. terms</a></li>
</ul>
</li>
<li><a href="#orgc36aa5e">17. cron</a>
<ul>
<li><a href="#org9642080">17.1. format</a></li>
<li><a href="#orge36178d">17.2. Examples:</a></li>
</ul>
</li>
<li><a href="#org94c1e9e">18. vi/vim</a>
<ul>
<li><a href="#orgf58bcb7">18.1. insert modes</a></li>
<li><a href="#org6503008">18.2. Navigation</a></li>
<li><a href="#org9c5bd62">18.3. other</a></li>
<li><a href="#orga24c955">18.4. plugins</a></li>
<li><a href="#orgb91c788">18.5. old</a></li>
</ul>
</li>
<li><a href="#org9319aaa">19. nano</a></li>
<li><a href="#org71483a7">20. ffmpeg</a></li>
<li><a href="#org7c3ec49">21. camera</a></li>
<li><a href="#org9af41c0">22. screen recorder</a></li>
<li><a href="#org0cb571b">23. Nginx</a>
<ul>
<li><a href="#orgb2b52e2">23.1. install</a></li>
<li><a href="#orga590d8d">23.2. reverse proxy</a>
<ul>
<li><a href="#org0551e15">23.2.1. ex</a></li>
<li><a href="#orge8db890">23.2.2. links</a></li>
</ul>
</li>
<li><a href="#org93115f8">23.3. config</a>
<ul>
<li><a href="#org2d65d3a">23.3.1. terms</a></li>
<li><a href="#org512ecec">23.3.2. validate the configuration file</a></li>
<li><a href="#org2365f9e">23.3.3. blocks</a></li>
<li><a href="#orgd3d56bb">23.3.4. variables</a></li>
<li><a href="#org55483b7">23.3.5. Most useful variables:</a></li>
</ul>
</li>
<li><a href="#org5b6d2ec">23.4. logging</a></li>
<li><a href="#org96388f9">23.5. troubleshooting</a></li>
</ul>
</li>
<li><a href="#orgfee3061">24. Debian</a>
<ul>
<li><a href="#org02d75df">24.1. apt</a></li>
<li><a href="#orga7bc480">24.2. tigervnc</a></li>
<li><a href="#org46caacf">24.3. samba</a></li>
<li><a href="#org5ab6e9e">24.4. iptables</a></li>
<li><a href="#org4b15e15">24.5. sound</a></li>
<li><a href="#org1b438ca">24.6. proxy</a></li>
<li><a href="#orgbbd542f">24.7. ssh</a></li>
<li><a href="#org07d8048">24.8. dwarf-fortress</a>
<ul>
<li><a href="#org60481fc">24.8.1. <span class="todo TODO">TODO</span> 50 installation</a></li>
<li><a href="#orgb785f01">24.8.2. troubleshooting</a></li>
</ul>
</li>
<li><a href="#org79084ed">24.9. make swap from image </a></li>
<li><a href="#org7aefbdb">24.10. links</a></li>
</ul>
</li>
<li><a href="#org83310f9">25. Ubuntu</a>
<ul>
<li><a href="#orgcccd5ee">25.1. network</a></li>
<li><a href="#org836f54b">25.2. security</a></li>
<li><a href="#org4a33e39">25.3. time</a></li>
<li><a href="#orgc72eed7">25.4. thumbrd</a></li>
<li><a href="#orga0db35d">25.5. printer linux</a></li>
<li><a href="#org2a75882">25.6. kerberos and Active Directory</a></li>
<li><a href="#orgc36883e">25.7. windows share</a></li>
<li><a href="#org3f7ec2d">25.8. VSCODE</a></li>
</ul>
</li>
<li><a href="#org0c94a35">26. Astra Linux - Debian derivative</a>
<ul>
<li><a href="#org5661ca6">26.1. Special Edition</a></li>
<li><a href="#org105b6db">26.2. мандатным контролем целостности (ГОСТ Р 59453.1-2021)</a></li>
<li><a href="#org4db1d84">26.3. замкнутая программная среда</a></li>
<li><a href="#orgf1938ad">26.4. Мандатное управление доступом</a></li>
<li><a href="#org4269454">26.5. Технологии разработки безопасного ПО и формальная модель управления доступом</a></li>
<li><a href="#org98774c5">26.6. other</a></li>
</ul>
</li>
<li><a href="#orgbfa7a78">27. REDHAT/AlmaLinux</a>
<ul>
<li><a href="#orge6f300f">27.1. cudnn</a></li>
<li><a href="#org4a61ff8">27.2. tigervnc server</a></li>
<li><a href="#orgec90dfd">27.3. container toolkit</a></li>
<li><a href="#org6264e59">27.4. nftables</a></li>
</ul>
</li>
<li><a href="#org1be984d">28. termux</a>
<ul>
<li><a href="#orgbad0cf0">28.1. how it works</a></li>
<li><a href="#org4df9138">28.2. terms</a></li>
<li><a href="#orgde9f504">28.3. ps</a></li>
<li><a href="#org5bb6532">28.4. ways to transfer files</a></li>
<li><a href="#orgf8c1ba9">28.5. metasploit</a></li>
<li><a href="#org7ae5270">28.6. termux-</a></li>
<li><a href="#org9889f30">28.7. links</a></li>
</ul>
</li>
<li><a href="#org7d07d0b">29. <span class="todo TODO">TODO</span> Haskell</a>
<ul>
<li><a href="#orgceacd45">29.1. comparision</a></li>
</ul>
</li>
<li><a href="#org15ea502">30. AWK</a>
<ul>
<li><a href="#org57f4ca0">30.1. terms</a></li>
<li><a href="#orgce04dd3">30.2. structure</a></li>
<li><a href="#orgd051916">30.3. Built-in variables</a></li>
<li><a href="#org2614044">30.4. loops</a></li>
<li><a href="#org3b3e07e">30.5. commands</a></li>
</ul>
</li>
<li><a href="#org28737e0">31. network</a>
<ul>
<li><a href="#orgd3b49d5">31.1. theory</a>
<ul>
<li><a href="#org4d1236f">31.1.1. ip output</a></li>
<li><a href="#orge00dff8">31.1.2. ip route</a></li>
<li><a href="#orgc0d213b">31.1.3. ip neigh</a></li>
<li><a href="#org00c26c7">31.1.4. <span class="todo TODO">TODO</span> ip maddress</a></li>
</ul>
</li>
<li><a href="#org381485c">31.2. iproute2 - controlling TCP / IP - new one</a>
<ul>
<li><a href="#org5dd463a">31.2.1. ip route</a></li>
<li><a href="#org83946a7">31.2.2. ss</a></li>
<li><a href="#orgf74dffb">31.2.3. USE CASES</a></li>
<li><a href="#org971a0d5">31.2.4. all commands</a></li>
</ul>
</li>
<li><a href="#orgeae8bfa">31.3. net-tools - based on /proc - too old</a>
<ul>
<li><a href="#org295ec8d">31.3.1. arp</a></li>
<li><a href="#org64aaedc">31.3.2. ifconfig</a></li>
<li><a href="#org89b0f8f">31.3.3. route</a></li>
<li><a href="#orgaac3ea9">31.3.4. netstat</a></li>
<li><a href="#org8add000">31.3.5. iptunnel</a></li>
<li><a href="#org3ac6c4c">31.3.6. brctl</a></li>
<li><a href="#orge08509f">31.3.7. ifstat</a></li>
</ul>
</li>
<li><a href="#org5234325">31.4. lsof</a></li>
<li><a href="#orgba80746">31.5. dig</a></li>
<li><a href="#orgf919471">31.6. nslookup</a></li>
<li><a href="#org9c82ad3">31.7. host</a></li>
<li><a href="#orgb0dfa71">31.8. traceroute</a></li>
<li><a href="#org6a34bb4">31.9. whois</a></li>
<li><a href="#org85062a9">31.10. iptables</a>
<ul>
<li><a href="#orge32ac3b">31.10.1. tables and chains</a></li>
<li><a href="#org2954e92">31.10.2. Target Values</a></li>
<li><a href="#org2d46ef9">31.10.3. gentoo net-firewall/iptables:</a></li>
<li><a href="#orgab7c243">31.10.4. log bad ppl</a></li>
<li><a href="#orgf84a76b">31.10.5. simple</a></li>
</ul>
</li>
<li><a href="#org6f46396">31.11. nftables</a>
<ul>
<li><a href="#orga0c772d">31.11.1. print rules</a></li>
<li><a href="#org19014a0">31.11.2. table</a></li>
<li><a href="#org634c25d">31.11.3. chain</a></li>
<li><a href="#org93739be">31.11.4. rule</a></li>
<li><a href="#orgbd7f894">31.11.5. gentoo net-firewall/nftables:</a></li>
<li><a href="#org2eb2a82">31.11.6. /etc/nftables-local skeleton nftables config file</a></li>
<li><a href="#orgb5cad17">31.11.7. Masquerading and source NAT (SNAT)</a></li>
<li><a href="#orgdbf2f02">31.11.8. use cases</a></li>
<li><a href="#org8eb7105">31.11.9. <span class="todo TODO">TODO</span> socks</a></li>
<li><a href="#org8cd2748">31.11.10. links</a></li>
</ul>
</li>
<li><a href="#orgc0c4960">31.12. arptables</a>
<ul>
<li><a href="#orgd84bc44">31.12.1. links</a></li>
</ul>
</li>
<li><a href="#org72a7797">31.13. net-dns/bind-tools</a></li>
<li><a href="#org66cf22b">31.14. <span class="todo TODO">TODO</span> nmap - network exploration</a></li>
<li><a href="#orgd32c588">31.15. tcpdump</a></li>
<li><a href="#org216ca42">31.16. OpenVPN</a>
<ul>
<li><a href="#org22793a1">31.16.1. OpenVPN over Tor</a></li>
</ul>
</li>
<li><a href="#org6cbec70">31.17. TAP/TUN devices</a></li>
<li><a href="#orgdfe2451">31.18. get my ip</a>
<ul>
<li><a href="#orgac1f0ae">31.18.1. wget</a></li>
</ul>
</li>
<li><a href="#org05a027d">31.19. speed, bandwith, latency</a></li>
<li><a href="#org5930250">31.20. USECASES allow opening ports for user not root</a></li>
<li><a href="#org2878d8f">31.21. test network with wireshark</a></li>
</ul>
</li>
<li><a href="#org0bb8bcf">32. security</a>
<ul>
<li><a href="#org4f1e3b4">32.1. simple sandbox</a></li>
<li><a href="#org24734e9">32.2. Linux Access Permissions</a>
<ul>
<li><a href="#orgce01c4a">32.2.1. mandatory access control (MAC)</a></li>
<li><a href="#org672cc4f">32.2.2. access-control list (ACL)</a></li>
<li><a href="#org13690c5">32.2.3. capabilities</a></li>
<li><a href="#org78c32f2">32.2.4. standart Unix discretionary access control (DAC) permissions</a></li>
<li><a href="#org285c1fa">32.2.5. acl vs capability list</a></li>
</ul>
</li>
<li><a href="#orgb547a0f">32.3. PAM</a></li>
<li><a href="#orga24dcec">32.4. s/key</a></li>
<li><a href="#orgf52c9ca">32.5. su</a></li>
<li><a href="#orgcc1eac6">32.6. /etc/passwd</a></li>
<li><a href="#orgce2b93c">32.7. /etc/shadow</a></li>
<li><a href="#orga9bf9fc">32.8. <span class="todo TODO">TODO</span> logcheck</a></li>
<li><a href="#org4200838">32.9. firejail</a>
<ul>
<li><a href="#org6bf1300">32.9.1. xephyr</a></li>
<li><a href="#org9ebf087">32.9.2. hardening line</a></li>
<li><a href="#org4d0fca4">32.9.3. config hardening</a></li>
<li><a href="#orga488d3e">32.9.4. errors</a></li>
<li><a href="#org7fbcc94">32.9.5. per app</a></li>
</ul>
</li>
<li><a href="#orgf8872bd">32.10. apparmor</a></li>
<li><a href="#org6cb0534">32.11. nfs</a>
<ul>
<li><a href="#org7c8c822">32.11.1. iptables</a></li>
</ul>
</li>
<li><a href="#orgd764dde">32.12. USB</a>
<ul>
<li><a href="#org0865971">32.12.1. protection</a></li>
</ul>
</li>
<li><a href="#org2386c24">32.13. telegram </a>
<ul>
<li><a href="#org29350e9">32.13.1. procs &amp; cons</a></li>
<li><a href="#org0ef5bb2">32.13.2. harden</a></li>
<li><a href="#org03ca076">32.13.3. telegram api</a></li>
</ul>
</li>
<li><a href="#org02e9f44">32.14. Check system by intrusion</a></li>
<li><a href="#orgd4068c4">32.15. namespaces - isolated instance of the global resource</a>
<ul>
<li><a href="#orgc5de54c">32.15.1. types</a></li>
</ul>
</li>
<li><a href="#org7888e2d">32.16. Selinux (Security-Enhanced Linux)</a></li>
<li><a href="#orgf4beed4">32.17. Disable executables, pip</a></li>
<li><a href="#orgcd5c3a9">32.18. Hardening testers</a></li>
<li><a href="#orgefc5067">32.19. Log analyzers</a></li>
<li><a href="#orgb6c14c7">32.20. Antivirus, online system monitoring</a></li>
<li><a href="#org89a395b">32.21. links</a></li>
</ul>
</li>
<li><a href="#orge22bd9b">33. wifi</a>
<ul>
<li><a href="#org900362c">33.1. theory</a>
<ul>
<li><a href="#org6773fbc">33.1.1. terms:</a></li>
<li><a href="#orgb2dbef5">33.1.2. frequency</a></li>
<li><a href="#org361b48c">33.1.3. channels 2.4 GHz (802.11b/g/n/ax)</a></li>
<li><a href="#org7ce7b26">33.1.4. health</a></li>
<li><a href="#org684ffa4">33.1.5. modes</a></li>
<li><a href="#org385a194">33.1.6. distance</a></li>
<li><a href="#org7f30d7f">33.1.7. security</a></li>
<li><a href="#org2172296">33.1.8. wifi Generations</a></li>
<li><a href="#orgf6459ff">33.1.9. MIMO Multiple Input Multiple Output</a></li>
<li><a href="#orgf8100b8">33.1.10. frames layer 2</a></li>
<li><a href="#orgea9bb8c">33.1.11. WPA/WPA2</a></li>
</ul>
</li>
<li><a href="#org2c2cace">33.2. Mediatek mt7601u</a></li>
<li><a href="#org5b809cb">33.3. linix kernel support</a></li>
<li><a href="#orgaf29cac">33.4. install</a></li>
<li><a href="#org11fee70">33.5. iw</a>
<ul>
<li><a href="#org30d7779">33.5.1. monitor mode</a></li>
</ul>
</li>
<li><a href="#org4ab3069">33.6. iwd</a>
<ul>
<li><a href="#org2299808">33.6.1. dependencies</a></li>
<li><a href="#org7500e19">33.6.2. iwctl</a></li>
<li><a href="#org69059f7">33.6.3. bash<sub>alias</sub></a></li>
<li><a href="#orgb699bd7">33.6.4. WiFi provisioning</a></li>
<li><a href="#org09e8f04">33.6.5. MAC Address Randomization</a></li>
<li><a href="#orgb8498b0">33.6.6. scripts</a></li>
<li><a href="#org6ee38e7">33.6.7. links</a></li>
</ul>
</li>
<li><a href="#org5c56fc5">33.7. wpa<sub>supplicant</sub></a>
<ul>
<li><a href="#org3b861b1">33.7.1. config</a></li>
<li><a href="#orgc4f8462">33.7.2. status</a></li>
<li><a href="#org676735c">33.7.3. scan and scan<sub>results</sub></a></li>
<li><a href="#orge475601">33.7.4. wpa<sub>cli</sub></a></li>
</ul>
</li>
<li><a href="#orgea44ff5">33.8. wireless-tools</a></li>
<li><a href="#org361217a">33.9. cat /proc/net/wireless</a></li>
<li><a href="#org2898ee6">33.10. errors</a></li>
<li><a href="#org02ecc15">33.11. regulatory domain</a>
<ul>
<li><a href="#orgc7af402">33.11.1. links</a></li>
</ul>
</li>
<li><a href="#orga15cd02">33.12. testing</a></li>
<li><a href="#orge9fd192">33.13. links</a></li>
<li><a href="#orga3ebf02">33.14. hardware</a>
<ul>
<li><a href="#orgf59a923">33.14.1. standards</a></li>
<li><a href="#orgd3c941a">33.14.2. physical</a></li>
</ul>
</li>
<li><a href="#org80488f8">33.15. wifi sec recomendations</a></li>
<li><a href="#org83c84f5">33.16. RTL8812AU/21AU</a></li>
</ul>
</li>
<li><a href="#orge191ffc">34. bluetooth</a>
<ul>
<li><a href="#org0c2b6e7">34.1. pygatt vs pybluez</a></li>
<li><a href="#org9c86193">34.2. terms</a></li>
<li><a href="#orgffe8c12">34.3. BT-400 not required</a></li>
<li><a href="#org9ff1ee5">34.4. D-Bus</a></li>
<li><a href="#orgf752de9">34.5. bash alias</a></li>
<li><a href="#org116a597">34.6. RTL8761B</a></li>
<li><a href="#orgd122d37">34.7. bluetoothctl</a></li>
<li><a href="#org1effc49">34.8. bluealsa-aplay</a>
<ul>
<li><a href="#orga9c820c">34.8.1. /etc/dbus-1/system.d/bluealsa.conf</a></li>
<li><a href="#org38ae517">34.8.2. asoundrc</a></li>
<li><a href="#org9dce285">34.8.3. asoundrc2</a></li>
</ul>
</li>
<li><a href="#orgefd5eb7">34.9. links</a></li>
</ul>
</li>
<li><a href="#org4a287d1">35. image</a>
<ul>
<li><a href="#org8bdd1bb">35.1. rotate</a></li>
<li><a href="#org70db35f">35.2. reduse size</a></li>
<li><a href="#orgf1d9329">35.3. hidden data</a></li>
<li><a href="#org6a1b89e">35.4. images slideshow</a></li>
<li><a href="#org4220184">35.5. <span class="todo TODO">TODO</span> one image inside of onether</a></li>
<li><a href="#org5483099">35.6. merge several to one</a></li>
</ul>
</li>
<li><a href="#org2a05633">36. imageMagic</a>
<ul>
<li><a href="#org03262d8">36.1. troubles</a></li>
</ul>
</li>
<li><a href="#org4ffce28">37. Firefox</a>
<ul>
<li><a href="#orgc437584">37.1. keys</a></li>
<li><a href="#org3fea804">37.2. fingerprints</a>
<ul>
<li><a href="#org8fe6f36">37.2.1. https://coveryourtracks.eff.org/</a></li>
<li><a href="#orgf8a1b36">37.2.2. http://uniquemachine.org/ with source code</a></li>
<li><a href="#org0b4765f">37.2.3. https://browserleaks.com/fonts</a></li>
</ul>
</li>
<li><a href="#orge1dcd59">37.3. screen</a></li>
<li><a href="#org5697dc5">37.4. disable GPU fingerprint(hardware acceleration)</a></li>
<li><a href="#org5abf4ef">37.5. fonts</a></li>
<li><a href="#orga043a56">37.6. TLS</a></li>
<li><a href="#org8850f56">37.7. User-Agent</a>
<ul>
<li><a href="#orgc2d5413">37.7.1. testers</a></li>
</ul>
</li>
<li><a href="#org0d76efd">37.8. user agent ( net required)</a></li>
<li><a href="#orgbab7814">37.9. User-Agent checkers</a></li>
<li><a href="#org526fd8f">37.10. disable webgl</a></li>
<li><a href="#org10faec7">37.11. plugins</a></li>
<li><a href="#org6510793">37.12. disable javaScript</a></li>
<li><a href="#orgea9454f">37.13. profile</a></li>
<li><a href="#org79ff43f">37.14. GNU JS Trap</a></li>
<li><a href="#orgb7a88a9">37.15. xpi extensions</a></li>
<li><a href="#orgf8a9156">37.16. check xpi extension</a></li>
<li><a href="#org80986c6">37.17. Mouse and links</a></li>
<li><a href="#orga9e735c">37.18. Mouse and links complex</a></li>
<li><a href="#org5d1be1d">37.19. Gentoo specific</a>
<ul>
<li><a href="#orge0fef21">37.19.1. Normandy</a></li>
</ul>
</li>
<li><a href="#orgfd0836a">37.20. Tor compatibility</a></li>
<li><a href="#orgc4e7096">37.21. user.js - Firefox configuration hardening</a>
<ul>
<li><a href="#orgd839d86">37.21.1. own config from two sources</a></li>
</ul>
</li>
<li><a href="#org10efc19">37.22. certificates</a></li>
<li><a href="#orga6e3c75">37.23. images loading</a></li>
<li><a href="#orgab0a7a9">37.24. Debugging remote Firefox instances and headless</a></li>
<li><a href="#orgc927254">37.25. proxy switcher</a></li>
<li><a href="#org8b6d5df">37.26. troubleshooting</a></li>
<li><a href="#orga31e0c9">37.27. microphone</a></li>
<li><a href="#org256b90f">37.28. cache</a></li>
</ul>
</li>
<li><a href="#org397283e">38. Stumpmw - window manager</a>
<ul>
<li><a href="#orgab54e93">38.1. links</a></li>
</ul>
</li>
<li><a href="#org7b09591">39. Nyxt</a></li>
<li><a href="#orgd3086ed">40. suckless tools</a></li>
<li><a href="#org3f76ac6">41. rtorrent</a>
<ul>
<li><a href="#org482c835">41.1. install from sources</a></li>
<li><a href="#orga96aa0a">41.2. keys</a></li>
<li><a href="#orgfa31ebe">41.3. screen</a></li>
<li><a href="#org8db9c73">41.4. lags probles</a></li>
<li><a href="#orgf49b222">41.5. To turn off DHT connection tracking on Linux,</a></li>
<li><a href="#orgdaace0d">41.6. config</a></li>
<li><a href="#org6fb196e">41.7. service systemd</a></li>
<li><a href="#org8cc5f89">41.8. aliases</a></li>
</ul>
</li>
<li><a href="#orgaacbe53">42. email</a>
<ul>
<li><a href="#org12769f5">42.1. theory</a>
<ul>
<li><a href="#orgab44d62">42.1.1. soft:</a></li>
</ul>
</li>
<li><a href="#orgb900680">42.2. protocols</a></li>
<li><a href="#orgf865056">42.3. isync </a>
<ul>
<li><a href="#org156ddc5">42.3.1. cur, new, tmp</a></li>
<li><a href="#orge2d6620">42.3.2. usage:</a></li>
<li><a href="#org6b9a476">42.3.3. links</a></li>
</ul>
</li>
<li><a href="#orgd415196">42.4. notmuch</a>
<ul>
<li><a href="#org61856a6">42.4.1. tags</a></li>
<li><a href="#org0604ad3">42.4.2. queries</a></li>
<li><a href="#org58eee9f">42.4.3. links</a></li>
</ul>
</li>
<li><a href="#orgad5bf4b">42.5. neomutt</a>
<ul>
<li><a href="#org3dcd655">42.5.1. keys</a></li>
<li><a href="#org07ddcde">42.5.2. examples</a></li>
<li><a href="#org91a9197">42.5.3. mutt and neomutt - clients</a></li>
<li><a href="#org70b8577">42.5.4. links</a></li>
</ul>
</li>
<li><a href="#org844d818">42.6. emailutils</a></li>
<li><a href="#org870d442">42.7. DKIM</a>
<ul>
<li><a href="#orge696d18">42.7.1. how it looks like:</a></li>
<li><a href="#org46d584c">42.7.2. DKIM Key Rotation</a></li>
<li><a href="#org2dc92c7">42.7.3. links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7fc6ef0">43. Midnight Commander</a>
<ul>
<li><a href="#org0c8b4d8">43.1. options</a></li>
<li><a href="#org42db89c">43.2. keys</a></li>
<li><a href="#orgcd633d9">43.3. links</a></li>
</ul>
</li>
<li><a href="#org40859a4">44. Thunar - file manager</a></li>
<li><a href="#org035c40f">45. LibreOffice vs Microsoft</a>
<ul>
<li><a href="#orgc1be383">45.1. LibreOffice (Microsoft)</a></li>
</ul>
</li>
<li><a href="#orgf4090ce">46. Gimp</a></li>
<li><a href="#orgaf06948">47. coreboot</a>
<ul>
<li><a href="#orgc290df9">47.1. usage</a></li>
<li><a href="#org818fb39">47.2. requirements</a></li>
<li><a href="#org3840905">47.3. SPI Flash</a>
<ul>
<li><a href="#orge73854a">47.3.1. general GPIO</a></li>
</ul>
</li>
<li><a href="#orgf51ba85">47.4. debug console</a></li>
<li><a href="#org7840d3e">47.5. Coreinfo libpayload</a></li>
<li><a href="#org3e3ca23">47.6. https://www.instructables.com/Lenovo-T420-Coreboot-WRaspberry-Pi/</a></li>
</ul>
</li>
<li><a href="#orga54e241">48. qemu</a>
<ul>
<li><a href="#org3538408">48.1. theory</a></li>
<li><a href="#orgc3260e3">48.2. modes</a></li>
<li><a href="#org38fdd63">48.3. usage</a></li>
<li><a href="#org8d0ee18">48.4. boot</a></li>
<li><a href="#org9de1314">48.5. Graphic card</a></li>
<li><a href="#orgdbcaef5">48.6. create image</a>
<ul>
<li><a href="#org290497d">48.6.1. file formats</a></li>
</ul>
</li>
<li><a href="#orgb5e4378">48.7. OTHER</a>
<ul>
<li><a href="#org1634056">48.7.1. remote disk image with ssh</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org557262e">49. systemd</a>
<ul>
<li><a href="#org2cd0177">49.1. terms</a></li>
<li><a href="#org7e8b057">49.2. types of units</a></li>
<li><a href="#orgb0d542d">49.3. create .service</a></li>
<li><a href="#org9368f87">49.4. Unit files</a></li>
<li><a href="#org96f0c16">49.5. sections - common</a></li>
<li><a href="#org8e27d5d">49.6. setions - unit specific</a></li>
<li><a href="#orgddea730">49.7. tamplate and instance unit names</a></li>
<li><a href="#org428162a">49.8. systemctl command</a>
<ul>
<li><a href="#orga1a08cd">49.8.1. own service</a></li>
<li><a href="#orgab1fcf5">49.8.2. VIEWING-SYSTEMD-INFORMATION</a></li>
<li><a href="#orgb6a06fa">49.8.3. WORKING WITH SERVICES</a></li>
<li><a href="#org5394c32">49.8.4. run levels</a></li>
<li><a href="#org2654b44">49.8.5. Changing-System-States</a></li>
<li><a href="#orgabbdf7d">49.8.6. Viewing-log-messages</a></li>
<li><a href="#org951acda">49.8.7. SYSVINIT</a></li>
</ul>
</li>
<li><a href="#org4626373">49.9. usage</a></li>
<li><a href="#orgfb84afc">49.10. links</a></li>
</ul>
</li>
<li><a href="#orgfd9e996">50. LibreOffice</a>
<ul>
<li><a href="#orga3d1e1e">50.1. Formula field</a></li>
<li><a href="#orge905524">50.2. Cell Reference</a></li>
<li><a href="#org46b33cf">50.3. troubleshooting</a></li>
</ul>
</li>
<li><a href="#orgf044a2f">51. mercurial</a></li>
<li><a href="#orga71e918">52. wineHQ</a>
<ul>
<li><a href="#org1c6f34d">52.1. create index</a></li>
<li><a href="#org9c2b85a">52.2. env variables</a></li>
<li><a href="#org543e278">52.3. mono</a>
<ul>
<li><a href="#org199e5bf">52.3.1. versions</a></li>
</ul>
</li>
<li><a href="#org5c8211b">52.4. components</a></li>
<li><a href="#org6fbdd75">52.5. links</a></li>
</ul>
</li>
<li><a href="#orga3d3f96">53. paranoia</a>
<ul>
<li><a href="#org48a9d90">53.1. backdoors</a>
<ul>
<li><a href="#orga96344b">53.1.1. BIOS/UEFI</a></li>
<li><a href="#org3c45fed">53.1.2. save bios</a></li>
<li><a href="#orgd4329ee">53.1.3. CPU microcode</a></li>
</ul>
</li>
<li><a href="#org5406a47">53.2. TLS</a></li>
<li><a href="#org4cf9bfe">53.3. hide data in image</a></li>
</ul>
</li>
<li><a href="#orgaa4567d">54. Matrix</a>
<ul>
<li><a href="#orgf07afbd">54.1. <span class="todo TODO">TODO</span> theory</a></li>
<li><a href="#orgccfd05a">54.2. clients</a></li>
</ul>
</li>
<li><a href="#org66fd186">55. Irssi</a>
<ul>
<li><a href="#orgc6a4d50">55.1. IRC protocol</a></li>
<li><a href="#org723bc8b">55.2. irc basic commands - IRC commands cheat sheet</a></li>
<li><a href="#orgb58ffa5">55.3. IRC colours</a></li>
<li><a href="#org957e6e9">55.4. terms</a></li>
<li><a href="#orga82ade5">55.5. ui</a></li>
<li><a href="#org755bfa1">55.6. keys</a>
<ul>
<li><a href="#orgf160867">55.6.1. windows</a></li>
<li><a href="#org19ce4bb">55.6.2. in window</a></li>
<li><a href="#org76820e2">55.6.3. Navigating while typing</a></li>
<li><a href="#org97362ab">55.6.4. rebindin</a></li>
<li><a href="#orgc02e689">55.6.5. links</a></li>
</ul>
</li>
<li><a href="#orgf80a516">55.7. commands</a></li>
<li><a href="#orgd28f467">55.8. 1</a></li>
<li><a href="#orgcaca18d">55.9. 2</a></li>
<li><a href="#orga9ff554">55.10. librechat</a></li>
<li><a href="#org8e33998">55.11. automation</a>
<ul>
<li><a href="#org2408395">55.11.1. my</a></li>
</ul>
</li>
<li><a href="#org2b53197">55.12. socks</a></li>
<li><a href="#org7d0f9b3">55.13. proxy (HTTP)</a></li>
<li><a href="#orge180106">55.14. script: python module</a></li>
<li><a href="#org838d4db">55.15. script: (Perl)</a>
<ul>
<li><a href="#orgb782955">55.15.1. command available in script:</a></li>
<li><a href="#org69e5ffc">55.15.2. ex</a></li>
</ul>
</li>
<li><a href="#org8595490">55.16. links</a></li>
</ul>
</li>
<li><a href="#org94c958b">56. mpv</a></li>
<li><a href="#orgb563459">57. TigerVNC</a></li>
<li><a href="#orgc0b001f">58. cloud</a></li>
<li><a href="#org3679bf6">59. openssl</a></li>
<li><a href="#org5def914">60. decentralized Darknet</a>
<ul>
<li><a href="#org9b6975e">60.1. TOR</a>
<ul>
<li><a href="#org2ae9add">60.1.1. offical and not official resources</a></li>
<li><a href="#org34b2d37">60.1.2. site security audit</a></li>
<li><a href="#orgafdf893">60.1.3. types of relays or nodes</a></li>
<li><a href="#org98bebdb">60.1.4. torrc</a></li>
<li><a href="#org1f298f2">60.1.5. firefox config</a></li>
<li><a href="#orgd114c40">60.1.6. route tor through tor</a></li>
<li><a href="#orge9cae37">60.1.7. theory</a></li>
<li><a href="#org9241bd2">60.1.8. dangers</a></li>
<li><a href="#org8db8bf5">60.1.9. Tor vulnerabilities</a></li>
<li><a href="#orgb4b0484">60.1.10. Verification</a></li>
<li><a href="#orgd0af519">60.1.11. search engines</a></li>
<li><a href="#orga92b7ab">60.1.12. proxies</a></li>
<li><a href="#org9e26a04">60.1.13. fstab logging to tmpfs</a></li>
<li><a href="#orge6afcbb">60.1.14. Debian update tor from official repository</a></li>
<li><a href="#orgc3eca13">60.1.15. popular</a></li>
<li><a href="#orgc9db287">60.1.16. own hidden service</a></li>
<li><a href="#org797c514">60.1.17. email over tor</a></li>
<li><a href="#orgc48f152">60.1.18. countries</a></li>
<li><a href="#org5659b1e">60.1.19. snowflake</a></li>
<li><a href="#org6a8334e">60.1.20. obfs4 - lyrebird - Pluggable Transport</a></li>
<li><a href="#orgd58204f">60.1.21. webtunnel - mimic encrypted web traffic (HTTPS)</a></li>
<li><a href="#org937dcfb">60.1.22. webrtc proxies</a></li>
<li><a href="#org6009c1a">60.1.23. webrtc-socket-proxy - working</a></li>
<li><a href="#orgf19da6a">60.1.24. Snowflake - Pluggable Transport using WebRTC</a></li>
<li><a href="#orgd0a67d8">60.1.25. theory</a></li>
<li><a href="#org01c8c7a">60.1.26. get bridges by email</a></li>
<li><a href="#orgba7dd14">60.1.27. links</a></li>
<li><a href="#orgb182a33">60.1.28. installation Debian</a></li>
<li><a href="#org29b3ccb">60.1.29. install gentoo</a></li>
<li><a href="#org5d56bf7">60.1.30. client configuration examples</a></li>
<li><a href="#org4837710">60.1.31. ssh hidden service configuration example</a></li>
<li><a href="#org994cef7">60.1.32. bad sites</a></li>
</ul>
</li>
<li><a href="#orga8112d0">60.2. tunnel techniques</a>
<ul>
<li><a href="#orgff24d71">60.2.1. server config</a></li>
<li><a href="#org4dde5f9">60.2.2. client config</a></li>
<li><a href="#orgaaa85e0">60.2.3. systemd</a></li>
<li><a href="#orga837bfc">60.2.4. block echo</a></li>
<li><a href="#org351f6ae">60.2.5. nftables</a></li>
<li><a href="#org72dea22">60.2.6. links</a></li>
</ul>
</li>
<li><a href="#orgc7eaf14">60.3. <span class="todo TODO">TODO</span> i2p</a></li>
<li><a href="#org62fc337">60.4. <span class="todo TODO">TODO</span> freenet</a></li>
<li><a href="#org04ed872">60.5. <span class="todo TODO">TODO</span> zeronet</a></li>
<li><a href="#orgfe2ae64">60.6. <span class="todo TODO">TODO</span> lokinet</a>
<ul>
<li><a href="#org2c4979b">60.6.1. install binary</a></li>
<li><a href="#org84b71cb">60.6.2. links</a></li>
</ul>
</li>
<li><a href="#org0d03655">60.7. <span class="todo TODO">TODO</span> https://yggdrasil-network.github.io/</a></li>
<li><a href="#org7c0b720">60.8. <span class="todo TODO">TODO</span> ipfs</a></li>
<li><a href="#org900083a">60.9. https://urbit.org/</a>
<ul>
<li><a href="#org5000273">60.9.1. terms</a></li>
</ul>
</li>
<li><a href="#org0bdbc15">60.10. Rus https://github.com/number571/go-peer</a></li>
<li><a href="#org813baf3">60.11. decentralazied storage</a></li>
<li><a href="#orgd0ba174">60.12. links</a></li>
</ul>
</li>
<li><a href="#org38ec191">61. search engines</a>
<ul>
<li><a href="#orgf885e7c">61.1. review</a></li>
<li><a href="#orge0d4ce2">61.2. duckduckgo</a></li>
</ul>
</li>
<li><a href="#org38077d7">62. unicode</a></li>
<li><a href="#org6323e3b">63. questions</a></li>
<li><a href="#org54e70eb">64. web crawler</a></li>
<li><a href="#org0cc6552">65. obfs4 standalone</a>
<ul>
<li><a href="#org0ef9e08">65.1. Server:</a></li>
<li><a href="#org9af4a16">65.2. Client:</a></li>
<li><a href="#org1cc6818">65.3. systemd service for server</a></li>
<li><a href="#orgcf903dd">65.4. full</a></li>
<li><a href="#org6dfca1d">65.5. full client</a></li>
<li><a href="#org9a6f328">65.6. links</a></li>
</ul>
</li>
<li><a href="#org4123160">66. VPS configuration</a></li>
<li><a href="#org2dd6c4c">67. markdown</a></li>
<li><a href="#org3478ea1">68. <span class="todo TODO">TODO</span> mount<sub>cifs</sub></a></li>
<li><a href="#orgd27bbe6">69. suites of utils</a>
<ul>
<li><a href="#org759fae6">69.1. util-linux</a></li>
</ul>
</li>
<li><a href="#orge0a0bbe">70. translate-shell</a></li>
<li><a href="#orgfcc4aab">71. linkedin create post</a></li>
<li><a href="#orgc5bd03e">72. whatsapp</a>
<ul>
<li><a href="#orgc50c9c9">72.1. whatsie - C++ client</a></li>
</ul>
</li>
<li><a href="#org2f1197d">73. Affiliate marketing</a>
<ul>
<li><a href="#orgb5db22c">73.1. terms:</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
;-<b>- mode: Org; fill-column: 110;-</b>-
</p>

<p>
nixCraft - library
</p>

<p>
linux kernel map <a href="https://makelinux.github.io/kernel/map/">https://makelinux.github.io/kernel/map/</a>
</p>
<ul class="org-ul">
<li><a href="https://github.com/makelinux/linux_kernel_map">https://github.com/makelinux/linux_kernel_map</a></li>
</ul>
<div id="outline-container-orgc6f8836" class="outline-2">
<h2 id="orgc6f8836"><span class="section-number-2">1.</span> common use cases</h2>
<div class="outline-text-2" id="text-1">
<p>
Create user.
</p>
<pre class="example">
useradd --create-home --shell /bin/false --user-group whatsapp
</pre>


<p>
Add user to group.
</p>
<pre class="example">
sudo usermod -a -G groupName userName
</pre>


<p>
Download with resume:
</p>
<pre class="example">
wget --continue --user-agent="" https://file
</pre>
</div>
</div>
<div id="outline-container-org4fc4ea2" class="outline-2">
<h2 id="org4fc4ea2"><span class="section-number-2">2.</span> theory - linux kernel</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orga5db330" class="outline-3">
<h3 id="orga5db330"><span class="section-number-3">2.1.</span> Symmetric Multi-Processing</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<b>preemption</b> is the act of temporarily interrupting an executing task,
</p>

<p>
Concurrency with multi-cpu (Memory architectures supporting concurrency):
</p>
<ul class="org-ul">
<li>UMA (Uniform Memory Access) - all the processors share the physical memory uniformly. The peripheral devices
follow a set of rules. uses a single shared system bus  typically used for up to 8 processors.
<ul class="org-ul">
<li>symmetric multiprocessor - processors have equal access to all the peripheral devices</li>
<li>asymmetric multiprocessor - one or a few processors can access the peripheral devices</li>
</ul></li>
<li>Non-uniform Memory Access (NUMA) - dedicates different memory banks to different processors - may access
local memory quickly and remote memory more slowly. Benefits on servers where the data are often associated
strongly with certain tasks or users.</li>
<li>Cache Only Memory Architecture (COMA)</li>
</ul>

<p>
Race conditions can occur when:
</p>
<ul class="org-ul">
<li>there are at least two execution contexts that run in "parallel"</li>
<li>the execution contexts perform read-write accesses to shared memory</li>
</ul>

<p>
race conditions can be avoided by:
</p>
<ul class="org-ul">
<li>make the critical section atomic</li>
<li>disable preemption during the critical section (e.g. disable interrupts, bottom-half handlers, or thread preemption)</li>
<li>serialize the access to the critical section (e.g. use spin locks or mutexes to allow only one context or
thread in the critical section)</li>
</ul>

<p>
<b>mutexes</b> and <b>spin locks</b> usage <b>intersect</b>
</p>
<ul class="org-ul">
<li>mutexes don't "waste" CPU cycles; system throughput is better than spin locks if context switch overhead is
lower than medium spinning time</li>
<li>mutexes can't be used in interrupt context</li>
<li>mutexes have a higher latency than spin locks</li>
</ul>

<p>
Read Copy Update (RCU) - synchronization mechanism
</p>
</div>
</div>
</div>
<div id="outline-container-org7a267e9" class="outline-2">
<h2 id="org7a267e9"><span class="section-number-2">3.</span> links</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><a href="https://distrowatch.com">https://distrowatch.com</a></li>
<li><a href="https://planet.gentoo.org/">https://planet.gentoo.org/</a></li>
<li><a href="https://zerobin.net/">https://zerobin.net/</a></li>
<li><a href="https://www.cyberciti.biz/">https://www.cyberciti.biz/</a></li>
</ul>
</div>
</div>

<div id="outline-container-org171849e" class="outline-2">
<h2 id="org171849e"><span class="section-number-2">4.</span> dev and filesystem</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org038d9cc" class="outline-3">
<h3 id="org038d9cc"><span class="section-number-3">4.1.</span> divice file</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>device files is that they are most definitely not device drivers</li>
<li>they are portals to the device drivers
<ul class="org-ul">
<li>app -&gt; dev<sub>file</sub> -&gt; drive -&gt; phisic</li>
<li>app &lt;- dev<sub>file</sub> &lt;- drive &lt;- phisic</li>
</ul></li>
</ul>
<p>
ls -al
</p>
<ul class="org-ul">
<li>c&#x2026;. - characted device</li>
<li>b&#x2026; - block device, typically a multiple of 256 bytes</li>
<li>major device number and minor device number</li>
</ul>

<p>
info:
</p>
<ul class="org-ul">
<li>udevadm info -a -p  $(udevadm info -q path -n /dev/input/event1)</li>
</ul>
</div>
</div>

<div id="outline-container-orgeceaa72" class="outline-3">
<h3 id="orgeceaa72"><span class="section-number-3">4.2.</span> disks</h3>
<div class="outline-text-3" id="text-4-2">
<p>
find disk by uuid
</p>
<ul class="org-ul">
<li>$blkid - partitions, UUID, BLOCK<sub>SIZE</sub>, TYPE</li>
<li>ls -al <i>dev/disk/by-uuid</i></li>
</ul>

<p>
recover partitions and change partition table type:
</p>
<ul class="org-ul">
<li>testdisk</li>
</ul>

<p>
mount options
</p>
<ul class="org-ul">
<li>findmnt</li>
</ul>

<p>
change uuid
</p>
<ul class="org-ul">
<li>uuidgen</li>
<li>tune2fs /dev/sdy1 -U cd6ecfb1-05e0-4dd7-89e7-8e78dad1fa0e</li>
</ul>

<p>
sector - phisical disk area
Disk sector  - traditionally 512 bytes  - 4096-byte (4 KiB) sectors, which are known as the Advanced Format
</p>

<p>
remount directory:
</p>
<ul class="org-ul">
<li>mount -o remount /var</li>
</ul>
</div>
</div>

<div id="outline-container-org8f2bf40" class="outline-3">
<h3 id="org8f2bf40"><span class="section-number-3">4.3.</span> bad blocks</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>blocksize=$(blockdev &#x2013;getbsz /dev/sdX)</li>
<li>badblocks -t random -w -s -b $blocksize -c 5000 -o out.txt /dev/sdX</li>
</ul>
<p>
check bad blocks fast:
</p>
<ul class="org-ul">
<li>cryptsetup open /dev/device name &#x2013;type plain &#x2013;cipher aes-xts-plain64</li>
<li>shred -v -n 0 -z /dev/mapper/name</li>
<li>cmp -b /dev/zero /dev/mapper/name</li>
<li>or diff-hightlight -y &lt;(xxd /dev/zero) &lt;(xxd /dev/mapper/name)</li>
<li>or diff -y &lt;(hexdump -C /dev/zero) &lt;(hexdump -C /dev/mapper/name)</li>
</ul>
</div>
</div>
<div id="outline-container-org4c9dacc" class="outline-3">
<h3 id="org4c9dacc"><span class="section-number-3">4.4.</span> partition table theory</h3>
<div class="outline-text-3" id="text-4-4">
<p>
MBR Partition Table(msdos)
</p>
<ul class="org-ul">
<li>first 512 bytes of a storage device</li>
<li>saves partition information on the first sector of disk(MBR sector)</li>
<li>stored in the first sector (cylinder 0, head 0, sector 1 &#x2013; or, alternately, LBA 0) of the hard drive</li>
<li>Each partition entry is 16 bytes, and the total is 64 bytes.</li>
<li>maximum of 4 entries</li>
<li>size of a single partition in MBR disk can only amount to 2TB</li>
<li>Each of the four Partition Table entries contains the following elements, in the following structure:
<ul class="org-ul">
<li>Boot indicator bit flag: 0 = no, 0x80 = bootable (or "active")</li>
<li>starting position, size and ending position</li>
</ul></li>
<li>At most one partition should be active</li>
<li><a href="https://wiki.osdev.org/MBR_(x86)">https://wiki.osdev.org/MBR_(x86)</a></li>
</ul>

<p>
GPT (GUID Partition Table)
</p>
<ul class="org-ul">
<li>up to 128 partitions on hard disk.</li>
<li>uses UUIDs</li>
<li>CRC32 checksums to detect errors and corruption of the header and partition table.</li>
<li>Stores a backup header and partition table at the end of the disk that aids in recovery in case the primary
ones are damaged.</li>
<li>kernel require: CONFIG<sub>EFI</sub><sub>PARTITION</sub>=y.</li>
</ul>
</div>
</div>

<div id="outline-container-orge1a0e6d" class="outline-3">
<h3 id="orge1a0e6d"><span class="section-number-3">4.5.</span> boot BIOS/UEFI/MBR/GPT</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>BIOS MBR</li>
<li>BIOS GPT - may have conflicts i motherboard.
<ul class="org-ul">
<li>BIOS boot partition - (1 to 2 MB) partition - in which boot loaders like GRUB2 can put additional data
that doesn't fit in the allocated storage.</li>
</ul></li>
<li>UEFI GPT
<ul class="org-ul">
<li>EFI System Partition (ESP) - FAT variant for /boot
<ul class="org-ul">
<li>mkfs.fat -F 32 /dev/sda1</li>
</ul></li>
</ul></li>
<li>UEFI MBR - ? not used.</li>
</ul>

<p>
GPT It carries CRC32 checksums to detect errors in the header and partition tables and has a backup GPT at the
end of the disk. This backup table can be used to recover damage of the primary GPT near the beginning of the
disk.
</p>
</div>
</div>
<div id="outline-container-org4d11b4a" class="outline-3">
<h3 id="org4d11b4a"><span class="section-number-3">4.6.</span> btrfs</h3>
<div class="outline-text-3" id="text-4-6">
</div>
<div id="outline-container-orgc203b69" class="outline-4">
<h4 id="orgc203b69"><span class="section-number-4">4.6.1.</span> mount options</h4>
<div class="outline-text-4" id="text-4-6-1">
<ul class="org-ul">
<li>discard - default off -
<ul class="org-ul">
<li>required SATA revision 3.1 chipsets and devices. TRIM on the backing device</li>
</ul></li>
<li>autodefrag, noautodefrag - default: off - Not well suited for large database workloads.</li>
<li>compress, compress=&lt;type[:level]&gt;, compress-force, compress-force=&lt;type[:level]&gt;</li>
<li></li>
</ul>


<p>
chech TRIM is supported:
</p>
<ul class="org-ul">
<li>lsblk</li>
<li>A device supporting discard has non-zero values in the columns of DISC-GRAN (discard granularity) and DISC-MAX</li>
</ul>
<p>
(discard max bytes). In the example listing above, the /dev/sda device supports discard while /dev/sdb does
not.
</p>

<p>
example:
</p>
<ul class="org-ul">
<li>/dev/mapper/sda2<sub>crypt</sub> /home                btrfs   defaults,noatime,autodefrag,compress=zstd,commit=120,subvol=home 0 0</li>
</ul>
<p>
<a href="https://btrfs.readthedocs.io/en/latest/Administration.html">https://btrfs.readthedocs.io/en/latest/Administration.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org1d76e18" class="outline-3">
<h3 id="org1d76e18"><span class="section-number-3">4.7.</span> boot sequence</h3>
<div class="outline-text-3" id="text-4-7">
<p>
Simple:
</p>
<ol class="org-ol">
<li>BIOS or ?</li>
<li>MBR or EFI ?</li>
<li>grub inside of MBR or ?</li>
<li>mount <i>boot</i> and read /boot/grub.conf</li>
<li>Linux kernel</li>
<li>mount real /</li>
<li>drivers</li>
<li>init /etc/inittab</li>
<li>udev daemon</li>
</ol>

<p>
initramfs
</p>
<ol class="org-ol">
<li>boot loader</li>
<li>Linux kernel</li>
<li>initramfs - contains / file system</li>
<li>mount real / read-only</li>
<li>mount /</li>
<li>init /etc/inittab</li>
<li>udev daemon</li>
</ol>
</div>
</div>
<div id="outline-container-org8f817a1" class="outline-3">
<h3 id="org8f817a1"><span class="section-number-3">4.8.</span> clone hard drive</h3>
<div class="outline-text-3" id="text-4-8">
<p>
Why # dd if=/dev/hda of=/dev/hdc bs=2048k - is bad?
</p>
<ul class="org-ul">
<li>no defragmentation</li>
<li>copying of unused space</li>
<li>very slow if read error</li>
</ul>

<p>
way <a href="https://forums.gentoo.org/viewtopic.php?t=28123&amp;highlight=backup">https://forums.gentoo.org/viewtopic.php?t=28123&amp;highlight=backup</a>
</p>
<ul class="org-ul">
<li></li>
</ul>
</div>
</div>
<div id="outline-container-orgc0225b9" class="outline-3">
<h3 id="orgc0225b9"><span class="section-number-3">4.9.</span> backup</h3>
<div class="outline-text-3" id="text-4-9">
<ul class="org-ul">
<li>Bare metal recovery - dd, CloneZilla, PartImage, or FSArchiver</li>
<li>recover: mount read only or make copy first!</li>
</ul>
</div>
<div id="outline-container-org8477925" class="outline-4">
<h4 id="org8477925"><span class="section-number-4">4.9.1.</span> rsync:</h4>
<div class="outline-text-4" id="text-4-9-1">
<p>
default - full file sunchronization without deletion of files
</p>
<ul class="org-ul">
<li>&#x2013;delete - removes target if source is empty</li>
<li>&#x2013;update - do not sync if target file is newer</li>
</ul>

<p>
rsync -aAXv / &#x2013;delete &#x2013;progress &#x2013;exclude={/dev/*,/proc/*,/sys/*,/tmp/*,/var/tmp/*,/var/log/*,/var/cache/*,/run/*,/mnt/*,/lost+found} / /backup
</p>
<ul class="org-ul">
<li>then later you can add the -u option to rsync and just update what has changed.</li>
<li>rsync -aAXv &#x2013;delete /mnt/drive  /mnt/system</li>
<li>-a – Archive mode. -rlptgoD (no -A,-X,-U,-N,-H),U,N- time, H- hard links</li>
<li>-A – This preserves the Access Control List.</li>
<li>-X – This preserves all extended file attributes of the files.</li>
<li>&#x2013;delete – This option enables you to make an incremental backup. In simple terms, with exception of the
first backup, it only backs up the difference existing between the source and the destination backup
drive. It only backs up new and modified files as well as deletes all the files in the backup location
which have been deleted.</li>
<li>&#x2013;update skip files which exist on destination and have a modidied time (and size) that is newer than the source file</li>
<li>&#x2013;dry-run – This is the option that simulates the backup process.</li>
</ul>
<ul class="org-ul">
<li>rsync -aAXv -e ssh root@192.186.0.1:/ /mnt/backup</li>
<li>restore: COPY FIRST! rsync -aAXv <i>backup</i> /mnt/gentoo
<ul class="org-ul">
<li>/ after backup is required</li>
</ul></li>
</ul>

<p>
copy root (do not forget exclude):
</p>
<ul class="org-ul">
<li>rsync -aAXv / /mnt/gentoo</li>
</ul>
</div>
</div>

<div id="outline-container-org56ab502" class="outline-4">
<h4 id="org56ab502"><span class="section-number-4">4.9.2.</span> <span class="todo TODO">TODO</span> cpio</h4>
<div class="outline-text-4" id="text-4-9-2">
<ul class="org-ul">
<li>find / -xdev | cpio -pvdm /destdir</li>
</ul>
</div>
</div>

<div id="outline-container-orgeda1d57" class="outline-4">
<h4 id="orgeda1d57"><span class="section-number-4">4.9.3.</span> tar</h4>
<div class="outline-text-4" id="text-4-9-3">
<p>
COPY ORIGINAL BACKUP FIRST!
</p>
<ul class="org-ul">
<li>tar -ztvf my-data.tar.gz # view content</li>
<li>tar &#x2013;exclude-from=/home/john/exclude.txt -czpvf /home/john/backup/linux<sub>backup.tar.gz</sub> /</li>
<li>restore: tar &#x2013;exclude-from=$exclude<sub>file</sub> &#x2013;xattrs-include=*.* -xpvf backupfile.tar.gz /</li>
<li>exclude.txt - must contain path inside of tar, not outside or starting with target dirname</li>
</ul>
<div class="org-src-container">
<pre class="src src-text">tmp/*
proc/*
dev/*
sys/*
run/*
var/tmp/*
var/run/*
var/lock/*
usr/src/*
var/log/*
var/cache/distfiles/*
mnt/*
home/u/MEDIA/*
</pre>
</div>

<p>
path inside of tar:
</p>
<ul class="org-ul">
<li>tar -zcvf b.tar.gz &#x2013;exclude-from="exclude.txt" tmpd/ =&gt; tmpd/ - inside of tar</li>
<li>tar -zcvf b.tar.gz &#x2013;exclude-from="exclude.txt" <i>home/u/tmpd</i> =&gt; <i>home/u/tmpd</i> - inside of tar</li>
</ul>

<p>
remote (Not stable!):
</p>
<ul class="org-ul">
<li>save remote: tar zcvf - / | ssh user@dumpserver.nixcraft.in "cat &gt; /backup/wwwdata.tar.gz"</li>
<li>save local: ssh user@box tar czf - / &gt; /destination/file.tar.gz</li>
</ul>
</div>
</div>

<div id="outline-container-orgc9c93cb" class="outline-4">
<h4 id="orgc9c93cb"><span class="section-number-4">4.9.4.</span> <span class="todo TODO">TODO</span> backup-tar</h4>
</div>
<div id="outline-container-orga334d03" class="outline-4">
<h4 id="orga334d03"><span class="section-number-4">4.9.5.</span> links</h4>
<div class="outline-text-4" id="text-4-9-5">
<ul class="org-ul">
<li><a href="https://averagelinuxuser.com/backup-and-restore-your-linux-system-with-rsync/">https://averagelinuxuser.com/backup-and-restore-your-linux-system-with-rsync/</a></li>
<li><a href="https://www.howtogeek.com/427480/how-to-back-up-your-linux-system/">https://www.howtogeek.com/427480/how-to-back-up-your-linux-system/</a></li>
<li><a href="https://www.vultr.com/docs/use-gnu-tar-to-backup-linux">https://www.vultr.com/docs/use-gnu-tar-to-backup-linux</a></li>
<li><a href="https://wiki.archlinux.org/title/Full_system_backup_with_tar">https://wiki.archlinux.org/title/Full_system_backup_with_tar</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org61d944d" class="outline-3">
<h3 id="org61d944d"><span class="section-number-3">4.10.</span> hierarchy</h3>
<div class="outline-text-3" id="text-4-10">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard</a></li>
<li>posix: <a href="https://www.baeldung.com/linux/posix">https://www.baeldung.com/linux/posix</a></li>
</ul>
</div>
</div>
<div id="outline-container-org2f3f3a6" class="outline-3">
<h3 id="org2f3f3a6"><span class="section-number-3">4.11.</span> chroot</h3>
<div class="outline-text-3" id="text-4-11">
</div>
<div id="outline-container-org737d5e5" class="outline-4">
<h4 id="org737d5e5"><span class="section-number-4">4.11.1.</span> chroot</h4>
</div>
<div id="outline-container-org87a03fb" class="outline-4">
<h4 id="org87a03fb"><span class="section-number-4">4.11.2.</span> btrs subvolumes</h4>
<div class="outline-text-4" id="text-4-11-2">
<p>
file extent-based
</p>

<p>
can be
</p>
<ul class="org-ul">
<li>like any other directory that is accessible to the user</li>
<li>ike a separately mounted filesystem (options subvol or subvolid)</li>
</ul>

<p>
Snapshots are subvolumes that share data and metadata with other subvolumes
</p>

<p>
commands
</p>
<ul class="org-ul">
<li># btrfs subvolume list .</li>
<li># btrfs subvolume list /mnt/btrfs</li>
</ul>

<p>
create snapshot of root:
</p>
<ul class="org-ul">
<li># btrfs subvolume snapshot / <i>mnt/backup/rootfs</i></li>
</ul>
</div>
</div>

<div id="outline-container-org2c5d38a" class="outline-4">
<h4 id="org2c5d38a"><span class="section-number-4">4.11.3.</span> Logical Volume Management (LVM) subvolumes</h4>
<div class="outline-text-4" id="text-4-11-3">
<p>
block-level snapshot
</p>
</div>
</div>
</div>
<div id="outline-container-org2ee745d" class="outline-3">
<h3 id="org2ee745d"><span class="section-number-3">4.12.</span> filesystem attributes</h3>
<div class="outline-text-3" id="text-4-12">
</div>
<div id="outline-container-orgeff588c" class="outline-4">
<h4 id="orgeff588c"><span class="section-number-4">4.12.1.</span> traditional permissions Unix and POSIX</h4>
<div class="outline-text-4" id="text-4-12-1">
<p>
a 'mode' containing 9 bit flags
</p>
<ul class="org-ul">
<li>read, write and execute permission for each of the file's owner, group and all other users</li>
<li>setuid and setgid bit flags and a 'sticky' bit flag.</li>
<li>file type:
<ul class="org-ul">
<li>- regular file</li>
<li>d directory</li>
<li>l Symbolic link</li>
<li>p named pipe</li>
<li>s socket</li>
<li>c or b device file</li>
<li>D door ( currently implemented only in Solaris. )</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb25b5f3" class="outline-4">
<h4 id="orgb25b5f3"><span class="section-number-4">4.12.2.</span> extended attributes (abbreviated xattr)</h4>
<div class="outline-text-4" id="text-4-12-2">
<p>
all major Linux filesystems support
<a href="https://en.wikipedia.org/wiki/Chattr#Attributes">https://en.wikipedia.org/wiki/Chattr#Attributes</a>
</p>

<p>
Linux: chattr and lsattr
</p>

<p>
BSD: chflags
</p>
</div>
</div>
<div id="outline-container-orgfea8016" class="outline-4">
<h4 id="orgfea8016"><span class="section-number-4">4.12.3.</span> POSIX ACLs</h4>
<div class="outline-text-4" id="text-4-12-3">
<p>
kernel
</p>
<ul class="org-ul">
<li>CONFIG<sub>FS</sub><sub>POSIX</sub><sub>ACL</sub>=y</li>
<li>CONFIG<sub>EXT4</sub><sub>FS</sub><sub>POSIX</sub><sub>ACL</sub>=y</li>
<li>CONFIG<sub>TMPFS</sub><sub>POSIX</sub><sub>ACL</sub>=y</li>
</ul>

<p>
Gentoo package: sys-apps/acl provides setfacl, getfacl, and chacl utilities.
</p>

<p>
Some filesystems, such as ext4, XFS, or Btrfs, enable ACLs by default when mounted.
</p>

<p>
ls command used with the -l option displays a + sign if the listed file uses ACL.
</p>
<pre class="example">
drwxr-xr-x+ 2 apache  apache       135 Dec 11 17:48 apache2
</pre>
</div>
</div>
</div>
<div id="outline-container-orgaca9426" class="outline-3">
<h3 id="orgaca9426"><span class="section-number-3">4.13.</span> SSD</h3>
<div class="outline-text-3" id="text-4-13">
<ul class="org-ul">
<li>When partitioning an SSD, align primary and logical partitions on one-megabyte (1048576 bytes)
boundaries. If partitions, file system blocks, or RAID stripes are incorrectly aligned and overlap the
boundaries of the underlying storage's pages, which are usually either 4 KB or 8 KB in size, the device
controller has to modify twice as many pages than if correct alignment is used.</li>
<li>I recommand to use TMPFS for
<ul class="org-ul">
<li>/tmp</li>
<li>/var/tmp</li>
<li>/var/log</li>
</ul></li>
<li>NOOP scheduler is the simplest I/O scheduler - kernel option: elevator=noop</li>
<li>align partition with HDD blocks and use the same size of sectors if possible</li>
<li>use noatime, compress, ssd<sub>spread</sub> and nodiratime mount options</li>
<li>btrfs: ssd,discard=async option to mount for btrfs</li>
<li>ext4: discard</li>
<li>cryptsetup luksOpen &#x2013;allow-discards /dev/thing luks</li>
<li>dracut:  rd.luks.allow-discards=&lt;luks uuid&gt;</li>
<li>echo "vm.swappiness = 1" &gt;&gt; /etc/sysctl.conf # reduce the tendency of the kernel to perform anticipatory writes to swap
<ul class="org-ul">
<li>default value of vm.swappiness is 60</li>
<li>represents the percentage of the free memory before activating swap</li>
<li>The lower the value, the less swapping is used and the more memory pages are kept in physical memory.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6f26262" class="outline-2">
<h2 id="org6f26262"><span class="section-number-2">5.</span> disk encryption</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>dm-crypt - disk encryption system - administrators can encrypt entire disks, logical volumes, partitions,
but also single files.</li>
<li>Linux Unified Key Setup (LUKS) structure, which allows for multiple keys to access the encrypted data
<ul class="org-ul">
<li>supports non-LUKS setups as well</li>
<li>LUKS functions are accessed via the cryptsetup program, and use dm-crypt for the back-end processing.</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org9532a1d" class="outline-3">
<h3 id="org9532a1d"><span class="section-number-3">5.1.</span> LUKS partition</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>cryptsetup luksFormat /dev/sdb1</li>
<li>cryptsetup luksOpen /dev/sdd1 map<sub>point</sub></li>
<li>mkfs.exfat /dev/mapper/map<sub>point</sub> -n volume<sub>name</sub></li>
<li>mount /dev/mapper/map<sub>point</sub> /mnt/luks<sub>mount</sub></li>
</ul>

<p>
to close:
</p>
<ul class="org-ul">
<li>vgchange -a n vg0</li>
<li>cryptsetup close map<sub>point</sub></li>
</ul>

<p>
for SSD  TRIM:
</p>
<ul class="org-ul">
<li>cryptsetup luksOpen &#x2013;allow-discards /dev/thing luks</li>
<li>GRUB<sub>CMDLINE</sub><sub>LINUX</sub><sub>DEFAULT</sub>="root<sub>trim</sub>=yes"</li>
<li>for dracut: GRUB<sub>CMDLINE</sub><sub>LINUX</sub><sub>DEFAULT</sub>="rd.luks.allow-discards"</li>
</ul>
</div>
</div>
<div id="outline-container-org1b36461" class="outline-3">
<h3 id="org1b36461"><span class="section-number-3">5.2.</span> LUKS with a detached header</h3>
<div class="outline-text-3" id="text-5-2">
<p>
to achive plausible deniability - no proof that a block device is encrypted
</p>
<ul class="org-ul">
<li>LUKS version in use 1 or 2</li>
<li>the cipher name and mode</li>
<li>hash algorithm used for the password salt, the master key bits, digest, salt and hash iterations, and the device UUID</li>
</ul>

<p>
&#x2013;header option would be also used each time we try to unlock the device, or when we need to perform other
  operations which modifies it, such as adding, removing or changing a password, or when using luksDump to
  read its content.
</p>
<ul class="org-ul">
<li>cryptsetup luksFormat /dev/sdb &#x2013;header luksheader.img</li>
<li>cryptsetup luksOpen /dev/sdb sdb-crypt &#x2013;header=luksheader.img</li>
</ul>

<p>
Create partition
</p>
<ul class="org-ul">
<li>export GPG<sub>TTY</sub>=$(tty) # optional</li>
<li>gpg &#x2013;quiet &#x2013;decrypt /mnt/key/rootkey.gpg | cryptsetup &#x2013;batch-mode &#x2013;key-file - luksFormat /dev/sdX3
&#x2013;header luksheader.img &#x2013;type luks2  # gpg variant</li>
<li>cryptsetup luksDump /dev/sdZn &#x2013;header luksheader.img # Check that the formatting worked</li>
<li>gpg &#x2013;quiet &#x2013;decrypt /mnt/key/rootkey.gpg | cryptsetup &#x2013;key-file - luksOpen /dev/sdZn &#x2013;header luksheader.img
&#x2013;type luks2 gentoo</li>
<li>ls /dev/mapper</li>
</ul>
</div>
<div id="outline-container-orgd845c3c" class="outline-4">
<h4 id="orgd845c3c"><span class="section-number-4">5.2.1.</span> create/restore backup header</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li>cryptsetup luksHeaderBackup /dev/sdb &#x2013;header-backup-file sdbheaderbackup.img</li>
<li>cryptsetup luksHeaderRestore /dev/sdb &#x2013;header-backup-file sdbheaderbackup.img</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org89f1eb5" class="outline-3">
<h3 id="org89f1eb5"><span class="section-number-3">5.3.</span> LVM (Logical Volume Manager)</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Create meta devices that provide an abstraction layer between a file system and the physical storage that is
used underneath.
</p>

<ul class="org-ul">
<li>lvscan - show</li>
<li>vgchange -a n vg0 - decativate volume group</li>
<li>vgremove vol<sub>grp</sub> - Delete Volume Group</li>
<li>lvremove /dev/vol<sub>grp</sub>/log<sub>grp1</sub> - Delete Logical Volume</li>
</ul>
</div>
<div id="outline-container-org7b6235a" class="outline-4">
<h4 id="org7b6235a"><span class="section-number-4">5.3.1.</span> LVM terminology:</h4>
<div class="outline-text-4" id="text-5-3-1">
<ul class="org-ul">
<li>physical volume (PV) is an underlying storage device (for example, an actual disk partition or loopback
file), which is managed by LVM. PVs have a special header, and are divided into physical extents.</li>
<li>A physical extent (PE) is the smallest allocatable unit of a PV. We will use the default PE size of 4MiB in
this tutorial.</li>
<li>A logical volume (LV) is LVM's equivalent of a partition. It contains logical extents, which are mapped
one-to-one onto the PEs of contributing physical volumes. Note - unlike a conventional partition, because of
this architecture an LV can span multiple underlying physical volumes, and a physical volume can host
multiple logical volumes, if desired. The LV appears as a standard block device, and so can be formatted
with any normal Linux filesystem (e.g. ext4). We will create LVs for the root directory, the user home
directory and swap in this tutorial.</li>
<li>A volume group (VG) is an administrative unit gathering together a collection of LVs and PVs. We will create
a single VG containing a single PV, and (as just mentioned) three LVs.</li>
</ul>

<p>
<a href="https://wiki.archlinux.org/index.php/LVM">https://wiki.archlinux.org/index.php/LVM</a>
<a href="http://www.datadisk.co.uk/html_docs/redhat/rh_lvm.htm">http://www.datadisk.co.uk/html_docs/redhat/rh_lvm.htm</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org7c14501" class="outline-3">
<h3 id="org7c14501"><span class="section-number-3">5.4.</span> Bootable USB Key</h3>
<div class="outline-text-3" id="text-5-4">
<ol class="org-ol">
<li>Creating a Password-Protected Keyfile for LUKS
<ul class="org-ul">
<li>export GPG<sub>TTY</sub>=$(tty)</li>
<li>dd if=/dev/urandom bs=8388607 count=1 | gpg &#x2013;symmetric &#x2013;cipher-algo AES256 &#x2013;output /tmp/efiboot/luks-key.gpg</li>
</ul></li>
<li>Formatting the New Partition with LUKS
<ul class="org-ul">
<li>gpg &#x2013;decrypt /tmp/efiboot/luks-key.gpg | cryptsetup &#x2013;cipher serpent-xts-plain64 &#x2013;key-size 512 &#x2013;hash
whirlpool &#x2013;key-file - luksFormat /dev/sdZn
<ul class="org-ul">
<li>echo RELOADAGENT | gpg-connect-agent # force check password, clear password from cache</li>
<li>cryptsetup luksDump /dev/sdZn  # Check that the formatting worked, with:</li>
<li>cryptsetup luksHeaderBackup /dev/sdZn &#x2013;header-backup-file /tmp/efiboot/luks-header.img # backup header</li>
</ul></li>
</ul></li>
<li>open the LUKS volume we just created and partitioning
<ul class="org-ul">
<li>gpg &#x2013;decrypt /tmp/efiboot/luks-key.gpg | cryptsetup &#x2013;key-file - luksOpen /dev/sdZn gentoo
<ul class="org-ul">
<li>ls /dev/mapper</li>
</ul></li>
</ul></li>
</ol>

<p>
<a href="https://wiki.gentoo.org/wiki/User:Sakaki/Sakaki%27s_EFI_Install_Guide/Preparing_the_LUKS-LVM_Filesystem_and_Boot_USB_Key">https://wiki.gentoo.org/wiki/User:Sakaki/Sakaki%27s_EFI_Install_Guide/Preparing_the_LUKS-LVM_Filesystem_and_Boot_USB_Key</a>
</p>
</div>
</div>
<div id="outline-container-orgd7fb48c" class="outline-3">
<h3 id="orgd7fb48c"><span class="section-number-3">5.5.</span> simple full</h3>
<div class="outline-text-3" id="text-5-5">
<ul class="org-ul">
<li>GRUB BIOS                       2   MB       no fs       GRUB loader itself</li>
<li>/boot                 boot      512 MB       fat32       GRUB and kernel</li>
<li>LUKS encrypted                  100%         encrypted   encrypted block device
<ul class="org-ul">
<li>LVM             lvm       100%
<ul class="org-ul">
<li>/          root      40  GB       ext4        root filesystem</li>
<li>/var       var       40  GB       ext4        var files</li>
<li>/home      home      100%         ext4        user files</li>
</ul></li>
</ul></li>
</ul>

<p>
parted -a optimal /dev/sdX
</p>
<ul class="org-ul">
<li>unit mib</li>
<li>mklabel gpt</li>
<li>Create the BIOS partition:
<ul class="org-ul">
<li>mkpart primary 1 3</li>
<li>name 1 grub</li>
<li>set 1 bios<sub>grub</sub> on</li>
</ul></li>
<li>Create boot partition. This partition will contain GRUB files, plain (unencrypted) kernel and kernel initrd:
<ul class="org-ul">
<li>mkpart primary fat32 3 515</li>
<li>name 2 boot</li>
<li>set 2 BOOT on</li>
<li>mkpart primary 515 -1</li>
<li>name 3 lvm</li>
<li>set 3 lvm on</li>
<li>mkfs.vfat -F32 /dev/sdX2</li>
<li>modprobe dm-crypt</li>
<li>cryptsetup luksFormat /dev/sdX3 # aes-xts-plain64 512 bits</li>
<li>cryptsetup luksDump /dev/sdX3</li>
</ul></li>
<li>Create LVM inside encrypted block
<ul class="org-ul">
<li>cryptsetup luksOpen /dev/sdX3 lvm</li>
<li>vgcreate vg0 /dev/mapper/lvm  # Create volume group vg0:</li>
<li>lvcreate -L 60G -n root vg0  # Create logical volume for /root filesystem</li>
<li>lvcreate -L 40G -n var vg0  # Create logical volume for /var filesystem</li>
<li>lvcreate -l 100%FREE -n home vg0  # Create logical volume for /home filesystem:</li>
</ul></li>
</ul>

<p>
File Systems
</p>
<ul class="org-ul">
<li>mkfs.ext4 /dev/mapper/vg0-root</li>
<li>mkfs.ext4 /dev/mapper/vg0-var</li>
<li>mkfs.ext4 /dev/mapper/vg0-home</li>
</ul>

<p>
<a href="https://wiki.gentoo.org/wiki/Full_Disk_Encryption_From_Scratch_Simplified">https://wiki.gentoo.org/wiki/Full_Disk_Encryption_From_Scratch_Simplified</a>
</p>
</div>
</div>

<div id="outline-container-org91e5e1e" class="outline-3">
<h3 id="org91e5e1e"><span class="section-number-3">5.6.</span> Dracut</h3>
<div class="outline-text-3" id="text-5-6">
<p>
install
</p>
<ul class="org-ul">
<li>emerge &#x2013;ask sys-kernel/dracut</li>
<li>modules:
<ul class="org-ul">
<li>emerge sys-fs/btrfs-progs</li>
<li>emerge sys-fs/cryptsetup</li>
<li>emerge app-crypt/gnupg</li>
<li>USE="-gtk -pango -libkms" emerge &#x2013;ask sys-boot/plymouth</li>
</ul></li>
</ul>

<p>
basic
</p>
<ul class="org-ul">
<li>/usr/lib/dracut/modules.d</li>
<li>The most basic dracut module is 99base. In 99base the initial shell script init is defined, which gets run
by the kernel after initramfs loading</li>
<li>If a module passed check, install and installkernel will be called to install all of the necessary files for the module.</li>
</ul>

<p>
trouble shooting:
</p>
<ul class="org-ul">
<li>(Repari filesystem):/# cat /run/initramfs/rdsosreport.txt</li>
</ul>
</div>

<div id="outline-container-orge9aa22a" class="outline-4">
<h4 id="orge9aa22a"><span class="section-number-4">5.6.1.</span> inspect initramfs</h4>
<div class="outline-text-4" id="text-5-6-1">
<ul class="org-ul">
<li>dracut &#x2013;print-cmdline</li>
<li>lsinitrd /boot/initramfs | less</li>
<li>lsinitrd -f etc/cmdline.d/01-default.conf /boot/initramfs # inspect file inside initramfs</li>
</ul>
<p>
help
</p>
<ul class="org-ul">
<li>man dracut.kernel</li>
<li>man dracut.conf</li>
</ul>
</div>
</div>

<div id="outline-container-org5435f1a" class="outline-4">
<h4 id="org5435f1a"><span class="section-number-4">5.6.2.</span> tmp</h4>
<div class="outline-text-4" id="text-5-6-2">
<p>
systemd-udevd  used greates stack depth
</p>

<p>
Password (/luks-key.pgp on /dev/sdb1 for /dev/sda3) <code>[1/3]</code>:+eval 'gpg &#x2013;homedir /tmp/gnupg &#x2013;no-mdc-warning
&#x2013;skip-verify &#x2013;quiet &#x2013;logger-file /dev/null &#x2013;batch &#x2013;no-tty &#x2013;passphrase-fd 0 &#x2013;decrypt
/mnt/keydev&#x2013;dev-sdb1&#x2013;luks-key.gpg//luks-key.gpg'
</p>

<p>
dracut: ++ gpg &#x2013;homedir /tmp/gnupg &#x2013;no-mdc-warning &#x2013;skip-verify &#x2013;quiet &#x2013;logger-file /dev/null &#x2013;batch
&#x2013;no-tty &#x2013;passphrase-fd 0 &#x2013;decrypt /mnt/keydev&#x2013;dev-sdb1&#x2013;luks-key.gpg/luks-key.gpg
</p>

<p>
ply<sub>cmd</sub>='/sbin/cryptsetup luksOpen -T1 /dev/sda3 luks-5706&#x2026;
</p>


<p>
line 116 stty : command not found
line 117 stty : command not found
</p>

<p>
/lib/dracut/lib.sh
/lib/dracut/hook/initqueue/finish/90-
</p>

<ul class="org-ul">
<li>sleep 7</li>
<li>sleep 10</li>

<li>sleep 8</li>
</ul>
</div>
</div>
<div id="outline-container-orga1422e8" class="outline-4">
<h4 id="orga1422e8"><span class="section-number-4">5.6.3.</span> 91crypt-gpg</h4>
<div class="outline-text-4" id="text-5-6-3">
<ul class="org-ul">
<li>90crypt/cryptroot-ask.sh:
<ul class="org-ul">
<li>90crypt/crypt-lib.sh: readkey() # Mounts &lt;keydev&gt;, reads key from file &lt;keypath&gt;, optionally processes it
<ol class="org-ol">
<li>91crypt-gpg/crypt-gpg-lib.sh: gpg<sub>decrypt</sub>() # ask for massword
<ul class="org-ul">
<li>crypt-lib.sh: ask<sub>for</sub><sub>password</sub>()
<ul class="org-ul">
<li>&gt; gpg &#x2013;homedir /tmp/gnupg &#x2013;no-mdc-wanring &#x2013;skip-verify &#x2013;quiet &#x2013;batch &#x2013;no-tty &#x2013;passphrase-fd 0
&#x2013;decrypt /mnt/keydev-luks-key.gpg/luks-key.gpg</li>
</ul></li>
</ul></li>
<li>loop<sub>decrypt</sub></li>
</ol></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgf8468b3" class="outline-4">
<h4 id="orgf8468b3"><span class="section-number-4">5.6.4.</span> kernel command line</h4>
<div class="outline-text-4" id="text-5-6-4">
<p>
default - no-hostonly
</p>
<ul class="org-ul">
<li>does not contain any system configuration files (except for some special exceptions), so the configuration
has to be done on the kernel command line</li>
<li>you can easily boot from a changed root partition, without the need to recompile the initramfs image</li>
</ul>

<p>
hostonly:
</p>
<ul class="org-ul">
<li>store configuration and kernel command line inside initramfs</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org525d066" class="outline-3">
<h3 id="org525d066"><span class="section-number-3">5.7.</span> links</h3>
<div class="outline-text-3" id="text-5-7">
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/Dm-crypt">https://wiki.gentoo.org/wiki/Dm-crypt</a></li>
<li><a href="https://cryptsetup-team.pages.debian.net/cryptsetup/encrypted-boot.html">https://cryptsetup-team.pages.debian.net/cryptsetup/encrypted-boot.html</a></li>
<li>LUKS forensic review <a href="https://blog.elcomsoft.ru/2022/08/shifrovanie-diskov-v-linux-luks2-argon2-i-apparatnoe-uskorenie/">https://blog.elcomsoft.ru/2022/08/shifrovanie-diskov-v-linux-luks2-argon2-i-apparatnoe-uskorenie/</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org53f686b" class="outline-2">
<h2 id="org53f686b"><span class="section-number-2">6.</span> bootloader</h2>
<div class="outline-text-2" id="text-6">
<p>
UEFI Secure Boot with systemd’s boot stub - gentoo developer <a href="https://concord.sh/posts/2022/08/uefi-secure-boot-the-right-way/">https://concord.sh/posts/2022/08/uefi-secure-boot-the-right-way/</a>
</p>
</div>
<div id="outline-container-org1669618" class="outline-3">
<h3 id="org1669618"><span class="section-number-3">6.1.</span> limine</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>formats for boot: FAT*, ISO9660
<ul class="org-ul">
<li>bloated bootloaders as a result (eg: GRUB2).</li>
<li>bootloader is capable of reading its own files, configuration, and be able to load kernel/module files from disk</li>
</ul></li>
<li>boot readable with BLAKE2B checksums - provides as much security as encrypting the kernel does.</li>
<li>The EFI executable gets then enrolled or otherwise verified by the Secure Boot loader through, eg., the
<b>shim project</b>. - This prevents modifications being done to the config file (and in turn the checksums
contained there) from going unnoticed.</li>
</ul>
</div>
<div id="outline-container-org994a6de" class="outline-4">
<h4 id="org994a6de"><span class="section-number-4">6.1.1.</span> links</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
<a href="https://github.com/limine-bootloader/limine/blob/v4.x-branch/PHILOSOPHY.md">https://github.com/limine-bootloader/limine/blob/v4.x-branch/PHILOSOPHY.md</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgcfc21d1" class="outline-3">
<h3 id="orgcfc21d1"><span class="section-number-3">6.2.</span> grub</h3>
<div class="outline-text-3" id="text-6-2">
<p>
write boot code to:
</p>
<ul class="org-ul">
<li>MBR at disk</li>
<li>boot partition - this code can be started if the boot code in MBR is able to do chain loading</li>
</ul>
<p>
<a href="https://www.gnu.org/software/grub/manual/grub/">https://www.gnu.org/software/grub/manual/grub/</a>
</p>
</div>

<div id="outline-container-org6e740cb" class="outline-4">
<h4 id="org6e740cb"><span class="section-number-4">6.2.1.</span> notes</h4>
<div class="outline-text-4" id="text-6-2-1">
<ul class="org-ul">
<li>Esc or Shift - call for menu</li>
<li>e - edit item</li>
</ul>
</div>
</div>
<div id="outline-container-orgc4a5a62" class="outline-4">
<h4 id="orgc4a5a62"><span class="section-number-4">6.2.2.</span> disable menu</h4>
<div class="outline-text-4" id="text-6-2-2">
<p>
GRUB<sub>RECORDFAIL</sub><sub>TIMEOUT</sub>=0
GRUB<sub>HIDDEN</sub><sub>TIMEOUT</sub>=0
GRUB<sub>HIDDEN</sub><sub>TIMEOUT</sub><sub>QUIET</sub>=true
GRUB<sub>TIMEOUT</sub>=10
</p>
</div>
</div>
</div>

<div id="outline-container-org8c1ef50" class="outline-3">
<h3 id="org8c1ef50"><span class="section-number-3">6.3.</span> links</h3>
<div class="outline-text-3" id="text-6-3">
<ul class="org-ul">
<li><a href="https://github.com/LaszloGombos/awesome-initramfs">https://github.com/LaszloGombos/awesome-initramfs</a></li>
<li>secure boot <a href="https://www.funtoo.org/Secure_Boot">https://www.funtoo.org/Secure_Boot</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org06d2a7e" class="outline-2">
<h2 id="org06d2a7e"><span class="section-number-2">7.</span> linux<sub>kernel</sub></h2>
<div class="outline-text-2" id="text-7">
<p>
sec recomandations   <a href="https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project/Recommended_Settings">https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project/Recommended_Settings</a>
</p>
</div>
<div id="outline-container-orgd8bb004" class="outline-3">
<h3 id="orgd8bb004"><span class="section-number-3">7.1.</span> theory</h3>
<div class="outline-text-3" id="text-7-1">
</div>
<div id="outline-container-org477758c" class="outline-4">
<h4 id="org477758c"><span class="section-number-4">7.1.1.</span> initrams</h4>
<div class="outline-text-4" id="text-7-1-1">
<p>
initramfs (initial ram file system) - used to prepare Linux systems during boot before the init process
starts.
</p>
<ul class="org-ul">
<li>is a root filesystem that is embedded into the kernel and loaded at an early stage of the boot process</li>
<li>provides early userspace which can do things the kernel can't easily do by itself during the boot process</li>
<li>initramfs is optional</li>
<li>mounting important file systems (by loading the proper kernel modules and drivers) such as /usr or /var,
preparing the /dev file structure, etc.</li>
<li>initramfs ask for the passphrase before it can mount the file systems</li>
</ul>

<p>
for
</p>
<ul class="org-ul">
<li>Mounting an encrypted, logical, or otherwise special root partition</li>
<li>Providing a minimalistic rescue shell (if something goes wrong)</li>
<li>Customize the boot process (e.g., print a welcome message)</li>
<li>Load modules necessary to boot (e.g., third party storage drivers)</li>
<li>Anything the kernel can't do that's usually handled in user space</li>
</ul>


<p>
By default, the kernel initializes hardware using built-in drivers, mounts the specified root partition, loads
the init system of the installed Linux distribution. The init system then loads additional modules and starts
services until it eventually presents a log in dialog.
</p>

<p>
cpio archive. This archive is then either embedded directly into the kernel image, or stored as a separate
file which can be loaded by the bootloader during the boot process.
</p>

<p>
REQUIRED ALWAYS:
</p>
<ul class="org-ul">
<li>CONFIG<sub>BLK</sub><sub>DEV</sub><sub>INITRD</sub>=y</li>
<li>General setup  &#x2014;&gt;    [*] Initial RAM filesystem and RAM disk (initramfs/initrd) support</li>
</ul>

<p>
/boot/grub/grub.conf:
</p>
<ul class="org-ul">
<li>initrd	/initramfs-5.15.11-gentoo.img</li>
</ul>
<p>
<a href="https://wiki.gentoo.org/wiki/Custom_Initramfs">https://wiki.gentoo.org/wiki/Custom_Initramfs</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org7fdaa7c" class="outline-3">
<h3 id="org7fdaa7c"><span class="section-number-3">7.2.</span> usage <a id="orgad5df0a"></a></h3>
<div class="outline-text-3" id="text-7-2">
<p>
<b>kernel installation</b>
</p>
<ol class="org-ol">
<li>eselect kernel list</li>
<li>eselect kernel set 1</li>
<li>make clean</li>
<li>make oldconfig - reads the existing .config file that was used for an old kernel and prompts the
user for options in the current kernel source that are not found in the file.</li>
<li>make olddefconfig (alternative) - keep old settings, new settings set to default</li>
<li>make menuconfig / make nconfig</li>
<li>make prepare &amp;&amp; make modules<sub>prepare</sub> # Некоторые модули не могут быть установлены или подготовлены до того,
как будет собрано ядро.</li>
<li>make -j3 &amp;&amp; make modules<sub>install</sub> &amp;&amp; make install # generate /boot/vmlinuz-6.1.57-gentoo /boot/System.map-6.1.57-gentoo</li>
<li>cp .config /.config<sub>tmp</sub></li>
<li><a href="#orgdf0e12e">7.10</a></li>
<li>genkernel &#x2013;kernel-config=/.config<sub>tmp</sub> initramfs # if /usr or others located at separate partition or encrypted # or dracut</li>
<li>grub-mkconfig -o /boot/grub/grub.cfg</li>
<li>grub-install /dev/sda</li>
<li>After load: dmesg | grep -Ei "warn|error|crit|fatal"</li>
</ol>

<p>
<b>chroot and update</b>
mount -o loop tu.img /mnt/img
/a
</p>

<p>
<b>remove kernel</b>
rm /usr/src/linux-x.x
rm /lib/modules/x.x
rm /boot/vmlinuz-x.x
rm /boot/System.map-x.x
rm /boot/config-x.x
rm /boot/initramfs-genkernel-
</p>


<p>
<b>xen</b>
Device Drivers-&gt;Graphical support -&gt; disable Nouveau
Device Drivers-&gt;X86 Platform Specific Device Drivers -&gt; disable WMI
cp vmlinux
cp <i>usr/src/linux</i>.config
cp /usr/src/linux/Makeefile
</p>
</div>
</div>

<div id="outline-container-orgb8db82b" class="outline-3">
<h3 id="orgb8db82b"><span class="section-number-3">7.3.</span> config for dracut <a id="org9fd11fb"></a></h3>
<div class="outline-text-3" id="text-7-3">
<ol class="org-ol">
<li>emerge &#x2013;ask sys-apps/pciutils sys-kernel/gentoo-sources</li>
<li>eselect kernel list</li>
<li>eselect kernel set 1</li>
<li>lspci -k &gt; lspci<sub>installcd</sub></li>
<li>lsmod &gt; lsmod<sub>installcd</sub></li>
<li>dmesg &gt; dmesg<sub>installcd</sub></li>
<li>make menuconfig / make nconfig
<ol class="org-ol">
<li>processor type and features
<ul class="org-ul">
<li>disable
<ul class="org-ul">
<li>support for extended non-PC x86 platforms</li>
<li>AMD optons</li>
<li>CPU microcode loading support</li>
</ul></li>
<li>enable
<ul class="org-ul">
<li>Processor family - Core 2/newer Xeon or Generic x86<sub>64</sub></li>
</ul></li>
</ul></li>
<li>File systems</li>
<li>Device Drivers  &#x2014;&gt;   Multiple devices driver support (RAID and LVM)  &#x2014;&gt; &lt;*&gt; Device mapper support
<ul class="org-ul">
<li>enable
<ul class="org-ul">
<li>Crypt target support</li>
<li>Snapshot target</li>
<li>Multipath target
<ul class="org-ul">
<li>I/O Path Selector based on the number of in-flight I/Os</li>
<li>I/O Path Selector based on the service time</li>
</ul></li>
</ul></li>
</ul></li>
<li>Cryptographic API
<ul class="org-ul">
<li>enable
<ul class="org-ul">
<li>XTS support</li>
<li>LZO compression algorithm</li>
<li>Zstd compression algorithm</li>
<li>User-space interface for hash algorithms</li>
<li>User-space interface for symmetric key cipher algorithms</li>
</ul></li>
</ul></li>
<li>Generel
<ul class="org-ul">
<li>enable
<ul class="org-ul">
<li>Make compiler warnings as errors</li>
</ul></li>
</ul></li>
<li>Device Drivers  &#x2014;&gt; Graphic support
<ul class="org-ul">
<li>enable
<ul class="org-ul">
<li>Frame buffer Devices &#x2014;&gt;   &lt;*&gt;    Support for frame buffer devices
<ul class="org-ul">
<li>disable - all inside</li>
</ul></li>
<li>Intel 8xx/9xx/G3x/G4x/HD Graphics</li>
<li>[*]   Enable capturing GPU state following a hang</li>
<li>[*]     Compress GPU error state</li>
<li>[*]   Always enable userptr support</li>
<li>Frame buffers Defices -&gt;
<ul class="org-ul">
<li>VESA VGA</li>
<li>Simple framebuffer support</li>
</ul></li>
</ul></li>
</ul></li>
<li>Network
<ul class="org-ul">
<li>enable
<ul class="org-ul">
<li>Device Drivers -&gt; X86 Platform Specific Device Drivers - ThinkPad ACPI Laptop Ectras</li>
<li>Device Drivers -&gt; Thermal drivers -&gt; Intel Thermal drivers</li>
<li>Device Drivers -&gt; Network -&gt; leave only enable Ethernet and WLAN
<ul class="org-ul">
<li>802.1Q VLAN</li>
<li>LAN
<ul class="org-ul">
<li>Qualcomm Atheros AR8172 Fast Ethernet</li>
<li>jme:JMicron JMC2XX ethernet driver</li>
</ul></li>
</ul></li>
<li>Broadcom 802.11b/g/n BCM43142 - CONFIG<sub>CFG80211</sub><sub>WEXT</sub>=y, package broadcom-sta
<ul class="org-ul">
<li>Network support -&gt; Wireless -&gt; cfg80211 wireless extension compatibility</li>
</ul></li>
</ul></li>
<li>ifconfig # should show connections</li>
</ul></li>
</ol></li>
<li>make all modules as * - if it is not device specific: check with  lsmod command</li>
</ol>


<p>
<a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Kernel">https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Kernel</a>
</p>
</div>
</div>

<div id="outline-container-orgc7e1c62" class="outline-3">
<h3 id="orgc7e1c62"><span class="section-number-3">7.4.</span> security config <a id="org72aca9b"></a></h3>
<div class="outline-text-3" id="text-7-4">
<ul class="org-ul">
<li>General setup:
<ul class="org-ul">
<li>Randomize slab freelist</li>
<li>Page allocator randomization</li>
</ul></li>
<li>General architecture-dependent options
<ul class="org-ul">
<li>Randomize kernel stack offset on syscall entry</li>
<li>GCC plugins -&gt; Randomize layout of sensitive kernel structures</li>
</ul></li>
<li>Enable loadable module - sign all</li>
<li>Security options
<ul class="org-ul">
<li>Restrict uprivileged access tp the kernel syslog</li>
<li>Harden memory copies between kernel and userspace
<ul class="org-ul">
<li>Allow usercopy whitelist &#x2026; - must be disabled slab<sub>common.usercopy</sub><sub>fallback</sub>=N</li>
</ul></li>
<li>Harden common str/mem functions agains buffer overflows</li>
<li>Kernel hardening options</li>
</ul></li>
<li>Kernel hacking -&gt; disable
<ul class="org-ul">
<li>Kernel debugging</li>
<li>Generic Kernel Debugging Instruments -&gt; Debugfs default access - set - No access</li>
<li>all debugging</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgcb241fa" class="outline-3">
<h3 id="orgcb241fa"><span class="section-number-3">7.5.</span> hardening</h3>
<div class="outline-text-3" id="text-7-5">
<ul class="org-ul">
<li><a href="https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project/Recommended_Settings">https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project/Recommended_Settings</a></li>
<li><a href="https://pmateti.github.io/Courses/4420/Lectures/Hardening/SecureKernel/">https://pmateti.github.io/Courses/4420/Lectures/Hardening/SecureKernel/</a></li>
<li>Kernel Hacking
<ul class="org-ul">
<li>[*] Kernel debugging</li>
<li>Debug Oops, Lockups and Hangs
<ul class="org-ul">
<li>[*] Panic on Oops CONFIG<sub>PANIC</sub><sub>ON</sub><sub>OOPS</sub>=y
<ul class="org-ul">
<li>(-1) panic timeout CONFIG<sub>PANIC</sub><sub>TIMEOUT</sub>=-1</li>
</ul></li>
</ul></li>
<li>Memory debugging
<ul class="org-ul">
<li>Warn or W+X mappings at boot CONFIG<sub>DEBUG</sub><sub>WX</sub></li>
<li>Detect stack corrution on CONFIG<sub>SCHED</sub><sub>STACK</sub><sub>END</sub><sub>CHECK</sub>=y</li>
<li>KFENCE: low- CONFIG<sub>KFENCE</sub>=y</li>
</ul></li>
<li>Debug kernel data structures - all
<ul class="org-ul">
<li>Debug linked list CONFIG<sub>DEBUG</sub><sub>LIST</sub>=y</li>
<li>CONFIG<sub>DEBUG</sub><sub>SG</sub>=y</li>
<li>CONFIG<sub>BUG</sub><sub>ON</sub><sub>DATA</sub><sub>CORRUPTION</sub>=y</li>
<li>CONFIG<sub>DEBUG</sub><sub>NOTIFIERS</sub>=y</li>
</ul></li>
</ul></li>
<li>Device drivers
<ul class="org-ul">
<li>IOMMU Hardware Support
<ul class="org-ul">
<li>IOMMU default domain type - strict</li>
</ul></li>
</ul></li>
<li>General setup
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Core Scheduling for SMT - better to DISABLE!</li>
</ul></li>
<li>Filesystems
<ul class="org-ul">
<li>Pseudo filesystems
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> /proc/kcore support - DISABLE!!</li>
</ul></li>
</ul></li>
<li>Processor type and features
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> kexec system call - DISABLE!!</li>
</ul></li>
<li>Executable file formats
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Kernel suppoert for MISC binaries - DISABLE!!</li>
</ul></li>
<li>General architecture-dependent options
<ul class="org-ul">
<li>Gcc plugins
<ul class="org-ul">
<li>Generate some entropy during boot and runtime</li>
</ul></li>
</ul></li>
<li>Memory managgement options (for x86<sub>64</sub>)
<ul class="org-ul">
<li>(65536) Low address space to protect -  CONFIG<sub>DEFAULT</sub><sub>MMAP</sub><sub>MIN</sub><sub>ADDR</sub>=65536</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf006d74" class="outline-3">
<h3 id="orgf006d74"><span class="section-number-3">7.6.</span> nconfig search</h3>
<div class="outline-text-3" id="text-7-6">
<ul class="org-ul">
<li>/ - search</li>
<li>Up/Down array - next/preview search</li>
</ul>


<p>
make NCONFIG<sub>MODE</sub>=single<sub>menu</sub> nconfig - shows all sub-menus in one large tree.
</p>
</div>
</div>
<div id="outline-container-org2696c5b" class="outline-3">
<h3 id="org2696c5b"><span class="section-number-3">7.7.</span> menuconfig search</h3>
<div class="outline-text-3" id="text-7-7">
<ul class="org-ul">
<li>/ - search</li>
<li>/ TAB TAB - help</li>
<li>regex supported</li>
</ul>
</div>
</div>

<div id="outline-container-org0a862cb" class="outline-3">
<h3 id="org0a862cb"><span class="section-number-3">7.8.</span> add binary driver to kernel</h3>
<div class="outline-text-3" id="text-7-8">
<p>
CONFIG<sub>EXTRA</sub><sub>FIRMWARE</sub><sub>DIR</sub>="<i>lib/firmware"
CONFIG<sub>EXTRA</sub><sub>FIRMWARE</sub>="file name in /lib/firmware</i> separated by space"
</p>

<ol class="org-ol">
<li>Device Drivers</li>
<li>Generic Driver Options</li>
<li>Firmware Loader</li>
</ol>
</div>
</div>
<div id="outline-container-orgf1e6493" class="outline-3">
<h3 id="orgf1e6493"><span class="section-number-3">7.9.</span> modules parameters</h3>
<div class="outline-text-3" id="text-7-9">
<pre class="example">
emerge sys-fs/sysfsutils
systool -am thinkpad_acpi # get options
systool -v -m thinkpad_acpi # get current values
</pre>


<p>
<a href="https://wiki.archlinux.org/title/Kernel_module">https://wiki.archlinux.org/title/Kernel_module</a>
</p>
</div>
</div>
<div id="outline-container-org2599956" class="outline-3">
<h3 id="org2599956"><span class="section-number-3">7.10.</span> renaming vmlinuz and System.map <a id="orgdf0e12e"></a></h3>
<div class="outline-text-3" id="text-7-10">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #cae682;">version</span>=$(<span style="color: #fa8072;">cat /usr/src/linux/include/config/kernel.release</span>) <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">6.1.0-gentoo</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">old2 to old3</span>
mv /boot/vmlinuz-${<span style="color: #cae682;">version</span>}-old2 /boot/vmlinuz-${<span style="color: #cae682;">version</span>}-old3
mv /boot/System.map-${<span style="color: #cae682;">version</span>}-old2 /boot/System.map-${<span style="color: #cae682;">version</span>}-old3
mv /boot/initramfs-${<span style="color: #cae682;">version</span>}.img-old2 /boot/initramfs-${<span style="color: #cae682;">version</span>}.img-old3

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">old to old2</span>
mv /boot/vmlinuz-${<span style="color: #cae682;">version</span>}-old /boot/vmlinuz-${<span style="color: #cae682;">version</span>}-old2
mv /boot/System.map-${<span style="color: #cae682;">version</span>}-old /boot/System.map-${<span style="color: #cae682;">version</span>}-old2
mv /boot/initramfs-${<span style="color: #cae682;">version</span>}.img-old /boot/initramfs-${<span style="color: #cae682;">version</span>}.img-old2

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">save to old</span>
mv /boot/vmlinuz-$<span style="color: #cae682;">version</span> /boot/vmlinuz-${<span style="color: #cae682;">version</span>}-old
mv /boot/System.map-$<span style="color: #cae682;">version</span> /boot/System.map-${<span style="color: #cae682;">version</span>}-old
mv /boot/initramfs-${<span style="color: #cae682;">version</span>}.img /boot/initramfs-${<span style="color: #cae682;">version</span>}.img-old

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">rename</span>
mv /boot/vmlinuz /boot/vmlinuz-$<span style="color: #cae682;">version</span>
mv /boot/System.map /boot/System.map-$<span style="color: #cae682;">version</span>
mv /boot/initramfs /boot/initramfs-$<span style="color: #cae682;">version</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org43ec86c" class="outline-3">
<h3 id="org43ec86c"><span class="section-number-3">7.11.</span> GNU Linux-libre</h3>
</div>
<div id="outline-container-orgd7122c0" class="outline-3">
<h3 id="orgd7122c0"><span class="section-number-3">7.12.</span> Linux Libre</h3>
<div class="outline-text-3" id="text-7-12">
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/Going_100%25_Libre_with_Gentoo">https://wiki.gentoo.org/wiki/Going_100%25_Libre_with_Gentoo</a></li>
<li><a href="https://linux-libre.fsfla.org">https://linux-libre.fsfla.org</a></li>
</ul>
</div>
<div id="outline-container-org2e1e238" class="outline-4">
<h4 id="org2e1e238"><span class="section-number-4">7.12.1.</span> kernel deblob script of GNU Linux-libre project</h4>
<div class="outline-text-4" id="text-7-12-1">
<ul class="org-ul">
<li><a href="https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-6.6">https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-6.6</a></li>
<li><a href="https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-6.6.sign">https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-6.6.sign</a></li>
<li><a href="https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-check">https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-check</a></li>
<li><a href="https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-check.sign">https://linux-libre.fsfla.org/pub/linux-libre/releases/LATEST-6.6.N/deblob-check.sign</a></li>
<li><a href="https://wiki.gentoo.org/wiki/Kernel/Deblobbing">https://wiki.gentoo.org/wiki/Kernel/Deblobbing</a></li>
</ul>

<p>
mirror: <a href="https://mirror.cyberbits.eu/linux-libre/">https://mirror.cyberbits.eu/linux-libre/</a>
<a href="https://linux-libre.fsfla.org/pub/linux-libre/SIGNING-KEY">https://linux-libre.fsfla.org/pub/linux-libre/SIGNING-KEY</a>
</p>
</div>
</div>
<div id="outline-container-org254180e" class="outline-4">
<h4 id="org254180e"><span class="section-number-4">7.12.2.</span> librewolf</h4>
<div class="outline-text-4" id="text-7-12-2">
<ul class="org-ul">
<li><a href="https://librewolf.net/">https://librewolf.net/</a></li>
<li><a href="https://codeberg.org/librewolf">https://codeberg.org/librewolf</a></li>
<li><a href="https://librewolf.net/docs/faq/">https://librewolf.net/docs/faq/</a></li>
</ul>
<p>
always based on the latest version of Firefox. does not have auto-update capabilities
</p>

<ul class="org-ul">
<li>wget <a href="https://linux-libre.fsfla.org/pub/linux-libre/SIGNING-KEY">https://linux-libre.fsfla.org/pub/linux-libre/SIGNING-KEY</a></li>
<li>gpg &#x2013;import SIGNING-KEY</li>
<li>gpg &#x2013;keyserver keys.gnupg.net &#x2013;recv-key BCB7CF877E7D47A7</li>
<li>gpg &#x2013;verify deblob-check.sign deblob-check</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org3882daa" class="outline-3">
<h3 id="org3882daa"><span class="section-number-3">7.13.</span> links</h3>
<div class="outline-text-3" id="text-7-13">
<p>
<a href="https://kernel.org/">https://kernel.org/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org4c4354b" class="outline-2">
<h2 id="org4c4354b"><span class="section-number-2">8.</span> keyboard</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li><a href="https://wiki.archlinux.org/title/Xmodmap">https://wiki.archlinux.org/title/Xmodmap</a></li>
<li><a href="https://cs.gmu.edu/~sean/stuff/n800/keyboard/old.html">https://cs.gmu.edu/~sean/stuff/n800/keyboard/old.html</a></li>

<li>xmodmap - only recommended for the simplest tasks - file ./xmodmap</li>
<li>setxkbmap -  X keyboard extension (XKB) - should be saved to ~/.profile (or ./xinitrc)</li>
<li>xev - find out key kode</li>
<li>dumpkeys/loadkeys - console and global</li>
</ul>
</div>
<div id="outline-container-orge6c7221" class="outline-3">
<h3 id="orge6c7221"><span class="section-number-3">8.1.</span> xmodmap</h3>
<div class="outline-text-3" id="text-8-1">
<p>
<a href="https://www.in-ulm.de/~mascheck/X11/xmodmap.html">https://www.in-ulm.de/~mascheck/X11/xmodmap.html</a>
</p>

<ul class="org-ul">
<li>xmodmap -pke - get current keys config</li>
<li>xmodmap ~/.Xmodmap - load from file</li>
<li>keysym - a,z,Mode<sub>switch</sub>, Shift</li>
<li>keycode - 0xfd,0x5f</li>
<li>modifier key types: Shift, Lock, Control, Mod1, Mod2, Mod3, Mod4, Mod5</li>
</ul>

<p>
Each keysym column in the table corresponds to a particular combination of modifier keys ( Only the
first four elements are platform-independent):
</p>
<ol class="org-ol">
<li>Key</li>
<li>Shift+Key</li>
<li>Mode<sub>switch</sub>+Key</li>
<li>Mode<sub>switch</sub>+Shift+Key</li>
<li>ISO<sub>Level3</sub><sub>Shift</sub>+Key or &lt;"Num<sub>Lock</sub>"-key&gt;  or Ctrl</li>
<li>ISO<sub>Level3</sub><sub>Shift</sub>+Shift+Key</li>
<li>&lt;"Num<sub>Lock</sub>"-"Mode<sub>switch</sub>"-key&gt;</li>
</ol>

<p>
ISO<sub>Level3</sub><sub>Shift</sub> may be set with:
</p>
<ul class="org-ul">
<li>setxkbmap -option 'lv3:ralt<sub>alt</sub>'</li>
</ul>
</div>
<div id="outline-container-org0fef1dd" class="outline-4">
<h4 id="org0fef1dd"><span class="section-number-4">8.1.1.</span> .xmodmap</h4>
<div class="outline-text-4" id="text-8-1-1">
<ul class="org-ul">
<li>! - comment</li>
<li>keysym key<sub>symbol</sub> = keymapping - keysym z = z Z Greek<sub>omega</sub> Greek<sub>OMEGA</sub></li>
<li>keycode key<sub>code</sub> = keymapping - keycode 0xfd = Page<sub>Down</sub></li>
<li>clear modifier</li>
<li>add modifier = key<sub>symbol</sub> - assign key to modifier</li>
</ul>
</div>
</div>
<div id="outline-container-org7d859c2" class="outline-4">
<h4 id="org7d859c2"><span class="section-number-4">8.1.2.</span> usage Firefox &amp; IJKL</h4>
<div class="outline-text-4" id="text-8-1-2">
<p>
firefox
keycode  18 = 9 parenleft Prior parenleft
keycode  19 = 0 parenright Next parenright
keycode  17 = 8 asterisk 8 Up U20BD
keycode  20 = minus underscore Down underscore
keycode  65 = space NoSymbol Return
keycode 108 = Mode<sub>switch</sub>
</p>

<p>
ex:
keycode 66 = Mode<sub>switch</sub>
keysym j = j J Left
keysym l = l L Right
keysym i = i I Up
keysym k = k K Down
keysym h = h H Prior
keysym n = n N Next
keysym y = y Y Home
keysym m = m m End
</p>
</div>
</div>

<div id="outline-container-org89aad51" class="outline-4">
<h4 id="org89aad51"><span class="section-number-4">8.1.3.</span> Ctrl as a CapsLook</h4>
<div class="outline-text-4" id="text-8-1-3">
<p>
./xmodmap:
</p>

<p>
remove Lock = Caps<sub>Lock</sub>
keysym Caps<sub>Lock</sub> = Control<sub>L</sub>
add Control = Control<sub>L</sub>
</p>

<p>
or
</p>

<p>
setxkbmap -option ctrl:nocaps
</p>
</div>
</div>
</div>

<div id="outline-container-orgf434b0c" class="outline-3">
<h3 id="orgf434b0c"><span class="section-number-3">8.2.</span> xkb</h3>
<div class="outline-text-3" id="text-8-2">
<p>
/usr/share/X11/xkb/symbols/ru = locale
</p>

<ul class="org-ul">
<li>setxkbmap -query - get current model and options</li>
<li>setxkbmap -option - reset</li>
<li>man 7 xkeyboard-config - get options</li>
<li>xev -event keyboard - to get keycodes and to check how your keymap works</li>
</ul>

<p>
sections:
</p>
<ul class="org-ul">
<li>xkb<sub>keycodes</sub></li>
<li>xkb<sub>types</sub></li>
</ul>

<p>
xkbcomp -xkb $DISPLAY xkbmap
</p>

<p>
test -f ~/.Xkeymap &amp;&amp; xkbcomp ~/.Xkeymap $DISPLAY
</p>

<p>
levels:
</p>
<ul class="org-ul">
<li>Level 1 is unshifted</li>
<li>level 2 is the result of a ⇧ Shift modifier, a shift latch, a ⇫ Shift Lock, a Num Lock, or a ⇬ Caps Lock;</li>
<li>and level 3 is the result of a "level three modifier" of some kind.</li>
</ul>

<p>
setxkbmap -model pc101 -layout 'us,ru' -variant ',' -option 'grp:shift<sub>caps</sub><sub>switch</sub>'
</p>
</div>

<div id="outline-container-orgd02d917" class="outline-4">
<h4 id="orgd02d917"><span class="section-number-4">8.2.1.</span> files to autostart</h4>
<div class="outline-text-4" id="text-8-2-1">
<p>
cp <i>etc/xdg/xfce4/xinitrc ~</i>.config/xfce4/xinitrc
</p>
</div>
</div>
<div id="outline-container-org0ec0c59" class="outline-4">
<h4 id="org0ec0c59"><span class="section-number-4">8.2.2.</span> LINKS</h4>
<div class="outline-text-4" id="text-8-2-2">
<p>
<a href="https://wiki.archlinux.org/title/X_keyboard_extension">https://wiki.archlinux.org/title/X_keyboard_extension</a>
<a href="https://wiki.gentoo.org/wiki/Keyboard_layout_switching">https://wiki.gentoo.org/wiki/Keyboard_layout_switching</a>
<a href="https://askubuntu.com/questions/1006856/how-to-use-mode-switch-and-xmodmap-in-current-ubuntu-versions">https://askubuntu.com/questions/1006856/how-to-use-mode-switch-and-xmodmap-in-current-ubuntu-versions</a>
<a href="https://michal.kosmulski.org/computing/articles/custom-keyboard-layouts-xkb.html">https://michal.kosmulski.org/computing/articles/custom-keyboard-layouts-xkb.html</a>
</p>
</div>
</div>

<div id="outline-container-org21cbdea" class="outline-4">
<h4 id="org21cbdea"><span class="section-number-4">8.2.3.</span> <span class="todo TODO">TODO</span> Ctrl+key</h4>
<div class="outline-text-4" id="text-8-2-3">
<p>
xkb<sub>types</sub> "complete" {
  type "CTRL" {
        modifiers= Control;
        map[Control]= Level2;
        level<sub>name</sub>[Level1]= "Base";
        level<sub>name</sub>[Level2]= "Ctrl";
    };
}
xkb<sub>symbols</sub> "pc+us+ru:2+inet(evdev)+group(shift<sub>caps</sub><sub>switch</sub>)" {
  key &lt;AB07&gt; {
        type[Group1]= "ALPHABETIC",
        type[Group2]= "ALPHABETIC",
        type[Group3]= "PC<sub>CONTROL</sub><sub>LEVEL2</sub>",
        symbols[Group1]= [               m,               M ],
        symbols[Group2]= [ Cyrillic<sub>softsign</sub>, Cyrillic<sub>SOFTSIGN</sub> ],
        symbols[Group3]= [ Return, Return ]
    };
}
</p>
</div>
</div>
<div id="outline-container-org600988e" class="outline-4">
<h4 id="org600988e"><span class="section-number-4">8.2.4.</span> Ctrl+Shift problem</h4>
<div class="outline-text-4" id="text-8-2-4">
<p>
<a href="https://unix.stackexchange.com/questions/118228/how-to-bind-super-key-to-ctrlshift-using-xmodmap">https://unix.stackexchange.com/questions/118228/how-to-bind-super-key-to-ctrlshift-using-xmodmap</a>
</p>
<ul class="org-ul">
<li>xkbcomp $DISPLAY ~/.Xkeymap</li>
<li>add to xkb<sub>symbols</sub>, your key = CAPS or LWIN</li>
</ul>
<div class="org-src-container">
<pre class="src src-?">  key &lt;your key&gt; {
    repeat= no,
    type= "ONE_LEVEL",
    symbols[Group1]= [ Hyper_L ],
    actions[group1]=[ SetMods(modifiers=Shift+Control) ]
  };
</pre>
</div>
<ul class="org-ul">
<li>add to ~/.xinitrc</li>
</ul>
<pre class="example">
test -f ~/.Xkeymap &amp;&amp; xkbcomp ~/.Xkeymap $DISPLAY
</pre>
</div>
</div>

<div id="outline-container-org963d993" class="outline-4">
<h4 id="org963d993"><span class="section-number-4">8.2.5.</span> disable capslock</h4>
<div class="outline-text-4" id="text-8-2-5">
<ul class="org-ul">
<li>setxkbmap -option caps:none</li>
</ul>
</div>
</div>
<div id="outline-container-orgdc689e5" class="outline-4">
<h4 id="orgdc689e5"><span class="section-number-4">8.2.6.</span> Right Alt as Ctrl</h4>
<div class="outline-text-4" id="text-8-2-6">
<p>
setxkbmap -option ctrl:ralt<sub>rctrl</sub>
</p>
</div>
</div>
</div>
<div id="outline-container-org9df93e5" class="outline-3">
<h3 id="org9df93e5"><span class="section-number-3">8.3.</span> keyboard theory</h3>
<div class="outline-text-3" id="text-8-3">
<ul class="org-ul">
<li>history <a href="http://xahlee.info/kbd/keyboard_hardware_and_key_choices.html">http://xahlee.info/kbd/keyboard_hardware_and_key_choices.html</a></li>
</ul>


<ul class="org-ul">
<li>\*nix [LF] whereas on a windows operating system you have [CRLF]</li>
</ul>
</div>
</div>
<div id="outline-container-orgc4cad80" class="outline-3">
<h3 id="orgc4cad80"><span class="section-number-3">8.4.</span> Tab to right Alt</h3>
<div class="outline-text-3" id="text-8-4">
<ul class="org-ul">
<li>get keys: xmodmap -pke</li>
<li>map to right alt: xmodmap -e "keycode 108 = Tab ISO<sub>Left</sub><sub>Tab</sub> Tab ISO<sub>Left</sub><sub>Tab</sub>"</li>
<li>reselt setxkbmap -option</li>
</ul>
</div>
</div>
<div id="outline-container-org59489d5" class="outline-3">
<h3 id="org59489d5"><span class="section-number-3">8.5.</span> GTK Emacs</h3>
<div class="outline-text-3" id="text-8-5">
<p>
<a href="https://wiki.archlinux.org/title/GTK">https://wiki.archlinux.org/title/GTK</a>
</p>


<p>
xfconf-query -c xsettings -p /Gtk/KeyThemeName -s Emacs
</p>
</div>
</div>

<div id="outline-container-org411e599" class="outline-3">
<h3 id="org411e599"><span class="section-number-3">8.6.</span> <span class="todo TODO">TODO</span> unicode characters and emoji</h3>
</div>

<div id="outline-container-orgea211b7" class="outline-3">
<h3 id="orgea211b7"><span class="section-number-3">8.7.</span> rebind</h3>
<div class="outline-text-3" id="text-8-7">
<ul class="org-ul">
<li><a href="https://man.openbsd.org/xkeyboard-config.7#Position_of_Compose_key">https://man.openbsd.org/xkeyboard-config.7#Position_of_Compose_key</a></li>
</ul>


<ul class="org-ul">
<li><a href="https://github.com/tbocek/dvorak">https://github.com/tbocek/dvorak</a></li>

<li><a href="https://github.com/zw963/linux_key_rebinding">https://github.com/zw963/linux_key_rebinding</a></li>
<li><a href="https://github.com/kui/rbindkeys">https://github.com/kui/rbindkeys</a></li>
<li>xfumble, keyfake and rbindkeys</li>

<li><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/diyism-myboard/myboard.py">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/diyism-myboard/myboard.py</a></li>
</ul>
</div>
<div id="outline-container-orgbf33723" class="outline-4">
<h4 id="orgbf33723"><span class="section-number-4">8.7.1.</span> C++ <a href="http://yashiromann.sakura.ne.jp/x11keymacs/index-en.html">http://yashiromann.sakura.ne.jp/x11keymacs/index-en.html</a></h4>
<div class="outline-text-4" id="text-8-7-1">
<p>
In order to run x11keymacs, you need the following previleges:
</p>
<ul class="org-ul">
<li>Read/Write privileges on /dev/uinput, /dev/input/event*
<ul class="org-ul">
<li>In case /dev/uinput does not exist, you first need to "modprobe uinput" to create this device file</li>
</ul></li>
<li>X-Window server access privileges
<ul class="org-ul">
<li>You need to give X server access privileges to the user that runs this tool, for example using
xhost or xauth. It is also needed to provide enviroment variable "DISPLAY" correctly.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org1384161" class="outline-4">
<h4 id="org1384161"><span class="section-number-4">8.7.2.</span> C <a href="https://github.com/kawao/x-set-keys">https://github.com/kawao/x-set-keys</a></h4>
<div class="outline-text-4" id="text-8-7-2">
<p>
<a href="https://stackoverflow.com/questions/13821332/why-is-it-better-to-use-glib-data-types-e-g-gint-instead-of-int">https://stackoverflow.com/questions/13821332/why-is-it-better-to-use-glib-data-types-e-g-gint-instead-of-int</a>
</p>

<p>
gint - Glib data types - gint and gchar are not defined to be a certain size and so there is no
reason to use them.
</p>

<p>
import own
</p>
<ul class="org-ul">
<li>common</li>
<li>x-set-keys</li>
<li><p>
config
</p>

<p>
search keyboard device from /dev/input/event* and use the first found.
</p></li>
</ul>
</div>
</div>
<div id="outline-container-org3d44394" class="outline-4">
<h4 id="org3d44394"><span class="section-number-4">8.7.3.</span> XCompose - cannot bind to Return</h4>
<div class="outline-text-4" id="text-8-7-3">
<ul class="org-ul">
<li><a href="https://man.archlinux.org/man/Compose.5">https://man.archlinux.org/man/Compose.5</a></li>
<li><a href="https://wiki.debian.org/XCompose">https://wiki.debian.org/XCompose</a></li>
<li><a href="https://github.com/ibus/ibus/issues/1876">https://github.com/ibus/ibus/issues/1876</a></li>
</ul>
</div>
</div>

<div id="outline-container-org80f85cc" class="outline-4">
<h4 id="org80f85cc"><span class="section-number-4">8.7.4.</span> xkb ISO<sub>Level3</sub><sub>Shift</sub> - require unused key</h4>
</div>
</div>
<div id="outline-container-org7f4c0b9" class="outline-3">
<h3 id="org7f4c0b9"><span class="section-number-3">8.8.</span> pynput - cannot suppress pressed</h3>
<div class="outline-text-3" id="text-8-8">
<p>
pip3 install pynput &#x2013;user
</p>

<ol class="org-ol">
<li>pynput.keyboard._<sub>init</sub>__</li>
<li>pynput.keyboard.<sub>xorg</sub> (listener)
<ul class="org-ul">
<li>extension of:
<ul class="org-ul">
<li>pynput.<sub>util.xorg</sub> (ListenerMixin)</li>
<li>keyboard.<sub>base</sub> (Listener)
<ul class="org-ul">
<li>pynput.<sub>util</sub>._<sub>init</sub>__ (AbstractListener (threading.Thread))</li>
</ul></li>
</ul></li>
</ul></li>
<li>Xlib</li>
</ol>

<p>
.<sub>util</sub>._<sub>init</sub>_<sub>.AbstractListener</sub>
</p>
<ul class="org-ul">
<li>._<sub>enter</sub>__:
<ul class="org-ul">
<li>start()</li>
<li>wait()</li>
</ul></li>
<li>run():
<ul class="org-ul">
<li>_run()</li>
<li>_thread = threading.current<sub>thread</sub>()</li>
</ul></li>
</ul>
<p>
<span class="underline">xorg.Listener._<sub>init</sub>_</span>
</p>
<ul class="org-ul">
<li>join()
<ul class="org-ul">
<li></li>
</ul></li>
</ul>


<p>
Usages:
</p>
<ol class="org-ol">
<li><ul class="org-ul">
<li>_<sub>init</sub>__</li>
<li>_<sub>enter</sub>__
<ol class="org-ol">
<li>start()
<ul class="org-ul">
<li>run()
<ul class="org-ul">
<li>_run()</li>
</ul></li>
</ul></li>
<li>wait</li>
</ol></li>
<li>.join() -</li>
</ul></li>
<li>non-blocking
<ul class="org-ul">
<li>_<sub>init</sub>__</li>
<li>start()
<ul class="org-ul">
<li>run()
<ul class="org-ul">
<li>_run()</li>
</ul></li>
</ul></li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-orge30b69d" class="outline-3">
<h3 id="orge30b69d"><span class="section-number-3">8.9.</span> kaymap with dumpkeys/loadkeys</h3>
<div class="outline-text-3" id="text-8-9">
<ol class="org-ol">
<li>mkdir -p <i>usr/local/share/kbd/keymaps</i></li>
<li>dumpkeys -f &gt; /usr/local/share/kbd/keymaps/personal.map</li>
</ol>


<p>
showkey &#x2013;scancodes
dumpkeys -l
<a href="https://wiki.archlinux.org/title/Linux_console/Keyboard_configuration">https://wiki.archlinux.org/title/Linux_console/Keyboard_configuration</a>
</p>

<p>
default kernel keymap: /usr/src/linux/drivers/char/defkeymap.map
</p>

<p>
man keymaps
</p>
</div>
<div id="outline-container-org106d7d9" class="outline-4">
<h4 id="org106d7d9"><span class="section-number-4">8.9.1.</span> pressing Caps Lock key once or more sets the keyboard in CapsLock state and pressing either of the Shift keys releases it.</h4>
<div class="outline-text-4" id="text-8-9-1">
<p>
keycode  42 = Uncaps<sub>Shift</sub>
keycode  54 = Uncaps<sub>Shift</sub>
keycode  58 = Caps<sub>On</sub>
</p>
</div>
</div>
</div>

<div id="outline-container-org33aded3" class="outline-3">
<h3 id="org33aded3"><span class="section-number-3">8.10.</span> /usr/share/X11/xkb/symbols/pc</h3>
<div class="outline-text-3" id="text-8-10">
<ol class="org-ol">
<li>sudo cp /usr/share/X11/xkb/symbols/pc /usr/share/X11/xkb/symbols/pc.bak</li>
<li>rm -rf /var/lib/xkb/*</li>
</ol>

<p>
<a href="https://ictsolved.github.io/remap-key-in-linux/">https://ictsolved.github.io/remap-key-in-linux/</a>
</p>
</div>
</div>
<div id="outline-container-org341a82c" class="outline-3">
<h3 id="org341a82c"><span class="section-number-3">8.11.</span> mouse emulation</h3>
<div class="outline-text-3" id="text-8-11">
<ul class="org-ul">
<li>xfce4-settings-accessibility # GUI</li>
<li>xfconf-query -c accessibility -p /MouseKeys -s true # switch on</li>
<li>xfconf-query -c accessibility -p /MouseKeys -s false # switch off</li>
</ul>

<p>
conf:
</p>
<ul class="org-ul">
<li>delay: 50</li>
<li>repeat interval: 18</li>
<li>acceleration time: 230</li>
<li>max speed: 1910</li>
<li>acc profile: 0</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org00c504c" class="outline-2">
<h2 id="org00c504c"><span class="section-number-2">9.</span> monitor</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-org4368ea1" class="outline-3">
<h3 id="org4368ea1"><span class="section-number-3">9.1.</span> brightness</h3>
<div class="outline-text-3" id="text-9-1">
<p>
monitor
</p>
<ul class="org-ul">
<li>x11-apps/xrandr</li>
<li>xrandr &#x2013;output DVI-I-1 &#x2013;brightness 0.4</li>
</ul>

<p>
backlight for notebook
</p>
<ul class="org-ul">
<li><i>sys/class/backlight</i>????/brightness</li>
</ul>
</div>
</div>
<div id="outline-container-org793263b" class="outline-3">
<h3 id="org793263b"><span class="section-number-3">9.2.</span> colours</h3>
<div class="outline-text-3" id="text-9-2">
<ul class="org-ul">
<li>xrandr - get outputs</li>
<li>xrandr &#x2013;output LVDS1 &#x2013;gamma 1.0:1.0:1.0 # red,green,blue</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgdab096d" class="outline-2">
<h2 id="orgdab096d"><span class="section-number-2">10.</span> software debuging</h2>
<div class="outline-text-2" id="text-10">
<ul class="org-ul">
<li>ldd /bin/app - Shared Library Dependencies, unsafe may execute app
<ul class="org-ul">
<li>objdump -p /path/to/program | grep NEEDED - safer way
<ul class="org-ul">
<li>readelf -d /bin/ls | grep 'NEEDED' -</li>
</ul></li>
<li>pldd &lt;PID&gt; - of runned process</li>
<li>pmap &lt;PID&gt; - memory map of a process, can also show shared library dependencies of a running process.</li>
<li>sudo awk '/\.so/{print $6}' /proc/&lt;pid of process&gt;/maps | sort -u - runned process</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org95fff58" class="outline-4">
<h4 id="org95fff58"><span class="section-number-4">10.0.1.</span> network requests by Process</h4>
<div class="outline-text-4" id="text-10-0-1">
<p>
strace -f -e trace=network -s 10000 PROCESS ARGUMENTS
</p>

<p>
To monitor an existing process with a known PID:
</p>

<p>
strace -p $PID -f -e trace=network -s 10000
</p>
<ul class="org-ul">
<li>-f is for "follow new processes"</li>
<li>-e defines a filter</li>
<li>-s sets the limit of strings to more then 32</li>
<li>-p takes the process id to attach to</li>
</ul>

<pre class="example">
port=`lsof -i | grep $process | cut -d' ' -f18 | cut -d: -f2 | cut -d'-' -f1`
tcpdump -w ${port}.pcap port $port &amp;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgffe5b12" class="outline-2">
<h2 id="orgffe5b12"><span class="section-number-2">11.</span> processes communcation</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org7eac8ad" class="outline-3">
<h3 id="org7eac8ad"><span class="section-number-3">11.1.</span> Inter-process communication</h3>
<div class="outline-text-3" id="text-11-1">
<ul class="org-ul">
<li>file</li>
<li>signals <a href="https://en.wikipedia.org/wiki/Signal_(IPC)">https://en.wikipedia.org/wiki/Signal_(IPC)</a></li>
<li>POSIX mmap, message queues, semaphores,[4] and shared memory</li>
<li>Linux Transparent Inter Process Communication (TIPC) - protocol for  cluster-wide operation.</li>
</ul>
</div>
<div id="outline-container-org888df8a" class="outline-4">
<h4 id="org888df8a"><span class="section-number-4">11.1.1.</span> Unix Domain Sockets</h4>
<div class="outline-text-4" id="text-11-1-1">
<p>
all communication occurs within the kernel. Processes reference a domain socket as an inode, and multiple
 processes can communicate with one socket
</p>
</div>
</div>
<div id="outline-container-org4422145" class="outline-4">
<h4 id="org4422145"><span class="section-number-4">11.1.2.</span> shared memory and message queues:</h4>
<div class="outline-text-4" id="text-11-1-2">
<pre class="example">
ipcs -ap --human
</pre>

<ul class="org-ul">
<li>-a - all - &#x2013;shmems (shared memory segments), &#x2013;queues, &#x2013;semaphores</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org964cafc"></a>links<br />
<div class="outline-text-5" id="text-11-1-2-1">
<p>
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_10">https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_10</a>
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org44dcabf" class="outline-4">
<h4 id="org44dcabf"><span class="section-number-4">11.1.3.</span> pipelines</h4>
<div class="outline-text-4" id="text-11-1-3">
<dl class="org-dl">
<dt>anonymous pipes</dt><dd>uni-directional channel disappears when the processes are completed:
<ul class="org-ul">
<li>command1 | command2 | command3</li>
</ul></dd>
<dt>named pipes</dt><dd>named by making it a file, remains after the processes are completed. messages passed to or
from a pipe.
<ul class="org-ul">
<li>mkfifo -m 0666 /tmp/namedPipe</li>
<li>gzip -d &lt; out.gz &gt; /tmp/namedPipe</li>
</ul></dd>
</dl>
</div>
</div>
<div id="outline-container-org5dae7bf" class="outline-4">
<h4 id="org5dae7bf"><span class="section-number-4">11.1.4.</span> Message Queues: Message queues provide a way for processes to exchange messages in a way that is guaranteed to be delivered, even if the sending or receiving process is not currently running.</h4>
</div>
</div>
<div id="outline-container-org172f6df" class="outline-3">
<h3 id="org172f6df"><span class="section-number-3">11.2.</span> D-Bus</h3>
<div class="outline-text-3" id="text-11-2">
<p>
IPC daemon
</p>
<ul class="org-ul">
<li>system bus</li>
<li>session bus - session separate even for same user.</li>
</ul>

<p>
bus name: org.freedesktop.NetworkManager
</p>

<p>
unique connection name - When a process sets up a connection to a bus, the bus assigns to the connection a
 special bus name called
</p>
<ul class="org-ul">
<li>:1.1553 (the characters after the colon have no particular meaning.</li>
</ul>

<p>
standard interfaces:
</p>
<ul class="org-ul">
<li>org.freedesktop.DBus.Peer: provides a way to test if a D-Bus connection is aliv</li>
<li>org.freedesktop.DBus.Introspectable: provides an introspection mechanism by which a client process can, at
run-time, get a description (in XML format) of the interfaces, methods and signals that the object
implements.</li>
<li>org.freedesktop.DBus.Properties: allows a D-Bus object to expose the underlying native object properties or
attributes, or simulate them if it does not exist</li>
<li>org.freedesktop.DBus.ObjectManager: when a D-Bus service arranges its objects hierarchically, this interface
provides a way to query an object about all sub-objects under its path, as well as their interfaces and
properties, using a single method call</li>
</ul>
</div>
</div>
<div id="outline-container-org4a1ee53" class="outline-3">
<h3 id="org4a1ee53"><span class="section-number-3">11.3.</span> links</h3>
<div class="outline-text-3" id="text-11-3">
<p>
<a href="https://en.wikipedia.org/wiki/Inter-process_communication">https://en.wikipedia.org/wiki/Inter-process_communication</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org0cffb7b" class="outline-2">
<h2 id="org0cffb7b"><span class="section-number-2">12.</span> install tarball - (from source, install sources)</h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>/opt if it is a binary install</li>
<li>/usr/local if it's a from source install.</li>
</ul>
<p>
steps
</p>
<ul class="org-ul">
<li>tar xzf -C /usr/local/src program.tar.gz # source code
<ul class="org-ul">
<li>tar xjf program.tar.bz2 -C /opt # binary</li>
<li>&#x2013;directory == -C</li>
<li>z - unzip</li>
</ul></li>
<li>tar xzf &lt;file&gt;.tar.[bz2|gz] &#x2013;directory=/opt</li>
<li>cd <i>opt</i></li>
<li>sudo chown -R $USER /opt/program</li>
<li>gedit ~/.local/share/applications/waterfox.desktop</li>
<li>./configure or ./configure &#x2013;prefix=/usr/local</li>
</ul>

<p>
make
</p>
<ul class="org-ul">
<li>make</li>
<li>make install #It’ll probably be stored under /usr/local</li>
<li>export PATH=$PATH:/opt/local/bin:/usr/local/bin</li>
</ul>

<p>
cmake
</p>
<ul class="org-ul">
<li>mkdir build</li>
<li>cd build</li>
<li>cmake .. -DCMAKE<sub>BUILD</sub><sub>TYPE</sub>=Release -DCMAKE<sub>INSTALL</sub><sub>PREFIX</sub>=/usr/local/bin/folder</li>
<li>cmake &#x2013;build .</li>
</ul>

<p>
unisntall:
</p>
<ul class="org-ul">
<li>make uninstall</li>
<li>cmake: xargs rm &lt; install<sub>manifest.txt</sub> # to remove</li>
</ul>
</div>
</div>

<div id="outline-container-org2b91337" class="outline-2">
<h2 id="org2b91337"><span class="section-number-2">13.</span> GPG - GNU Privacy Guard</h2>
<div class="outline-text-2" id="text-13">
<ul class="org-ul">
<li><a href="https://www.gnupg.org/gph/en/manual.html">https://www.gnupg.org/gph/en/manual.html</a></li>
<li><a href="https://riseup.net/en/security/message-security/openpgp/gpg-best-practices">https://riseup.net/en/security/message-security/openpgp/gpg-best-practices</a></li>
</ul>
</div>
<div id="outline-container-org861f506" class="outline-3">
<h3 id="org861f506"><span class="section-number-3">13.1.</span> install</h3>
<div class="outline-text-3" id="text-13-1">
<p>
chmod 0700 ~/.gnupg/
</p>
</div>
</div>
<div id="outline-container-orgb972dc1" class="outline-3">
<h3 id="orgb972dc1"><span class="section-number-3">13.2.</span> about</h3>
<div class="outline-text-3" id="text-13-2">
<p>
GNU Privacy Guard (GnuPG system, GnuPG or GPG)
</p>

<p>
compliant with
</p>
<ul class="org-ul">
<li>RFC 4880</li>
<li>the IETF standards-track specification of OpenPGP.</li>
</ul>

<p>
interoperable with GnuPG
</p>
</div>
</div>
<div id="outline-container-org0020eee" class="outline-3">
<h3 id="org0020eee"><span class="section-number-3">13.3.</span> theory</h3>
<div class="outline-text-3" id="text-13-3">
</div>
<div id="outline-container-org5d100ec" class="outline-4">
<h4 id="org5d100ec"><span class="section-number-4">13.3.1.</span> Криптосистема с открытым ключом</h4>
<div class="outline-text-4" id="text-13-3-1">
<p>
разновидность асимметричного шифрования
</p>

<ul class="org-ul">
<li><b>открытый ключ</b> - передаётся по открытому каналу и используется для проверки ЭП и для шифрования сообщения.</li>
<li><b>закрытый ключ</b> - Для генерации ЭП и для расшифровки сообщения</li>
</ul>

<p>
Виды асимметричных шифров:
</p>
<ul class="org-ul">
<li><b>RSA (Rivest-Shamir-Adleman)</b> - best suited for verification and encryption.</li>
<li>DSA (Digital Signature Algorithm) - best suited for signing in and decryption.</li>
<li>Elgamal (Шифросистема Эль-Гамаля) - semantically secure</li>
<li>Diffie-Hellman (Обмен ключами Диффи — Хелмана)</li>
<li>ECDSA (Elliptic Curve Digital Signature Algorithm) — алгоритм с открытым ключом для создания цифровой подписи.</li>
<li>ГОСТ Р 34.10-2012</li>
<li>Rabin</li>
<li>Luc</li>
<li>McEliece</li>
<li>Криптосистема Уильямса</li>
</ul>

<p>
In public key cryptography, a key is actually a pair: a public key, and a private key. You use the private key
to digitally sign files, and others use the public key to verify the signature. Or, others use the public key
to encrypt something, and you use the private key to decrypt it.
</p>
</div>
</div>
<div id="outline-container-org877d755" class="outline-4">
<h4 id="org877d755"><span class="section-number-4">13.3.2.</span> Цифровая подпись Digital signature</h4>
<div class="outline-text-4" id="text-13-3-2">
<ul class="org-ul">
<li>authentication - who sent</li>
<li>integrity - was not altered</li>
</ul>

<p>
steps:
</p>
<ul class="org-ul">
<li>hash of message</li>
<li>шифрование с закрытым ключом =&gt; подпись</li>
<li>сектификат(какой ключ) + подпись + Данные</li>
</ul>

<p>
расшифрование с открытым ключом и сверка хешей
</p>

<p>
асимметричные схемы
FDH (Full Domain Hash), вероятностная схема RSA-PSS (Probabilistic Signature Scheme), схемы стандарта PKCS#1 и другие схемы, основанные на алгоритме RSA
</p>
</div>
</div>

<div id="outline-container-org2a6b262" class="outline-4">
<h4 id="org2a6b262"><span class="section-number-4">13.3.3.</span> keyservers</h4>
<div class="outline-text-4" id="text-13-3-3">
<p>
Идеально - делиться ключами из рук в руки
</p>

<p>
просто хранят ключи доступные по fingerprint
</p>

<p>
The major keyservers synchronize themselves, so it is fine to pick a keyserver close to you on the
Internet and then use it regularly for sending and receiving keys.
</p>

<p>
hkp:// or x-hkp:// - 11371 not port 80.
</p>

<p>
hkps:// (HKP over TLS)
</p>

<ul class="org-ul">
<li>pool.sks-keyservers.net	SKS Keyserver Pool: federated, no verification, keys cannot be deleted.</li>
<li><a href="https://keys.mailvelope.com/">https://keys.mailvelope.com/</a> Mailvelope Keyserver: central, verification of email IDs, keys can be deleted.</li>
<li><a href="https://keys.openpgp.org/">https://keys.openpgp.org/</a>  central, verification of email IDs, keys can be deleted, no third-party
signatures (i.e. no Web of Trust support).</li>
</ul>

<p>
Чтобы ключи не залеживались на почту приходит запрос об актуальности ключа
</p>
</div>
</div>
<div id="outline-container-orgaf163a1" class="outline-4">
<h4 id="orgaf163a1"><span class="section-number-4">13.3.4.</span> <span class="todo TODO">TODO</span> signing keys</h4>
</div>
<div id="outline-container-orge4c85ad" class="outline-4">
<h4 id="orge4c85ad"><span class="section-number-4">13.3.5.</span> subkeys</h4>
<div class="outline-text-4" id="text-13-3-5">
<p>
When generating an OpenPGP key with GnuPG, per default a primary key (pair), also called master-key, and a
sub-key (pair) are created. The primary key, also called master-key, contains one or more user-IDs (name,
email-address) and is used for for signing. The sub-key, signed by the primary key and thus confirmed to
belong to its user-IDs, is used for encryption/decryption.
</p>

<p>
Why?
</p>
<ul class="org-ul">
<li>for security: The primary key pair is quite important</li>
<li>primary key pair - on your main computer</li>
<li>You publish the subkeys on the normal keyservers, and everyone else will use them instead of the primary
keys for encrypting messages or verifying your message signatures</li>
<li>You will need to use the primary keys only in exceptional circumstances, namely when you want to modify your
own or someone else's key.</li>
</ul>

<p>
<a href="https://wiki.debian.org/Subkeys">https://wiki.debian.org/Subkeys</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org564f38c" class="outline-3">
<h3 id="org564f38c"><span class="section-number-3">13.4.</span> therms</h3>
<div class="outline-text-3" id="text-13-4">
<p>
uid - USER-ID - string after: uid [ultimate]
</p>

<p>
<b>kaypares</b>
</p>
<ul class="org-ul">
<li>primary keypair and then zero or more additional subordinate keypairs</li>
<li>they are bundled and can often be considered simply as one keypair.</li>
</ul>

<p>
<b>revocation certificate</b> - published to notify others that the public key should no longer be used
</p>
<ul class="org-ul">
<li>created right after keypare creation</li>
<li>revoked public key can still be used to verify signatures made by you in the past</li>
</ul>

<p>
<b>key ring</b> - is a set of keys, public or private. (public keyring - public keys of others stored)
</p>

<p>
<b>fingerprint</b> or frp - SHA-1 hash of key and additional data
</p>
<ul class="org-ul">
<li><b>key-id</b> or hash-key - portion of the SHA-1 fingerprint at the end of fingerprint. &#x2013;keyid-format=long/short</li>
<li>examples:
<ul class="org-ul">
<li>fingerprint: 0D69 E11F 12BD BA07 7B37  26AB 4E1F 799A A4FF 2279</li>
<li>long id:                                    4E1F 799A A4FF 2279</li>
<li>short id:                                             A4FF 2279</li>
</ul></li>
</ul>

<p>
two key pairs: (1, 3) and (2, 4):
</p>
<ol class="org-ol">
<li>pub &#x2013; public primary key (master-key) - used for for signing</li>
<li>sub &#x2013; public sub-key - signed by the primary key and thus confirmed to belong to its user-IDs -
used for encryption/decryption.</li>
<li>sec &#x2013; secret primary key</li>
<li>ssb &#x2013; secret sub-key</li>
</ol>
</div>
</div>

<div id="outline-container-orgf6230f0" class="outline-3">
<h3 id="orgf6230f0"><span class="section-number-3">13.5.</span> create key</h3>
</div>
<div id="outline-container-orgcd57335" class="outline-3">
<h3 id="orgcd57335"><span class="section-number-3">13.6.</span> list-keys</h3>
<div class="outline-text-3" id="text-13-6">
<ul class="org-ul">
<li>supported algorithms: gpg &#x2013;version</li>
<li>gpg &#x2013;list-keys: List all keys from the public keyrings, or just the keys given on the command line.</li>
<li>gpg &#x2013;list-secret-keys: List all keys from the secret keyrings or just the ones given on the command line</li>
<li>gpg &#x2013;list-public-keys</li>
<li>gpg &#x2013;list-sigs: Same as &#x2013;list-keys, but the signatures are listed too.</li>
<li>&#x2013;list-keys &#x2013;with-colons</li>
<li>&#x2013;keyid-format {none|short|0xshort|long|0xlong}</li>
<li></li>
</ul>

<p>
full key: gpg &#x2013;armor &#x2013;export email@kernel.org | less
</p>

<p>
pub   dsa1024/17072058 2004-07-20 [SC] [expires: 2022-01-01]
</p>
<ul class="org-ul">
<li>public primary key</li>
<li>SC primary and E subordinate keyparis ? algoritm and key size</li>
<li>key-id SHORT - last part of fingerprint.</li>
<li>created date</li>
<li>usage flags:
<ul class="org-ul">
<li>SC - signing and certification.</li>
<li>E - used for encryption.</li>
<li>0x01 	“C” 	Key Certification</li>
<li>0x02 	“S” 	Sign Data</li>
<li>0x04 	“E” 	Encrypt Communications</li>
<li>0x08 	“E” 	Encrypt Storage</li>
<li>0x10 	  	Split key</li>
<li>0x20 	“A” 	Authentication</li>
<li>0x80 	  	Held by more than one person</li>
</ul></li>
<li>expires</li>
</ul>


<p>
sections:
</p>
<ul class="org-ul">
<li>pub - public, followed by fingerprint</li>
<li>sec - secret, followed by fingerprint</li>
<li>uid -</li>
<li>ssb - Secret subkey</li>
<li>sub - public subkey - (used for encryption)</li>
</ul>

<p>
When generating an OpenPGP key with GnuPG, per default a primary key (pair), also called master-key, and a
sub-key (pair) are created.
</p>

<p>
<a href="https://davesteele.github.io/gpg/2014/09/20/anatomy-of-a-gpg-key/">https://davesteele.github.io/gpg/2014/09/20/anatomy-of-a-gpg-key/</a>
</p>
</div>
</div>
<div id="outline-container-orgdad0b23" class="outline-3">
<h3 id="orgdad0b23"><span class="section-number-3">13.7.</span> Correct way to replace a GPG key</h3>
<div class="outline-text-3" id="text-13-7">
<p>
The original idea was that people with keys would get together in person-to-person meet-ups called
<b>key signing parties</b> to sign each other's keys and build a <b>web of trust</b>.
</p>
</div>
</div>

<div id="outline-container-org4f26afe" class="outline-3">
<h3 id="org4f26afe"><span class="section-number-3">13.8.</span> USE CASES</h3>
<div class="outline-text-3" id="text-13-8">
<ul class="org-ul">
<li><a href="https://keys.openpgp.org/about/usage">https://keys.openpgp.org/about/usage</a></li>
<li><a href="https://www.howtogeek.com/427982/how-to-encrypt-and-decrypt-files-with-gpg-on-linux/">https://www.howtogeek.com/427982/how-to-encrypt-and-decrypt-files-with-gpg-on-linux/</a></li>
</ul>
</div>
<div id="outline-container-org6c3892c" class="outline-4">
<h4 id="org6c3892c"><span class="section-number-4">13.8.1.</span> create keys</h4>
<div class="outline-text-4" id="text-13-8-1">
<ul class="org-ul">
<li>gpg &#x2013;gen-key - too stupid</li>
<li>gpg &#x2013;expert &#x2013;full-generate-key
<ul class="org-ul">
<li>Curve 448 - is the best</li>
</ul></li>
<li>gpg &#x2013;gen-revoke &#x2013;armor &#x2013;output=revocation<sub>certificate.asc</sub> user-id
<ul class="org-ul">
<li>armor - ASCII output suitable for copy. default - binary format</li>
</ul></li>
</ul>


<p>
(9) ECC (sign and encrypt) <b>default</b>
</p>

<p>
(5) NIST P-521
</p>


<p>
P-521 =  secp521r1ansip521r1
</p>
<ul class="org-ul">
<li>Elliptic Curve Digital Signature Algorithm</li>
<li><p>
Hash Algorithm: SHA-512
</p>

<p>
Curve 448 - highly secure against both current and potential future threats, including those posed by quantum
 computing.
</p></li>
<li>This curve offers one of the highest levels of security among all ECC options listed.</li>
<li>It provides an equivalent security level to a 7680-bit RSA key, making it highly resistant to both classical
and quantum attacks.</li>
</ul>

<p>
Curve 25519: Equivalent to a 3072-bit RSA key in terms of security.
</p>

<p>
Export:
</p>
<ul class="org-ul">
<li>gpg &#x2013;output public.key &#x2013;armor &#x2013;export user-id/fingerprint - generage ASCII version of a user's public key
to file public.key (to exchange)</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgfe2fb66"></a>upload<br />
<div class="outline-text-5" id="text-13-8-1-1">
<ul class="org-ul">
<li><a href="https://keys.openpgp.org/upload/submit">https://keys.openpgp.org/upload/submit</a>
<ul class="org-ul">
<li>keyserver hkp://zkaan2xfbuxia2wpf7ofnkbz6r5zdbbvxbunvp5g2iebopbfc4iqmbad.onion</li>
</ul></li>
<li><a href="https://pgp.mit.edu/">https://pgp.mit.edu/</a></li>
<li><a href="https://keyserver.ubuntu.com/pks/add">https://keyserver.ubuntu.com/pks/add</a></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org7ae33e5" class="outline-4">
<h4 id="org7ae33e5"><span class="section-number-4">13.8.2.</span> delete keys</h4>
<div class="outline-text-4" id="text-13-8-2">
<p>
gpg &#x2013;delete-key fingerprint
</p>
</div>
</div>
<div id="outline-container-org7297f8a" class="outline-4">
<h4 id="org7297f8a"><span class="section-number-4">13.8.3.</span> keyserver get key</h4>
<div class="outline-text-4" id="text-13-8-3">
<p>
Steps:
</p>
<ol class="org-ol">
<li>gpg &#x2013;keyserver keyserver &#x2013;search-keys string<sub>to</sub><sub>match</sub>
<ul class="org-ul">
<li>string<sub>to</sub><sub>match</sub> - by the owner’s name or email address</li>
<li>gpg &#x2013;keyserver hkps://keys.openpgp.org</li>
<li>gpg &#x2013;keyserver hkps://keyserver.ubuntu.com</li>
</ul></li>
<li></li>
</ol>

<p>
Чтобы не указывать keyserver:
</p>
<ul class="org-ul">
<li>~/.gnupg/gpg.conf: keyserver hkps://keys.openpgp.org</li>
</ul>

<p>
Правильыне Шаги:
</p>
<ol class="org-ol">
<li>gpg &#x2013;keyserver hkps://keys.openpgp.org &#x2013;recv-key '&lt;fingerprint&gt;'</li>
<li>You should verify with the individual owner the full key fingerprint of their key.</li>
<li>check key by fingerpint:
<ul class="org-ul">
<li>gpg &#x2013;fingerprint '&lt;fingerprint&gt;'</li>
</ul></li>
</ol>

<p>
You must periodically refresh keys. You might do this every few months or when you receive a key
from a new contact.
</p>
<ul class="org-ul">
<li>gpg &#x2013;keyserver hkps://keys.openpgp.org &#x2013;refresh-keys</li>
</ul>

<p>
To locate the key of a user, by email address:
</p>
<ul class="org-ul">
<li>gpg &#x2013;auto-key-locate hkps://keys.openpgp.org &#x2013;locate-keys releng@gentoo.org</li>
</ul>

<p>
To refresh all your keys (e.g. new revocation certificates and subkeys):
</p>
<ul class="org-ul">
<li>gpg &#x2013;refresh-keys</li>

<li>gpg &#x2013;keyserver pool.sks-keyservers.net &#x2013;send-keys key-id - register your key with a
public PGP key server, so that others can retrieve your key without having to contact you directly</li>
<li>gpg &#x2013;keyserver pool.sks-keyservers.net &#x2013;search-keys key-id</li>
<li>gpg &#x2013;keyserver pool.sks-keyservers.net &#x2013;recv-keys 0xBB572E0E2D182910
<ul class="org-ul">
<li>ТЫ должен проверить fingerprint primary key из другого источника и потом выполнить trusted</li>
</ul></li>
</ul>
</div>
</div>


<div id="outline-container-orgd6868d7" class="outline-4">
<h4 id="orgd6868d7"><span class="section-number-4">13.8.4.</span> upload your key</h4>
<div class="outline-text-4" id="text-13-8-4">
<p>
gpg &#x2013;export your<sub>address</sub>@example.net | curl -T - <a href="https://keys.openpgp.org">https://keys.openpgp.org</a>
or
gpg &#x2013;export your<sub>address</sub>@example.net &gt; my<sub>key.pub</sub>
</p>
</div>
</div>
<div id="outline-container-org0ae5917" class="outline-4">
<h4 id="org0ae5917"><span class="section-number-4">13.8.5.</span> trust level for key</h4>
<div class="outline-text-4" id="text-13-8-5">
<p>
gpg &#x2013;edit-key blake
</p>
<ul class="org-ul">
<li>&gt; trust</li>
<li>&gt; 3</li>
<li>&gt; quit</li>
</ul>
</div>
</div>
<div id="outline-container-orga07bc50" class="outline-4">
<h4 id="orga07bc50"><span class="section-number-4">13.8.6.</span> import key</h4>
<div class="outline-text-4" id="text-13-8-6">
<ul class="org-ul">
<li>gpg &#x2013;import ~/mygpgkey<sub>pub.gpg</sub></li>
<li>or: gpg &#x2013;allow-secret-key-import &#x2013;import ~/mygpgkey<sub>sec.gpg</sub></li>
<li>check key manually!:
<ul class="org-ul">
<li>gpg &#x2013;list-keys</li>
<li>gpg &#x2013;armor &#x2013;export user-id/fingerpr/email</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org3309292" class="outline-4">
<h4 id="org3309292"><span class="section-number-4">13.8.7.</span> verify .sign</h4>
<div class="outline-text-4" id="text-13-8-7">
<p>
gpg2 &#x2013;locate-keys torvalds@kernel.org gregkh@kernel.org
</p>
<ul class="org-ul">
<li>gpg &#x2013;verify [signature-file] [file]</li>
<li>gpg &#x2013;verify install-amd64-minimal-20201001T120249Z.iso.DIGESTS.asc install-amd64-minimal-20201001T120249Z.iso.DIGESTS</li>
</ul>
<p>
gpg: not a detached signature
</p>
<ul class="org-ul">
<li>To make the "WARNING" message go away you can indicate that you choose to trust that key using TOFU:
<ul class="org-ul">
<li>gpg2 &#x2013;tofu-policy good 38DBBDC86092693E</li>
<li>gpg2 &#x2013;trust-model tofu &#x2013;verify linux-4.6.6.tar.sign # &#x2013;trust-model tofu required for first time only</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgbeafe27" class="outline-4">
<h4 id="orgbeafe27"><span class="section-number-4">13.8.8.</span> export public for share</h4>
<div class="outline-text-4" id="text-13-8-8">
<p>
Echo your public key to stdout.
</p>
<ul class="org-ul">
<li>gpg &#x2013;export &#x2013;armor nick@example.com</li>
</ul>

<p>
Write your public key to a file.
</p>
<ul class="org-ul">
<li>gpp &#x2013;export &#x2013;armor &#x2013;output nickexample.gpg.pub nick@example.com</li>
</ul>
</div>
</div>
<div id="outline-container-orgd56f672" class="outline-4">
<h4 id="orgd56f672"><span class="section-number-4">13.8.9.</span> Backup and restore your GPG key pair</h4>
<div class="outline-text-4" id="text-13-8-9">
<p>
backup just your private key, which includes your public key too:
</p>
<ul class="org-ul">
<li>gpg &#x2013;export-secret-keys &#x2013;armor &#x2013;output nickexample.gpg.backup.asc nick@example.com</li>
</ul>

<p>
backup the GPG trust database
</p>
<ul class="org-ul">
<li>gpg &#x2013;export-ownertrust &gt; /path/to/trustdb-backup.txt</li>
</ul>

<p>
<b>restore</b>
</p>
<ol class="org-ol">
<li>gpg -import nickexample.gpg.backup.asc</li>
<li>gpg &#x2013;edit-key name # Replace "name" with yours #  the restored GPG key will have an “unknown” trust level</li>
<li>$ gpg&gt; trust # Choose "ultimate" or other trust level</li>
<li>$ gpg&gt; save # Save the changes</li>
</ol>

<p>
<b>restore your GPG trust database</b>
</p>
<ol class="org-ol">
<li>rm ~/.gnupg/trustdb.gpg</li>
<li>gpg &#x2013;import-ownertrust &lt; /path/to/trustdb-backup.txt</li>
</ol>
</div>
</div>

<div id="outline-container-org11a3e9f" class="outline-4">
<h4 id="org11a3e9f"><span class="section-number-4">13.8.10.</span> sign keys (after importing)</h4>
<div class="outline-text-4" id="text-13-8-10">
<p>
If you don’t do this, you can still use it to encrypt and decrypt messages from and to that
person. But gpg will ask you every time whether you wish to proceed because the key is unsigned.
</p>

<p>
gpg &#x2013;sign-key mary-geek@protonmail.com
</p>
</div>
</div>
<div id="outline-container-orgaace857" class="outline-4">
<h4 id="orgaace857"><span class="section-number-4">13.8.11.</span> encripting file</h4>
<div class="outline-text-4" id="text-13-8-11">
<p>
Without public key of recipient
</p>
<ul class="org-ul">
<li>gpg &#x2013;armored &#x2013;symmetric &#x2013;cipher-algo AES256 ./file</li>
<li>or zip -re out.txt.zip out.txt</li>
</ul>

<p>
With public key of recipient
</p>
<ol class="org-ol">
<li>wget <a href="https://keys.openpgp.org/vks/v1/by-fingerprint/xxxxxxxxxxxxxxxx">https://keys.openpgp.org/vks/v1/by-fingerprint/xxxxxxxxxxxxxxxx</a></li>
<li>gpg &#x2013; import xxxxxxxxxxxxxxxxxxxxxxxx</li>
<li><b>encrypt and sign</b>
<ul class="org-ul">
<li>gpg &#x2013;encrypt &#x2013;sign &#x2013;armor &#x2013;recipient mary-geek@protonmail.com FILE.txt</li>
</ul></li>
</ol>

<p>
Encrypt with own private key, decrypt with own public key: No meaning in that.
</p>

<p>
Encrypt with own public key, decrypt with own private key:
</p>
<pre class="example">
gpg --encrypt --encrypt-to your_email@example.com message.txt
gpg message.txt.gpg
</pre>
</div>
</div>
<div id="outline-container-org1322e6a" class="outline-4">
<h4 id="org1322e6a"><span class="section-number-4">13.8.12.</span> decrypt file</h4>
<div class="outline-text-4" id="text-13-8-12">
<p>
gpg &#x2013;decrypt coded.asc &gt; plain.txt
</p>
</div>
</div>
<div id="outline-container-orgb093e3c" class="outline-4">
<h4 id="orgb093e3c"><span class="section-number-4">13.8.13.</span> encrypt/decrypt with password (symmetric) (armored)</h4>
<div class="outline-text-4" id="text-13-8-13">
<ul class="org-ul">
<li>gpg &#x2013;armored -c &#x2013;cipher-algo AES256 ./file
<ul class="org-ul">
<li>-c = &#x2013;symmetric</li>
</ul></li>
<li>gpg &#x2013;decrypt ./file.gpg # binary</li>
<li>gpg &#x2013;decrypt ./file.asc # armored</li>
</ul>

<p>
Cypher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH, CAMELLIA128, CAMELLIA192, CAMELLIA256
</p>
</div>
</div>
<div id="outline-container-org3db52c2" class="outline-4">
<h4 id="org3db52c2"><span class="section-number-4">13.8.14.</span> generate password</h4>
<div class="outline-text-4" id="text-13-8-14">
<p>
gpg &#x2013;gen-random &#x2013;armor 1 14
</p>
</div>
</div>
<div id="outline-container-org9ea3f99" class="outline-4">
<h4 id="org9ea3f99"><span class="section-number-4">13.8.15.</span> password storage in file</h4>
<div class="outline-text-4" id="text-13-8-15">
<p>
gpg2 -q &#x2013;for-your-eyes-only &#x2013;no-tty -d ~/.mailpass.gpg
</p>
</div>
</div>
</div>
<div id="outline-container-orgb8896bd" class="outline-3">
<h3 id="orgb8896bd"><span class="section-number-3">13.9.</span> trust model (Web of trust or Trust on first use)</h3>
<div class="outline-text-3" id="text-13-9">
<p>
default - Web of trust -  responsibility for validating public keys is delegated to people you trust
</p>
<ul class="org-ul">
<li>Trust on First Use (TOFU)</li>
</ul>

<p>
trust levels
</p>
<ul class="org-ul">
<li><b>unknown</b> - Nothing is known about the owner's judgment in key signing. Keys on your public keyring
that you do not own initially have this trust level.</li>
<li><b>none</b> - The owner is known to improperly sign other keys.</li>
<li><b>marginal</b> - The owner understands the implications of key signing and properly validates keys
before signing them.</li>
<li><b>full</b> - The owner has an excellent understanding of key signing, and his signature on a key would
be as good as your own.</li>
<li><b>ultimately</b></li>
</ul>
</div>
</div>
<div id="outline-container-org512ddfe" class="outline-3">
<h3 id="org512ddfe"><span class="section-number-3">13.10.</span> GPG agent</h3>
<div class="outline-text-3" id="text-13-10">
<p>
cache passphrase entered and allow applications to use GPG concurrently
</p>
</div>
</div>

<div id="outline-container-org2e3fd33" class="outline-3">
<h3 id="org2e3fd33"><span class="section-number-3">13.11.</span> как шифрвоать</h3>
<div class="outline-text-3" id="text-13-11">
<p>
Добрый день.
</p>

<p>
Пришли мне зафированный файл FILE.txt:
</p>
<ol class="org-ol">
<li>wget <a href="https://keys.openpgp.org/vks/v1/by-fingerprint/074C37CF05B861D4C4CC3AC20C5A9B0DA76B2719">https://keys.openpgp.org/vks/v1/by-fingerprint/074C37CF05B861D4C4CC3AC20C5A9B0DA76B2719</a></li>
<li>gpg &#x2013;import 074C37CF05B861D4C4CC3AC20C5A9B0DA76B2719</li>
<li>gpg &#x2013;encrypt &#x2013;armor &#x2013;recipient chepelev<sub>vs</sub>@bel-rusnarbank.ru FILE.txt</li>
</ol>

<p>
Зашифрованный файл:
FILE.txt.asc
</p>

<ol class="org-ol">
<li>берет мой публичный ключ</li>
<li>добавляет его в GnuPG</li>
<li>шифрует им файл</li>
</ol>

<p>
gpg &#x2013;decrypt coded.asc &gt; plain.txt
</p>
</div>
</div>
<div id="outline-container-org952336f" class="outline-3">
<h3 id="org952336f"><span class="section-number-3">13.12.</span> <span class="todo TODO">TODO</span> Emacs EasyPG Assistant</h3>
<div class="outline-text-3" id="text-13-12">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/epa/index.html">https://www.gnu.org/software/emacs/manual/html_node/epa/index.html</a>
</p>
</div>
</div>
<div id="outline-container-orgeb064a0" class="outline-3">
<h3 id="orgeb064a0"><span class="section-number-3">13.13.</span> links</h3>
<div class="outline-text-3" id="text-13-13">
<p>
<a href="https://www.kernel.org/doc/html/latest/process/maintainer-pgp-guide.html">https://www.kernel.org/doc/html/latest/process/maintainer-pgp-guide.html</a>
</p>
</div>
<div id="outline-container-org97006a5" class="outline-4">
<h4 id="org97006a5"><span class="section-number-4">13.13.1.</span> extend validity of the main key</h4>
<div class="outline-text-4" id="text-13-13-1">
<ul class="org-ul">
<li>gpg &#x2013;edit-key 0x12345678</li>
<li>gpg&gt; expire</li>
<li>gpg&gt; save</li>
</ul>

<p>
You have to make a decision about extending validity of vs. replacing the subkey(s). Replacing them gives you limited forward security (limited to rather large time frames). If that is important to you then you should have (separate) subkeys for both encryption and signing (the default is one for encryption only).
</p>

<p>
<a href="https://unix.stackexchange.com/questions/177291/how-to-renew-an-expired-keypair-with-gpg">https://unix.stackexchange.com/questions/177291/how-to-renew-an-expired-keypair-with-gpg</a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org0d5c170" class="outline-2">
<h2 id="org0d5c170"><span class="section-number-2">14.</span> The X Window System (X11 or X)</h2>
<div class="outline-text-2" id="text-14">
<p>
X.Org Foundation leads the X project (MIT License)
</p>

<p>
Competitior:
</p>
<ul class="org-ul">
<li>Wayland - modern replacement for X display server</li>
<li>Mir</li>
</ul>

<p>
Xorg is an open source implementation of the X Window System.
</p>

<ul class="org-ul">
<li>Screen is a physical monitor and hardware
<ul class="org-ul">
<li>There can be multiple screens for each display or workstatio</li>
</ul></li>
<li>Display - A set of screens for a single user with one keyboard and one pointer (usually a mouse)</li>
<li>root window - partially or completely covered by child windows</li>
<li>pixmaps - off-screen storage of graphics objects</li>
<li>drawables - Windows and pixmaps together</li>
</ul>
</div>
<div id="outline-container-org9e7ca20" class="outline-3">
<h3 id="org9e7ca20"><span class="section-number-3">14.1.</span> terms</h3>
<div class="outline-text-3" id="text-14-1">
<dl class="org-dl">
<dt>window manager</dt><dd>on-screen windows and window decorations.</dd>
<dt>desktop environment</dt><dd>window manager + apps.</dd>
</dl>
</div>
</div>
<div id="outline-container-org5419412" class="outline-3">
<h3 id="org5419412"><span class="section-number-3">14.2.</span> lock screen</h3>
<div class="outline-text-3" id="text-14-2">
<p>
x11-misc/xautolock <a href="https://packages.gentoo.org/packages/x11-misc/xautolock">https://packages.gentoo.org/packages/x11-misc/xautolock</a>
</p>

<p>
xautolock -time 1 -locker 'xflock4'
</p>

<p>
/etc/sudoers.d/user:
</p>
<ul class="org-ul">
<li>u ALL=(ALL) NOPASSWD:/usr/bin/killall telegram-desktop,/usr/bin/vlock -n,/usr/local/bin/usblock.sh</li>
</ul>

<p>
/usr/local/bin/usblock.sh:
</p>
<ul class="org-ul">
<li>#!/bin/sh</li>
<li>echo 0 | tee /sys/bus/usb/devices/*/authorized</li>
</ul>


<p>
Alt+F1 -&gt; Settings -&gt; Session and startup -&gt; Application Autostart -&gt; add
</p>
<ul class="org-ul">
<li>xautolock -time 10 -locker 'sudo vlock -n ; sudo /usr/local/bin/usblock.sh'</li>
</ul>
</div>
</div>
<div id="outline-container-org3581309" class="outline-3">
<h3 id="org3581309"><span class="section-number-3">14.3.</span> unused terminals</h3>
<div class="outline-text-3" id="text-14-3">
<p>
count childrens of processes:
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #8ac6f2; font-weight: bold;">for</span> line<span style="color: #8ac6f2; font-weight: bold;"> in</span> $(<span style="color: #fa8072;">ps aux | grep ' bash' | grep Ss | awk '{print $2}'</span>) ; <span style="color: #8ac6f2; font-weight: bold;">do</span>
    <span style="color: #cae682;">child_count</span>=$(<span style="color: #fa8072;">ps --no-headers --ppid=$line | grep -v emacsclient | wc -l</span>)
    <span style="color: #e5786d;">echo</span> $<span style="color: #cae682;">line</span> $<span style="color: #cae682;">child_count</span>

    <span style="color: #8ac6f2; font-weight: bold;">if</span> [ $<span style="color: #cae682;">child_count</span> -eq 0 ] ; <span style="color: #8ac6f2; font-weight: bold;">then</span>
        <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">parent_pid=$(</span><span style="color: #fa8072;">ps -o ppid= -p $line</span><span style="color: #99968b; font-style: italic;">)</span>
        <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">ps -u -p $line</span>
        <span style="color: #e5786d;">kill</span> -9 $<span style="color: #cae682;">line</span>
    <span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #8ac6f2; font-weight: bold;">done</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org90b8211" class="outline-3">
<h3 id="org90b8211"><span class="section-number-3">14.4.</span> amdgpu</h3>
<div class="outline-text-3" id="text-14-4">
<p>
<a href="https://stackoverflow.com/questions/76350531/dual-gpu-setup-xorg-on-intel-integrated-gpu-nvidia-gpu-for-gaming">https://stackoverflow.com/questions/76350531/dual-gpu-setup-xorg-on-intel-integrated-gpu-nvidia-gpu-for-gaming</a>
</p>

<p>
/etc/X11/xorg.conf
</p>

<p>
<a href="https://wiki.archlinux.org/title/AMDGPU">https://wiki.archlinux.org/title/AMDGPU</a>
</p>

<p>
<a href="https://bbs.archlinux.org/viewtopic.php?id=185894">https://bbs.archlinux.org/viewtopic.php?id=185894</a>
</p>

<p>
<a href="https://man.archlinux.org/man/amdgpu.4">https://man.archlinux.org/man/amdgpu.4</a>
</p>

<p>
xrandr &#x2013;setprovideroffloadsink 'AMD Radeon HD 8500M Series @ pci:0000:01:00.0' Intel
</p>
</div>

<div id="outline-container-orge20c20f" class="outline-4">
<h4 id="orge20c20f"><span class="section-number-4">14.4.1.</span> vga<sub>switcheroo</sub></h4>
<div class="outline-text-4" id="text-14-4-1">
<p>
<a href="https://help.ubuntu.com/community/HybridGraphics">https://help.ubuntu.com/community/HybridGraphics</a>
</p>
<ul class="org-ul">
<li>discrete GPU - games</li>
<li>integrated GPU - in the CPU</li>
</ul>

<p>
show
</p>
<pre class="example">
cat /sys/kernel/debug/vgaswitcheroo/switch
</pre>


<p>
Turns on the GPU that is disconnected (not currently driving outputs), but does not switch outputs.
</p>
<pre class="example">
sudo echo ON &gt; /sys/kernel/debug/vgaswitcheroo/switch
</pre>


<p>
Connects integrated graphics with outputs.
</p>
<pre class="example">
sudo echo IGD &gt; /sys/kernel/debug/vgaswitcheroo/switch
</pre>


<p>
Connects discrete graphics with outputs.
</p>
<pre class="example">
sudo echo DIS &gt; /sys/kernel/debug/vgaswitcheroo/switch
</pre>


<p>
Turns off the graphics card that is currently disconnected.
</p>
<pre class="example">
sudo echo OFF &gt; /sys/kernel/debug/vgaswitcheroo/switch
</pre>


<p>
Queues a switch to integrated graphics to occur when the X server is next restarted.
</p>
<pre class="example">
sudo echo DIGD &gt; /sys/kernel/debug/vgaswitcheroo/switch
</pre>


<p>
Queues a switch to discrete graphics to occur when the X server is next restarted.
</p>
<pre class="example">
sudo echo DDIS &gt; /sys/kernel/debug/vgaswitcheroo/switch
</pre>
</div>
</div>
</div>
<div id="outline-container-org8c70b9e" class="outline-3">
<h3 id="org8c70b9e"><span class="section-number-3">14.5.</span> xorg.conf.d</h3>
<div class="outline-text-3" id="text-14-5">
<p>
<i>etc/X11/xorg.conf.d</i> directory (recommended) or the legacy /etc/X11/xorg.conf file
</p>
<ul class="org-ul">
<li>read the files in numeric order. 10-evdev.conf will be read before 20-synaptics.conf, and so on.</li>
</ul>

<p>
X :2 -configure
</p>

<p>
<a href="https://wiki.gentoo.org/wiki/Xorg.conf#Device">https://wiki.gentoo.org/wiki/Xorg.conf#Device</a>
</p>
</div>
</div>
<div id="outline-container-orgeb40278" class="outline-3">
<h3 id="orgeb40278"><span class="section-number-3">14.6.</span> <span class="todo TODO">TODO</span> tilling</h3>
<div class="outline-text-3" id="text-14-6">
<p>
<a href="https://github.com/jaywilkas/xpytile">https://github.com/jaywilkas/xpytile</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org4e06255" class="outline-2">
<h2 id="org4e06255"><span class="section-number-2">15.</span> xfce4</h2>
<div class="outline-text-2" id="text-15">
</div>
<div id="outline-container-org27f5631" class="outline-3">
<h3 id="org27f5631"><span class="section-number-3">15.1.</span> history</h3>
<div class="outline-text-3" id="text-15-1">
<p>
twm -&gt; FVWM -&gt; xfce
</p>
</div>
</div>
<div id="outline-container-org11781a7" class="outline-3">
<h3 id="org11781a7"><span class="section-number-3">15.2.</span> Emacs - conflict</h3>
<div class="outline-text-3" id="text-15-2">
<p>
Settings -&gt; Settings Editor -&gt; xfce4-keyboard-shortcuts
</p>

<p>
keys:
</p>
<ul class="org-ul">
<li>C-M-d</li>
</ul>
</div>
</div>
<div id="outline-container-org3865caa" class="outline-3">
<h3 id="org3865caa"><span class="section-number-3">15.3.</span> xfce4-terminal</h3>
<div class="outline-text-3" id="text-15-3">
</div>
<div id="outline-container-orgd3032e5" class="outline-4">
<h4 id="orgd3032e5"><span class="section-number-4">15.3.1.</span> hotkeys</h4>
<div class="outline-text-4" id="text-15-3-1">
<p>
Ctrl+Shift+s - set title
</p>

<p>
CONFIGURE!!
</p>
<pre class="example">
C-S-k - scroll one line up
A-S-k - scroll page up
A-S-n - scroll page down
</pre>
</div>
</div>
<div id="outline-container-orgcfb7fc7" class="outline-4">
<h4 id="orgcfb7fc7"><span class="section-number-4">15.3.2.</span> set title and execute command</h4>
<div class="outline-text-4" id="text-15-3-2">
<p>
current active:
</p>
<pre class="example">
xdotool getactivewindow set_window --name $(echo "${PWD/#$HOME/\~}")
</pre>


<p>
at start:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #cae682;">v</span>=<span style="color: #95e454;">"command ;"</span>
xfce4-terminal --initial-title <span style="color: #95e454;">"my title"</span> -e <span style="color: #95e454;">"bash -c \"${v}\""</span>
<span style="color: #8ac6f2; font-weight: bold;">exit</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb8d9d3c" class="outline-3">
<h3 id="orgb8d9d3c"><span class="section-number-3">15.4.</span> insert unicode</h3>
<div class="outline-text-3" id="text-15-4">
<p>
C-S-u	hex code
</p>

<p>
compose keys ? /usr/share/X11/locale/en<sub>US.UTF</sub>-8/Compose
</p>
<ul class="org-ul">
<li>Preferences → Keyboard → Layouts tab → Layout Options → Compose key position.</li>
<li>setxkbmap -option 'compose:menu'</li>
</ul>
</div>
</div>
<div id="outline-container-orge90afe1" class="outline-3">
<h3 id="orge90afe1"><span class="section-number-3">15.5.</span> bind keys to applications</h3>
<div class="outline-text-3" id="text-15-5">
<ul class="org-ul">
<li>can not create several aplications for Firefox - it keeps updating its own name</li>
</ul>

<p>
firefox:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/usr/bin/</span><span style="color: #8ac6f2; font-weight: bold;">env</span><span style="color: #99968b; font-style: italic;"> sh</span>
xdotool search <span style="color: #95e454;">"Mozilla Firefox"</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ $<span style="color: #cae682;">?</span> == 0 ] ; <span style="color: #8ac6f2; font-weight: bold;">then</span>
   xdotool search <span style="color: #95e454;">"Mozilla Firefox"</span> windowactivate
   <span style="color: #8ac6f2; font-weight: bold;">exit</span>
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
firefox
</pre>
</div>

<p>
terminal:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/usr/bin/</span><span style="color: #8ac6f2; font-weight: bold;">env</span><span style="color: #99968b; font-style: italic;"> sh</span>

<span style="color: #cae682;">n</span>=$<span style="color: #cae682;">@</span>
xdotool search <span style="color: #95e454;">"term$n"</span>

<span style="color: #8ac6f2; font-weight: bold;">if</span> [ $<span style="color: #cae682;">?</span> == 0 ] ; <span style="color: #8ac6f2; font-weight: bold;">then</span>
   xdotool search <span style="color: #95e454;">"term$n"</span> windowactivate
   <span style="color: #8ac6f2; font-weight: bold;">exit</span>
<span style="color: #8ac6f2; font-weight: bold;">fi</span>

xfce4-terminal --initial-title term$<span style="color: #cae682;">n</span>
</pre>
</div>

<p>
**
</p>
</div>
</div>
<div id="outline-container-org4ca5bdb" class="outline-3">
<h3 id="org4ca5bdb"><span class="section-number-3">15.6.</span> accessibility - mouse emulation</h3>
<div class="outline-text-3" id="text-15-6">
<dl class="org-dl">
<dt>Acceleration delay</dt><dd>45</dd>
<dt>Repeat interval</dt><dd>18</dd>
<dt>Acceleration time</dt><dd>230</dd>
<dt>Maximum speed</dt><dd>2000</dd>
<dt>Acceleration profile</dt><dd>0</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-org00566d9" class="outline-2">
<h2 id="org00566d9"><span class="section-number-2">16.</span> Wayland</h2>
<div class="outline-text-2" id="text-16">
<p>
Stacking/Tiling hybrid view management
</p>

<p>
<a href="https://github.com/djpohly/dwl">https://github.com/djpohly/dwl</a>
</p>
</div>
<div id="outline-container-org8d9731b" class="outline-3">
<h3 id="org8d9731b"><span class="section-number-3">16.1.</span> terms</h3>
<div class="outline-text-3" id="text-16-1">
<dl class="org-dl">
<dt>Tiling</dt><dd>none of the windows overlapping. (keyboard centeric)</dd>
<dt>Stacking</dt><dd>(aka floating) traditional desktop metaphor</dd>
<dt>dynamic</dt><dd>can dynamically switch between tiling or floating window layout.</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-orgc36aa5e" class="outline-2">
<h2 id="orgc36aa5e"><span class="section-number-2">17.</span> cron</h2>
<div class="outline-text-2" id="text-17">
<ul class="org-ul">
<li>emerge &#x2013;ask sys-process/dcron</li>
</ul>
<p>
Cron checks:
</p>
<ul class="org-ul">
<li><i>var/spool/cron</i> - undividual user cron files</li>
<li><i>etc/cron.d</i> - system services and apps</li>
<li>/etc/anacrontab - configuration file for anacron</li>
<li>/etc/crontab - cron tasks not edited with crontab -e (old)</li>
<li>/var/spool/cron/crontabs/&lt;user&gt; - per user edited with crontab -e (right way)</li>
<li>cron task scripts: - place scripts to execute here
<ul class="org-ul">
<li><i>etc/cron.hourly</i></li>
<li><i>etc/cron.daily</i></li>
<li><i>etc/cron.weekly</i></li>
<li><i>etc/cron.monthly</i></li>
</ul></li>
</ul>

<p>
Commands:
</p>

<ul class="org-ul">
<li>crontab -l</li>
<li>crontab -e</li>
<li>export VISUAL=nano - change editor</li>
<li>export EDITOR=nano - change editor</li>
</ul>

<pre class="example">
apt install cron
systemctl enable cron
systemctl start cron
crontab -e
0 0 * * * systemctl restart tor
</pre>
</div>

<div id="outline-container-org9642080" class="outline-3">
<h3 id="org9642080"><span class="section-number-3">17.1.</span> format</h3>
<div class="outline-text-3" id="text-17-1">
<p>
Wildcard, specifies every possible time interval
</p>
<ul class="org-ul">
<li>The comma (,): To specify a list of values</li>
<li>Asterisk (*): To specify all possible values for a field</li>
<li>/	Specify a periodicity/frequency using a slash</li>
<li>Dash (-): To specify a range of values</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Symbol</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">'*'</td>
<td class="org-left">Wildcard, specifies every possible time interval</td>
</tr>

<tr>
<td class="org-left">,</td>
<td class="org-left">List multiple values separated by a comma.</td>
</tr>

<tr>
<td class="org-left">'-'</td>
<td class="org-left">Specify a range between two numbers, separated by a hyphen</td>
</tr>

<tr>
<td class="org-left">'/'</td>
<td class="org-left">Specify a periodicity/frequency using a slash</td>
</tr>
</tbody>
</table>

<p>
Special:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">@reboot</td>
<td class="org-left">at startup</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@yearly</td>
<td class="org-left">midnight of 1 January</td>
<td class="org-left">0 0 1 1 *</td>
</tr>

<tr>
<td class="org-left">@annually</td>
<td class="org-left">( == @yearly)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@monthly</td>
<td class="org-left">at midnight of the first day of the month</td>
<td class="org-left">0 0 1 * *</td>
</tr>

<tr>
<td class="org-left">@weekly</td>
<td class="org-left">midnight on Sunday morning</td>
<td class="org-left">0 0 * * 0</td>
</tr>

<tr>
<td class="org-left">@daily</td>
<td class="org-left">once a day at midnight</td>
<td class="org-left">0 0 * * *</td>
</tr>

<tr>
<td class="org-left">@midnight</td>
<td class="org-left">( == @daily)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@hourly</td>
<td class="org-left">once an hour at the beginning of the hour</td>
<td class="org-left">0 * * * *</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-orge36178d" class="outline-3">
<h3 id="orge36178d"><span class="section-number-3">17.2.</span> Examples:</h3>
<div class="outline-text-3" id="text-17-2">
<p>
30 4 echo "It is now 4:30 am."
0 22 echo "It is now 10 pm."
30 15 25 12 echo "It is 3:30pm on Christmas Day."
30 3 * * * echo "Remind me that it's 3:30am every day."
0 * * * * echo "It is the start of a new hour."
0 6 1,15 * * echo "At 6am on the 1st and 15th of every month."
0 6 * * 2,3,5 echo "At 6am on Tuesday, Wednesday and Thursdays."
59 23 * * 1-5 echo "Just before midnight on weekdays."
0 */2 * * * echo "Every two hours."
0 20 * * 4 echo "8pm on a Thursday."
0 20 * * Thu echo "8pm on a Thursday."
*/15 9-17 * * 2-5 echo "Every 15 minutes from 9am-5pm on weekdays."
@yearly echo "Happy New Year!"
</p>
</div>
</div>
</div>

<div id="outline-container-org94c1e9e" class="outline-2">
<h2 id="org94c1e9e"><span class="section-number-2">18.</span> vi/vim</h2>
<div class="outline-text-2" id="text-18">
<p>
<a href="https://www.tutorialspoint.com/vim/vim_quick_guide.htm">https://www.tutorialspoint.com/vim/vim_quick_guide.htm</a>
</p>

<ul class="org-ul">
<li><p>
~/<sub>vimrc</sub> or ~/.vimrc - config file
</p>

<p>
set nu    Now Vim will show line numbers when file is opened. We’ll add more options to this file latter on.
</p></li>
</ul>

<p>
copy:
</p>
<ol class="org-ol">
<li>v - visual mode</li>
<li>y/d - copy/cut</li>
<li>p/P - paste</li>
</ol>
</div>


<div id="outline-container-orgf58bcb7" class="outline-3">
<h3 id="orgf58bcb7"><span class="section-number-3">18.1.</span> insert modes</h3>
<div class="outline-text-3" id="text-18-1">
<p>
Enter insert mode:
</p>
<ul class="org-ul">
<li>i/I	insert before cursor/begin of line</li>
<li>a/A 	Append text after cursor/end of line</li>
<li>o/O	Append new line below/above</li>
<li>s/(S or cc)	Remove char/whole line</li>
<li>C	remove all after cursor</li>

<li>r     replace one character</li>
<li>R	Enter Replace mode</li>
<li>J	remove \n at the end of line</li>
</ul>
</div>
</div>

<div id="outline-container-org6503008" class="outline-3">
<h3 id="org6503008"><span class="section-number-3">18.2.</span> Navigation</h3>
<div class="outline-text-3" id="text-18-2">
<ul class="org-ul">
<li>jkl;</li>
<li>Ctrl+b scroll back</li>
<li>Ctrl+f scroll forward</li>
<li>0/$	Move cursor to the begining/end of current line</li>
<li>:n 	Jump to the nth line</li>
<li>:0 	Jump to the start of file</li>
<li>:$	Jump to the end of file</li>
<li>w/e	Move cursor to the beginning/end of the next word</li>
<li>b	Move cursor to the beginning of the previous word</li>
</ul>

<p>
:jumps
</p>
<ul class="org-ul">
<li>Ctrl + o Jump back to the previous position</li>
<li>Ctrl + i Jump to the next position</li>
</ul>
</div>
</div>

<div id="outline-container-org9c5bd62" class="outline-3">
<h3 id="org9c5bd62"><span class="section-number-3">18.3.</span> other</h3>
<div class="outline-text-3" id="text-18-3">
<ul class="org-ul">
<li>Esc	Enter command mode, esc insert mode</li>
<li>u	Undo changes</li>
<li>Ctrl + r	Redo changes</li>
<li>yy	Copy a line</li>
<li>p	Paste the content of the buffer</li>
<li>[[ or gg	Move to the beginning of a file</li>
<li>]] or G	Move to the end of a file</li>
<li>:w	Save changes</li>
<li>:q!	Force quit Vim discarding all changes</li>
<li>dd	Delete line</li>
<li>/	Search, n- next N-previous</li>
</ul>

<p>
to line number:
</p>
<ul class="org-ul">
<li>vi +36 foo.c</li>
<li>:36</li>
</ul>

<p>
copy area:
</p>
<ol class="org-ol">
<li>v	visual mode</li>
<li>y	copy</li>
<li>p	paste</li>
</ol>
</div>
</div>

<div id="outline-container-orga24c955" class="outline-3">
<h3 id="orga24c955"><span class="section-number-3">18.4.</span> plugins</h3>
<div class="outline-text-3" id="text-18-4">
<p>
~/.vim  - direcotry
</p>

<p>
The plugins kept in  ~/.vim/pack/*/start folder loaded into Vim memory when it starts
</p>
<ul class="org-ul">
<li>Any directory under ~/.vim/pack is considered a package.</li>
<li>The plugins under start/ folder are loaded on startup, while the plugins under opt/ folder are loaded manually</li>
<li>:packadd pluginopt1 - load plugin from vendor/opt</li>
</ul>
</div>
</div>

<div id="outline-container-orgb91c788" class="outline-3">
<h3 id="orgb91c788"><span class="section-number-3">18.5.</span> old</h3>
<div class="outline-text-3" id="text-18-5">
<p>
In normal mode
<code>============</code>
</p>

<p>
:23,30m200  &#x2013; Move a section of code to another line.
</p>

<p>
df, (reverse dF,)   &#x2013; Delete all characters till , on the current line.
</p>

<p>
I  &#x2013; Go to beginning of the line as insert mode.
</p>

<p>
$   &#x2013; In command mode, go to end of the line.
</p>

<p>
gg  &#x2013; Go to beginning of the file
G  &#x2013; Go to end of the file.
</p>

<p>
CTRL + o, CTRL + i  &#x2013; Jumps back and forward, very useful.
</p>

<p>
CTRL + h/j/k/l  &#x2013; Move the selection to different split windows and
MinibuferExplorer.
</p>

<p>
CTRL + F    &#x2013; Page down scroll.
CTRL + B    &#x2013; Page back scroll.
</p>

<p>
номера					 :set number       :set nonumber
номера курсора				:set ruler
подсветка результатов поиска  :set hlsearch
строка  :(0)    $
</p>

<p>
Ctrl-U   CTRL + B &#x2013; Page back scroll
Ctrl-D   CTRL + F &#x2013; Page down scroll.
</p>

<p>
Page H M L
</p>

<p>
Macros:
        qa                      Start recording a macro in register a.
        ^                       Move to the beginning of the line.
        i#include "&lt;Esc&gt;        Insert the string #include " at the beginning
                                of the line.
        $                       Move to the end of the line.
        a"&lt;Esc&gt;                 Append the character double quotation mark (")
                                to the end of the line.
        j                       Go to the next line.
        q                       Stop recording the macro.
</p>

<p>
Now that you have done the work once, you can repeat the change by typing the
command "@a" three times.
</p>



<hr />
<p>
Macros:
        include one
        include two
        include three
        include four
</p>

<p>
Move the cursor to the "o" of "one" and press CTRL-V.  Move it down with "3j"
to "four".  You now have a block selection that spans four lines.  Now type:
</p>

<p>
Imain.&lt;Esc&gt;
</p>

<p>
The result:
</p>

<p>
include main.one
include main.two
include main.three
include main.four
</p>
<hr />



<p>
:set textwidth=72
)))))))))))))))))))))))))))))))
windows:
:split (file name)            :new
Cltr-W
:close    :only -close all others
:vsplit   :vnew
</p>

<p>
tabs:
   :tabedit thatfile
   :tab split
   :0tabnew   - before first one
   :tabc
   gt  -&gt; (goto tab)
   gT  &lt;-
   :tabl
   :tabfir
</p>


<p>
)))))))))))))))))))))))))))))))
</p>

<p>
syntax on
modeline &#x2013; моды в самом файле
for python:
</p>

<p>
<a href="http://habrahabr.ru/post/64224/">http://habrahabr.ru/post/64224/</a>
tabstop (по умолчанию 8) — количество пробелов, которыми символ табуляции отображается в тексте. Оказывает влияние как на уже существующие табуляции, так и на новые. В случае изменения значения, «на лету» применяется к тексту.
</p>

<p>
softtabstop (0) — количество пробелов, которыми символ табуляции отображается при добавлении. Несмотря на то, что при нажатии на Tab вы получите ожидаемый результат (добавляется новый символ табуляции), фактически в отступе могут использоваться как табуляция так и пробелы. Например, при установленных tabstop равной 8 и softtabstop равной 4, троекратное нажатие Tab приведет к добавлению отступа шириной 12 пробелов, однако сформирован он будет из одного символа табуляции и 4 пробелов.
</p>

<p>
shiftwidth (8) — по умолчанию используется для регулирование ширины отступов в пробелах, добавляемых командами &gt;&gt; и &lt;&lt;. Если значение опции не равно tabstop, как и в случае с softtabstop, отступ может состоять как из символов табуляций так и из пробелов. При включении опции — smarttab, оказывает дополнительное влияние.
</p>

<p>
smarttab (выключена) — в случае включения этой опции, нажатие Tab в начале строки (если быть точнее, до первого непробельного символа в строке) приведет к добавлению отступа, ширина которого соответствует shiftwidth (независимо от значений в tabstop и softtabstop). Нажатие на Backspace удалит отступ, а не только один символ, что очень полезно при включенной expandtab. Напомню: опция оказывает влияние только на отступы в начале строки, в остальных местах используются значения из tabstop и softtabstop.
</p>

<p>
expandtab (выключена) — в режиме вставки заменяет символ табуляции на соответствующее количество пробелов. Так же влияет на отступы, добавляемые командами &gt;&gt; и &lt;&lt;.
</p>


<p>
autoindent (выключена) — копирует отступы с текущей строки при добавлении новой.
</p>

<p>
smartindent (выключена) — делает то же, что и autoindent плюс автоматически выставляет отступы в «нужных» местах. В частности, отступ ставится после строки, которая заканчивается символом {, перед строкой, которая заканчивается символом }, удаляется перед символом #, если он следует первым в строке и т.д. (подробнее help 'smartindent').
</p>


<p>
set list - показать конец строки
</p>

<p>
Syntastic is a Vim plugin that brings syntax checking to Vim.
</p>
</div>
</div>
</div>
<div id="outline-container-org9319aaa" class="outline-2">
<h2 id="org9319aaa"><span class="section-number-2">19.</span> nano</h2>
<div class="outline-text-2" id="text-19">
<ul class="org-ul">
<li>CTRL + 6 and ALT + 6 to copy</li>
<li>Ctrl+U	to paste</li>
</ul>
</div>
</div>
<div id="outline-container-org71483a7" class="outline-2">
<h2 id="org71483a7"><span class="section-number-2">20.</span> ffmpeg</h2>
<div class="outline-text-2" id="text-20">
<p>
<b>list devices</b>
</p>
<ul class="org-ul">
<li>ffmpeg -devices</li>
</ul>

<p>
<b>slicing video</b>
</p>
<ul class="org-ul">
<li>ffmpeg -i input.mp4 -ss 00:00:05 -c copy -to 00:00:07 sliced-output.mp4</li>
</ul>

<p>
<b>flac to mp3</b>
</p>
<ul class="org-ul">
<li>ffmpeg -i "path.flac" -ab 320k -id3v2<sub>version</sub> 3 -map<sub>metadata</sub> 0 a.mp3</li>
</ul>

<p>
<b>flac to mp3 part sliced</b>
</p>
<ul class="org-ul">
<li>ffmpeg -accurate<sub>seek</sub>  -ss 00:02:52 -i "/mnt/media/Tim Skold/2021 Skold - Dies Irae flac/03 The End is Near.flac" -t 00:00:12 -ab 320k -id3v2<sub>version</sub> 3 -map<sub>metadata</sub> 0  file.mp3</li>
</ul>

<p>
<b>clear metadata</b>
</p>
<ul class="org-ul">
<li>ffmpeg -i s.mp4 -map<sub>metadata</sub> -1 -c:v copy -c:a copy t.mp4</li>
</ul>

<p>
'-i', self.filename,      # input file
               '-y',                     # overwrite existing output file
               '-map', '0',              # copy everything all streams from input to output
               '-codec', 'copy',         # don't decode anything, just copy (speed!)
               '-loglevel', 'panic',     # Don't show log
               '-hide<sub>banner</sub>',           # hide the banner
               '-map<sub>metadata</sub>', '-1',    # remove supperficial metadata
               '-map<sub>chapters</sub>', '-1',    # remove chapters
               '-disposition', '0',      # Remove dispositions (check ffmpeg's manpage)
               '-fflags', '+bitexact',   # don't add any metadata
               '-flags:v', '+bitexact',  # don't add any metadata
               '-flags:a', '+bitexact',  # don't add any metadata
</p>

<p>
-i FILE -y -map 0 -codec copy  -hide<sub>banner</sub> -map<sub>metadata</sub> -1 -map<sub>chapters</sub> -1 -disposition 0 -fflags +bitexact -flags:v +bitexact -flags:a +bitexact FILE
</p>


<p>
<b>remove image from mp3</b>
</p>
<ul class="org-ul">
<li>ffmpeg -i Lilu45<sub>Kino3.mp3</sub> -map 0:a -c:a copy -map<sub>metadata</sub> -1 Lilu45<sub>Kino4.mp3</sub></li>
</ul>

<p>
<b>get info</b>
</p>
<ul class="org-ul">
<li>ffmpeg -i file</li>
<li>ffprobe file</li>
</ul>

<p>
<b>to gif</b>
</p>
<ul class="org-ul">
<li>ffmpeg -ss 1900.0 -t 6.5 -i file.mkv -filter<sub>complex</sub> "[0:v] fps=12,scale=480:-1,split [a][b];[a] palettegen [p];[b][p] paletteuse" SmallerStickAround.gif</li>
<li><a href="https://engineering.giphy.com/how-to-make-gifs-with-ffmpeg/">https://engineering.giphy.com/how-to-make-gifs-with-ffmpeg/</a></li>
</ul>

<p>
<b>record audio from a running application using</b>
</p>
<ul class="org-ul">
<li>ffmpeg -f alsa -channels 2 -sample<sub>rate</sub> 44100 -i loopout out.wav</li>
</ul>

<p>
<b>record webcam</b>
</p>
<ul class="org-ul">
<li>ffmpeg -f alsa -ac 2 -i default -itsoffset 00:00:00.5 -f video4linux2 -s 320x240 -r 25 -i /dev/video0 out.mpg
<ul class="org-ul">
<li>ffmpeg -thread<sub>queue</sub><sub>size</sub> 9000 -f alsa -ac 2 -i default -itsoffset 00:00:00.5 -video<sub>size</sub> 800x600 -r 25 -i /dev/video0 out.mpg -y ; mpv out.mpg</li>
</ul></li>
<li>ffmpeg -f v4l2  -framerate 30  -input<sub>format</sub> mjpeg -i /dev/video0 -f alsa -i hw:0,0 -c:a pcm<sub>s16le</sub> -c:v mjpeg -b:v 64000k output.avi -map 0:v -vf "format=yuv420p" -f xv display
<ul class="org-ul">
<li>ffmpeg -thread<sub>queue</sub><sub>size</sub> 200 -framerate 23 -input<sub>format</sub> mjpeg -i /dev/video0 -f alsa -i mic -c:a pcm<sub>s16le</sub> -c:v libopenh264 -b:v 7000k -af "highpass=f=100, lowpass=f=3000" output.avi -map 0:v -vf "format=yuv420p" -f xv display -y ; mpv output.avi</li>
<li>ffmpeg -thread<sub>queue</sub><sub>size</sub> 200 -framerate 23 -input<sub>format</sub> mjpeg -i /dev/video0 -f alsa -i mic -c:a pcm<sub>s16le</sub> -c:v libopenh264 -b:v 7000k -af "volume=20,highpass=f=200,lowpass=f=1000" output.avi -map 0:v -vf "format=yuv420p" -f xv display -y ; mpv output.avi</li>
<li>ffmpeg -s 640x480 -thread<sub>queue</sub><sub>size</sub> 200 -framerate 24 -input<sub>format</sub> mjpeg -i /dev/video0 -f alsa -i mic -c:a pcm<sub>s16le</sub> -c:v libopenh264 -b:v 7000k -af "volume=20,anlmdn,highpass=f=100,lowpass=f=5000" output.avi -map 0:v -vf "format=yuv420p" -f xv display -y ; mpv output.avi</li>
</ul></li>
<li>ffmpeg -f alsa -i mic -f v4l2 -s 640x480 -i /dev/video0 -c:a copy -c:v libopenh264 -crf 23 -preset ultrafast output.avi</li>
<li>ffmpeg -s 640x480 -thread<sub>queue</sub><sub>size</sub> 2000 -framerate 5 -input<sub>format</sub> mjpeg -i /dev/video0 -f alsa -i mic -c:a pcm<sub>s16le</sub> -c:v libopenh264 -b:v 5000k -af "volume=20,anlmdn,highpass=f=100,lowpass=f=5000" -preset ultrafast output.avi -map 0:v -vf "format=yuv420p" -f xv display -y ; mpv output.avi</li>
<li>with overlay of camera over display:
<ul class="org-ul">
<li>ffmpeg -f x11grab -framerate 6 -video<sub>size</sub> 640x480 -i :0.0 -s 320x240 -thread<sub>queue</sub><sub>size</sub> 2000 -framerate 5 -input<sub>format</sub> mjpeg -i /dev/video0 -f alsa -i mic -c:a pcm<sub>s16le</sub> -c:v libopenh264 -b:v 5000k -af "volume=20,anlmdn,highpass=f=100,lowpass=f=5000" -preset ultrafast -filter<sub>complex</sub> "[0:v][1:v] overlay=W-w:H-h:format=yuv420" output.avi -map 1:v -vf "format=yuv420p" -f xv display -y ; mpv output.avi</li>
</ul></li>
</ul>

<p>
<b>remove audio</b>
</p>
<ul class="org-ul">
<li>ffmpeg -i infile.mp4 -c copy -an out.mp4</li>
</ul>
</div>
</div>
<div id="outline-container-org7c3ec49" class="outline-2">
<h2 id="org7c3ec49"><span class="section-number-2">21.</span> camera</h2>
<div class="outline-text-2" id="text-21">
<p>
kernel:
</p>
<ul class="org-ul">
<li>CONFIG<sub>SHMEM</sub></li>
</ul>

<pre class="example">
USE=qt5 emerge --ask media-libs/libv4l
</pre>


<pre class="example">
qv4l2
</pre>


<p>
test
</p>
<pre class="example">
qvidcap
</pre>


<p>
<a href="https://wiki.gentoo.org/wiki/Webcam">https://wiki.gentoo.org/wiki/Webcam</a>
</p>
</div>
</div>
<div id="outline-container-org9af41c0" class="outline-2">
<h2 id="org9af41c0"><span class="section-number-2">22.</span> screen recorder</h2>
<div class="outline-text-2" id="text-22">
<ul class="org-ul">
<li>media-video/simplescreenrecorder</li>
<li>recordmydesktop - CPU</li>
<li><a href="https://git.dec05eba.com/gpu-screen-recorder/">https://git.dec05eba.com/gpu-screen-recorder/</a></li>
</ul>
</div>
</div>
<div id="outline-container-org0cb571b" class="outline-2">
<h2 id="org0cb571b"><span class="section-number-2">23.</span> Nginx</h2>
<div class="outline-text-2" id="text-23">
<p>
alternative to Apache and lighttpd.
</p>
<ul class="org-ul">
<li>NGINX<sub>MODULES</sub><sub>HTTP</sub></li>
<li>package.use: www-servers/nginx NGINX<sub>MODULES</sub><sub>HTTP</sub>: fastcgi</li>
</ul>


<p>
/var/www/localhost/htdocs/index.html
</p>

<p>
rc-service nginx start or /etc/init.d/nginx start
</p>

<p>
Verify bound addresses and ports:
</p>
<ul class="org-ul">
<li>netstat -tulpen | grep :80</li>
</ul>
</div>

<div id="outline-container-orgb2b52e2" class="outline-3">
<h3 id="orgb2b52e2"><span class="section-number-3">23.1.</span> install</h3>
</div>

<div id="outline-container-orga590d8d" class="outline-3">
<h3 id="orga590d8d"><span class="section-number-3">23.2.</span> reverse proxy</h3>
<div class="outline-text-3" id="text-23-2">
<p>
You need rewrite URL in body of response. You can do in with sub module:
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #92a65e; font-weight: bold;">location /admin/</span> {
    proxy_pass http://localhost:8080/;
    sub_filter <span style="color: #95e454;">"http://your_server/"</span> <span style="color: #95e454;">"http://your_server/admin/"</span>;
    sub_filter_once off; <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">all strings</span>
    sub_filter_last_modified off; <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">do not touch Last-Modified header</span>
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">sub_filter_types text/html; # set by default</span>
}
</pre>
</div>

<p>
May be useful:
</p>
<ul class="org-ul">
<li>proxy<sub>redirect</sub> / <i>admin</i></li>
<li>nginx<sub>substitutions</sub><sub>filter</sub> - regex filter</li>
</ul>
</div>
<div id="outline-container-org0551e15" class="outline-4">
<h4 id="org0551e15"><span class="section-number-4">23.2.1.</span> ex</h4>
<div class="outline-text-4" id="text-23-2-1">
<div class="org-src-container">
<pre class="src src-conf">
<span style="color: #92a65e; font-weight: bold;">server</span> {
listen      80;
server_name example.com www.example.com;
index       index.php;
root        /var/www/example.com/public    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">fallback for index.php</span>
<span style="color: #92a65e; font-weight: bold;">location /</span> {
try_files $uri $uri/ /index.php?$query_string;
}
<span style="color: #92a65e; font-weight: bold;">location /blog</span> {
  proxy_pass http://blog.domain.com;proxy_http_version                 1.1;
  proxy_cache_bypass                 $http_upgrade;

  <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Proxy headers</span>
  proxy_set_header Upgrade           $http_upgrade;
  proxy_set_header Connection        <span style="color: #95e454;">"upgrade"</span>;
  proxy_set_header Host              $host; <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">or $http_host;</span>
  proxy_set_header X-Real-IP         $remote_addr;
  proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
  proxy_set_header X-Forwarded-Host  $host; <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">or $server_name;</span>
  proxy_set_header X-Forwarded-Port  $server_port;

  <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Proxy timeouts</span>
  proxy_connect_timeout              60s;
  proxy_send_timeout                 60s;
  proxy_read_timeout                 60s;
}

</pre>
</div>
</div>
</div>
<div id="outline-container-orge8db890" class="outline-4">
<h4 id="orge8db890"><span class="section-number-4">23.2.2.</span> links</h4>
<div class="outline-text-4" id="text-23-2-2">
<ul class="org-ul">
<li><a href="https://kinsta.com/blog/reverse-proxy/">https://kinsta.com/blog/reverse-proxy/</a></li>
<li><a href="http://www.xhaus.com/headers">http://www.xhaus.com/headers</a></li>
<li><a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html?&amp;_ga=1.74997266.187384914.1443061481#proxy_pass">https://nginx.org/en/docs/http/ngx_http_proxy_module.html?&amp;_ga=1.74997266.187384914.1443061481#proxy_pass</a></li>
<li><a href="https://nginx.org/en/docs/http/ngx_http_sub_module.html#sub_filter">https://nginx.org/en/docs/http/ngx_http_sub_module.html#sub_filter</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org93115f8" class="outline-3">
<h3 id="org93115f8"><span class="section-number-3">23.3.</span> config</h3>
<div class="outline-text-3" id="text-23-3">
<p>
<a href="https://nginx.org/en/docs/">https://nginx.org/en/docs/</a>
</p>

<p>
/etc/nginx/nginx.conf (specified in /etc/init.d/nginx)
</p>
</div>
<div id="outline-container-org2d65d3a" class="outline-4">
<h4 id="org2d65d3a"><span class="section-number-4">23.3.1.</span> terms</h4>
<div class="outline-text-4" id="text-23-3-1">
<ul class="org-ul">
<li>directives - lines of config (into simple directives and block directives ({}).)
<ul class="org-ul">
<li>directive consist of name and parameters (spaces - div), ends with (;)</li>
</ul></li>
<li>context - directives in block directive. the main context - outside of any block</li>
</ul>
</div>
</div>
<div id="outline-container-org512ecec" class="outline-4">
<h4 id="org512ecec"><span class="section-number-4">23.3.2.</span> validate the configuration file</h4>
<div class="outline-text-4" id="text-23-3-2">
<p>
/usr/sbin/nginx -t
</p>
</div>
</div>
<div id="outline-container-org2365f9e" class="outline-4">
<h4 id="org2365f9e"><span class="section-number-4">23.3.3.</span> blocks</h4>
<div class="outline-text-4" id="text-23-3-3">
<p>
server - virtual server with input ports and ips
</p>
<ul class="org-ul">
<li>server<sub>name</sub></li>
<li>listet (in server) - set address and port</li>
</ul>

<p>
http - provide context for http directives
</p>

<p>
location (in server, location) - set URI and block of directives for it. most common: root
</p>

<p>
root (in http,server,location) -  Sets the root directory for requests.
</p>
</div>
</div>
<div id="outline-container-orgd3d56bb" class="outline-4">
<h4 id="orgd3d56bb"><span class="section-number-4">23.3.4.</span> variables</h4>
<div class="outline-text-4" id="text-23-3-4">
<p>
The ability to set variables at runtime and control logic flow based on them is part of the rewrite module and not a general feature of nginx.
</p>

<ul class="org-ul">
<li>set $variable value;</li>
<li>Context: 	server, location, if</li>
</ul>

<p>
how to set variables by hands:
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">variables: # global</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">set varname meaning ; # varname</span>


<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">variables: # repeat local</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">set varname meaning ; # varname</span>
$varname
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">A-S-% $varname meaning ; # varname</span>
</pre>
</div>
</div>


<ol class="org-ol">
<li><a id="orgfcadf12"></a>ex<br />
<div class="outline-text-5" id="text-23-3-4-1">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #92a65e; font-weight: bold;">if ($http_user_agent ~ MSIE)</span> {
    rewrite ^(.*)$ /msie/$1 break;
}

if ($http_cookie ~* <span style="color: #95e454;">"id=([^;]+)(?:;|$)"</span>) {
    set $id $1;
}

<span style="color: #cae682;">if ($request_method</span> = POST) {
    return 405;
}

<span style="color: #92a65e; font-weight: bold;">if ($slow)</span> {
    limit_rate 10k;
}

<span style="color: #92a65e; font-weight: bold;">if ($invalid_referer)</span> {
    return 403;
}
</pre>
</div>
</div>
</li>
<li><a id="org6b52a20"></a>links<br />
<div class="outline-text-5" id="text-23-3-4-2">
<ul class="org-ul">
<li><a href="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#set">https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#set</a></li>
<li><a href="http://nginx.org/en/docs/faq/variables_in_config.html">http://nginx.org/en/docs/faq/variables_in_config.html</a></li>
<li><a href="https://dev.yorhel.nl/nginx-confgen/man">https://dev.yorhel.nl/nginx-confgen/man</a></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org55483b7" class="outline-4">
<h4 id="org55483b7"><span class="section-number-4">23.3.5.</span> Most useful variables:</h4>
<div class="outline-text-4" id="text-23-3-5">
<dl class="org-dl">
<dt>$host</dt><dd>1) host name from the request line, 2) host name from the “Host” request header field 3) server name matching a request</dd>
<dt>$http<sub>host</sub></dt><dd>Value of the “Host:” header in the request (same as all $http_&lt;headername&gt; variables)</dd>
<dt>$https</dt><dd>“on” if connection operates in SSL mode, or an empty string otherwise</dd>
<dt>$request<sub>method</sub></dt><dd>request method, usually “GET” or “POST”</dd>
<dt>$request<sub>uri</sub></dt><dd>full original request URI (with arguments)</dd>
<dt>$scheme</dt><dd>request scheme, e.g. “http” or “https”</dd>
<dt>$server<sub>name</sub></dt><dd>name of the server which accepted a request</dd>
<dt>$server<sub>port</sub></dt><dd>port of the server which accepted a request</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org5b6d2ec" class="outline-3">
<h3 id="org5b6d2ec"><span class="section-number-3">23.4.</span> logging</h3>
<div class="outline-text-3" id="text-23-4">
<p>
directives:
</p>
<ul class="org-ul">
<li>error<sub>log</sub> logs/error.log warn;
<ol class="org-ol">
<li>to a particular file, stderr, or syslog (default: logs/error.log)
<ul class="org-ul">
<li>error<sub>log</sub>  syslog:server=unix:/var/log/nginx.sock debug;</li>
</ul></li>
<li>minimal severity level of messages to log</li>
</ol></li>
<li>access<sub>log</sub> /spool/logs/nginx-access.log upstream<sub>time</sub>;</li>
</ul>

<p>
Settings in the main context are always inherited by other configuration levels (http, server, location)
</p>

<p>
Error Log Severity Levels
</p>
<ul class="org-ul">
<li>emerg: Emergency messages when your system may be unstable.</li>
<li>alert: Alert messages of serious issues.</li>
<li>crit: Critical issues that need to be taken care of immediately.</li>
<li>error: An error has occured. Something went wrong while processing a page.</li>
<li>warn: A warning messages that you should look into it.</li>
<li>notice: A simple log notice that you can ignore.</li>
<li>info: Just an information messages that you might want to know.</li>
<li>debug: Debugging information used to pinpoint the location of error.</li>
</ul>

<p>
default error.log format:
log<sub>format</sub> combined '$remote<sub>addr</sub> - $remote<sub>user</sub> [$time<sub>local</sub>] '
                    '"$request" $status $body<sub>bytes</sub><sub>sent</sub> '
                    '"$http<sub>referer</sub>" "$http<sub>user</sub><sub>agent</sub>"';
<a href="https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format">https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format</a>
<a href="https://docs.nginx.com/nginx/admin-guide/monitoring/logging/">https://docs.nginx.com/nginx/admin-guide/monitoring/logging/</a>
</p>
</div>
</div>
<div id="outline-container-org96388f9" class="outline-3">
<h3 id="org96388f9"><span class="section-number-3">23.5.</span> troubleshooting</h3>
<div class="outline-text-3" id="text-23-5">
<p>
1 peer closed connection in SSL handshake (104: Connection reset by peer) while SSL handshaking to upstream
</p>
<ul class="org-ul">
<li>proxy<sub>ssl</sub><sub>server</sub><sub>name</sub> on;</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgfee3061" class="outline-2">
<h2 id="orgfee3061"><span class="section-number-2">24.</span> Debian</h2>
<div class="outline-text-2" id="text-24">
<dl class="org-dl">
<dt>list installed packages</dt><dd>dpkg-query -l, apt list &#x2013;installed</dd>
<dt>list all packages</dt><dd>apt search keyword or apt-cache search keyword</dd>
<dt>list file of package</dt><dd>dpkg-query -L packagename</dd>
<dt>install</dt><dd>apt-get -s install emacs</dd>
<dt>apt-cache search package</dt><dd>available package</dd>
<dt>(no term)</dt><dd>apt-get clean</dd>
</dl>

<p>
alias update="sudo apt-get udate &amp;&amp; sudo apt-get upgrade &amp;&amp; sudo apt-get dist-upgrade"
</p>
<hr />
<p>
laoding:
</p>
<ol class="org-ol">
<li>systemctl disable lightdm</li>
<li>/etc/default/grub GRUB<sub>CMDLINE</sub><sub>LINUX</sub><sub>DEFAULT</sub> = "text"</li>
<li>update-grub</li>
<li>/etc/systemd/system/getty.target.wants/getty@tty1.service
<ul class="org-ul">
<li>TTYVTDisallocate=no</li>
</ul></li>
</ol>
</div>
<div id="outline-container-org02d75df" class="outline-3">
<h3 id="org02d75df"><span class="section-number-3">24.1.</span> apt</h3>
<div class="outline-text-3" id="text-24-1">
<p>
apt is newer
</p>

<p>
apt -y install &#x2026;
</p>

<p>
List packages by criteria	apt list
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Update the package repository</td>
<td class="org-left">apt-get update</td>
<td class="org-left">apt update</td>
</tr>

<tr>
<td class="org-left">Upgrade packages</td>
<td class="org-left">apt-get upgrade</td>
<td class="org-left">apt upgrade</td>
</tr>

<tr>
<td class="org-left">Upgrade packages and remove unnecessary dependencies</td>
<td class="org-left">apt-get dist-upgrade</td>
<td class="org-left">apt full-upgrade</td>
</tr>

<tr>
<td class="org-left">Disable update for packages</td>
<td class="org-left">apt-mark hold &#x2026;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orga7bc480" class="outline-3">
<h3 id="orga7bc480"><span class="section-number-3">24.2.</span> tigervnc</h3>
<div class="outline-text-3" id="text-24-2">
<p>
under user
</p>
<ul class="org-ul">
<li>tigervncserver -localhost no</li>
</ul>
</div>
</div>
<div id="outline-container-org46caacf" class="outline-3">
<h3 id="org46caacf"><span class="section-number-3">24.3.</span> samba</h3>
<div class="outline-text-3" id="text-24-3">
<p>
для работы в Thunar: apt-get install smbclient gvfs-fuse gvfs-backend
</p>
</div>
</div>
<div id="outline-container-org5ab6e9e" class="outline-3">
<h3 id="org5ab6e9e"><span class="section-number-3">24.4.</span> iptables</h3>
<div class="outline-text-3" id="text-24-4">
<p>
<a href="https://wiki.debian.org/iptables">https://wiki.debian.org/iptables</a>
</p>

<p>
iptables-save - show filtered, processed tables and export rules
</p>
</div>
</div>

<div id="outline-container-org4b15e15" class="outline-3">
<h3 id="org4b15e15"><span class="section-number-3">24.5.</span> sound</h3>
<div class="outline-text-3" id="text-24-5">
<p>
/etc/asound.conf
вторая строка - карта по умолчанию
</p>

<p>
pcm.!default {
        type hw
        card 1
}
</p>

<p>
ctl.!default {
        type hw
        card 0
}
</p>

<p>
amixer set Master 5+
amixer set Master 5-
</p>
</div>
</div>
<div id="outline-container-org1b438ca" class="outline-3">
<h3 id="org1b438ca"><span class="section-number-3">24.6.</span> proxy</h3>
<div class="outline-text-3" id="text-24-6">
<ul class="org-ul">
<li></li>
</ul>
</div>
</div>
<div id="outline-container-orgbbd542f" class="outline-3">
<h3 id="orgbbd542f"><span class="section-number-3">24.7.</span> ssh</h3>
<div class="outline-text-3" id="text-24-7">
<ul class="org-ul">
<li>apt-get install openssh-server</li>
<li>systemctl start ssh</li>
</ul>

<p>
WinSCP
</p>
</div>
</div>
<div id="outline-container-org07d8048" class="outline-3">
<h3 id="org07d8048"><span class="section-number-3">24.8.</span> dwarf-fortress</h3>
<div class="outline-text-3" id="text-24-8">
<ol class="org-ol">
<li>apt install libncursesw5</li>
<li>in ~/.config/dwarf-fortress/init.txt:</li>
</ol>

<p>
Display not found and PRINT<sub>MODE</sub> not set to TEXT, aborting.
</p>
<ul class="org-ul">
<li>nano .config/dwarf-fortress/init.txt
<ul class="org-ul">
<li>[PRINT<sub>MODE</sub>:2D] to [PRINT-MODE:TEXT].</li>
</ul></li>
</ul>


<p>
run:
</p>
<pre class="example">
python3 /usr/games/dwarf-fortress
</pre>
</div>

<div id="outline-container-org60481fc" class="outline-4">
<h4 id="org60481fc"><span class="section-number-4">24.8.1.</span> <span class="todo TODO">TODO</span> 50 installation</h4>
<div class="outline-text-4" id="text-24-8-1">
<ul class="org-ul">
<li>apt-install dwarf-fortress</li>
<li>wget <a href="https://bay12games.com/dwarves/df_50_13_linux.tar.bz2">https://bay12games.com/dwarves/df_50_13_linux.tar.bz2</a></li>
<li>sha512: 5617b5edf96c8b614af86cbd0f2aa001b3e8773b5c2fafa23b2e1e945e19021b9b3b6752ef8996d97d22d6abd41c52cb74ba50da823436e7b0b5bdd08add4b64</li>
<li>emacs readme.txt</li>
<li>./run<sub>df</sub></li>
</ul>
</div>
</div>

<div id="outline-container-orgb785f01" class="outline-4">
<h4 id="orgb785f01"><span class="section-number-4">24.8.2.</span> troubleshooting</h4>
<div class="outline-text-4" id="text-24-8-2">
<p>
Didn't find any flavor of libncursesw, attempting libncurses (not working)
</p>
<ul class="org-ul">
<li>apt-install libncursesw5</li>
</ul>

<p>
error while loading shared libraries: libSDL2-2.0.so.0: cannot open shared object file: No such file or directory
</p>
<ul class="org-ul">
<li>apt install libsdl2-2.0-0</li>
<li>apt install libsdl2-dev</li>
</ul>
<p>
/dwarfort: error while loading shared libraries: libSDL2<sub>image</sub>-2.0.so.0: cannot open shared object file: No such file or directory
</p>
<ul class="org-ul">
<li>apt install libsdl2-image-2.0-0</li>
</ul>

<p>
I am trying to play Dwarf Fortress game with [PRINT<sub>MODE</sub>:TEXT] option over SSH and some characters on terminal
 not displaying or displaying as (?) question marks. How to fix that?
</p>
<ul class="org-ul">
<li>Solution: LANG=C</li>
<li>also this characters should be able to be displayed <a href="http://www.orenwatson.be/cp437.htm">http://www.orenwatson.be/cp437.htm</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org79084ed" class="outline-3">
<h3 id="org79084ed"><span class="section-number-3">24.9.</span> make swap from image <a id="org66457bb"></a></h3>
<div class="outline-text-3" id="text-24-9">
<pre class="example">
swapon --show
free -h
fallocate -l 1G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
cp /etc/fstab /etc/fstab.back
echo '/swapfile none swap sw 0 0' | tee -a /etc/fstab
</pre>


<p>
determines how often the swap space should be used 0 to 100. Higher value means the swap space will be used
 more frequently:
</p>
<pre class="example">
cat /proc/sys/vm/swappiness
echo 'vm.swappiness=10' | tee -a /etc/sysctl.conf
</pre>


<div class="org-src-container">
<pre class="src src-shell"><span style="color: #cae682;">SWAP</span>=500MB
fallocate -l $<span style="color: #cae682;">SWAP</span> /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
cp /etc/fstab /etc/fstab.back
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'/swapfile none swap sw 0 0'</span> | tee -a /etc/fstab
cp /etc/sysctl.conf /etc/sysctl.conf.back
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'vm.swappiness=10'</span> | tee -a /etc/sysctl.conf

swapon --show
</pre>
</div>
</div>
</div>
<div id="outline-container-org7aefbdb" class="outline-3">
<h3 id="org7aefbdb"><span class="section-number-3">24.10.</span> links</h3>
<div class="outline-text-3" id="text-24-10">
<p>
<a href="https://debian-handbook.info/">https://debian-handbook.info/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org83310f9" class="outline-2">
<h2 id="org83310f9"><span class="section-number-2">25.</span> Ubuntu</h2>
<div class="outline-text-2" id="text-25">
<p>
<b>user</b>
</p>
<ul class="org-ul">
<li>useradd &#x2013;create-home &#x2013;shell=/bin/bash -ou 0 -g 0 user</li>
<li>sudo gpasswd -d u sudo</li>
<li>reboot</li>
</ul>

<p>
<b>audio</b>
</p>
<ul class="org-ul">
<li>apt-get install alsa pulseaudio</li>
<li>usermod -a -G audio u</li>
<li>groups - check current user groups</li>
<li>alsamixer - unmute m key. up arrow</li>
<li>amixer set Master 5%+</li>
<li>amixer set Master 5%-</li>
</ul>

<p>
<b>archiver</b>
</p>
<ul class="org-ul">
<li>apt-get install xarchiver</li>
</ul>

<p>
<b>nvidia</b>
</p>
<ul class="org-ul">
<li>tty not working:
<ul class="org-ul">
<li>GRUB<sub>CMDLINE</sub><sub>LINUX</sub><sub>DEFAULT</sub>="apt-setup/multiverse=false ipv6.disable=1 console=tty1 noplymouth nomodeset vga=792"</li>
<li><a href="https://en.wikipedia.org/wiki/VESA_BIOS_Extensions#Linux_video_mode_numbers">https://en.wikipedia.org/wiki/VESA_BIOS_Extensions#Linux_video_mode_numbers</a></li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgcccd5ee" class="outline-3">
<h3 id="orgcccd5ee"><span class="section-number-3">25.1.</span> network</h3>
<div class="outline-text-3" id="text-25-1">
<ul class="org-ul">
<li>GRUB<sub>CMDLINE</sub><sub>LINUX</sub><sub>DEFAULT</sub>="ipv6.disable=1"</li>
<li>/etc/netplan/50-cloud-init.yaml</li>
</ul>
<p>
network:
    ethernets:
        enp3s0:
            dhcp4: false
            addresses: [192.168.2.148/24]
            gateway4: 192.168.2.51
            nameservers:
                addresses: [192.168.2.254]
    version: 2
</p>

<p>
netplan apply
ip route delete default via 192.168.2.51
</p>

<p>
<b>iptables</b>
</p>
<ul class="org-ul">
<li>iptables-save &gt; <i>etc/iptables</i>&#x2026;</li>
</ul>

<p>
<b>DNS</b>
</p>
<ul class="org-ul">
<li>systemctl disable systemd-resolved.service</li>
<li>/etc/resolv.conf - nameserver 1.2.3.4</li>
<li>nslookup finds ip, but ping doesnt <a href="https://askubuntu.com/questions/81797/nslookup-finds-ip-but-ping-doesnt">https://askubuntu.com/questions/81797/nslookup-finds-ip-but-ping-doesnt</a>
<ul class="org-ul">
<li>/etc/nsswitch.conf : hosts:          files dns</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org836f54b" class="outline-3">
<h3 id="org836f54b"><span class="section-number-3">25.2.</span> security</h3>
<div class="outline-text-3" id="text-25-2">
<p>
<b>rootless Xorg</b>
</p>
<ul class="org-ul">
<li>after installation of nvidia proprietary drivers</li>
<li>/etc/X11/Xwrapper.config</li>
<li>needs<sub>root</sub><sub>rights</sub>=no</li>
<li>startx &#x2013; vt1</li>
</ul>

<p>
<b>/etc/fstab</b> proc    /proc    proc    defaults,hidepid=2     0     0
</p>
</div>
</div>

<div id="outline-container-org4a33e39" class="outline-3">
<h3 id="org4a33e39"><span class="section-number-3">25.3.</span> time</h3>
<div class="outline-text-3" id="text-25-3">
<ul class="org-ul">
<li>ntp not used</li>
<li><a href="https://help.ubuntu.com/lts/serverguide/NTP.html#timedate-info">https://help.ubuntu.com/lts/serverguide/NTP.html#timedate-info</a></li>
<li>/etc/systemd/timesyncd.conf: NTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org</li>
<li>systemctl restart systemd-timesyncd.service</li>
</ul>
</div>
</div>
<div id="outline-container-orgc72eed7" class="outline-3">
<h3 id="orgc72eed7"><span class="section-number-3">25.4.</span> thumbrd</h3>
<div class="outline-text-3" id="text-25-4">
<p>
alias thumb-disable="chmod u-rwx <i>home/u2</i>.cache/thumbnails"
alias thumb-enable="chmod u+rwx <i>home/u2</i>.cache/thumbnails"
</p>
</div>
</div>
<div id="outline-container-orga0db35d" class="outline-3">
<h3 id="orga0db35d"><span class="section-number-3">25.5.</span> printer linux</h3>
<div class="outline-text-3" id="text-25-5">
<p>
HP LaserJet P3004/P3005 PCL6 Class Driver
192.168.2.230
</p>

<p>
steps:
</p>
<ul class="org-ul">
<li># apt-get install hplip</li>
<li># hp-setup -i 192.168.1.27</li>
</ul>
</div>
</div>
<div id="outline-container-org2a75882" class="outline-3">
<h3 id="org2a75882"><span class="section-number-3">25.6.</span> kerberos and Active Directory</h3>
<div class="outline-text-3" id="text-25-6">
<ul class="org-ul">
<li># apt-get install krb5-config krb5-user</li>
<li># dpkg-reconfigure krb5-config</li>
</ul>

<p>
/etc/krb5.conf:
</p>
<ul class="org-ul">
<li>default<sub>realm</sub> = INT.RUSNARBANK.RU</li>
<li>kdc = srv-dc-03.int.rusnarbank.ru</li>
<li>admin<sub>server</sub> = srv-dc-03.int.rusnarbank.ru</li>
</ul>

<p>
connect:
</p>
<ul class="org-ul">
<li>$ echo 'password' | kinit Chepelev<sub>VS</sub>@INT.RUSNARBANK.RU</li>
<li>$ klist    - проверить</li>
</ul>

<p>
<b>Thunderbird address book</b>
</p>
<ul class="org-ul">
<li>Name:Rusnarbank</li>
<li>Hostname: srv-dc-03.int.rusnarbank.ru</li>
<li>Base DN: DC=int,DC=rusnarbank,DC=ru</li>
<li>port: 389</li>
<li>Advanced Login methid:kerberos</li>
<li>Advanced search file: empty!</li>
</ul>
</div>
</div>

<div id="outline-container-orgc36883e" class="outline-3">
<h3 id="orgc36883e"><span class="section-number-3">25.7.</span> windows share</h3>
<div class="outline-text-3" id="text-25-7">
<ul class="org-ul">
<li>sudo apt install cifs-utils</li>
</ul>
</div>
</div>
<div id="outline-container-org3f7ec2d" class="outline-3">
<h3 id="org3f7ec2d"><span class="section-number-3">25.8.</span> VSCODE</h3>
<div class="outline-text-3" id="text-25-8">
<ul class="org-ul">
<li>wget -q <a href="https://packages.microsoft.com/keys/microsoft.asc">https://packages.microsoft.com/keys/microsoft.asc</a> -O- | sudo apt-key add -</li>
<li>sudo add-apt-repository "deb [arch=amd64] <a href="https://packages.microsoft.com/repos/vscode">https://packages.microsoft.com/repos/vscode</a> stable main"</li>
<li>sudo apt install code</li>
<li>$ code</li>
<li>во вкладке расширений - @builtin php</li>
<li>отключить PHP Language Features - стандартные возможности убоги</li>
<li>установить например: PHP Intelephense,</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0c94a35" class="outline-2">
<h2 id="org0c94a35"><span class="section-number-2">26.</span> Astra Linux - Debian derivative</h2>
<div class="outline-text-2" id="text-26">
<ul class="org-ul">
<li>apt, .deb - packages</li>
<li>десктопная, мобильная и серверная</li>
<li>ядро Linux с усиленной самозащитой (hardened) с интеграцией наработок проекта KSPP (Kernel Self Protection Project).</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">"Special Edition"</th>
<th scope="col" class="org-left">"Common Edition"</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">средствами защиты информации (СЗИ)</td>
<td class="org-left">репозиторий в The Linux Foundation</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
features:
</p>
<ul class="org-ul">
<li>Очистка оперативной и внешней памяти и гарантированное удаление файлов. при их освобождении, используя
маскирующие последовательности.</li>
<li>Вывод на печать документов без маркировки субъектами доступа, работающими в мандатном контексте с грифом
выше «несекретно», невозможен.</li>
<li>parlogd - Регистрация событий</li>
<li>Xorg - Fly - Механизмы защиты информации - Mandatory access control, MAC - изоляция приложений</li>
<li>Контроль целостности - функция хеширования в соответствии с ГОСТ Р 34.11-94.1.</li>
</ul>

<p>
repository: основной репозиторий (репозиторий установочного диска, main), базовый репозиторий (base) и
 расширенный репозиторий (extended).
</p>
</div>
<div id="outline-container-org5661ca6" class="outline-3">
<h3 id="org5661ca6"><span class="section-number-3">26.1.</span> Special Edition</h3>
<div class="outline-text-3" id="text-26-1">
<p>
Режимы защищенности:
</p>
<ul class="org-ul">
<li>«Базовый» («Орел», несертифицированная версия)</li>
<li>«Усиленный» («Воронеж»)
<ul class="org-ul">
<li>мандатного контроля целостности</li>
<li>замкнутая программная среда</li>
<li>подсистема безопасности PARSEC - разработана на основе верифицированной формальной модели безопасности управления доступом и информационными потоками (МРОСЛ ДП-модели).</li>
</ul></li>
<li>«Максимальный» («Смоленск»).
<ul class="org-ul">
<li>мандатное управление доступом для локальной и серверной инфраструктуры.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org105b6db" class="outline-3">
<h3 id="org105b6db"><span class="section-number-3">26.2.</span> мандатным контролем целостности (ГОСТ Р 59453.1-2021)</h3>
<div class="outline-text-3" id="text-26-2">
<p>
распределение информации или компонент в системе по заданным уровням целостности, исходя из которых
 назначаются права доступа на изменение объекта.
</p>

<p>
PARSEC обеспечивает защиту высокоцелостных компонент от несанкционированной записи из низкоцелостных компонент
</p>

<p>
пользователь root в Astra Linux Special Edition работает на минимальном уровне целостности 0.
</p>
</div>
</div>

<div id="outline-container-org4db1d84" class="outline-3">
<h3 id="org4db1d84"><span class="section-number-3">26.3.</span> замкнутая программная среда</h3>
<div class="outline-text-3" id="text-26-3">
<p>
ограничить запуск исполняемых файлов и загрузку исполняемых библиотек только теми, которые подписаны ЭЦП на
 доверительном ключе, что обеспечивает защиту от загрузки файла или библиотеки без корректной ЭЦП.
</p>
</div>
</div>
<div id="outline-container-orgf1938ad" class="outline-3">
<h3 id="orgf1938ad"><span class="section-number-3">26.4.</span> Мандатное управление доступом</h3>
<div class="outline-text-3" id="text-26-4">
<p>
принцип управления доступом, суть которого заключается в распределении информации по заданным уровням
 (конфиденциальности) и выполнении трех основных условий.
</p>
<ul class="org-ul">
<li>чтение данных доступно пользователю или процессу, который обладает уровнем конфиденциальности таким же, как</li>
</ul>
<p>
у этих данных, или выше.
</p>
<ul class="org-ul">
<li>запись данных доступна процессу, обладающему таким же или меньшим уровнем конфиденциальности по сравнению с данными.</li>
<li>действия процессов не приводят к утечке данных с высокого уровня конфиденциальности на низкий.</li>
</ul>

<p>
Контроль за соблюдением правил мандатного контроля целостности и мандатного управления доступом реализуется
 посредством монитора обращений PARSEC.
</p>
</div>
</div>
<div id="outline-container-org4269454" class="outline-3">
<h3 id="org4269454"><span class="section-number-3">26.5.</span> Технологии разработки безопасного ПО и формальная модель управления доступом</h3>
<div class="outline-text-3" id="text-26-5">
<p>
основа подсистемы безопасности PARSEC — МРОСЛ ДП-модель, описанная на языке формального метода Event-B.
</p>
<ul class="org-ul">
<li>Rodin IDE with ProB plugin</li>
<li>Frama-C code analyzis</li>
<li>Secure Software Development Lifecycle (SSDL) - practice</li>
</ul>
</div>
</div>

<div id="outline-container-org98774c5" class="outline-3">
<h3 id="org98774c5"><span class="section-number-3">26.6.</span> other</h3>
<div class="outline-text-3" id="text-26-6">
<ul class="org-ul">
<li>РЕД ОС - базировавшийся на CentOS 6, POSIX, LSB</li>
<li>ALT Linux -  являются отдельной ветвью развития Linux</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgbfa7a78" class="outline-2">
<h2 id="orgbfa7a78"><span class="section-number-2">27.</span> REDHAT/AlmaLinux</h2>
<div class="outline-text-2" id="text-27">
<p>
RPM Package Manager - Under the hood, YUM depends on RPM (Red Hat Package Manager) .rpm
</p>

<p>
DNF (Dandified YUM) - next-generation version of the Yellowdog Updater, Modified (yum)
</p>

<ul class="org-ul">
<li>rpm -ql package # get installed files of installed packages</li>
<li>yum install ?.rpm</li>
<li>yum list installed | grep # check if installed package</li>
<li>yum search package # search in all available packages</li>
<li>yum repolist # attached repositories</li>
<li>dnf group list # package groups</li>
<li>dnf group info Xfce # info on group</li>
<li>dnf group list &#x2013;installed # installed groups</li>
<li>dnf group install Xfce or dnf install @Xfce</li>
</ul>

<p>
repos
</p>
<ul class="org-ul">
<li>dnf repolist</li>
<li>dnf config-manager &#x2013;disable cuda-rhel9-x86<sub>64</sub> # disable repository</li>
</ul>



<p>
files:
</p>
<ul class="org-ul">
<li>/etc/yum.conf</li>
<li><i>etc/yum</i> # configs</li>
<li><i>etc/yum.repos.d</i> # repos info</li>
</ul>

<p>
pycharm installation:
</p>
<ul class="org-ul">
<li>dnf install snapd</li>
<li>systemctl start snapd</li>
<li>ln -s /var/lib/snapd/snap /snap</li>
<li>sudo snap install pycharm-community &#x2013;classic</li>
</ul>
</div>

<div id="outline-container-orge6f300f" class="outline-3">
<h3 id="orge6f300f"><span class="section-number-3">27.1.</span> cudnn</h3>
<div class="outline-text-3" id="text-27-1">
<p>
nvidia-installer &#x2013;uninstall
</p>

<p>
repository cuda-rhel9-x86<sub>64</sub>
</p>
<ul class="org-ul">
<li><a href="https://developer.nvidia.com/cuda-11-8-0-download-archive">https://developer.nvidia.com/cuda-11-8-0-download-archive</a></li>
<li>dnf install libcudnn8-devel</li>
<li>dnf install cuda-cudart-12-2</li>
</ul>



<p>
<a href="https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#verify">https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#verify</a>
</p>
</div>
</div>
<div id="outline-container-org4a61ff8" class="outline-3">
<h3 id="org4a61ff8"><span class="section-number-3">27.2.</span> tigervnc server</h3>
<div class="outline-text-3" id="text-27-2">
<ul class="org-ul">
<li>dnf install tigervnc-server-minimal</li>
<li>cp /lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@:1.service</li>
<li>add 5901/tcp to firewall</li>
<li>echo ':1=myuser' &gt;&gt; /etc/tigervnc/vncserver.users</li>
<li>$ echo 'session=xfce' &gt; ~/.vnc/config</li>
</ul>

<p>
<a href="https://www.ibm.com/support/pages/how-configure-vnc-server-red-hat-enterprise-linux-8">https://www.ibm.com/support/pages/how-configure-vnc-server-red-hat-enterprise-linux-8</a>
</p>
</div>
</div>
<div id="outline-container-orgec90dfd" class="outline-3">
<h3 id="orgec90dfd"><span class="section-number-3">27.3.</span> container toolkit</h3>
<div class="outline-text-3" id="text-27-3">
<ul class="org-ul">
<li>distribution=rhel9.2 &amp;&amp; curl -s -L <a href="https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.repo">https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.repo</a> | sudo tee /etc/yum.repos.d/nvidia-container-toolkit.repo</li>
<li>dnf install nvidia-container-toolkit.repo</li>
<li>dnf install nvidia-container-toolkit-base-1.12.0-1</li>
<li>dnf install libnvidia-container1-1.12.0-1</li>
<li>dnf install nvidia-container-toolkit-1.12.0-1</li>
<li>dnf install nvidia-container-runtime-3.12.0</li>
<li>containerd config default | tee /etc/containerd/config.toml</li>
</ul>
</div>
</div>

<div id="outline-container-org6264e59" class="outline-3">
<h3 id="org6264e59"><span class="section-number-3">27.4.</span> nftables</h3>
<div class="outline-text-3" id="text-27-4">
<p>
The service reads rules from /etc/sysconfig/nftables.conf.
</p>

<pre class="example">
nft list ruleset &gt; /etc/sysconfig/nftables.conf
</pre>
</div>
</div>
</div>
<div id="outline-container-org1be984d" class="outline-2">
<h2 id="org1be984d"><span class="section-number-2">28.</span> termux</h2>
<div class="outline-text-2" id="text-28">
<p>
Java, GPLv3 only
</p>

<ul class="org-ul">
<li>pkg upgrade</li>
<li>pkg install man</li>
<li>pkg install iproute2</li>
<li>pkg install termux-api</li>
</ul>
</div>
<div id="outline-container-orgbad0cf0" class="outline-3">
<h3 id="orgbad0cf0"><span class="section-number-3">28.1.</span> how it works</h3>
<div class="outline-text-3" id="text-28-1">
<p>
Programs are executed natively.
</p>

<p>
application that launches the command line program by using system call execve(2) and redirecting standard
 input, output and error streams onto the display.
</p>

<p>
All provided packages are cross-compiled with Android NDK and only have compatibility patches to get them working on Android
</p>

<p>
Termux is single-user -  username may look like u0<sub>a231</sub> and cannot be changed as it is derived from the user id by Bionic libc.
</p>

<p>
All our packages (except root-only ones) are patched to drop any multiuser, setuid/setgid and other similar
 functionality. We also changed default ports for server packages: ftpd, httpd and sshd have their default
 ports set to 8021, 8080 and 8022 respectively.
</p>

<p>
You have free read-write access to all application components including $PREFIX. Be careful since it is very
 easy to break things by accidentally deleting or overwriting files in $PREFIX.
</p>

<p>
If Android OS reports support only of 32-bit ABIs, Termux will perform a 32-bit installation only.
</p>
</div>
</div>

<div id="outline-container-org4df9138" class="outline-3">
<h3 id="org4df9138"><span class="section-number-3">28.2.</span> terms</h3>
<div class="outline-text-3" id="text-28-2">
<ul class="org-ul">
<li>prefix - /data/data/com.termux/files/usr - as /</li>
<li>home - /data/data/com.termux/files/home - as /home/user</li>
</ul>
</div>
</div>
<div id="outline-container-orgde9f504" class="outline-3">
<h3 id="orgde9f504"><span class="section-number-3">28.3.</span> ps</h3>
<div class="outline-text-3" id="text-28-3">
<p>
Termux can list only its own processes. You can see more only under rooted shell or ADB.
</p>
<ul class="org-ul">
<li>some processes, result can't be terminated with pkill &lt;NAME&gt; or killall &lt;NAME&gt; but only with kill &lt;PID&gt;.</li>
</ul>
</div>
</div>
<div id="outline-container-org5bb6532" class="outline-3">
<h3 id="org5bb6532"><span class="section-number-3">28.4.</span> ways to transfer files</h3>
<div class="outline-text-3" id="text-28-4">
<p>
ssh
</p>
</div>
</div>
<div id="outline-container-orgf8c1ba9" class="outline-3">
<h3 id="orgf8c1ba9"><span class="section-number-3">28.5.</span> metasploit</h3>
<div class="outline-text-3" id="text-28-5">
<ul class="org-ul">
<li>apt install curl</li>
<li>curl -LO <a href="https://raw.githubusercontent.com/Hax4us/Metasploit_termux/master/metasploit.sh">https://raw.githubusercontent.com/Hax4us/Metasploit_termux/master/metasploit.sh</a></li>
<li>chmod 777 metasploit.sh</li>
<li>./metasploit.sh</li>
</ul>
</div>
</div>
<div id="outline-container-org7ae5270" class="outline-3">
<h3 id="org7ae5270"><span class="section-number-3">28.6.</span> termux-</h3>
<div class="outline-text-3" id="text-28-6">
<ul class="org-ul">
<li>termux-am - Android Oreo-compatible am command reimplementation.</li>
<li>termux-am-socket</li>
<li>termux-backup</li>
<li>termux-change-repo</li>
<li>termux-fix-shebang</li>
<li>termux-info</li>
<li>termux-open</li>
<li>termux-open-uri</li>
<li>termux-reload-settings</li>
<li>termux-reset</li>
<li>termux-restore</li>
<li>termux-setup-package-manager</li>
<li>termux-setup-storage</li>
<li>termux-wake-lock</li>
<li>termux-wake-unlock</li>
</ul>
</div>
</div>

<div id="outline-container-org9889f30" class="outline-3">
<h3 id="org9889f30"><span class="section-number-3">28.7.</span> links</h3>
<div class="outline-text-3" id="text-28-7">
<ul class="org-ul">
<li><a href="https://github.com/termux/termux-app">https://github.com/termux/termux-app</a></li>
<li><a href="https://termux.github.io/">https://termux.github.io/</a></li>
<li><a href="https://wiki.termux.com/wiki/Main_Page">https://wiki.termux.com/wiki/Main_Page</a></li>
<li><a href="https://wiki.termux.com/wiki/Internal_and_external_storage">https://wiki.termux.com/wiki/Internal_and_external_storage</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7d07d0b" class="outline-2">
<h2 id="org7d07d0b"><span class="section-number-2">29.</span> <span class="todo TODO">TODO</span> Haskell</h2>
<div class="outline-text-2" id="text-29">
</div>
<div id="outline-container-orgceacd45" class="outline-3">
<h3 id="orgceacd45"><span class="section-number-3">29.1.</span> comparision</h3>
<div class="outline-text-3" id="text-29-1">
<p>
haskell
</p>
<ul class="org-ul">
<li><b>composability</b> - liberal use of many tiny functions, or UNIX philosophy</li>
<li><b>fusion</b> little functions may be pipelined with dot . (fused)</li>
</ul>

<p>
lisp pros
</p>
<dl class="org-dl">
<dt>monolithism</dt><dd>procedure tends ti accept many options which configure its behaviou</dd>
<dt>(no term)</dt><dd>parameter is added to existing function. Composition is a bit wordier and rarely used.</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-org15ea502" class="outline-2">
<h2 id="org15ea502"><span class="section-number-2">30.</span> AWK</h2>
<div class="outline-text-2" id="text-30">
<ul class="org-ul">
<li><a href="https://www.gnu.org/software/gawk/manual/gawk.pdf">https://www.gnu.org/software/gawk/manual/gawk.pdf</a></li>
<li><a href="https://github.com/freznicek/awesome-awk">https://github.com/freznicek/awesome-awk</a></li>
<li><a href="https://www.gnu.org/software/gawk/manual/gawk.html">https://www.gnu.org/software/gawk/manual/gawk.html</a></li>
</ul>
</div>
<div id="outline-container-org57f4ca0" class="outline-3">
<h3 id="org57f4ca0"><span class="section-number-3">30.1.</span> terms</h3>
<div class="outline-text-3" id="text-30-1">
<ul class="org-ul">
<li>field - column separated by white space</li>
<li>record - line of input</li>
</ul>
</div>
</div>
<div id="outline-container-orgce04dd3" class="outline-3">
<h3 id="orgce04dd3"><span class="section-number-3">30.2.</span> structure</h3>
<div class="outline-text-3" id="text-30-2">
<ul class="org-ul">
<li>BEGIN {commands} - initialization of variables</li>
<li><i>pattern</i> {commands} <i>pattern</i> {commands} &#x2026; - on every line</li>
<li>END {commands} -</li>
</ul>
</div>
</div>
<div id="outline-container-orgd051916" class="outline-3">
<h3 id="orgd051916"><span class="section-number-3">30.3.</span> Built-in variables</h3>
<div class="outline-text-3" id="text-30-3">
<ul class="org-ul">
<li>field variables: $1, $2, $3, and so on ($0 represents the entire record)</li>
<li>NR: Number of Records. Keeps a current count of the number of input records read so far from all data
files. It starts at zero, but is never automatically reset to zero.[14]</li>
<li>FNR: File Number of Records. Keeps a current count of the number of input records read so far in the current
file. This variable is automatically reset to zero each time a new file is started.[14]</li>
<li>NF: Number of Fields. Contains the number of fields in the current input record. The last field in the input
record can be designated by $NF, the 2nd-to-last field by $(NF-1), the 3rd-to-last field by $(NF-2), etc.</li>
<li>FILENAME: Contains the name of the current input-file.</li>
<li>FS: Field Separator. Contains the "field separator" used to divide fields in the input record. The default,
"white space", allows any sequence of space and tab characters. FS can be reassigned with another character
or character sequence to change the field separator.</li>
<li>RS: Record Separator. Stores the current "record separator" character. Since, by default, an input line is
the input record, the default record separator character is a "newline".</li>
<li>OFS: Output Field Separator. Stores the "output field separator", which separates the fields when Awk prints
them. The default is a "space" character.</li>
<li>ORS: Output Record Separator. Stores the "output record separator", which separates the output records when
Awk prints them. The default is a "newline" character.</li>
<li>OFMT: Output Format. Stores the format for numeric output. The default format is "%.6g".</li>
</ul>
</div>
</div>
<div id="outline-container-org2614044" class="outline-3">
<h3 id="org2614044"><span class="section-number-3">30.4.</span> loops</h3>
<div class="outline-text-3" id="text-30-4">
<ul class="org-ul">
<li>for (initialization; condition; increment/decrement) action</li>
<li>while (condition) action</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-org3b3e07e" class="outline-3">
<h3 id="org3b3e07e"><span class="section-number-3">30.5.</span> commands</h3>
<div class="outline-text-3" id="text-30-5">
<p>
print
</p>
<ul class="org-ul">
<li>print $1, $3 - Displays the first and third fields of the current record, separated by a predefined string
called the output field separator (OFS)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org28737e0" class="outline-2">
<h2 id="org28737e0"><span class="section-number-2">31.</span> network</h2>
<div class="outline-text-2" id="text-31">
</div>
<div id="outline-container-orgd3b49d5" class="outline-3">
<h3 id="orgd3b49d5"><span class="section-number-3">31.1.</span> theory</h3>
<div class="outline-text-3" id="text-31-1">
<p>
network segment - layer 1. connected devices
</p>

<p>
<b>devices</b>
</p>
<ul class="org-ul">
<li>router - network layer (layer 3). uses destination IP address. connect different IP networks</li>
<li>bridge -  data link layer (layer 2).  multiport bridge function serves as the basis for network switches.
<ul class="org-ul">
<li>switch - data link layer (layer 2) of the OSI model. receive and forward data to the destination
device. uses hardware addresses (MAC addresses).
<ul class="org-ul">
<li>Multilayer switch - OSI layer 2 like an ordinary network switch and provides extra functions on higher OSI layer</li>
</ul></li>
</ul></li>
<li>hub (repeater hubs) - physical layer (layer 1) of the OSI model - connecting multiple Ethernet devices
together and making them act as a single network segment, signal introduced at the input of any port appears
at the output of every port except the original incoming.  learns the identities of connected devices and
then only forwards data to the port connected to the device to which it is addressed</li>
</ul>
</div>
<div id="outline-container-org4d1236f" class="outline-4">
<h4 id="org4d1236f"><span class="section-number-4">31.1.1.</span> ip output</h4>
<div class="outline-text-4" id="text-31-1-1">
<ol class="org-ol">
<li>enp5s1: &lt;BROADCAST,MULTICAST,UP,LOWER<sub>UP</sub>&gt; mtu 1500 qdisc pfifo<sub>fast</sub> state UP group default qlen 1000
<ul class="org-ul">
<li>device</li>
<li>physical layer or Device flags <a href="https://man7.org/linux/man-pages/man7/netdevice.7.html">https://man7.org/linux/man-pages/man7/netdevice.7.html</a></li>
<li>mtu -  maximum transmission unit  - maximum packet size</li>
<li>qdisc - queuing mechanism. There are different queuing techniques called disciplines. noqueue discipline
means “send instantly, don’t queue.”</li>
<li>state
<ul class="org-ul">
<li>DOWN (the network interface is not operational)</li>
<li>UNKNOWN (the network interface is operational but nothing is connected)</li>
<li>UP (the network is operational and there is a connection).</li>
</ul></li>
<li>group default - Interfaces can be grouped logically</li>
<li>qlen 1000 - maximum length of the transmission queue.</li>
<li>mode</li>
</ul></li>
<li>link/ether 5a:ec:ea:71:df:7a brd ff:ff:ff:ff:ff:ff
<ul class="org-ul">
<li>link/loopback -</li>
<li>link/ether - media access control (MAC) address of the interface.
<ul class="org-ul">
<li>permaddr -  permanent hardware address.</li>
</ul></li>
</ul></li>
<li>inet 10.77.61.30/24 scope global tap0
<ul class="org-ul">
<li>Classless Inter-Domain Routing notation</li>
<li>scope host -  IP address scope -  IP address is only valid inside the computer (the “host”)</li>
</ul></li>
<li>_ valid<sub>lft</sub> forever preferred<sub>lft</sub> forever
<ul class="org-ul">
<li>valid<sub>lft</sub> - (DHCP), this is the length of time the IP address is considered valid</li>
<li>preferred<sub>lft</sub> - DHCP, this is the amount of time the IP address can be used with no restrictions. This
should never be larger than the valid<sub>lft</sub> value.</li>
</ul></li>
<li>inet6 fe80::ac92:e9ff:fe17:a939/64 scope link</li>
<li>_ valid<sub>lft</sub> forever preferred<sub>lft</sub> forever</li>
</ol>

<p>
statistic
</p>
<ul class="org-ul">
<li>ip -s a</li>
<li>cat /proc/net/dev</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org14b2461"></a>links<br />
<div class="outline-text-5" id="text-31-1-1-1">
<ul class="org-ul">
<li>/usr/include/linux/if.h</li>
<li><a href="https://www.computerhope.com/unix/ip.htm">https://www.computerhope.com/unix/ip.htm</a></li>
<li><a href="https://www.howtogeek.com/657911/how-to-use-the-ip-command-on-linux/">https://www.howtogeek.com/657911/how-to-use-the-ip-command-on-linux/</a></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orge00dff8" class="outline-4">
<h4 id="orge00dff8"><span class="section-number-4">31.1.2.</span> ip route</h4>
<div class="outline-text-4" id="text-31-1-2">
<ul class="org-ul">
<li>ip route - new</li>
<li>route / netstat -r - old</li>
</ul>
<p>
routing table - keep settings
</p>

<p>
Netmask <a href="https://www.ietf.org/rfc/rfc1878.txt">https://www.ietf.org/rfc/rfc1878.txt</a>
</p>
<ul class="org-ul">
<li>192.168.0.1/32 = 255.255.255.255: just the address 192.168.0.1</li>
<li>/24 = 255.255.255.0</li>
<li>192.168.0.1/0 = 0.0.0.0: all 4.3 billion addresses from 0.0.0.0 to 255.255.255.255</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org198fb7b"></a>route:<br />
<div class="outline-text-5" id="text-31-1-2-1">
<dl class="org-dl">
<dt>Destination</dt><dd>The destination network or destination host.</dd>
<dt>Gateway</dt><dd>address to send</dd>
<dt>Genmask</dt><dd>255.255.255.255 for a host destination and 0.0.0.0 for the default route. (Destination + Genmask)</dd>
<dt>Flags</dt><dd>Possible flags include</dd>
<dt>(no term)</dt><dd>U (route is up)</dd>
<dt>(no term)</dt><dd>H (target is a host)</dd>
<dt>(no term)</dt><dd>G (use gateway)</dd>
<dt>(no term)</dt><dd>R (reinstate route for dynamic routing)</dd>
<dt>(no term)</dt><dd>D (dynamically installed by daemon or redirect)</dd>
<dt>(no term)</dt><dd>M (modified from routing daemon or redirect)</dd>
<dt>(no term)</dt><dd>A (installed by addrconf)</dd>
<dt>(no term)</dt><dd>C (cache entry)</dd>
<dt>(no term)</dt><dd>! (reject route)</dd>
<dt>Metric</dt><dd>The distance to the target (usually counted in hops). It is not used by recent kernels, but may be
needed by routing daemons. e lower number represents the better route</dd>
</dl>
</div>
</li>
<li><a id="orgfd1523f"></a>ip route<br />
<div class="outline-text-5" id="text-31-1-2-2">
<ul class="org-ul">
<li>10.77.61.0      0.0.0.0         255.255.255.0   U     0      0        0 tap0</li>
<li>10.77.61.0/24 dev tap0 proto kernel scope link src 10.77.61.30</li>
<li>destination mask - via (gateway) - dev (destination) - proto - scope - src (source ip) - metric</li>
<li>scope link: The scope is link, which means the scope is limited to the network to which this computer is
directly connected.</li>
<li>proto kernel: The route created by the kernel during auto-configuration.</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgc0d213b" class="outline-4">
<h4 id="orgc0d213b"><span class="section-number-4">31.1.3.</span> ip neigh</h4>
<div class="outline-text-4" id="text-31-1-3">
<p>
Address Resolution Protocol (ARP)
</p>
</div>
</div>
<div id="outline-container-org00c26c7" class="outline-4">
<h4 id="org00c26c7"><span class="section-number-4">31.1.4.</span> <span class="todo TODO">TODO</span> ip maddress</h4>
</div>
</div>
<div id="outline-container-org381485c" class="outline-3">
<h3 id="org381485c"><span class="section-number-3">31.2.</span> iproute2 - controlling TCP / IP - new one</h3>
<div class="outline-text-3" id="text-31-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">net-tools - legacy</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">note</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">ifconfig</td>
<td class="org-left">ip addr, ip link</td>
<td class="org-left">Address and link configuration</td>
</tr>

<tr>
<td class="org-left">route</td>
<td class="org-left">ip route</td>
<td class="org-left">Routing tables</td>
</tr>

<tr>
<td class="org-left">arp</td>
<td class="org-left">ip neigh</td>
<td class="org-left">Neighbors</td>
</tr>

<tr>
<td class="org-left">iptunnel</td>
<td class="org-left">ip tunnel</td>
<td class="org-left">Tunnels</td>
</tr>

<tr>
<td class="org-left">nameif, ifrename</td>
<td class="org-left">ip link set name</td>
<td class="org-left">Rename network interfaces</td>
</tr>

<tr>
<td class="org-left">ipmaddr</td>
<td class="org-left">ip maddr</td>
<td class="org-left">Multicast</td>
</tr>

<tr>
<td class="org-left">netstat</td>
<td class="org-left">ss, ip route</td>
<td class="org-left">Show various networking statistics</td>
</tr>

<tr>
<td class="org-left">brctl</td>
<td class="org-left">bridge</td>
<td class="org-left">Handle bridge addresses and devices</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-org5dd463a" class="outline-4">
<h4 id="org5dd463a"><span class="section-number-4">31.2.1.</span> ip route</h4>
<div class="outline-text-4" id="text-31-2-1">
<p>
route -n - show numerical addresses instead of trying to determine symbolic host names.
</p>

<ul class="org-ul">
<li>Assign an IP Address to a Specific Interface:  ip addr add 192.168.50.5 dev eth1</li>
<li>add static route: ip route add 10.10.20.0/24 via 192.168.50.100 dev eth0
<ul class="org-ul">
<li>persistent /etc/sysconfig/network-scripts/route-eth0:
<ul class="org-ul">
<li>10.10.20.0/24 via 192.168.50.100 dev eth0</li>
</ul></li>
<li>ubuntu persistent:
<ul class="org-ul">
<li>/etc/network/interfaces:
<ul class="org-ul">
<li>up ip route add 10.10.20.0/24 via 192.168.50.100 dev eth0</li>
</ul></li>
</ul></li>
</ul></li>
<li>remove route: ip route del 10.10.20.0/24</li>
<li>Add Default Gateway: ip route add default via 192.168.50.100</li>
</ul>
</div>
</div>
<div id="outline-container-org83946a7" class="outline-4">
<h4 id="org83946a7"><span class="section-number-4">31.2.2.</span> ss</h4>
<div class="outline-text-4" id="text-31-2-2">
<p>
local  | remote addr
</p>

<p>
incoming connections - when source port are listening. (But It is possible to reuse listening port)
</p>
<ul class="org-ul">
<li>ss state established - filter by state</li>
<li>ss '( sport = :443 or dport = :443 )' - filter by port</li>
<li>ss dst 127.0.0.1 - filter by remote ip</li>
<li>ss -plat list all listening</li>
<li>netstat -tpe - monitor programs that are making connections to remote hosts
<ul class="org-ul">
<li>-t TCP</li>
<li>-p - display PID</li>
<li>-e - display extra information</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf74dffb" class="outline-4">
<h4 id="orgf74dffb"><span class="section-number-4">31.2.3.</span> USE CASES</h4>
<div class="outline-text-4" id="text-31-2-3">
<ul class="org-ul">
<li>ip link set up eth1 - Activate or Deactivate a Network Interface</li>
<li>ip addr add 10.0.0.1/24 broadcast 10.0.0.255 dev eth1 - Assign IPv4 address(es) to a Network Interface</li>
<li>ip -6 addr add 2002:0db5:0:f102::1/64 dev eth1</li>
<li>ip addr del 10.0.0.1/24 dev eth1 - Remove an IPv4 address from a Network Interface</li>
<li>ip route show - routing table</li>
<li>ss -l - Socket Statistics</li>
<li>ip neigh - ARP</li>
<li>ip link set name - Rename network interfaces</li>
<li>ip maddr - Multicast</li>
<li>ip -s, ss, ip route 	Show various networking statistics</li>
</ul>
</div>
</div>
<div id="outline-container-org971a0d5" class="outline-4">
<h4 id="org971a0d5"><span class="section-number-4">31.2.4.</span> all commands</h4>
<div class="outline-text-4" id="text-31-2-4">
<ul class="org-ul">
<li>arpd</li>

<li>bridge Handle bridge addresses and devices</li>

<li>ctstat</li>

<li>dcb</li>

<li>devlink</li>

<li>ip - main</li>

<li>lnstat</li>

<li>nstat</li>

<li>rdma</li>

<li>routef</li>

<li>routel</li>

<li>rtacct</li>

<li>rtmon</li>

<li>rtstat</li>

<li>ss - another utility to investigate sockets</li>

<li>tc - show / manipulate traffic control settinsg</li>

<li>tipc - a TIPC configuration and management tool</li>

<li>ip tunnel - tunnel configuration</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgeae8bfa" class="outline-3">
<h3 id="orgeae8bfa"><span class="section-number-3">31.3.</span> net-tools - based on /proc - too old</h3>
<div class="outline-text-3" id="text-31-3">
<ul class="org-ul">
<li>arp is used to manipulate the kernel's ARP cache, usually to add or delete an entry, or to dump the entire cache.</li>
<li>dnsdomainname reports the system's DNS domain name.</li>
<li>domainname reports or sets the system's NIS/YP domain name.</li>
<li>hostname reports or sets the name of the current host system.</li>
<li>ifconfig is the main utility for configuring network interfaces.</li>
<li>nameif names network interfaces based on MAC addresses.</li>
<li>netstat is used to report network connections, routing tables, and interface statistics..</li>
<li>nisdomainname does the same as domainname.</li>
<li>plipconfig is used to fine tune the PLIP device parameters, to improve its performance.</li>
<li>rarp is used to manipulate the kernel's RARP table.</li>
<li>route is used to manipulate the IP routing table.</li>
<li>slattach attaches a network interface to a serial line. This allows you to use normal terminal lines for point-to-point links to other computers.</li>
<li>ypdomainname does the same as domainname.</li>
</ul>
</div>
<div id="outline-container-org295ec8d" class="outline-4">
<h4 id="org295ec8d"><span class="section-number-4">31.3.1.</span> arp</h4>
<div class="outline-text-4" id="text-31-3-1">
<p>
arp -an
</p>
<ul class="org-ul">
<li>ip neigh</li>
</ul>
</div>
</div>
<div id="outline-container-org64aaedc" class="outline-4">
<h4 id="org64aaedc"><span class="section-number-4">31.3.2.</span> ifconfig</h4>
</div>
<div id="outline-container-org89b0f8f" class="outline-4">
<h4 id="org89b0f8f"><span class="section-number-4">31.3.3.</span> route</h4>
<div class="outline-text-4" id="text-31-3-3">
<ul class="org-ul">
<li>netstat -rn</li>
<li>ip route show</li>
</ul>
</div>
</div>

<div id="outline-container-orgaac3ea9" class="outline-4">
<h4 id="orgaac3ea9"><span class="section-number-4">31.3.4.</span> netstat</h4>
<div class="outline-text-4" id="text-31-3-4">
<p>
netstat -l - socket statistic
</p>
<ul class="org-ul">
<li>ip -s, ss, ip route 	Show various networking statistics</li>
</ul>
</div>
</div>
<div id="outline-container-org8add000" class="outline-4">
<h4 id="org8add000"><span class="section-number-4">31.3.5.</span> iptunnel</h4>
</div>
<div id="outline-container-org3ac6c4c" class="outline-4">
<h4 id="org3ac6c4c"><span class="section-number-4">31.3.6.</span> brctl</h4>
<div class="outline-text-4" id="text-31-3-6">
<ul class="org-ul">
<li>bridge</li>
</ul>
</div>
</div>
<div id="outline-container-orge08509f" class="outline-4">
<h4 id="orge08509f"><span class="section-number-4">31.3.7.</span> ifstat</h4>
</div>
</div>

<div id="outline-container-org5234325" class="outline-3">
<h3 id="org5234325"><span class="section-number-3">31.4.</span> lsof</h3>
<div class="outline-text-3" id="text-31-4">
<p>
LiSts all Open Files
</p>
<ul class="org-ul">
<li>lsof -iTCP -sTCP:LISTEN -P -n
<ul class="org-ul">
<li>-P подавляет, для сетевых файлов, преобразование номеров портов в имена портов.</li>
<li>-i позволяет вывести сведения о файлах, интернет-адреса которых соответствуют заданному адресу.</li>
</ul></li>
<li>lsof -u cindy | wc -l - список файлов, открытых конкретным пользователем.</li>
<li>lsof -u<sup>cindy</sup> | wc -l -  количество файлов на компьютере, которые открыты всеми пользователями за исключением cindy</li>
<li>-c сведения о файлах, которые держат открытыми процессы, выполняющие команды, имена которых начинаются с заданных символов.</li>
<li>lsof -cpython | head -15 -  первые 15 файлов, открытых всеми процессами Python, выполняющимися на компьютере.</li>
<li>lsof +d /usr/bin | head -4 - какие папки и файлы открыты в некоей директории</li>
<li>lsof -p вывести все файлы, открытые процессом с указанным при вызове команды PID.</li>
<li>Опция -t подавляет вывод всей информации за исключением ID процессов.</li>
<li>lsof -l dir - сведения обо всех процессах, имеющих открытые дескрипторы файлов в директории</li>
</ul>
</div>
</div>

<div id="outline-container-orgba80746" class="outline-3">
<h3 id="orgba80746"><span class="section-number-3">31.5.</span> dig</h3>
<div class="outline-text-3" id="text-31-5">
<p>
<a href="https://whois.urih.com/record/11.123.86.62/">https://whois.urih.com/record/11.123.86.62/</a>
</p>

<p>
DNS lookups and displays the answers
</p>
<ul class="org-ul">
<li>net-dns/bind-tools</li>
<li>apt install dnsutils</li>
</ul>
<p>
examples:
</p>
<ul class="org-ul">
<li>dig howtogeek.com - get DNS information</li>
<li>dig -x 1.1.1.1  - reverse DNS requiest or Reverse IP Lookup (ping -a 1.1.1.1)
<ul class="org-ul">
<li>dig ptr 148.188.51.209.in-addr.arpa - same</li>
</ul></li>
<li>dig -x 59.59.59.59 + short</li>
<li>type of DNS record</li>
<li>dig howtogeek.com +shor</li>
<li>dig howtogeek.com +nocomments</li>
<li>dig redhat.com MX  +noall +answer</li>
<li>dig redhat.com  +noall +answer - only important</li>
</ul>

<p>
dig [@server] [name] [type]
</p>
<ul class="org-ul">
<li>@8.8.8.8 - dns server</li>
<li>name - dns or IP</li>
<li>type of DNS record
<ul class="org-ul">
<li>A Record: Links the domain to an IP version 4 address.</li>
<li>MX Record: Mail exchange records direct emails sent to domains to the correct mail server.</li>
<li>NS Record: Name server records delegate a domain (or subdomain) to a set of DNS servers.</li>
<li>TXT Record: Text records store text-based information regarding the domain. Typically, they might be used to suppress spoofed or forged email.</li>
<li>SOA Record: Start of authority records can hold a lot of information about the domain. Here, you can find the primary name server, the responsible party, a timestamp for changes, the frequency of zone refreshes, and a series of time limits for retries and abandons.</li>
<li>TTL: Time to live is a setting for each DNS record that specifies how long a DNS precursor server is allowed to cache each DNS query. When that time expires, the data must be refreshed for subsequent requests.</li>
<li>ANY: This tells dig to return every type of DNS record it can.</li>
</ul></li>
</ul>

<pre class="example">
dig +qr arteus.cy ANY
</pre>
</div>
</div>
<div id="outline-container-orgf919471" class="outline-3">
<h3 id="orgf919471"><span class="section-number-3">31.6.</span> nslookup</h3>
<div class="outline-text-3" id="text-31-6">
<p>
DNS lookups and displays the answers
</p>
<ul class="org-ul">
<li>-port=[port-number]	Specify the port for queries. The default port number is 53.</li>
<li>-type=any 	View all available records. - Not all actualy</li>
<li>-type=txt	View Text Records</li>
<li>-type=ns	View Domain's NS Records</li>
<li>-type=mx	Mail Exchange server data.</li>
<li>-type=soa	Start of Authority (SOA) records provide authoritative information about the domain and the
server, such as the email address of the administrator, serial number, refresh interval, query expiration
time, etc.</li>
<li>nslookup -type=ptr [reverse-ip-address].in-addr.arpa</li>
<li>nslookup  &lt;IP address&gt; - reverse lookup</li>
</ul>

<p>
Internationalized domain name -
</p>
<ul class="org-ul">
<li>IDNA ToASCII algorithm</li>
<li>ToASCII and ToUnicode.
<ul class="org-ul">
<li>not applied to the domain name as a whole, but rather to individual labels - to each part separately</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9c82ad3" class="outline-3">
<h3 id="org9c82ad3"><span class="section-number-3">31.7.</span> host</h3>
<div class="outline-text-3" id="text-31-7">
<p>
host 8.8.8.8 - reverse dns lookup
</p>
</div>
</div>
<div id="outline-container-orgb0dfa71" class="outline-3">
<h3 id="orgb0dfa71"><span class="section-number-3">31.8.</span> traceroute</h3>
</div>
<div id="outline-container-org6a34bb4" class="outline-3">
<h3 id="org6a34bb4"><span class="section-number-3">31.9.</span> whois</h3>
<div class="outline-text-3" id="text-31-9">
<ul class="org-ul">
<li>net-misc/whois improved Whois Client GPL-2</li>
<li>net-misc/jwhois Advanced Internet Whois client capable of recursive queries  GPL-3</li>
</ul>
</div>
</div>


<div id="outline-container-org85062a9" class="outline-3">
<h3 id="org85062a9"><span class="section-number-3">31.10.</span> iptables</h3>
<div class="outline-text-3" id="text-31-10">
<ul class="org-ul">
<li>iptables -F &#x2013;flush chain - delete all rules</li>
<li>iptables -P &#x2013;policy chain target - target must be ACCEPT or DROP - default policy for chain</li>
<li>iptables -A &#x2013;append chain rule</li>
</ul>
</div>
<div id="outline-container-orge32ac3b" class="outline-4">
<h4 id="orge32ac3b"><span class="section-number-4">31.10.1.</span> tables and chains</h4>
<div class="outline-text-4" id="text-31-10-1">
<ul class="org-ul">
<li>filter:
<ul class="org-ul">
<li>INPUT</li>
<li>FORWARD</li>
<li>OUTPUT</li>
</ul></li>
<li>nat:
<ul class="org-ul">
<li>PREROUTING</li>
<li>OUTPUT</li>
<li>POSTROUTING</li>
</ul></li>
<li>mangle - specialized packet alteration
<ul class="org-ul">
<li>PREROUTING - incoming packets before routing</li>
<li>OUTPUT</li>
<li>INPUT</li>
<li>FORWARD</li>
<li>POSTROUTING - about to go out</li>
</ul></li>
<li>raw: - to set a mark on packets that they should not be handled by the connection tracking system
ip<sub>conntrack</sub>
<ul class="org-ul">
<li>PREROUTING</li>
<li>OUTPUT</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org2954e92" class="outline-4">
<h4 id="org2954e92"><span class="section-number-4">31.10.2.</span> Target Values</h4>
<div class="outline-text-4" id="text-31-10-2">
<ul class="org-ul">
<li>ACCEPT – Firewall will accept the packet.</li>
<li>DROP – Firewall will drop the packet.</li>
<li>QUEUE – Firewall will pass the packet to the userspace.</li>
<li>RETURN – Firewall will stop executing the next set of rules in the current chain for this packet. The
control will be returned to the calling chain.</li>
</ul>
</div>
</div>
<div id="outline-container-org2d46ef9" class="outline-4">
<h4 id="org2d46ef9"><span class="section-number-4">31.10.3.</span> gentoo net-firewall/iptables:</h4>
<div class="outline-text-4" id="text-31-10-3">
<ul class="org-ul">
<li>rc-service iptables save</li>
<li>rc-service iptables start</li>
<li>rc-update add iptables default</li>
</ul>
</div>
</div>
<div id="outline-container-orgab7c243" class="outline-4">
<h4 id="orgab7c243"><span class="section-number-4">31.10.4.</span> log bad ppl</h4>
<div class="outline-text-4" id="text-31-10-4">
<p>
iptables -N bad<sub>people</sub>  # create chain
iptables &#x2026;rules&#x2026; -j bad<sub>people</sub>
</p>
</div>
</div>
<div id="outline-container-orgf84a76b" class="outline-4">
<h4 id="orgf84a76b"><span class="section-number-4">31.10.5.</span> simple</h4>
<div class="outline-text-4" id="text-31-10-5">
<p>
/etc/network/if-pre-up.d/iptables
</p>

<pre class="example">
#!/bin/sh
/sbin/iptables-restore &lt; /etc/iptables.up.rules
</pre>


<p>
iptables-save &gt; /etc/iptables.up.rules
</p>
</div>
<ol class="org-ol">
<li><a id="orga0d586a"></a>ex1<br />
<div class="outline-text-5" id="text-31-10-5-1">
<div class="org-src-container">
<pre class="src src-sh">iptables -F <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">flush all</span>
iptables -X
iptables -Z

iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT ! -i lo -d 127.0.0.0/8 -j REJECT
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
iptables -A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">iptables -A INPUT -p tcp -m tcp --dport 6890 -j ACCEPT</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">iptables -A INPUT -p udp -m udp --dport 6881 -j ACCEPT</span>
</pre>
</div>
</div>
</li>
<li><a id="orga13bf9a"></a>ex arch<br />
<div class="outline-text-5" id="text-31-10-5-2">
<div class="org-src-container">
<pre class="src src-sh">iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT
iptables -P INPUT DROP
iptables -A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
iptables -A INPUT -i lo -j ACCEPT
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">ICMPv6 Neighbor Discovery packets remain untracked - keep it in mind</span>
iptables -A INPUT -m conntrack --ctstate INVALID -j DROP
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">allow echo</span>
iptables -A INPUT -p icmp --icmp-type 8 -m conntrack --ctstate NEW -j ACCEPT

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">open ports</span>
iptables -A TCP -p tcp --dport 22 -j ACCEPT


<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">reject TCP RESET packets and UDP streams with ICMP port unreachable messages if the ports are not opened.</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">it allows the sender to quickly close the connection and clean up.</span>
iptables -A INPUT -p udp -j REJECT --reject-with icmp-port-unreachable
iptables -A INPUT -p tcp -j REJECT --reject-with tcp-reset
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">reject all remaining incoming traffic with icmp protocol unreachable messages. This imitates Linux's default behavior.</span>
iptables -A INPUT -j REJECT --reject-with icmp-proto-unreachable

</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org6f46396" class="outline-3">
<h3 id="org6f46396"><span class="section-number-3">31.11.</span> nftables</h3>
<div class="outline-text-3" id="text-31-11">
</div>
<div id="outline-container-orga0c772d" class="outline-4">
<h4 id="orga0c772d"><span class="section-number-4">31.11.1.</span> print rules</h4>
<div class="outline-text-4" id="text-31-11-1">
<ul class="org-ul">
<li>nft list tables ip</li>
<li>nft list table inet filter</li>
<li>nft list ruleset</li>
<li>nft flush ruleset # remove</li>
</ul>
</div>
</div>

<div id="outline-container-org19014a0" class="outline-4">
<h4 id="org19014a0"><span class="section-number-4">31.11.2.</span> table</h4>
<div class="outline-text-4" id="text-31-11-2">
<p>
nft (add | delete | flush) table [&lt;family&gt;] &lt;name&gt;
</p>
<ul class="org-ul">
<li>family: ip, arp, ip6, bridge, inet, netdev.</li>
</ul>
</div>
</div>
<div id="outline-container-org634c25d" class="outline-4">
<h4 id="org634c25d"><span class="section-number-4">31.11.3.</span> chain</h4>
<div class="outline-text-4" id="text-31-11-3">
<p>
nft (add | create) chain [&lt;family&gt;] &lt;table&gt; &lt;name&gt; [ { type &lt;type&gt; hook &lt;hook&gt; [device &lt;device&gt;] priority &lt;priority&gt; \; [policy &lt;policy&gt; \;] } ]
</p>

<p>
type:
</p>
<ul class="org-ul">
<li>filter: Supported by arp, bridge, ip, ip6 and inet table families.</li>
<li>route: Mark packets (like mangle for the output hook, for other hooks use the type filter instead),
supported by ip and ip6.</li>
<li>nat: In order to perform Network Address Translation, supported by ip and ip6.</li>
</ul>
<p>
hook -  refers to an specific stage of the packet while it's being processed through the kernel.
</p>
<ul class="org-ul">
<li>The hooks for ip, ip6 and inet families are: prerouting, input, forward, output, postrouting.</li>
<li>The hooks for arp family are: input, output.</li>
<li>The bridge family handles ethernet packets traversing bridge devices.</li>
<li>The hook for netdev is: ingress.</li>
</ul>
<p>
priority - number used to order the chains or to set them between some Netfilter operations.
</p>
<ul class="org-ul">
<li>NF<sub>IP</sub><sub>PRI</sub><sub>FILTER</sub> (0)</li>
<li></li>
</ul>
<p>
policy  - accept (default) and drop.
</p>
</div>
</div>

<div id="outline-container-org93739be" class="outline-4">
<h4 id="org93739be"><span class="section-number-4">31.11.4.</span> rule</h4>
<div class="outline-text-4" id="text-31-11-4">
<p>
nft add rule [&lt;family&gt;] &lt;table&gt; &lt;chain&gt; &lt;matches&gt; &lt;statements&gt;
</p>
</div>
</div>

<div id="outline-container-orgbd7f894" class="outline-4">
<h4 id="orgbd7f894"><span class="section-number-4">31.11.5.</span> gentoo net-firewall/nftables:</h4>
<div class="outline-text-4" id="text-31-11-5">
<ul class="org-ul">
<li>rc-service nftables save</li>
<li>rc-service nftables start</li>
<li>rc-update add nftables default</li>
</ul>
</div>
</div>
<div id="outline-container-org2eb2a82" class="outline-4">
<h4 id="org2eb2a82"><span class="section-number-4">31.11.6.</span> /etc/nftables-local skeleton nftables config file</h4>
<div class="outline-text-4" id="text-31-11-6">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">! /sbin/</span><span style="color: #8ac6f2; font-weight: bold;">nft</span><span style="color: #99968b; font-style: italic;"> -f</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">this is a skeleton file for an nftables ruleset</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">load it with nft -f /etc/nftables-local</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">it is supported to define variables here, that can later on be</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">expanded in rule definitions</span>
define http_ports = {80, 443}

flush ruleset

table inet local {

  chain input {
    <span style="color: #e5786d;">type</span> filter hook input priority 0; policy drop;
    tcp dport $<span style="color: #cae682;">http_ports</span> counter accept comment <span style="color: #95e454;">"incoming http traffic"</span>;
  }
  chain output {
    <span style="color: #e5786d;">type</span> filter hook output priority 0; policy drop;
  }

}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb5cad17" class="outline-4">
<h4 id="orgb5cad17"><span class="section-number-4">31.11.7.</span> Masquerading and source NAT (SNAT)</h4>
<div class="outline-text-4" id="text-31-11-7">
<p>
to <b>change the source IP address</b> - Use one of these NAT types of packets:
</p>
<ul class="org-ul">
<li><b>Masquerading</b> automatically uses the IP address of the outgoing interface. Therefore, use masquerading if the
outgoing interface uses a dynamic IP address.</li>
<li><b>SNAT</b> - faster, Use SNAT if the outgoing interface uses a fixed IP address.</li>
</ul>

<p>
to <b>route incoming traffic to a different host</b>
</p>
<ul class="org-ul">
<li>Destination NAT (DNAT) - use DNAT to access local WEB server from internet.</li>
<li>Redirect - special case of DNAT that redirects packets to the local machine depending on the chain hook</li>
</ul>
</div>
</div>
<div id="outline-container-orgdbf2f02" class="outline-4">
<h4 id="orgdbf2f02"><span class="section-number-4">31.11.8.</span> use cases</h4>
<div class="outline-text-4" id="text-31-11-8">
<p>
<b>filter by user</b> - block user from access internet - by uid or name
</p>
<ul class="org-ul">
<li>nft add rule inet filter output meta skuid 1004 drop</li>
<li>chain output {meta skuid t drop}</li>
<li>chain output {meta skuid t ip daddr { 127.0.0.1 } accept }</li>
</ul>
</div>
</div>

<div id="outline-container-org8eb7105" class="outline-4">
<h4 id="org8eb7105"><span class="section-number-4">31.11.9.</span> <span class="todo TODO">TODO</span> socks</h4>
<div class="outline-text-4" id="text-31-11-9">
<p>
iptables -t nat -A OUTPUT -p tcp -m owner ! &#x2013;uid-owner proxy -j REDIRECT &#x2013;to-ports 4545
iptables -t nat -I OUTPUT -p tcp -m owner &#x2013;uid-owner root -j RETURN
</p>


<p>
table ip nat {
	chain prerouting {
		type nat hook prerouting priority 0; policy accept;
	}
</p>

<p>
	chain postrouting {
		type nat hook postrouting priority 100; policy accept;
		oifname "wan0" masquerade
	}
}
</p>
</div>
</div>
<div id="outline-container-org8cd2748" class="outline-4">
<h4 id="org8cd2748"><span class="section-number-4">31.11.10.</span> links</h4>
<div class="outline-text-4" id="text-31-11-10">
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/Nftables/Examples">https://wiki.gentoo.org/wiki/Nftables/Examples</a></li>
<li><a href="https://www.nftables.org/">https://www.nftables.org/</a></li>
<li>firewall <a href="https://stosb.com/blog/explaining-my-configs-nftables/">https://stosb.com/blog/explaining-my-configs-nftables/</a></li>
<li>home router ex <a href="https://wiki.nftables.org/wiki-nftables/index.php/Simple_ruleset_for_a_home_router">https://wiki.nftables.org/wiki-nftables/index.php/Simple_ruleset_for_a_home_router</a></li>
<li>doc <a href="https://wiki.nftables.org/wiki-nftables/index.php/Main_Page">https://wiki.nftables.org/wiki-nftables/index.php/Main_Page</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/sec-configuring_nat_using_nftables">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/sec-configuring_nat_using_nftables</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc0c4960" class="outline-3">
<h3 id="orgc0c4960"><span class="section-number-3">31.12.</span> arptables</h3>
<div class="outline-text-3" id="text-31-12">
<p>
net-firewall/aptables
</p>

<p>
arptables -A INPUT &#x2013;source-mac d8:d7:21:22:5a:f4 -j ACCEPT
</p>

<p>
arptables -P INPUT ACCEPT
</p>
</div>
<div id="outline-container-orgd84bc44" class="outline-4">
<h4 id="orgd84bc44"><span class="section-number-4">31.12.1.</span> links</h4>
<div class="outline-text-4" id="text-31-12-1">
<p>
<a href="https://linux-audit.com/filtering-arp-traffic-with-linux-arptables/">https://linux-audit.com/filtering-arp-traffic-with-linux-arptables/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org72a7797" class="outline-3">
<h3 id="org72a7797"><span class="section-number-3">31.13.</span> net-dns/bind-tools</h3>
<div class="outline-text-3" id="text-31-13">
<ul class="org-ul">
<li><a href="https://www.isc.org/bind/">https://www.isc.org/bind/</a></li>
<li><a href="https://gitlab.isc.org/isc-projects/bind9/-/blob/main/doc/dnssec-guide/getting-started.rst">https://gitlab.isc.org/isc-projects/bind9/-/blob/main/doc/dnssec-guide/getting-started.rst</a></li>
</ul>
</div>
</div>

<div id="outline-container-org66cf22b" class="outline-3">
<h3 id="org66cf22b"><span class="section-number-3">31.14.</span> <span class="todo TODO">TODO</span> nmap - network exploration</h3>
</div>
<div id="outline-container-orgd32c588" class="outline-3">
<h3 id="orgd32c588"><span class="section-number-3">31.15.</span> tcpdump</h3>
<div class="outline-text-3" id="text-31-15">
<p>
<b>HTTP request and response</b>
</p>
<pre class="example">
tcpdump -A -s 0 'tcp port 80 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'
tcpdump -X -s 0 'tcp port 80 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'
</pre>
</div>
</div>
<div id="outline-container-org216ca42" class="outline-3">
<h3 id="org216ca42"><span class="section-number-3">31.16.</span> OpenVPN</h3>
<div class="outline-text-3" id="text-31-16">
</div>
<div id="outline-container-org22793a1" class="outline-4">
<h4 id="org22793a1"><span class="section-number-4">31.16.1.</span> OpenVPN over Tor</h4>
<div class="outline-text-4" id="text-31-16-1">
<ul class="org-ul">
<li>add socks-proxy 127.0.0.1 9150</li>
<li>after connection tor will be router through VPN, that is why: You also need to tell the routing to reach
your Tor entry node outside of the VPN:
<ul class="org-ul">
<li>sudo route add -net E.E.E.E netmask 255.255.255.255 gw G.G.G.G
<ul class="org-ul">
<li>E.E.E.E is your Tor entry node (either a bridge or a guard node) and G.G.G.G is your default gateway.</li>
</ul></li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgd1976d3"></a>realization<br />
<ol class="org-ol">
<li><a id="orgd17ffd9"></a><i>usr/local/bin</i><br />
<div class="outline-text-6" id="text-31-16-1-1-1">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/bin/</span><span style="color: #8ac6f2; font-weight: bold;">sh</span>
cp <span style="color: #95e454;">"/home/ff/Downloads/file.ovpn"</span> /etc/openvpn/openvpn.conf
<span style="color: #e5786d;">echo</span> &gt;&gt; /etc/openvpn/openvpn.conf
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"auth-user-pass /etc/openvpn/auth_vpnfile"</span> &gt;&gt; /etc/openvpn/openvpn.conf
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"socks-proxy 127.0.0.1 9050"</span> &gt;&gt; /etc/openvpn/openvpn.conf
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"up /etc/openvpn/openvpn-up.sh"</span> &gt;&gt; /etc/openvpn/openvpn.conf


</pre>
</div>
</div>
</li>
<li><a id="org5557d72"></a>/etc/openvpn/openvpn-up.sh<br />
<div class="outline-text-6" id="text-31-16-1-1-2">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/usr/bin/</span><span style="color: #8ac6f2; font-weight: bold;">env</span><span style="color: #99968b; font-style: italic;"> bash</span>

<span style="color: #cae682;">interface</span>=wlan0

<span style="color: #8ac6f2; font-weight: bold;">if</span> [ <span style="color: #95e454;">"$script_type"</span> == <span style="color: #95e454;">"up"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">torbridges</span>=$(<span style="color: #fa8072;">cat /etc/tor/torrc | grep ^bridge | cut -d ' ' -f 3 | cut -d ':' -f 1</span>)
    <span style="color: #cae682;">defaultroute</span>=$(<span style="color: #fa8072;">ip route | grep default | cut -d ' ' -f 3</span>)
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$torbridges"</span> | <span style="color: #8ac6f2; font-weight: bold;">while </span><span style="color: #e5786d;">read</span> line
    <span style="color: #8ac6f2; font-weight: bold;">do</span>
        ip route add $<span style="color: #cae682;">line</span> via $<span style="color: #cae682;">defaultroute</span> dev $<span style="color: #cae682;">interface</span>
    <span style="color: #8ac6f2; font-weight: bold;">done</span>
<span style="color: #8ac6f2; font-weight: bold;">elif</span> [ <span style="color: #95e454;">"$script_type"</span> == <span style="color: #95e454;">"down"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">torbridges</span>=$(<span style="color: #fa8072;">cat /etc/tor/torrc | grep ^bridge | cut -d ' ' -f 3 | cut -d ':' -f 1</span>)
    <span style="color: #cae682;">defaultroute</span>=$(<span style="color: #fa8072;">ip route | grep default | cut -d ' ' -f 3</span>)
    <span style="color: #8ac6f2; font-weight: bold;">while </span><span style="color: #e5786d;">read</span> line
    <span style="color: #8ac6f2; font-weight: bold;">do</span>
        ip route del $<span style="color: #cae682;">line</span> via $<span style="color: #cae682;">defaultroute</span> dev $<span style="color: #cae682;">interface</span>
    <span style="color: #8ac6f2; font-weight: bold;">done</span> &lt; $<span style="color: #cae682;">torbridges</span>
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
</pre>
</div>
</div>
</li>
</ol>
</li>
<li><a id="orgf23ffef"></a>links<br />
<div class="outline-text-5" id="text-31-16-1-2">
<ul class="org-ul">
<li><a href="https://kiljan.org/2017/11/15/routing-traffic-through-openvpn-using-a-local-socks-proxy/">https://kiljan.org/2017/11/15/routing-traffic-through-openvpn-using-a-local-socks-proxy/</a></li>
<li><a href="https://www.oilandfish.com/posts/tor-openvpn.html">https://www.oilandfish.com/posts/tor-openvpn.html</a></li>
</ul>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org6cbec70" class="outline-3">
<h3 id="org6cbec70"><span class="section-number-3">31.17.</span> TAP/TUN devices</h3>
<div class="outline-text-3" id="text-31-17">
<p>
kernel virtual network devices
</p>
<ul class="org-ul">
<li>can't be used together</li>
<li>TUN - network layer device operates in layer 3 carrying IP packets. Used with routing.</li>
<li>TAP - link layer device and operates in layer 2 carrying Ethernet frames.</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-orgdfe2451" class="outline-3">
<h3 id="orgdfe2451"><span class="section-number-3">31.18.</span> get my ip</h3>
<div class="outline-text-3" id="text-31-18">
</div>
<div id="outline-container-orgac1f0ae" class="outline-4">
<h4 id="orgac1f0ae"><span class="section-number-4">31.18.1.</span> wget</h4>
<div class="outline-text-4" id="text-31-18-1">
<ul class="org-ul">
<li>wget &#x2013;quiet &#x2013;output-document=- <a href="https://ip.oxylabs.io">https://ip.oxylabs.io</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org05a027d" class="outline-3">
<h3 id="org05a027d"><span class="section-number-3">31.19.</span> speed, bandwith, latency</h3>
<div class="outline-text-3" id="text-31-19">
<p>
max speed
</p>
<ul class="org-ul">
<li>ethtool enp0s3</li>
<li>dmesg | grep enp0s3</li>
<li>mii-tool -v enp0s3</li>
<li>cat /sys/classes/net/eth0/speed # 1000 = 1000 Mb/s</li>
</ul>

<p>
bandwith usage
</p>
<ul class="org-ul">
<li>ifstat -r &amp;&amp; ifstat -s</li>
<li>nmon</li>
</ul>

<p>
latency:
</p>
<ul class="org-ul">
<li>nmap -sn host</li>
<li>map  -sn -P 443 -d3 ya.ru</li>
<li>ping</li>
</ul>
</div>
</div>
<div id="outline-container-org5930250" class="outline-3">
<h3 id="org5930250"><span class="section-number-3">31.20.</span> USECASES allow opening ports for user not root</h3>
<div class="outline-text-3" id="text-31-20">
<ul class="org-ul">
<li>Port numbers 1024 to 49151 are called the <b>registered/user ports</b>.</li>
<li>Port numbers 49152 to 65535 are called the <b>dynamic/private ports</b></li>

<li>per executable:</li>
</ul>
<pre class="example">
setcap 'cap_net_bind_service=+ep' /path/to/program
</pre>


<ol class="org-ol">
<li>Use authbind: sudo apt-get install authbind &#x2026;</li>
</ol>

<div class="org-src-container">
<pre class="src src-text">by creating a
    configuration file in /etc/authbind/byport/:

    sudo touch /etc/authbind/byport/80
    sudo chown youruser /etc/authbind/byport/80
    sudo chmod 755 /etc/authbind/byport/80

</pre>
</div>

<p>
<a href="https://stackoverflow.com/questions/413807/is-there-a-way-for-non-root-processes-to-bind-to-privileged-ports-on-linux">https://stackoverflow.com/questions/413807/is-there-a-way-for-non-root-processes-to-bind-to-privileged-ports-on-linux</a>
</p>
</div>
</div>
<div id="outline-container-org2878d8f" class="outline-3">
<h3 id="org2878d8f"><span class="section-number-3">31.21.</span> test network with wireshark</h3>
<div class="outline-text-3" id="text-31-21">
<p>
create a test network namespace:
</p>

<p>
ip netns add test
</p>

<p>
create a pair of virtual network interfaces (veth-a and veth-b):
</p>

<p>
ip link add veth-a type veth peer name veth-b
</p>

<p>
change the active namespace of the veth-a interface:
</p>

<p>
ip link set veth-a netns test
</p>

<p>
configure the IP addresses of the virtual interfaces:
</p>

<p>
ip netns exec test ifconfig veth-a up 192.168.163.1 netmask 255.255.255.0
ifconfig veth-b up 192.168.163.254 netmask 255.255.255.0
</p>

<p>
configure the routing in the test namespace:
</p>

<p>
ip netns exec test route add default gw 192.168.163.254 dev veth-a
</p>

<p>
activate ip<sub>forward</sub> and establish a NAT rule to forward the traffic coming in from the namespace you created (you have to adjust the network interface and SNAT ip address):
</p>

<p>
echo 1 &gt; /proc/sys/net/ipv4/ip<sub>forward</sub>
iptables -t nat -A POSTROUTING -s 192.168.163.0/24 -o &lt;your internet interface, e.g. eth0&gt; -j SNAT &#x2013;to-source &lt;your ip address&gt;
</p>

<p>
(You can also use the MASQUERADE rule if you prefer)
</p>

<p>
finally, you can run the process you want to analyze in the new namespace, and wireshark too:
</p>

<p>
ip netns exec test thebinarytotest
ip netns exec test wireshark
</p>
</div>
</div>
</div>

<div id="outline-container-org0bb8bcf" class="outline-2">
<h2 id="org0bb8bcf"><span class="section-number-2">32.</span> security</h2>
<div class="outline-text-2" id="text-32">
<p>
proactive security
</p>

<ul class="org-ul">
<li>Linux Kernel Runtime Guard <a href="https://github.com/lkrg-org/lkrg">https://github.com/lkrg-org/lkrg</a></li>
<li>Users' Security Handbook <a href="https://datatracker.ietf.org/doc/html/rfc2504">https://datatracker.ietf.org/doc/html/rfc2504</a></li>
<li>RFC 2196 - Site Security Handbook</li>
</ul>
</div>
<div id="outline-container-org4f1e3b4" class="outline-3">
<h3 id="org4f1e3b4"><span class="section-number-3">32.1.</span> simple sandbox</h3>
<div class="outline-text-3" id="text-32-1">
<ul class="org-ul">
<li>useradd &#x2013;home=/home/ff &#x2013;create-home &#x2013;shell /bin/false &#x2013;user-group ff &#x2013;groups input,users,video,audio
<ul class="org-ul">
<li>-u $UID -g $GUID</li>
</ul></li>
<li>xhost si:localuser:ff2 ; cd /home/ff2 ; sudo -u ff2 firejail &#x2013;profile=/etc/firejail/firefox.profile firefox -P -no-remote normal $@</li>
<li>userdel -r ff # remove user</li>
</ul>

<p>
remove password and lock:
</p>
<ul class="org-ul">
<li>passwd -ld ff</li>
</ul>
</div>
</div>
<div id="outline-container-org24734e9" class="outline-3">
<h3 id="org24734e9"><span class="section-number-3">32.2.</span> Linux Access Permissions</h3>
<div class="outline-text-3" id="text-32-2">
</div>
<div id="outline-container-orgce01c4a" class="outline-4">
<h4 id="orgce01c4a"><span class="section-number-4">32.2.1.</span> mandatory access control (MAC)</h4>
<div class="outline-text-4" id="text-32-2-1">
<ul class="org-ul">
<li>AppArmor</li>
<li>SELinux</li>
</ul>
</div>
</div>
<div id="outline-container-org672cc4f" class="outline-4">
<h4 id="org672cc4f"><span class="section-number-4">32.2.2.</span> access-control list (ACL)</h4>
<div class="outline-text-4" id="text-32-2-2">
<p>
man acl
</p>

<p>
specifies the list of subjects that have access to a particular object(resource) along with their access right. the list
 of users and the operations that they can perform on that object.
</p>

<p>
Each object(resource) has a security attribute that identifies its access control list.
</p>

<p>
cons:
</p>
<ul class="org-ul">
<li>search overhead and results in poor efficiency as the entire access control list needs to be searched when
access is made to an object.</li>
<li>requires more data storage space as data is stored object-wise and the same subject can have multiple access
to multiple objects thereby consuming more storage space.</li>
<li>do not protect agains confused deputy problem <a href="hacking#MissingReference">hacking#MissingReference</a></li>
</ul>

<p>
fstab have mount option <b>acl</b> and <b>noacl</b>
</p>

<pre class="example">
getfacl /usr/bin/ping
stat
</pre>
</div>
</div>
<div id="outline-container-org13690c5" class="outline-4">
<h4 id="org13690c5"><span class="section-number-4">32.2.3.</span> capabilities</h4>
<div class="outline-text-4" id="text-32-2-3">
<p>
man capabilities
</p>

<p>
Capabilities are implemented on Linux using extended attributes (xattr(7)) in the security namespace.
</p>

<p>
Capability systems protect against the confused deputy problem, whereas access-control list–based systems do
 not.
</p>

<p>
Capabilities are a per-thread attribute.
</p>

<p>
Support for associating capability sets with an executable file using setcap(8). capability sets are stored in
 an extended attribute (see setxattr(2) and xattr(7)) named security.capability.
</p>

<p>
P'(permitted) = (P(inheritable) &amp; F(inheritable)) |
		(F(permitted) &amp; cap<sub>bset</sub>)
</p>

<p>
P'(effective) = F(effective) ? P'(permitted) : 0
</p>

<p>
P'(inheritable) = P(inheritable)    [i.e., unchanged]
</p>

<p>
Where P is the old capability set, P' is the capability set after execv and F is the file capability set.
<a href="https://book.hacktricks.xyz/linux-hardening/privilege-escalation/linux-capabilities">https://book.hacktricks.xyz/linux-hardening/privilege-escalation/linux-capabilities</a>
</p>
</div>
<ol class="org-ol">
<li><a id="orgbcb4b2b"></a>Capability Sets:<br />
<div class="outline-text-5" id="text-32-2-3-1">
<p>
Inherited (CapInh)
</p>
<ul class="org-ul">
<li>Purpose: Determines the capabilities passed down from the parent process.</li>
<li>Functionality: When a new process is created, it inherits the capabilities from its parent in this set. Useful for maintaining certain privileges across process spawns.</li>
<li>Restrictions: A process cannot gain capabilities that its parent did not possess.</li>
</ul>

<p>
Effective (CapEff):
</p>
<ul class="org-ul">
<li>Purpose: Represents the actual capabilities a process is utilizing at any moment.</li>
<li>Functionality: It's the set of capabilities checked by the kernel to grant permission for various operations. For files, this set can be a flag indicating if the file's permitted capabilities are to be considered effective.</li>
<li>Significance: The effective set is crucial for immediate privilege checks, acting as the active set of capabilities a process can use.</li>
</ul>

<p>
Permitted (CapPrm):
</p>
<ul class="org-ul">
<li>Purpose: Defines the maximum set of capabilities a process can possess.</li>
<li>Functionality: A process can elevate a capability from the permitted set to its effective set, giving it the
ability to use that capability. It can also drop capabilities from its permitted set.</li>
<li>Boundary: It acts as an upper limit for the capabilities a process can have, ensuring a process doesn't
exceed its predefined privilege scope.</li>
</ul>

<p>
Bounding (CapBnd):
</p>
<ul class="org-ul">
<li>Purpose: Puts a ceiling on the capabilities a process can ever acquire during its lifecycle.</li>
<li>Functionality: Even if a process has a certain capability in its inheritable or permitted set, it cannot acquire that capability unless it's also in the bounding set.</li>
<li>Use-case: This set is particularly useful for restricting a process's privilege escalation potential, adding an extra layer of security.</li>
</ul>

<p>
Ambient (CapAmb):
</p>
<ul class="org-ul">
<li>Purpose: Allows certain capabilities to be maintained across an execve system call, which typically would result in a full reset of the process's capabilities.</li>
<li>Functionality: Ensures that non-SUID programs that don't have associated file capabilities can retain certain privileges.</li>
<li>Restrictions: Capabilities in this set are subject to the constraints of the inheritable and permitted sets, ensuring they don't exceed the process's allowed privileges.</li>
</ul>
</div>
</li>
<li><a id="org5346bee"></a>commands<br />
<div class="outline-text-5" id="text-32-2-3-2">
<ul class="org-ul">
<li>setcap - set file capabilities</li>
<li>getcap /bin/ping</li>
</ul>

<pre class="example">
attr -lq /usr/bin/ping
cat /proc/self/status | grep Cap
</pre>


<p>
execute command with dropped capabilities
</p>
<pre class="example">
capsh --drop=cap_net_raw --print -- -c "tcpdump"
</pre>


<p>
The +ep means you’re adding the capability (“-” would remove it) as Effective and Permitted.
</p>
<pre class="example">
setcap cap_net_raw+ep /sbin/ping
</pre>


<p>
To identify programs in a system or folder with capabilities:
</p>
<pre class="example">
getcap -r /usr/bin/ 2&gt;/dev/null
</pre>
</div>
</li>
<li><a id="orgaed4364"></a>User Capabilities<br />
<div class="outline-text-5" id="text-32-2-3-3">
<p>
/etc/security/capability.conf
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Simple</span>
cap_sys_ptrace               developer
cap_net_raw                  user1

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Multiple capablities</span>
cap_net_admin,cap_net_raw    jrnetadmin
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Identical, but with numeric values</span>
12,13                        jrnetadmin

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Combining names and numerics</span>
cap_sys_admin,22,25          jrsysadmin
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org78c32f2" class="outline-4">
<h4 id="org78c32f2"><span class="section-number-4">32.2.4.</span> standart Unix discretionary access control (DAC) permissions</h4>
<div class="outline-text-4" id="text-32-2-4">
<p>
restricting access to objects based on the identity of subjects and/or groups to which they belong.
</p>
</div>
<ol class="org-ol">
<li><a id="orgabbf50d"></a>- user-owner, group, others<br />
<div class="outline-text-5" id="text-32-2-4-1">
<ul class="org-ul">
<li>ls -l</li>
<li>stat -c "%a %n" *</li>
</ul>

<p>
Only root can change ownership!
</p>

<p>
Dicrectory and subdirectory:
</p>
<ul class="org-ul">
<li>if r-x for directory and rwx for subdirectory, = r-x subdirectory</li>
</ul>

<p>
-rw-r&#x2013;r&#x2013;
  first:
  [-] - file
  [d] - directory
  [l] - symbolic link to file or directory
</p>

<p>
chmod - who:
</p>
<ul class="org-ul">
<li>u - user, cat change permissions</li>
<li>g - group (name and ID)</li>
<li>o - others (All users)</li>
<li>a - ugo</li>
</ul>

<p>
chmod 0777 - what:
</p>
<ul class="org-ul">
<li>r - file- read, direcotry - ls</li>
<li>w - directory - 1 for user - create delete modify files and directories (how: rename only) even if they are not yours</li>
<li>x - file - execute, directory - cd and read files by direct name</li>
<li>s - (4/2) setuid/guid (UID/GID) user or group Id on execution (chmod g+s - setgid) (chmod u+s - setuid) and x is set</li>
<li>S -  If the setuid or setgid bit is set but the corresponding executable bit is not set.</li>
<li>t - (1) sticky bit  or restricted deletion</li>
</ul>

<p>
X - already has at least 1 execution permission for u or g or a. Useful for -R on directories. a+rX
</p>
</div>
</li>

<li><a id="org15fece4"></a>setuid/setgid for file - any user execute with user(uid) or group(gid) privileges.<br />
<div class="outline-text-5" id="text-32-2-4-2">
<ul class="org-ul">
<li>(rwsrwsrwt = s-suid,s-guid,t-sticky bit)</li>
</ul>

<p>
SUID and SGID for file - this means that the file will be executed with the same permissions as the owner of the
executable file.
</p>
<ul class="org-ul">
<li>chmod u+s file<sub>name</sub></li>
<li>-rwSrw-rw- - S - means there is an error that you should look into. not even the owner is allowed to execute
the file</li>
<li>The setuid permission set on a directory is ignored on most UNIX and Linux systems</li>
</ul>

<p>
setuid for directory: is ignored on most UNIX and Linux systems.  FreeBSD can be configured to interpret
 setuid in a manner similar to setgid
</p>

<p>
setgid for directory:
</p>
<ol class="org-ol">
<li>new files and subdirectories inherit group ID and ignore group ID who created (owner ID not affected)
(exception - moved files and subdirs.)</li>
<li>subdirectories inherit setgid bit.</li>
<li>apply for new files.</li>
<li>exising and moved files/directories are not affected</li>
</ol>

<p>
sticky bit: for directories:
</p>
<ul class="org-ul">
<li>chmod +t my<sub>dir</sub></li>
<li>fiels in - may only be unlinked, deleted or renamed by owner or direcotry owner(Linux)</li>
<li>files in - only owner or directory's can rename or delete the file. (OpenBSD)</li>
<li>default - any user with write and x permissions for directory cat rename or delete.</li>
<li>used for /tmp</li>
<li>for files:
<ul class="org-ul">
<li>when accessed will not be cached by the kernel (OpenBSD)</li>
<li>used for swap files(OpenBSD)</li>
<li>used by the automounters to indicate that file was not mounted yet</li>
<li>the Linux kernel ignores the sticky bit on files.</li>
</ul></li>
</ul>

<p>
"rwS-&#x2013;&#x2014;" - means that SUID was set but file not allowed to be executed (SUID is not usable).
</p>
</div>
</li>
<li><a id="orgab0518a"></a>traditional UNIX categories of processes:<br />
<div class="outline-text-5" id="text-32-2-4-3">
<ul class="org-ul">
<li>pivileged UID=0</li>
<li>unprovoleged UID!=0
<ul class="org-ul">
<li>permussuib checks(on process credentials)
<ul class="org-ul">
<li>UID</li>
<li>GID - primary or login group ($ id command)</li>
<li>supplementary group list - user may be member of 0 or more secondary groups /etc/groups ($id -nG)</li>
</ul></li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>

<div id="outline-container-org285c1fa" class="outline-4">
<h4 id="org285c1fa"><span class="section-number-4">32.2.5.</span> acl vs capability list</h4>
<div class="outline-text-4" id="text-32-2-5">
<p>
<a href="https://www.geeksforgeeks.org/difference-between-access-control-list-and-capability-list/">https://www.geeksforgeeks.org/difference-between-access-control-list-and-capability-list/</a>
</p>

<ul class="org-ul">
<li>ACL - access matrix column-wise - per resource</li>
<li>capabilities - row-wise - per subject</li>
</ul>

<p>
Capability systems protect against the confused deputy problem, whereas access-control list–based systems do
 not.
</p>
</div>
</div>
</div>
<div id="outline-container-orgb547a0f" class="outline-3">
<h3 id="orgb547a0f"><span class="section-number-3">32.3.</span> PAM</h3>
<div class="outline-text-3" id="text-32-3">
<p>
Pluggable Authentication Modules (PAM)
</p>

<p>
a suite of libraries that
</p>
<ul class="org-ul">
<li>allow system administrators to configure various methods for authenticating users.</li>
<li>for centralized control for all applications that uses PAM for authentification</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-orga24dcec" class="outline-3">
<h3 id="orga24dcec"><span class="section-number-3">32.4.</span> s/key</h3>
<div class="outline-text-3" id="text-32-4">
<ul class="org-ul">
<li>one-time password system</li>
<li>систему генерирования одноразовых паролей на основе стандартов MD4 и MD5</li>
<li>relies on the difficulty of reversing cryptographic hash functions</li>
<li>Клиент начинает обмен S/Key, отправляя серверу пакет инициализации, а сервер в ответ отправляет порядковый
номер и случайное число, так называемое «зерно» (seed). После этого клиент генерирует одноразовый пароль в
ходе операции, состоящей из трех этапов: подготовительного этапа, этапа генерирования и функции выхода. На
этапе генерирования клиент многократно использует хеш-функцию и получает 64-разрядную итоговую величину.</li>
<li>RFC 1760</li>
<li>vulnerable to a man in the middle attack if used by itself</li>
<li>vulnerable to certain race conditions</li>
</ul>
</div>
</div>
<div id="outline-container-orgf52c9ca" class="outline-3">
<h3 id="orgf52c9ca"><span class="section-number-3">32.5.</span> su</h3>
<div class="outline-text-3" id="text-32-5">
<p>
Users group "wheel" can su - to become root
</p>
</div>
</div>
<div id="outline-container-orgcc1eac6" class="outline-3">
<h3 id="orgcc1eac6"><span class="section-number-3">32.6.</span> /etc/passwd</h3>
<div class="outline-text-3" id="text-32-6">
<p>
root:x:0:0:root:/root:/usr/bin/zsh
</p>
<ul class="org-ul">
<li>root - Username</li>
<li>x - x here denotes password is encrypted</li>
<li>0 - UID</li>
<li>0 - GID user's group ID</li>
<li>root - Ifno of the user(GECOS)</li>
<li>/root - User home directory</li>
<li>/usr/bin/zsh - Login shell</li>
</ul>
</div>
</div>
<div id="outline-container-orgce2b93c" class="outline-3">
<h3 id="orgce2b93c"><span class="section-number-3">32.7.</span> /etc/shadow</h3>
<div class="outline-text-3" id="text-32-7">
<p>
mark:\(6\).n.:17736:0:99999:7:::
</p>
<ul class="org-ul">
<li>Username</li>
<li>\(6\).n. - Encrypted Password
<ul class="org-ul">
<li>* - blank password L - used for service accounts</li>
<li>! - blank password L - user accounts</li>
<li>\(1\) – MD5</li>
<li>\(2a\) – Blowfish</li>
<li>\(2y\) – Eksblowfish</li>
<li>\(5\) – SHA-256</li>
<li>\(6\) – SHA-512</li>
</ul></li>
<li>17736 - Last password change epoch date</li>
<li>0 - Minimum password age - the number of days that must pass before the user password can be changed</li>
<li>99999 - Maximum password age</li>
<li>Warning period</li>
<li>Inactivity period - the number of days before the password expires during which the user is warned that the
password must be changed</li>
<li>Inactivity period - The number of days after the user password expires before the user account is disabled</li>
<li>Expiration date. The date when the account was disabled. It is represented as an epoch date.</li>
<li>reserved</li>
</ul>
</div>
</div>
<div id="outline-container-orga9bf9fc" class="outline-3">
<h3 id="orga9bf9fc"><span class="section-number-3">32.8.</span> <span class="todo TODO">TODO</span> logcheck</h3>
<div class="outline-text-3" id="text-32-8">
<ul class="org-ul">
<li>emerge &#x2013;ask app-admin/logcheck</li>
<li>useradd &#x2013;home=/home/logcheck &#x2013;create-home &#x2013;shell /bin/false &#x2013;user-group logcheck</li>
<li>/etc/logcheck/logcheck.conf:
<ul class="org-ul">
<li>SENDMAILTO="root"</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4200838" class="outline-3">
<h3 id="org4200838"><span class="section-number-3">32.9.</span> firejail</h3>
<div class="outline-text-3" id="text-32-9">
</div>
<div id="outline-container-org6bf1300" class="outline-4">
<h4 id="org6bf1300"><span class="section-number-4">32.9.1.</span> xephyr</h4>
<div class="outline-text-4" id="text-32-9-1">
<p>
We try to prevent keyloging: xinput list | grep -Po 'id=\K\d+(?=.*slave\s*keyboard)' | xargs -P0 -n1 xinput test
</p>

<ul class="org-ul">
<li>USE=xephyr emerge  x11-base/xorg-server</li>
<li>emerge &#x2013;ask  x11-wm/openbox</li>
</ul>

<p>
firejail &#x2013;noprofile &#x2013;x11=xephyr  openbox &#x2013;startup /usr/bin/xfce4-terminal
</p>
<ul class="org-ul">
<li>&#x2013;net=eth0:</li>
</ul>


<p>
USE=xcsecurity emerge  x11-base/xorg-server
</p>
<ul class="org-ul">
<li>supported directly in firejail (via the &#x2013;x11=xorg option)</li>
</ul>


<p>
or just:
</p>
</div>
<ol class="org-ol">
<li><a id="org8becbb9"></a>troubleshooting<br />
<div class="outline-text-5" id="text-32-9-1-1">
<div class="org-src-container">
<pre class="src src-text">RTNETLINK answers: Operation not supported
Error: failed to run /usr/lib64/firejail/fnet, exiting...
Error ioctl: interface.c:100 net_if_up: No such device
Error: failed to run /run/firejail/lib/fnet, exiting...
Error: proc 11727 cannot sync with peer: unexpected EOF
</pre>
</div>

<p>
reason: CONFIG<sub>IPVLAN</sub> not enabled in kernel config
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org9ebf087" class="outline-4">
<h4 id="org9ebf087"><span class="section-number-4">32.9.2.</span> hardening line</h4>
<div class="outline-text-4" id="text-32-9-2">
<ul class="org-ul">
<li>&#x2013;machine-id - regenerate /etc/machine-id</li>
<li>&#x2013;blacklist=/sys - block access to PC serial number cat /sys/devices/virtual/dmi/id/*</li>
<li>&#x2013;blacklist=/proc/cpuinfo</li>
<li>&#x2013;novideo - if you dont need video</li>
<li>&#x2013;dbus-user=none - disable access and fix error: DBUS user socket was not found</li>
<li>- &#x2013;dbus-system=none</li>
<li>&#x2013;private-lib &#x2013;private-bin - amd64 ony - complicated</li>
<li>&#x2013;caps.drop=all - This option is recommended for running GUI programs or any other program that doesn't require root privileges</li>
<li>&#x2013;nonewprivs</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">--caps.drop=all <span style="color: #95e454;">\</span>
         --novideo --nosound <span style="color: #95e454;">\</span>
         --private-dev
         --nodvd <span style="color: #95e454;">\</span>
         --noprinters <span style="color: #95e454;">\</span>
         --nonewprivs <span style="color: #95e454;">\</span>
         --dbus-user=none --dbus-system=none <span style="color: #95e454;">\</span>
         --env=<span style="color: #cae682;">HOME</span>=~ <span style="color: #95e454;">\</span>
         --env=<span style="color: #cae682;">HOSTNAME</span>=localhost <span style="color: #95e454;">\</span>
         --hostname=localhost <span style="color: #95e454;">\</span>
         --env=<span style="color: #cae682;">USER</span>= <span style="color: #95e454;">\</span>
         --env=<span style="color: #cae682;">HOSTTYPE</span>=arm64 <span style="color: #95e454;">\</span>
         --env=<span style="color: #95e454;">'BASH_VERSION=4.4.19(1)-release'</span> <span style="color: #95e454;">\</span>
         --blacklist=/usr/lib/os-release <span style="color: #95e454;">\</span>
         --blacklist=/usr/bin/xfce4-session <span style="color: #95e454;">\</span>
         --blacklist=/usr/bin/xfconf-query <span style="color: #95e454;">\</span>
         --blacklist=/usr/bin/gsettings <span style="color: #95e454;">\</span>
         --blacklist=/usr/bin/id <span style="color: #95e454;">\</span>
         --blacklist=/usr/bin/who <span style="color: #95e454;">\</span>
         --blacklist=/bin/hostname <span style="color: #95e454;">\</span>
         --blacklist=/bin/uname <span style="color: #95e454;">\</span>
     --blacklist=/etc/os-release <span style="color: #95e454;">\</span>
     --blacklist=/etc/gentoo-release <span style="color: #95e454;">\</span>
     --blacklist=/sys <span style="color: #95e454;">\</span>
     --blacklist=/var <span style="color: #95e454;">\</span>
     --blacklist=/proc/version <span style="color: #95e454;">\</span>
     --blacklist=/proc/cpuinfo <span style="color: #95e454;">\</span>
     --blacklist=/proc/meminfo <span style="color: #95e454;">\</span>
     --blacklist=/proc/uptime <span style="color: #95e454;">\</span>

</pre>
</div>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">--blacklist=/sys  - may be replaced with:</span>
     --blacklist=/sys/block <span style="color: #95e454;">\</span>
     --blacklist=/sys/dev <span style="color: #95e454;">\</span>
     --blacklist=/sys/firmware <span style="color: #95e454;">\</span>
     --blacklist=/sys/fs <span style="color: #95e454;">\</span>
     --blacklist=/sys/kernel <span style="color: #95e454;">\</span>
     --blacklist=/sys/module <span style="color: #95e454;">\</span>
     --blacklist=/sys/power <span style="color: #95e454;">\</span>

</pre>
</div>
</div>
</div>
<div id="outline-container-org4d0fca4" class="outline-4">
<h4 id="org4d0fca4"><span class="section-number-4">32.9.3.</span> config hardening</h4>
<div class="outline-text-4" id="text-32-9-3">
<p>
/et/firejail/firejail.config:
</p>
<ul class="org-ul">
<li>bind no</li>
<li>disable-mnt yes</li>
<li>file-transfer no</li>
<li>force-nonewprivs yes</li>
<li>join no</li>
<li>name-change no</li>
<li>private-bin-no-local yes</li>
<li>seccomp-filter-add !chroot,kcmp,mincore</li>
<li>seccomp-error-action kill</li>
<li>whitelist-disable-topdir /etc,/usr/etc</li>
</ul>
</div>
</div>


<div id="outline-container-orga488d3e" class="outline-4">
<h4 id="orga488d3e"><span class="section-number-4">32.9.4.</span> errors</h4>
<div class="outline-text-4" id="text-32-9-4">
<p>
DBUS user socket was not found
</p>
<ul class="org-ul">
<li>&#x2013;dbus-user=none - disable dbus session access completely</li>
</ul>

<p>
Error: cannot access profile file: firefox.local
</p>
<ul class="org-ul">
<li>you disabled access to /home/user</li>
<li>cd /home/user ; firejail command</li>
</ul>

<p>
dont forget to:
</p>
<ul class="org-ul">
<li>chmod o-rx /home/user</li>
</ul>
</div>
</div>
<div id="outline-container-org7fbcc94" class="outline-4">
<h4 id="org7fbcc94"><span class="section-number-4">32.9.5.</span> per app</h4>
<div class="outline-text-4" id="text-32-9-5">
</div>
<ol class="org-ol">
<li><a id="org8053cf9"></a>firefox:<br />
<div class="outline-text-5" id="text-32-9-5-1">
<ol class="org-ol">
<li>firefox-common.profile: comment nogroups</li>
<li>harden confing - uncomment: private-bin and private-etc lines</li>
</ol>

<p>
firefox problems:
</p>
<ul class="org-ul">
<li>does not start
<ul class="org-ul">
<li>firefox.profile: comment ignore dbus-user none</li>
</ul></li>
<li>W [pulseaudio] core-util.c: Uh, personality() failed: Operation not permitted
<ul class="org-ul">
<li>firefox-common.profile: comment nogroups</li>
</ul></li>
<li>firefox.profile: comment
<ul class="org-ul">
<li>whitelist /usr/*</li>
<li>include whitelist-usr-share-common.inc</li>
</ul></li>
<li>firefox.profile: uncomment
<ul class="org-ul">
<li>private-bin basename &#x2026;</li>
</ul></li>
<li>for hardware acceleration require /sys</li>
<li>no sound error
<ul class="org-ul">
<li>firefire-common.profile: comment
<ul class="org-ul">
<li>nogroups</li>
</ul></li>
</ul></li>
<li>/usr/lib64/firefox/firefox: error while loading shared libraries: libstdc++.so.6: cannot open shared object
file: No such file or directory
<ul class="org-ul">
<li>firefox.profile: comment private-etc firefox</li>
</ul></li>
</ul>
</div>
</li>


<li><a id="orgbe19537"></a>telegram-dekstop:<br />
<div class="outline-text-5" id="text-32-9-5-2">
<ul class="org-ul">
<li>no notification sound:
<ul class="org-ul">
<li>telegram.profile:
<ul class="org-ul">
<li>comment line: private-bin bash, sh,telegram,Telegram</li>
</ul></li>
</ul></li>
</ul>
</div>
</li>

<li><a id="org071462e"></a>wine<br />
<div class="outline-text-5" id="text-32-9-5-3">
<ul class="org-ul">
<li>require
<ul class="org-ul">
<li>/usr/bin/id</li>
<li><i>sys</i></li>
<li>ln -s /usr/lib/dri/r600<sub>dri.so</sub> /usr/lib/dri/radeon<sub>dri.so</sub></li>
</ul></li>
<li>firefox.profile: comment
<ul class="org-ul">
<li>nogroups</li>
</ul></li>
<li>firefox.profile: uncomment
<ul class="org-ul">
<li>net none</li>
</ul></li>
<li>firefox.profile: add
<ul class="org-ul">
<li>noblocklist /usr/lib/dri</li>
<li>noblocklist ${HOME}</li>
<li>whitelist ${HOME}</li>
</ul></li>
</ul>
</div>
</li>


<li><a id="org0201d0c"></a>rtorrent<br />
<div class="outline-text-5" id="text-32-9-5-4">
<ul class="org-ul">
<li>comment # netfilter</li>
<li>add whitelist</li>
</ul>
</div>
</li>

<li><a id="org3325523"></a>mpv:<br />
<div class="outline-text-5" id="text-32-9-5-5">
<ul class="org-ul">
<li>comment # nogroups - for audio</li>
<li>whitelist</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orgf8872bd" class="outline-3">
<h3 id="orgf8872bd"><span class="section-number-3">32.10.</span> apparmor</h3>
<div class="outline-text-3" id="text-32-10">
<dl class="org-dl">
<dt>ps auxZ | grep -v '<sup>unconfined</sup>' </dt><dd>ограниченные программы -v - invert</dd>
<dt>aa-complain /full/path/to/program</dt><dd>отключить apparmor и смотреть syslog</dd>
<dt>aa-enforce /full/path/to/program</dt><dd>включить обратно после удаления ненужных ограничений</dd>
<dt>apparmor<sub>parser</sub> -r /etc/apparmor.d/profile</dt><dd>перезагрузить один профиль</dd>
<dt>aa-status</dt><dd>.</dd>
<dt>aa-genprof app &amp;&amp; app</dt><dd>create profile for app</dd>
<dt>aa-logprof</dt><dd>for existing profiles - allow/deny acces to certain tasks</dd>
<dt>Inherit</dt><dd>create rule in paret and executable inherit it from parent</dd>
<dt>Child</dt><dd>create sub-profile with separete rules</dd>
</dl>
</div>
</div>

<div id="outline-container-org6cb0534" class="outline-3">
<h3 id="org6cb0534"><span class="section-number-3">32.11.</span> nfs</h3>
<div class="outline-text-3" id="text-32-11">
<ul class="org-ul">
<li>client /etc/fstab</li>
<li>server /etc/exports</li>
</ul>
<p>
options
</p>
<ul class="org-ul">
<li>file systems on a separate partition of a harddisk, we can ensure that malicious users can not simply fill up
the entire harddisk by writing large files onto it.</li>
<li>/home nfs-client(secure) - Prevent normal users on an NFS client from mounting an NFS file system (on server)</li>
<li>/home nfs-client(ro)</li>
<li>nfs-clients - use numeric IP addresses or fully qualified domain names, instead of aliases.</li>
<li>/home nfs-client(root<sub>squash</sub>) - while mounting using the command mount, the user ID ?root? on the NFS client
will be replaced by the user ID ?nobody? on the NFS server.</li>
<li>nfs-server:/home /mnt/nfs nfs ro,nosuid,noexec 0 0 - Disable suid (superuser ID) on an NFS file system (on client)</li>
<li>ssh encryption of traffic: ssh -f -c blowfish -L 7777:nfs-server:2049 -l tony nfs-server /bin/sleep 86400
<ul class="org-ul">
<li>On the NFS client computer, bind a SSH port with NFS port 2049.</li>
<li>-c blowfish means SSH will use the algorithm blowfish to perform encryption.</li>
<li>-L 7777:nfs-server:2049 means binding the SSH client at port 7777 (or any other port that you want) to
communicate with the NFS server at address nfs-server on port 2049.</li>
<li>-l tony nfs-server means in the process of login on the authentication server at address nfs-server
(specify either the IP address or domain name of the authentication server), use the user login name tony
to authenticate on the server.</li>
<li>/bin/sleep 86400 means to prevent spawning a shell on the client computer for 1 day (86,400 seconds). You
can specify any larger number.</li>
</ul></li>
</ul>

<p>
fstab exampe
</p>
<ul class="org-ul">
<li><i>home /mnt/nfs</i> nfs tcp,rsize=8192,wsize=8192,intr,rw,bg,nosuid,port=7777,mountport=8888,noauto</li>
</ul>

<p>
show NFS shares only if you are using rpcbind.
</p>
<pre class="example">
showmount --exports dnsmy.local
</pre>
</div>
<div id="outline-container-org7c8c822" class="outline-4">
<h4 id="org7c8c822"><span class="section-number-4">32.11.1.</span> iptables</h4>
<div class="outline-text-4" id="text-32-11-1">
<p>
RPC Portmapper (on port 111), NFS (on port 2049), and Mountd (on port 2219)
#iptables -A INPUT -i eth0 -s 10.226.43.0/24 -dport 111 -j ACCEPT
#iptables -A INPUT -i eth0 -s 10.226.43.0/24 -dport 2049 -j ACCEPT
#iptables -A INPUT -i eth0 -s 10.226.43.0/24 -dport 2219 -j ACCEPT
</p>

<p>
Deny something else.
#iptables -A INPUT -i eth0 -s 0/0 -dport 111 -j DROP
#iptables -A INPUT -i eth0 -s 0/0 -dport 2049 -j DROP
#iptables -A INPUT -i eth0 -s 0/0 -dport 2219 -j DROP
#iptables -A INPUT -i eth0 -s 0/0 -j DROP
</p>

<p>
TCP wrapper to filter access to your portmapper by adding the line:
</p>
<ul class="org-ul">
<li>/etc/hosts.allow -  portmapper: 10.226.43.0/24</li>
<li>/etc/hosts.deny  - portmapper:ALL</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd764dde" class="outline-3">
<h3 id="orgd764dde"><span class="section-number-3">32.12.</span> USB</h3>
<div class="outline-text-3" id="text-32-12">
<p>
vectors:
</p>
<ol class="org-ol">
<li>HID devices</li>
<li>Faked network adapters - are no real danger</li>
<li>firmware flashing over the USB connection</li>
</ol>
</div>

<div id="outline-container-org0865971" class="outline-4">
<h4 id="org0865971"><span class="section-number-4">32.12.1.</span> protection</h4>
<div class="outline-text-4" id="text-32-12-1">
<ul class="org-ul">
<li>alias usb-block="echo 0 | tee /sys/bus/usb/devices/*/authorized"</li>
<li>alias usb-unblock="echo 1 | tee /sys/bus/usb/devices/*/authorized"</li>
<li>alias block="echo 0 | tee /sys/bus/usb/devices/*/authorized ; vlock -a"</li>
</ul>



<p>
<a href="https://wiki.gentoo.org/wiki/Allow_only_known_usb_devices">https://wiki.gentoo.org/wiki/Allow_only_known_usb_devices</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org2386c24" class="outline-3">
<h3 id="org2386c24"><span class="section-number-3">32.13.</span> telegram <a id="orgbe5e5ea"></a></h3>
<div class="outline-text-3" id="text-32-13">
<ul class="org-ul">
<li>see <a href="emacsh#MissingReference">emacsh#MissingReference</a></li>
<li>see <a href="shell#MissingReference">shell#MissingReference</a></li>
</ul>
</div>
<div id="outline-container-org29350e9" class="outline-4">
<h4 id="org29350e9"><span class="section-number-4">32.13.1.</span> procs &amp; cons</h4>
<div class="outline-text-4" id="text-32-13-1">
<p>
Pros
</p>
<ul class="org-ul">
<li>End-to-end (E2E) encryption</li>
<li>Encryption algorithms: MTProto, a custom protocol</li>
<li>Open source apps and Telegram Database Library</li>
<li>Self-destructing messages</li>
<li>Users can be logged in on multiple devices simultaneously</li>
<li>Supports Two-Step Verification</li>
<li>GDPR compliant</li>
</ul>

<p>
Cons
</p>
<ul class="org-ul">
<li>Registration requires a phone number</li>
<li>E2E encryption only for Secret Chats</li>
<li>Servers are not open source</li>
<li>Logs IP Address and other user data (use a good VPN service)</li>
<li>May be sharing data with government agencies</li>
</ul>
</div>
</div>

<div id="outline-container-org0ef5bb2" class="outline-4">
<h4 id="org0ef5bb2"><span class="section-number-4">32.13.2.</span> harden</h4>
<div class="outline-text-4" id="text-32-13-2">
<ul class="org-ul">
<li>Phone Number → Who can see my phone number — Nobody.</li>
<li>Data and Storage → Auto Download Media → Toggle off</li>
<li>Phone Number → Who can find me by my number — My Contacts.</li>
<li>Last Seen &amp; Online → Who can see my timestamp — Nobody.</li>
<li>Profile photo → Who can see my profile photo — My Contacts.</li>
<li>Calls → Who can call me — My Contacts (or Nobody, if you prefer).</li>
<li>Calls→ Peer-to-peer — My contacts (or Nobody, if you prefer not to share your IP address with chat partners).</li>
<li>Forwarded Messages → Who can add a link to my account when forwarding my messages — My Contacts.</li>
<li>Groups &amp; Channels → Who can add me — My Contacts.</li>
</ul>

<p>
Disable P2P calls for everyone - IP address of the user’s call object will appear on the Telegram control log
</p>
</div>
</div>
<div id="outline-container-org03ca076" class="outline-4">
<h4 id="org03ca076"><span class="section-number-4">32.13.3.</span> telegram api</h4>
<div class="outline-text-4" id="text-32-13-3">
<p>
create bot <a href="https://core.telegram.org/bots">https://core.telegram.org/bots</a>
get group id <a href="https://stackoverflow.com/questions/32423837/telegram-bot-how-to-get-a-group-chat-id">https://stackoverflow.com/questions/32423837/telegram-bot-how-to-get-a-group-chat-id</a>
</p>

<p>
get group id:
</p>
<ul class="org-ul">
<li><a href="https://api.telegram.org/botXXX:YYYY/getUpdates">https://api.telegram.org/botXXX:YYYY/getUpdates</a></li>
</ul>

<p>
send message:
</p>
<ul class="org-ul">
<li>curl -X POST "<a href="https://api.telegram.org/botXXX:YYYY/sendMessage">https://api.telegram.org/botXXX:YYYY/sendMessage</a>" -d "chat<sub>id</sub>=-zzzzzzzzzz&amp;text=my sample text"</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org02e9f44" class="outline-3">
<h3 id="org02e9f44"><span class="section-number-3">32.14.</span> Check system by intrusion</h3>
<div class="outline-text-3" id="text-32-14">
<ul class="org-ul">
<li>logs</li>
<li>recent started processed:
<ul class="org-ul">
<li>ps -ef &#x2013;sort=start<sub>time</sub></li>
<li>ps -aux &#x2013;sort=start<sub>time</sub></li>
<li>cd /proc; ls -td &#x2013;full-time &#x2013;time-style=+%s [0123456789]*;</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd4068c4" class="outline-3">
<h3 id="orgd4068c4"><span class="section-number-3">32.15.</span> namespaces - isolated instance of the global resource</h3>
<div class="outline-text-3" id="text-32-15">
<p>
For:
</p>
<ul class="org-ul">
<li>Changes to the global resource are visible to other processes that are members of the name‐ space, but are
invisible to other processes.</li>
<li>Containers</li>
</ul>

<p>
man 7 namespaces
</p>
<ul class="org-ul">
<li>/proc/&lt;pid&gt;/ns/*</li>
</ul>
</div>
<div id="outline-container-orgc5de54c" class="outline-4">
<h4 id="orgc5de54c"><span class="section-number-4">32.15.1.</span> types</h4>
<div class="outline-text-4" id="text-32-15-1">
<ul class="org-ul">
<li>Cgroup    CLONE<sub>NEWCGROUP</sub> cgroup<sub>namespaces</sub>(7)  Cgroup root directory</li>
<li>IPC       CLONE<sub>NEWIPC</sub>    ipc<sub>namespaces</sub>(7)     System  V  IPC, POSIX message queues. Inter process communication</li>
<li>Network   CLONE<sub>NEWNET</sub>    network<sub>namespaces</sub>(7) Network  devices,  stacks, ports, etc.</li>
<li>Mount CLONE<sub>NEWNS</sub> mount<sub>namespaces</sub>(7) Mount points. When new namespaces are created the current mounts are
copied to a new namespace.</li>
<li>PID       CLONE<sub>NEWPID</sub>    pid<sub>namespaces</sub>(7)     Process IDs</li>
<li>Time      CLONE<sub>NEWTIME</sub>   time<sub>namespaces</sub>(7)    Boot and monotonic clocks</li>
<li>User      CLONE<sub>NEWUSER</sub>   user<sub>namespaces</sub>(7)    User and group IDs</li>
<li>UTS CLONE<sub>NEWUTS</sub> uts<sub>namespaces</sub>(7) Hostname and NIS domain name. This allows a system to have different host
and domain names for various processes. UTS: unix timesharing system</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7888e2d" class="outline-3">
<h3 id="org7888e2d"><span class="section-number-3">32.16.</span> Selinux (Security-Enhanced Linux)</h3>
<div class="outline-text-3" id="text-32-16">
<p>
Linux kernel module
</p>
</div>
</div>
<div id="outline-container-orgf4beed4" class="outline-3">
<h3 id="orgf4beed4"><span class="section-number-3">32.17.</span> Disable executables, pip</h3>
<div class="outline-text-3" id="text-32-17">
<ol class="org-ol">
<li>noexec on /home</li>
<li>no pip and npm: chmod -x /usr/lib/python-exec/*/pip* ;  mv $(python -c 'import pip; import os; print(os.path.dirname(pip._<sub>file</sub>__))'){,_}</li>
<li>block python: setfacl -m group:users:r /usr/bin/python*</li>
<li>no internet access</li>
</ol>
</div>
</div>

<div id="outline-container-orgcd5c3a9" class="outline-3">
<h3 id="orgcd5c3a9"><span class="section-number-3">32.18.</span> Hardening testers</h3>
<div class="outline-text-3" id="text-32-18">
<p>
<a href="https://github.com/CISOfy/lynis">https://github.com/CISOfy/lynis</a>
</p>
</div>
</div>
<div id="outline-container-orgefc5067" class="outline-3">
<h3 id="orgefc5067"><span class="section-number-3">32.19.</span> Log analyzers</h3>
<div class="outline-text-3" id="text-32-19">
<ul class="org-ul">
<li>Graylog</li>
<li>Fluentd</li>
<li>LOGalyze</li>
<li>logwatch</li>
</ul>

<p>
Simple log analyzer based on regex:
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">! /bin/</span><span style="color: #8ac6f2; font-weight: bold;">sh</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">All regex characters should be escaped!</span>
<span style="color: #cae682;">filters</span>=( <span style="color: #95e454;">"wpa_supplicant is already stopped"</span>
        )
<span style="color: #cae682;">files</span>=( /var/log/*.log
        )
<span style="color: #cae682;">output</span>=<span style="color: #95e454;">""</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ <span style="color: #95e454;">"$1"</span> = <span style="color: #95e454;">"-"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"Script was called with '-' argument"</span>
    <span style="color: #cae682;">output</span>+=$(<span style="color: #fa8072;">cat | grep -Ei "warn|error|crit|fatal"</span>)
<span style="color: #8ac6f2; font-weight: bold;">else</span>
    <span style="color: #8ac6f2; font-weight: bold;">for</span> file<span style="color: #8ac6f2; font-weight: bold;"> in</span> <span style="color: #95e454;">"${files[@]}"</span> ; <span style="color: #8ac6f2; font-weight: bold;">do</span>
        <span style="color: #cae682;">output</span>+=$(<span style="color: #fa8072;">tail -n 2000 "$file" | grep -Ei "warn|error|crit|fatal" | sed "s#^#\n${file}: #"</span>)
    <span style="color: #8ac6f2; font-weight: bold;">done</span>
<span style="color: #8ac6f2; font-weight: bold;">fi</span>

<span style="color: #cae682;">filt</span>=$(<span style="color: #fa8072;">for s in "${filters[@]}" ; do echo "$s" ; done  | grep . | tr '\n' '|' </span>)
<span style="color: #cae682;">filt</span>=${<span style="color: #cae682;">filt</span>:0:${#<span style="color: #cae682;">filt</span>}-1}
<span style="color: #e5786d;">echo</span> -E <span style="color: #95e454;">"$output"</span> | grep . | rev | sort -k 1,3 | rev | grep -vE <span style="color: #95e454;">"$filt"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6c14c7" class="outline-3">
<h3 id="orgb6c14c7"><span class="section-number-3">32.20.</span> Antivirus, online system monitoring</h3>
<div class="outline-text-3" id="text-32-20">
<p>
<a href="https://github.com/lkrg-org/lkrg">https://github.com/lkrg-org/lkrg</a> - runtime integrity checking of the Linux kernel and detection of security
 vulnerability exploits against the kernel.
</p>
<ul class="org-ul">
<li>Gentoo: app-antivirus/lkrg</li>
</ul>
</div>
</div>


<div id="outline-container-org89a395b" class="outline-3">
<h3 id="org89a395b"><span class="section-number-3">32.21.</span> links</h3>
<div class="outline-text-3" id="text-32-21">
<p>
<a href="https://medium.com/@pipermerriam/my-guide-to-solid-digital-security-fb76cb19c536#.hmz8imwe6">https://medium.com/@pipermerriam/my-guide-to-solid-digital-security-fb76cb19c536#.hmz8imwe6</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orge22bd9b" class="outline-2">
<h2 id="orge22bd9b"><span class="section-number-2">33.</span> wifi</h2>
<div class="outline-text-2" id="text-33">
<ul class="org-ul">
<li>wifi phy <i>sys/bus/usb/driver/mt7601u/*/ieee80211</i></li>
<li>wifi dev <i>sys/bus/usb/driver/mt7601u/*/net</i></li>
</ul>
</div>
<div id="outline-container-org900362c" class="outline-3">
<h3 id="org900362c"><span class="section-number-3">33.1.</span> theory</h3>
<div class="outline-text-3" id="text-33-1">
<p>
electromagnetic radiation (EMR) - radio waves, microwaves, infrared, (visible) light, ultraviolet, X-rays, and
gamma rays
</p>

<p>
IEEE 802.11  wireless local area network (WLAN)
</p>

<p>
The most basic BSS consists of one AP and one STA.
</p>

<p>
Cellular network or mobile network - require sim card and modem, GMS-2G, UMTS-3g, LTE-4G, 5G
</p>
</div>
<div id="outline-container-org6773fbc" class="outline-4">
<h4 id="org6773fbc"><span class="section-number-4">33.1.1.</span> terms:</h4>
<div class="outline-text-4" id="text-33-1-1">
<ul class="org-ul">
<li>WLAN - Wireless LAN</li>
<li>WIFI - Wireless Fidelity - trademark</li>
<li>Fidelity - compatibility between wireless equipme</li>
<li>WiFI Alliance - non-profit organization wifi.org</li>
<li>RSSI - Received Signal Strength Indicator (usually 0-60 or 0-255)  - isn't standardized</li>
<li>dBm - decibels relative to a milliwatt - (-30 is a higher signal than -80)</li>
<li>access point (AP)</li>
<li>STAs - stations - all devices</li>
<li>Supplicant - [ˈsʌplɪkənt] Проситель at point-to-point LAN/WLAN segment that seeks to be authenticated by an
authenticator. used in IEEE 802.1X standard</li>
<li>SSID - service set ID - WLAN needs a unique name. WLAN can have several AP - zero to 32 octets (32 bytes)
long
<ul class="org-ul">
<li>32 bytes</li>
<li>wildcard SSID - null SSID - hidden SSID - used, in enterprise and mesh networks to steer a client to a
particular (e.g. less utilized) access point.</li>
<li>can be used by multiple APs in WLAN</li>
</ul></li>
<li>BSSID - basic service set identifier - subset of SSID - included in all wireless packets. = AP MAC address</li>
<li>ESSID - extended basic service set - consists of all of the BSSs in the network - identifies the same
network as the SSID does. The term SSID is used most often.</li>
<li>MBSS - mesh basic service set</li>
<li>MLME - Media Access Control (MAC) Sublayer Management Entity.</li>
<li>SME - Station Management Entity, often prepended with AP (Access Point)</li>
<li>Hotspot 2.0 - free access point, 2.0 is an approach to automatically connect and roam</li>
<li>tethering - private hotstop with smartphone</li>
<li>Beacon -  management frames in IEEE 802.11 based WLANs
<ul class="org-ul">
<li>beacon interval - the frequency of the beacon is broadcast by router. transmitted by the access point (AP)</li>
</ul></li>
<li>often 'packet' is taken to be the layer above 'frame' (i.e. level 3 of the OSI model).</li>
<li>frame -  (layer 2) IEEE 802.11 packets is encapsulated within the data field of the packet</li>
<li>Wireless Intrusion Prevention System (WIPS) - classifying known wireless devices, cataloguing their unique
signal patterns</li>
<li>HT20 - channel bandwidth is 20 MHz. main channel sends Beacon packets and data packets, and the auxiliary
channel sends other packets.</li>
<li>HT40 -  channel bandwidth is 40 MHz
<ul class="org-ul">
<li>+/- - Two neighboring 20 MHz channels are bundled to form a 40 MHz channel. If the center frequency of the
main 20 MHz channel is higher than that of the auxiliary channel, 40MHz-plus is displayed; otherwise,
40MHz-minus is displayed.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb2dbef5" class="outline-4">
<h4 id="orgb2dbef5"><span class="section-number-4">33.1.2.</span> frequency</h4>
<div class="outline-text-4" id="text-33-1-2">
<p>
microwaves - as short as one meter to as short as one millimeter; with frequencies between 300 MHz (0.3 GHz) and 300 GHz.
EHF = Extremely high frequency (microwaves)
SHF = Super-high frequency (microwaves) 30GHz-3GHz 1cm-1dm
</p>

<p>
UHF = Ultrahigh frequency (radio waves) 3GHz-300MHz 1dm-1m
VHF = Very high frequency (radio)
HF = High frequency (radio)
MF = Medium frequency (radio)
LF = Low frequency (radio)
VLF = Very low frequency (radio)
VF = Voice frequency
ULF = Ultra-low frequency (radio)
SLF = Super-low frequency (radio)
ELF = Extremely low frequency (radio)
</p>

<p>
Wifi - 2.4/5/6 GHz
5G cellular network - 3–6 GHz, and millimeter wave band, around 28 and 39 GHz
bluetooth -  from 2.402 to 2.48 GHz
</p>
</div>
</div>
<div id="outline-container-org361b48c" class="outline-4">
<h4 id="org361b48c"><span class="section-number-4">33.1.3.</span> channels 2.4 GHz (802.11b/g/n/ax)</h4>
<div class="outline-text-4" id="text-33-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Channel</th>
<th scope="col" class="org-right">F0 (MHz)</th>
<th scope="col" class="org-left">Frequency range (MHz)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-right">2412</td>
<td class="org-left">2401–2423</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-right">2417</td>
<td class="org-left">2406–2428</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-right">2422</td>
<td class="org-left">2411–2433</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-right">2427</td>
<td class="org-left">2416–2438</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-right">2432</td>
<td class="org-left">2421–2443</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-right">2437</td>
<td class="org-left">2426–2448</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-right">2442</td>
<td class="org-left">2431–2453</td>
</tr>

<tr>
<td class="org-right">8</td>
<td class="org-right">2447</td>
<td class="org-left">2436–2458</td>
</tr>

<tr>
<td class="org-right">9</td>
<td class="org-right">2452</td>
<td class="org-left">2441–2463</td>
</tr>

<tr>
<td class="org-right">10</td>
<td class="org-right">2457</td>
<td class="org-left">2446–2468</td>
</tr>

<tr>
<td class="org-right">11</td>
<td class="org-right">2462</td>
<td class="org-left">2451–2473</td>
</tr>

<tr>
<td class="org-right">12</td>
<td class="org-right">2467</td>
<td class="org-left">2456–2478</td>
</tr>

<tr>
<td class="org-right">13</td>
<td class="org-right">2472</td>
<td class="org-left">2461–2483</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org7ce7b26" class="outline-4">
<h4 id="org7ce7b26"><span class="section-number-4">33.1.4.</span> health</h4>
<div class="outline-text-4" id="text-33-1-4">
<p>
The World Health Organization has classified radio frequency electromagnetic radiation as Group 2B – possibly
carcinogenic.
</p>
</div>
</div>
<div id="outline-container-org684ffa4" class="outline-4">
<h4 id="org684ffa4"><span class="section-number-4">33.1.5.</span> modes</h4>
<div class="outline-text-4" id="text-33-1-5">
<ul class="org-ul">
<li>AccessPoint (AP) infrastructure mode</li>
<li>Station infrastructure mode</li>
<li>Monitor mode</li>
<li>Ad-Hoc (IBSS) mode</li>
<li>Wireless Distribution System (WDS)</li>
<li>Mesh - Ячеистая топология</li>
</ul>
</div>
</div>
<div id="outline-container-org385a194" class="outline-4">
<h4 id="org385a194"><span class="section-number-4">33.1.6.</span> distance</h4>
<div class="outline-text-4" id="text-33-1-6">
<p>
free space loss:
</p>
<ul class="org-ul">
<li>FSPL (dB) = 20log10(d) + 20log10(f) + K</li>
<li>d = distance</li>
<li>f = frequency</li>
<li>K= constant that depends on the units used for d and f</li>
<li>If d is measured in kilometers, f in MHz, the formula is:</li>
<li>FSPL (dB) = 20log10(d)+ 20log10(f) + 32.44</li>
</ul>

<p>
Distance (km) = 10(Free Space Path Loss – 32.44 – 20log10(f))/20
</p>

<p>
<a href="https://stackoverflow.com/questions/11217674/how-to-calculate-distance-from-wifi-router-using-signal-strength">https://stackoverflow.com/questions/11217674/how-to-calculate-distance-from-wifi-router-using-signal-strength</a>
</p>
</div>
<ol class="org-ol">
<li><a id="org30254fa"></a>java<br />
<div class="outline-text-5" id="text-33-1-6-1">
<p>
private const val DISTANCE<sub>MHZ</sub><sub>M</sub> = 27.55
</p>

<p>
fun calculateDistance(frequency: Int, level: Int): Double =
        10.0.pow((DISTANCE<sub>MHZ</sub><sub>M</sub> - 20 * log10(frequency.toDouble()) + abs(level)) / 20.0)
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org7f30d7f" class="outline-4">
<h4 id="org7f30d7f"><span class="section-number-4">33.1.7.</span> security</h4>
<div class="outline-text-4" id="text-33-1-7">
<ul class="org-ul">
<li>Wired Equivalent Privacy (WEP) - security algorithm ( 802.11 Wired Equivalent Privacy (WEP) security
mechanism defined in the original standard IEEE 802.11-1997)</li>
<li>Wi-Fi Protected Access (WPA) (802.11e then 802.11i)
<ul class="org-ul">
<li>implements the Temporal Key Integrity Protocol (TKIP) - per-packet key - message integrity check stronger
than a CRC</li>
</ul></li>
<li>802.11i standard (i.e. WPA2) - WEP-40 and WEP-104  deprecated (802.11i, later incorporated into 802.11-2007)
<ul class="org-ul">
<li>AES-based encryption mode (Pre-Shared Key)</li>
<li>EAP-TLS optional authentication method .</li>
<li>PSK - Pre-Shared Key</li>
<li>CCMP protocol - Counter Mode CBC-MAC Protocol - message integrity check stronger</li>
</ul></li>
<li>WPA3</li>
</ul>

<p>
Wi-Fi Protected Setup (WPS) - without password
</p>
<ul class="org-ul">
<li>PIN method</li>
<li>Push button method - typically 2 minutes or less -  router will scan for devices</li>
<li>Near-field communication method</li>
<li>USB method (deprecated)</li>
</ul>

<p>
WPA-Personal (WPA-PSK mode) - encrypts the network traffic by deriving its 128-bit encryption key from a
256-bit shared key.
</p>
<ul class="org-ul">
<li>string of 64 hexadecimal digits or 8 to 63 printable ASCII characters.</li>
<li>pre-shared key (PSK) -</li>
</ul>

<p>
WPA-Enterprise (WPA-802.1X mode) (sometimes just WPA as opposed to WPA-PSK)
</p>
<ul class="org-ul">
<li>requires a RADIUS authentication server (FreeRADIUS)</li>
<li>Extensible Authentication Protocol (EAP) are used for authentication</li>
</ul>

<p>
Wi-Fi Protected Setup (WPS)
</p>
<ul class="org-ul">
<li>creates a major security hole via WPS PIN recovery.</li>
</ul>

<p>
CCMP -
<a href="https://en.wikipedia.org/wiki/IEEE_802.11">https://en.wikipedia.org/wiki/IEEE_802.11</a>
</p>
</div>
<ol class="org-ol">
<li><a id="org95c5134"></a>EAP extensions<br />
<div class="outline-text-5" id="text-33-1-7-1">
<ul class="org-ul">
<li>EAP-TLS (previously tested)</li>
<li>EAP-TTLS/MSCHAPv2 (April 2005[27])</li>
<li>PEAPv0/EAP-MSCHAPv2 (April 2005)</li>
<li>PEAPv1/EAP-GTC (April 2005)</li>
<li>PEAP-TLS</li>
<li>EAP-SIM (April 2005)</li>
<li>EAP-AKA (April 2009[28])</li>
<li>EAP-FAST (April 2009)</li>
</ul>
</div>
</li>
<li><a id="orgd5c32f0"></a>Security issues<br />
<div class="outline-text-5" id="text-33-1-7-2">
<ul class="org-ul">
<li>Weak password - Pre-shared key WPA and WPA2
<ul class="org-ul">
<li>WPA passphrase hashes are seeded from the SSID name and its length</li>
</ul></li>
<li>Lack of forward secrecy
<ul class="org-ul">
<li>Forward secrecy - feature of specific key agreement protocols - session keys will not be compromised even
if long-term secrets used in the session key exchange are compromised</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2172296" class="outline-4">
<h4 id="org2172296"><span class="section-number-4">33.1.8.</span> wifi Generations</h4>
<div class="outline-text-4" id="text-33-1-8">
<ul class="org-ul">
<li>Wi‑Fi 7 	802.11be 	40000 	TBA 	2.4/5/6</li>
<li>Wi‑Fi 6E 	802.11ax 	600 to 9608 	2020 	2.4/5/6</li>
<li>Wi‑Fi 6 	2019 	2.4/5</li>
<li>Wi‑Fi 5 	802.11ac 	433 to 6933 	2014 	2.4/5	обратн совместимост с n</li>
<li>Wi‑Fi 4 	802.11n 	72 to 600 	2008 	2.4/5	обратно совместим с b / g / a?</li>
<li>(Wi-Fi 3*) 	802.11g 	6 to 54 	2003 	2.4	обратно совместимой с b</li>
<li>(Wi-Fi 2*) 	802.11a 	6 to 54 	1999 	5	Не совместим с сетями b или g.</li>
<li>(Wi-Fi 1*) 	802.11b 	1 to 11 	1999 	2.4	Совместим с g сетями.</li>
<li>(Wi-Fi 0*) 	802.11 	1 to 2 	1997 	2.4</li>
</ul>
</div>
</div>
<div id="outline-container-orgf6459ff" class="outline-4">
<h4 id="orgf6459ff"><span class="section-number-4">33.1.9.</span> MIMO Multiple Input Multiple Output</h4>
<div class="outline-text-4" id="text-33-1-9">
<p>
802.11n
</p>
</div>
</div>

<div id="outline-container-orgf8100b8" class="outline-4">
<h4 id="orgf8100b8"><span class="section-number-4">33.1.10.</span> frames layer 2</h4>
<div class="outline-text-4" id="text-33-1-10">
</div>
<ol class="org-ol">
<li><a id="org80ecc41"></a>consist of<br />
<div class="outline-text-5" id="text-33-1-10-1">
<p>
Each frame consists of a
</p>
<ul class="org-ul">
<li>MAC header</li>
<li>payload</li>
<li>frame check sequence (FCS).</li>
<li>Management frames (opetional)</li>
</ul>

<p>
MAC header:
</p>
<ul class="org-ul">
<li>Frame Control − 2 bytes, 11 subfields.
<ul class="org-ul">
<li>Protocol version − 2 bits 00.</li>
<li>Type − 2 bits</li>
<li>Subtype − 4 bits – Request to Send (RTS) or a Clear to Send (CTS) For a regular data frame, the value is
set to 0000.</li>
<li>To DS − 1 bit indicating whether the frame is going to the access point (AC)</li>
<li>From DS − 1 bit subfield indicating whether the frame is coming from the AC.</li>
<li>More Fragments − 1 bit - 1 indicates that more fragments would follow.</li>
<li>Retry − 1 bit -  1 specifies a retransmission of a previous frame.</li>
<li>Power Management − 1 bit - 1 =  the sender is adopting power-save mode.</li>
<li>More Data − 1 bit - 1 = sender has further data frames for the receiver.</li>
<li>Protected Frame − 1 bit - 1 = encrypted frame.</li>
<li>Order − 1 bit, informs the receiver that to the higher layers the frames should be in an ordered sequence.</li>
</ul></li>
<li>Duration −  2-byte - the time period for which the frame and its acknowledgement occupy the channel.</li>
<li>Address 1:  6-byte - Destination address MAC</li>
<li>Address 2:  6-byte - Source address MAC</li>
<li>Address 3:  6-byte - BSS Id</li>
<li>Sequence − 0 or 2-byte - first 4 bits provides identification to the fragment and the rest 12 bits contain the
sequence number that increments with each transmission.</li>
<li>Address 4: - 0 or 6-byte only present in between access points in an Extended Service Set or between intermediate nodes in a mesh network.</li>
<li>QoS control 0 or 2 bytes -</li>
<li>Data − variable sized</li>
<li>Frame Check Sequence (FCS) − 4-byte field -  error detection information.</li>
</ul>
</div>
</li>
<li><a id="orga5c1933"></a>Types and SubTypes<br />
<div class="outline-text-5" id="text-33-1-10-2">
<ul class="org-ul">
<li>Probe Request/Response</li>
<li>Beacon frame - send by AP</li>
<li>RTS &lt;= ready to send</li>
<li>CTS =&gt; Clear to send</li>
<li>Data &lt;= MAC level transmission is not acked</li>
<li>ACK =&gt; Acknowledgement</li>
</ul>
</div>
</li>
<li><a id="org3951f5e"></a>links<br />
<div class="outline-text-5" id="text-33-1-10-3">
<p>
<a href="https://en.wikipedia.org/wiki/802.11_Frame_Types">https://en.wikipedia.org/wiki/802.11_Frame_Types</a>
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgea9bb8c" class="outline-4">
<h4 id="orgea9bb8c"><span class="section-number-4">33.1.11.</span> WPA/WPA2</h4>
<div class="outline-text-4" id="text-33-1-11">
<ul class="org-ul">
<li>PMK - (Pairwise Master Key)</li>
<li>PTK or GTK (Pairwise Transit Key) PTK = f(ANonce, SNonce, PMK, A<sub>MAC</sub>, S<sub>MAC</sub>)</li>
<li>ANONCE- is a random number that the AP has made. Authenticator</li>
<li>SNONCE- is a random number that the client has made. supplicant</li>
<li>MIC- Message Integrity Code</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">encryption</th>
<th scope="col" class="org-left">encryption algorithm</th>
<th scope="col" class="org-left">IV size</th>
<th scope="col" class="org-left">encryption key</th>
<th scope="col" class="org-left">Integrity mechanism</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">WEP</td>
<td class="org-left">RC4</td>
<td class="org-left">24-bits</td>
<td class="org-left">40/104-bits</td>
<td class="org-left">CRC-32</td>
</tr>

<tr>
<td class="org-left">WPA</td>
<td class="org-left">RC4,TKIP</td>
<td class="org-left">48-bits</td>
<td class="org-left">128-bits</td>
<td class="org-left">Michael Alg and CRC-32</td>
</tr>

<tr>
<td class="org-left">WPA2</td>
<td class="org-left">AES, CCMP</td>
<td class="org-left">48-bits</td>
<td class="org-left">128-bits</td>
<td class="org-left">CBC-MAC</td>
</tr>
</tbody>
</table>

<p>
EAP-based 4-way handshake
</p>
<ol class="org-ol">
<li>&lt;= ANonce</li>
<li>=&gt; SNONCE + MIC</li>
<li>&lt;= GTK + MIC</li>
<li>=&gt; Ack</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org2c2cace" class="outline-3">
<h3 id="org2c2cace"><span class="section-number-3">33.2.</span> Mediatek mt7601u</h3>
<div class="outline-text-3" id="text-33-2">
<ul class="org-ul">
<li><a href="https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git/tree/mediatek">https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git/tree/mediatek</a></li>
<li><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/mediatek/mt7601u">https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/mediatek/mt7601u</a></li>
</ul>
<p>
b/g/n
</p>

<p>
/lib/firmware/mt7601u.bin
</p>
</div>
</div>
<div id="outline-container-org5b809cb" class="outline-3">
<h3 id="org5b809cb"><span class="section-number-3">33.3.</span> linix kernel support</h3>
<div class="outline-text-3" id="text-33-3">
<p>
Firmware license tags: redistribution allowed, <b>closed source</b>!
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Comparison_of_open-source_wireless_drivers">https://en.wikipedia.org/wiki/Comparison_of_open-source_wireless_drivers</a></li>
<li><a href="https://wireless.wiki.kernel.org/en/users/drivers">https://wireless.wiki.kernel.org/en/users/drivers</a></li>
<li><a href="https://deviwiki.com/wiki/Main_Page">https://deviwiki.com/wiki/Main_Page</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgaf29cac" class="outline-3">
<h3 id="orgaf29cac"><span class="section-number-3">33.4.</span> install</h3>
<div class="outline-text-3" id="text-33-4">
<ol class="org-ol">
<li>to keep simple names: touch /etc/udev/rules.d/80-net-name-slot.rules</li>
<li>net-wireless/iwd or net-wireless/wpa<sub>supplicant</sub> -  allows users to connect to WPA enabled access points</li>
<li>enable regulatory domain in kernel</li>
<li>- rfkill unblock all
<ul class="org-ul">
<li>ifconfig -a</li>
<li>ifconfig -v wan0 up</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-org11fee70" class="outline-3">
<h3 id="org11fee70"><span class="section-number-3">33.5.</span> iw</h3>
<div class="outline-text-3" id="text-33-5">
<p>
low level device config, WEP, scan
</p>
<ul class="org-ul">
<li>iw phy [phy1 info]</li>
<li>iw dev</li>
<li>iw dev wlan0 info</li>
<li>iw phy1 reg get</li>
<li>iw dev wlan0 scan -u passive | less</li>
<li></li>
</ul>
</div>
<div id="outline-container-org30d7779" class="outline-4">
<h4 id="org30d7779"><span class="section-number-4">33.5.1.</span> monitor mode</h4>
<div class="outline-text-4" id="text-33-5-1">
<ul class="org-ul">
<li>new<sub>mac</sub>=(date +%N |md5sum|sed 's/^\(..\)\(..\)\(..\)\(..\)\(..\).*$/02:\1:\2:\3:\4:\5/') # generate MAC address random MAC address</li>
<li>iw phy phy0 interface add mon0 type monitor addr $new<sub>mac</sub></li>
<li>iw dev wlan0 del (optional)</li>
<li>ifconfig mon0 up # default channel 1 frequency 2412 MHz</li>
<li>iw dev mon0 set freq 2437</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org4ab3069" class="outline-3">
<h3 id="org4ab3069"><span class="section-number-3">33.6.</span> iwd</h3>
<div class="outline-text-3" id="text-33-6">
<ul class="org-ul">
<li>debug: /usr/libexec/iwd -d</li>
<li>iwd keeps the configuration file at /var/lib/iwd as a .psk file with your access point name.</li>
</ul>
</div>
<div id="outline-container-org2299808" class="outline-4">
<h4 id="org2299808"><span class="section-number-4">33.6.1.</span> dependencies</h4>
<div class="outline-text-4" id="text-33-6-1">
<ul class="org-ul">
<li>kernel access ell -</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-org7500e19" class="outline-4">
<h4 id="org7500e19"><span class="section-number-4">33.6.2.</span> iwctl</h4>
<div class="outline-text-4" id="text-33-6-2">
<ul class="org-ul">
<li>iwctl device list</li>
<li>iwctl station wlan0 show - station mode infp</li>
<li>iwctl known-networks list - history of connections</li>
<li>scan:
<ul class="org-ul">
<li>station wlp2s0b1 scan - not required</li>
<li>station wlp2s0b1 get-networks</li>
</ul></li>
<li>iwctl &#x2013;passphrase '' station  wlp2s0b1 connect TestWPA2</li>
</ul>
</div>
</div>
<div id="outline-container-org69059f7" class="outline-4">
<h4 id="org69059f7"><span class="section-number-4">33.6.3.</span> bash<sub>alias</sub></h4>
<div class="outline-text-4" id="text-33-6-3">
<p>
alias wificonn="echo detected WLAN: $(ip a | grep -o -m1 'wlan.') ; rc-service iwd start ; sleep 1 ; iwctl &#x2013;passphrase='60s%.!<sub>Col</sub>' station $(ip a | grep -o -m1 'wlan.') connect TP-Link<sub>ACC3</sub> "
alias wifiget="rc-service iwd start ; sleep 1 ; iwctl station $(ip a | grep -o -m1 'wlan.') get-networks"
alias wifiup="rfkill unblock 0 &amp;&amp; ip link set wlan0 up"
</p>
</div>
</div>
<div id="outline-container-orgb699bd7" class="outline-4">
<h4 id="orgb699bd7"><span class="section-number-4">33.6.4.</span> WiFi provisioning</h4>
<div class="outline-text-4" id="text-33-6-4">
<ul class="org-ul">
<li>Blynk.Inject - mobile app UI - get password for  your home or office WiFi</li>
</ul>
</div>
</div>

<div id="outline-container-org09e8f04" class="outline-4">
<h4 id="org09e8f04"><span class="section-number-4">33.6.5.</span> MAC Address Randomization</h4>
<div class="outline-text-4" id="text-33-6-5">
<p>
/etc/iwd/main.conf:
</p>
<ul class="org-ul">
<li>[General]</li>
<li>AddressRandomization=network</li>
</ul>
</div>
</div>
<div id="outline-container-orgb8498b0" class="outline-4">
<h4 id="orgb8498b0"><span class="section-number-4">33.6.6.</span> scripts</h4>
<div class="outline-text-4" id="text-33-6-6">
<p>
alias wificonn="echo detected WLAN: $(ip a | grep -o -m1 'wlan.') ; rc-service iwd start ; sleep 1 ; iwctl &#x2013;passphrase='60s%.!<sub>Col</sub>' station $(ip a | grep -o -m1 'wlan.') connect TP-Link<sub>ACC3</sub> "
alias wifiget="rc-service iwd start ; sleep 1 ; iwctl station $(ip a | grep -o -m1 'wlan.') get-networks"
alias wifiup="rfkill unblock 0 &amp;&amp; ip link set wlan0 up"
</p>
</div>
</div>
<div id="outline-container-org6ee38e7" class="outline-4">
<h4 id="org6ee38e7"><span class="section-number-4">33.6.7.</span> links</h4>
<div class="outline-text-4" id="text-33-6-7">
<ul class="org-ul">
<li><a href="https://wiki.archlinux.org/title/Iwd">https://wiki.archlinux.org/title/Iwd</a></li>
<li><a href="https://wiki.gentoo.org/wiki/Iwd">https://wiki.gentoo.org/wiki/Iwd</a></li>
<li>iwd doc <a href="https://iwd.wiki.kernel.org/">https://iwd.wiki.kernel.org/</a></li>
<li>git <a href="https://git.kernel.org/pub/scm/network/wireless/iwd.git">https://git.kernel.org/pub/scm/network/wireless/iwd.git</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5c56fc5" class="outline-3">
<h3 id="org5c56fc5"><span class="section-number-3">33.7.</span> wpa<sub>supplicant</sub></h3>
<div class="outline-text-3" id="text-33-7">
<p>
WPA/WPA2/Enterprise connections, device control
</p>

<ol class="org-ol">
<li>emerge &#x2013;ask net-wireless/wpa<sub>supplicant</sub></li>
<li>bzless /usr/share/doc/${P}/wpa<sub>supplicant.conf.bz2</sub> &gt; /etc/wpa<sub>supplicant</sub>/wpa<sub>supplicant.conf</sub></li>
<li>chmod o-rwx /etc/wpa<sub>supplicant</sub>/wpa<sub>supplicant.conf</sub></li>
</ol>
</div>

<div id="outline-container-org3b861b1" class="outline-4">
<h4 id="org3b861b1"><span class="section-number-4">33.7.1.</span> config</h4>
<div class="outline-text-4" id="text-33-7-1">
<ul class="org-ul">
<li>ctrl<sub>interface</sub>=DIR=/run/wpa<sub>supplicant</sub> GROUP=wheel</li>
<li>update<sub>config</sub>=1</li>
<li>bgscan="simple:120:-75:600" - scab trashold</li>
<li>mac<sub>addr</sub>=1 - rendom MAC per EES connection</li>
</ul>
</div>
</div>

<div id="outline-container-orgc4f8462" class="outline-4">
<h4 id="orgc4f8462"><span class="section-number-4">33.7.2.</span> status</h4>
<div class="outline-text-4" id="text-33-7-2">
<ul class="org-ul">
<li>address - MAC address</li>
<li>UUID - for WPS - generated based on local MAC address</li>
</ul>
</div>
</div>
<div id="outline-container-org676735c" class="outline-4">
<h4 id="org676735c"><span class="section-number-4">33.7.3.</span> scan and scan<sub>results</sub></h4>
<div class="outline-text-4" id="text-33-7-3">
<ul class="org-ul">
<li>frequency - MHZ</li>
<li>signal level - dBm</li>
<li>flags -  security options</li>
</ul>
</div>
</div>

<div id="outline-container-orge475601" class="outline-4">
<h4 id="orge475601"><span class="section-number-4">33.7.4.</span> wpa<sub>cli</sub></h4>
<div class="outline-text-4" id="text-33-7-4">
<p>
&gt;add<sub>network</sub>
&gt;set<sub>network</sub> 0 ssid "myssid"
&gt;set<sub>network</sub> 0 psk "password"
&gt;enable 0
</p>


<p>
&gt;add<sub>network</sub>
&gt;set<sub>network</sub> 0 ssid "myssid"
&gt;set<sub>network</sub> 0 key<sub>mgmt</sub> SAE
&gt;set<sub>network</sub> 0 sae<sub>password</sub> "password"
&gt;enable 0
</p>


<p>
set<sub>network</sub> ieee80211w 2
</p>
</div>
</div>
</div>
<div id="outline-container-orgea44ff5" class="outline-3">
<h3 id="orgea44ff5"><span class="section-number-3">33.8.</span> wireless-tools</h3>
<div class="outline-text-3" id="text-33-8">
<ul class="org-ul">
<li>iwconfig</li>
<li>iwevenqt</li>
<li>iwgetid</li>
<li>iwlist
<ul class="org-ul">
<li>scanning</li>
<li>frequency/channel - Center frequencies</li>
<li>encryption/keys</li>
</ul></li>
<li>iwpriv</li>
<li>iwspy</li>
</ul>
</div>
</div>
<div id="outline-container-org361217a" class="outline-3">
<h3 id="org361217a"><span class="section-number-3">33.9.</span> cat /proc/net/wireless</h3>
</div>
<div id="outline-container-org2898ee6" class="outline-3">
<h3 id="org2898ee6"><span class="section-number-3">33.10.</span> errors</h3>
<div class="outline-text-3" id="text-33-10">
<p>
direct firmware load failed error -2
</p>
<ul class="org-ul">
<li>if you built driver into kernel (not as a module) the firmware will not load because at the time kernel
loads the root filesystem is not mounted yet.</li>
<li>include firmware in kernel binary:
<ul class="org-ul">
<li>Device Drivers  &#x2014;&gt;  Generic Driver Options  &#x2014;&gt;  Firmware loader &#x2014;&gt;
<ul class="org-ul">
<li>-*- Firmware loading facility</li>
<li>() Build named firmware blobs into the kernel binary</li>
<li>(/lib/firmware) Firmware blobs root directory</li>
</ul></li>
</ul></li>
</ul>
<p>
DORMANT - power saving mode
</p>
<ul class="org-ul">
<li>disable pwer saving</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-org02ecc15" class="outline-3">
<h3 id="org02ecc15"><span class="section-number-3">33.11.</span> regulatory domain</h3>
<div class="outline-text-3" id="text-33-11">
<p>
governments assert the right to regulate usage of radio spectrum within their respective territories
</p>
<ul class="org-ul">
<li>ne-wireless/crda
<ul class="org-ul">
<li>Central Regulatory Domain Agent (CRDA) - can be triggered to update the kernel wireless core's definition of
the regulatory permissions for a specific country.</li>
</ul></li>
<li>ne-wireless/wireless-regdb -  regulatory database used by CRDA</li>
<li>use ISO 3166-1 alpha-2 country codes <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2</a></li>
</ul>

<p>
loads the database via udev rule
</p>

<p>
TODO /etc/default/crda
</p>

<p>
regilatory database
</p>
<ul class="org-ul">
<li>binary file format - to have the data available quickly and as compact as possible, authorship and integrity</li>
<li>embedding the signature into the binary file</li>
<li>signature is checked against a list of public keys built into the regulatory daemon binary</li>
</ul>

<p>
Kernel:
</p>
<ul class="org-ul">
<li>Please set CONFIG<sub>CFG80211</sub>=m or add regulatory.db and regulatory.db.p7s to CONFIG<sub>EXTRA</sub><sub>FIRMWARE</sub>.
<ul class="org-ul">
<li>CONFIG<sub>EXTRA</sub><sub>FIRMWARE</sub>="regulatory.db regulatory.db.p7s"</li>
<li>CONFIG<sub>EXTRA</sub><sub>FORMWARE</sub><sub>D</sub>="/lib/firmare"</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgc7af402" class="outline-4">
<h4 id="orgc7af402"><span class="section-number-4">33.11.1.</span> links</h4>
<div class="outline-text-4" id="text-33-11-1">
<p>
<a href="https://wireless.wiki.kernel.org/en/developers/Regulatory">https://wireless.wiki.kernel.org/en/developers/Regulatory</a>
<a href="https://wiki.archlinux.org/title/Network_configuration/Wireless#Respecting_the_regulatory_domain">https://wiki.archlinux.org/title/Network_configuration/Wireless#Respecting_the_regulatory_domain</a>
<a href="https://www.kernel.org/doc/html/latest/networking/regulatory.html">https://www.kernel.org/doc/html/latest/networking/regulatory.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orga15cd02" class="outline-3">
<h3 id="orga15cd02"><span class="section-number-3">33.12.</span> testing</h3>
<div class="outline-text-3" id="text-33-12">
<ul class="org-ul">
<li>tree /sys/class/net</li>
<li>ip addr</li>
<li>ifconfig -a
<ul class="org-ul">
<li>ifconfig -v wlan0 up # activate</li>
</ul></li>
<li>dmesg | grep -i -E 'xx:xx.x|wlan|iwl|80211'</li>
<li>udevadm monitor &#x2013;environment kernel</li>
</ul>
</div>
</div>
<div id="outline-container-orge9fd192" class="outline-3">
<h3 id="orge9fd192"><span class="section-number-3">33.13.</span> links</h3>
<div class="outline-text-3" id="text-33-13">
<ul class="org-ul">
<li>linux kernel doc <a href="https://wireless.wiki.kernel.org/en/users/documentation">https://wireless.wiki.kernel.org/en/users/documentation</a></li>
<li><a href="https://docs.google.com/viewer?url=https%3A%2F%2Fwifigid.ru%2Fwp-content%2Fuploads%2F2018%2F11%2Fwifi-3.pdf&amp;hl=ru&amp;embedded=true">https://docs.google.com/viewer?url=https%3A%2F%2Fwifigid.ru%2Fwp-content%2Fuploads%2F2018%2F11%2Fwifi-3.pdf&amp;hl=ru&amp;embedded=true</a></li>
</ul>
</div>
</div>
<div id="outline-container-orga3ebf02" class="outline-3">
<h3 id="orga3ebf02"><span class="section-number-3">33.14.</span> hardware</h3>
<div class="outline-text-3" id="text-33-14">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Comparison_of_open-source_wireless_drivers">https://en.wikipedia.org/wiki/Comparison_of_open-source_wireless_drivers</a></li>
<li><a href="https://openwrt.org">https://openwrt.org</a></li>
<li><a href="https://github.com/ZerBea/hcxdumptool">https://github.com/ZerBea/hcxdumptool</a></li>
</ul>
</div>
<div id="outline-container-orgf59a923" class="outline-4">
<h4 id="orgf59a923"><span class="section-number-4">33.14.1.</span> standards</h4>
<div class="outline-text-4" id="text-33-14-1">
<ul class="org-ul">
<li>IEEE 802.11 - base standard 1997
<ul class="org-ul">
<li>802 Overview and Archirecture</li>
<li>802.2 Logical Link Control</li>
<li>802.1 Bridging, Management</li>
<li>802.10 Security</li>
<li>IEEE 802.3 Etherenet</li>
<li>802.16 WiMAX</li>
<li>802.17 Resilient Packet Ring (RPR)</li>
<li>802.11* apply to all WiFi devices</li>
<li>Standards with upper case letters are base standards, e.g. IEEE 802.1AB-2009</li>
</ul></li>
<li>first version 1997 IEEE 802.11 -
<ul class="org-ul">
<li>MAC layer and 3 physical</li>
<li>2.4 GHz</li>
<li>1-2Mbps</li>
<li>no longer used</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd3c941a" class="outline-4">
<h4 id="orgd3c941a"><span class="section-number-4">33.14.2.</span> physical</h4>
<div class="outline-text-4" id="text-33-14-2">
<ol class="org-ol">
<li>ready to send (RTS) (dest and message duration) -&gt;</li>
<li>Clear to send (CTS) &lt;-</li>
<li>Data -&gt;</li>
<li>ACK &lt;-(MAC-level retransmission if not acked)</li>
</ol>

<p>
Frame Format
</p>
</div>
</div>
</div>
<div id="outline-container-org80488f8" class="outline-3">
<h3 id="org80488f8"><span class="section-number-3">33.15.</span> wifi sec recomendations</h3>
<div class="outline-text-3" id="text-33-15">
<ul class="org-ul">
<li>избегайте банковских операций во время подключения к публичным сетям</li>
<li>никогда не авторизуйтесь в сети, если для подтверждения у вас просят номер телефона, электронную почту или
же социальную сеть. В таком случае, этими данными могут воспользоваться злоумышленники</li>
<li>отключите опцию общего доступа к вашим файлам</li>
<li>не используйте обнаружение вашего девайся другими пользователями сети</li>
<li>также нежелательна опция автоматического подключения к открытой сети</li>
<li>не регистрируйтесь на сайтах во время подключения к общедоступным сетям Wi-Fi</li>
<li>избегайте сетей в которых соединение периодически прерывается</li>
<li>при подключении к общей сети - желательно использовать VPN-сервесы</li>
</ul>
</div>
</div>
<div id="outline-container-org83c84f5" class="outline-3">
<h3 id="org83c84f5"><span class="section-number-3">33.16.</span> RTL8812AU/21AU</h3>
<div class="outline-text-3" id="text-33-16">
<ul class="org-ul">
<li><a href="https://github.com/aircrack-ng/rtl8812au">https://github.com/aircrack-ng/rtl8812au</a></li>
<li><a href="https://www.justsomestuff.co.uk/wiki/doku.php/linux/add_driver">https://www.justsomestuff.co.uk/wiki/doku.php/linux/add_driver</a></li>
<li>book linux device drivers <a href="https://lwn.net/Kernel/LDD3/">https://lwn.net/Kernel/LDD3/</a></li>
<li><a href="https://stackoverflow.com/questions/8549992/kernel-how-to-add-a-new-source-file-for-kernel-build">https://stackoverflow.com/questions/8549992/kernel-how-to-add-a-new-source-file-for-kernel-build</a></li>
</ul>


<p>
I copied  aircrack-ng/rtl8812au to kernel folder: drivers/net/wireless/realtek/rtlwifi/
I add line to drivers/net/wireless/realtek/rtlwifi/Makefile:  obj-$(CONFIG<sub>88XXAU</sub>)		+= rtl8812au/
I add lines to drivers/net/wireless/realtek/rtlwifi/Kconfig:
config 88XXAU
	tristate "Realtek RTL8812AU USB Wireless Network Adapter"
	depends on USB
	select RTLWIFI
	select RTLWIFI<sub>USB</sub>
	help
	This is the driver for Realtek RTL8812AU USB
I replaced line in file rtl8812au/Makefile : export CONFIG<sub>88XXAU</sub> = m
with: export CONFIG<sub>88XXAU</sub> = y
</p>
</div>
</div>
</div>
<div id="outline-container-orge191ffc" class="outline-2">
<h2 id="orge191ffc"><span class="section-number-2">34.</span> bluetooth</h2>
<div class="outline-text-2" id="text-34">
<p>
2.4 GHz - 1-3Mbps
</p>

<ul class="org-ul">
<li>net-wireless/blueman</li>
<li><p>
net-wireless/bluez
</p>

<p>
bluetoothctl
</p>
<ul class="org-ul">
<li>scan on</li>
</ul>

<p>
pairing - connection without user intervention (for example, as soon as in range)
</p></li>
</ul>
</div>

<div id="outline-container-org0c2b6e7" class="outline-3">
<h3 id="org0c2b6e7"><span class="section-number-3">34.1.</span> pygatt vs pybluez</h3>
<div class="outline-text-3" id="text-34-1">
<ul class="org-ul">
<li>The PyGatt library is based on PyBluez,</li>
</ul>
</div>
</div>
<div id="outline-container-org9c86193" class="outline-3">
<h3 id="org9c86193"><span class="section-number-3">34.2.</span> terms</h3>
<div class="outline-text-3" id="text-34-2">
<p>
Bluetooth RSSI (Received Signal Strength Indicator) - measured in decibels (dBm). The more negative the RSSI
 value, the further away the Bluetooth device.
</p>
</div>
</div>
<div id="outline-container-orgffe8c12" class="outline-3">
<h3 id="orgffe8c12"><span class="section-number-3">34.3.</span> BT-400 not required</h3>
<div class="outline-text-3" id="text-34-3">
<ul class="org-ul">
<li>guide <a href="https://gist.github.com/ssledz/69b7f7b0438e653c08c155e244fdf7d8">https://gist.github.com/ssledz/69b7f7b0438e653c08c155e244fdf7d8</a></li>
<li>curl 'https://dlcdnets.asus.com/pub/ASUS/wireless/USB-BT400/DR<sub>USB</sub><sub>BT400</sub><sub>1201710</sub><sub>Windows.zip</sub>' -o bt400-driver.zip</li>
<li>id to  hex name <a href="https://aur.archlinux.org/cgit/aur.git/tree/filelist.txt?h=bcm20702a1-firmware">https://aur.archlinux.org/cgit/aur.git/tree/filelist.txt?h=bcm20702a1-firmware</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9ff1ee5" class="outline-3">
<h3 id="org9ff1ee5"><span class="section-number-3">34.4.</span> D-Bus</h3>
<div class="outline-text-3" id="text-34-4">
<p>
inter-process communication mechanism
</p>
<ul class="org-ul">
<li>non-transactional. It is stateful and connection-based</li>
<li>dbus daemon - runs an actual <b>bus</b>
<ul class="org-ul">
<li>bus address will typically be the filename of a Unix-domain socket such as "<i>tmp</i>.hiddensocket</li>
</ul></li>
</ul>

<p>
dev-util/d-feet
</p>
</div>
</div>

<div id="outline-container-orgf752de9" class="outline-3">
<h3 id="orgf752de9"><span class="section-number-3">34.5.</span> bash alias</h3>
<div class="outline-text-3" id="text-34-5">
<p>
alias blueup="rc-service bluetooth up ; sleep 1; bluetoothctl power on &amp;&amp; bluetoothctl scan on"
alias bluedown="bluetoothctl power off"
</p>
</div>
</div>
<div id="outline-container-org116a597" class="outline-3">
<h3 id="org116a597"><span class="section-number-3">34.6.</span> RTL8761B</h3>
<div class="outline-text-3" id="text-34-6">
<p>
/usr/lib/firmware/rtl<sub>bt</sub>/rtl8761b<sub>fw.bin</sub> OR /lib/firmware/rtl<sub>bt</sub>/rtl8761b<sub>fw.bin</sub>
/usr/lib/firmware/rtl<sub>bt</sub>/rtl8761b<sub>config.bin</sub> OR /lib/firmware/rtl<sub>bt</sub>/rtl8761b<sub>config.bin</sub>
<a href="https://linuxreviews.org/Realtek_RTL8761B">https://linuxreviews.org/Realtek_RTL8761B</a>
<a href="https://aur.archlinux.org/packages/rtl8761usb">https://aur.archlinux.org/packages/rtl8761usb</a>
</p>

<p>
<a href="https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=rtl8761usb">https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=rtl8761usb</a>
</p>
</div>
</div>
<div id="outline-container-orgd122d37" class="outline-3">
<h3 id="orgd122d37"><span class="section-number-3">34.7.</span> bluetoothctl</h3>
<div class="outline-text-3" id="text-34-7">
<ul class="org-ul">
<li>help			help</li>
<li>current device	list</li>
<li>status		show</li>
<li>scan			scan</li>
<li>disable/enamble	power off/on</li>
<li>connected devices	devices</li>
</ul>

<p>
to find devices:
</p>
<ol class="org-ol">
<li>activate scan - scan on</li>
<li>devices - to get name</li>
<li>look back to find out RSSI</li>
</ol>
</div>
</div>
<div id="outline-container-org1effc49" class="outline-3">
<h3 id="org1effc49"><span class="section-number-3">34.8.</span> bluealsa-aplay</h3>
<div class="outline-text-3" id="text-34-8">
<p>
bluealsa -p a2dp-sink -p a2dp-source &#x2013;xapl-resp-name=iPhone &#x2013;a2dp-volume
</p>

<p>
BlueALSA volume persistent state storage:
</p>


<ul class="org-ul">
<li><a href="https://github.com/TheWeirdDev/Bluetooth_Headset_Battery_Level">https://github.com/TheWeirdDev/Bluetooth_Headset_Battery_Level</a></li>
<li><a href="https://github.com/arkq/bluez-alsa/blob/master/doc/bluealsa.8.rst">https://github.com/arkq/bluez-alsa/blob/master/doc/bluealsa.8.rst</a></li>
</ul>
</div>
<div id="outline-container-orga9c820c" class="outline-4">
<h4 id="orga9c820c"><span class="section-number-4">34.8.1.</span> /etc/dbus-1/system.d/bluealsa.conf</h4>
<div class="outline-text-4" id="text-34-8-1">
<p>
add lines:
</p>
<ul class="org-ul">
<li>&lt;allow send<sub>destination</sub>="org.bluealsa.sink" /&gt;</li>
<li>&lt;allow send<sub>destination</sub>="org.bluealsa.source" /&gt;</li>
</ul>
<div class="org-src-container">
<pre class="src src-text">&lt;!-- This configuration file specifies the required security policies
     for BlueALSA core daemon to work. --&gt;

&lt;!DOCTYPE busconfig PUBLIC "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
 "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd"&gt;
&lt;busconfig&gt;

  &lt;!-- ../system.conf have denied everything, so we just punch some holes --&gt;

  &lt;policy user="root"&gt;
    &lt;allow own_prefix="org.bluealsa"/&gt;
    &lt;allow send_destination="org.bluealsa"/&gt;
    &lt;allow send_destination="org.bluealsa.sink" /&gt;
    &lt;allow send_destination="org.bluealsa.source" /&gt;
  &lt;/policy&gt;

  &lt;policy group="audio"&gt;
    &lt;allow send_destination="org.bluealsa"/&gt;
    &lt;allow send_destination="org.bluealsa.sink" /&gt;
    &lt;allow send_destination="org.bluealsa.source" /&gt;
  &lt;/policy&gt;

&lt;/busconfig&gt;

</pre>
</div>
</div>
</div>
<div id="outline-container-org38ae517" class="outline-4">
<h4 id="org38ae517"><span class="section-number-4">34.8.2.</span> asoundrc</h4>
<div class="outline-text-4" id="text-34-8-2">
<div class="org-src-container">
<pre class="src src-text">pcm.!default {
         type plug
         slave.pcm {
                 type bluealsa
                 device "xx:xxx:xxx:xx..."
                 profile "a2dp"
                 delay 1000
         }
         hint {
                 show on
                 description "BT Headset"
         }
   }

   ctl.!default {
           type bluealsa
           device "xx:xxx:xxx:xx...." - NOT REQUIRED!
   }
</pre>
</div>
</div>
</div>
<div id="outline-container-org9dce285" class="outline-4">
<h4 id="org9dce285"><span class="section-number-4">34.8.3.</span> asoundrc2</h4>
<div class="outline-text-4" id="text-34-8-3">
<div class="org-src-container">
<pre class="src src-text">pcm.bluetooth {
    type bluealsa
    device "64:6B:B1:3A:B6:37"
    profile "a2dp"
    hint {
              show on
              description "BT Headset"
      }
}

pcm.!default {
    type plug
    slave.pcm "bluetooth"
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgefd5eb7" class="outline-3">
<h3 id="orgefd5eb7"><span class="section-number-3">34.9.</span> links</h3>
<div class="outline-text-3" id="text-34-9">
<p>
<a href="https://elinux.org/images/3/32/Doing_Bluetooth_Low_Energy_on_Linux.pdf">https://elinux.org/images/3/32/Doing_Bluetooth_Low_Energy_on_Linux.pdf</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org4a287d1" class="outline-2">
<h2 id="org4a287d1"><span class="section-number-2">35.</span> image</h2>
<div class="outline-text-2" id="text-35">
</div>
<div id="outline-container-org8bdd1bb" class="outline-3">
<h3 id="org8bdd1bb"><span class="section-number-3">35.1.</span> rotate</h3>
<div class="outline-text-3" id="text-35-1">
<p>
to right
</p>
<pre class="example">
convert image.jpg -rotate 90 image.jpg
</pre>

<p>
to left (keep size)
</p>
<pre class="example">
convert image.jpg -distort SRT -90 image.jpg
</pre>
</div>
</div>
<div id="outline-container-org70db35f" class="outline-3">
<h3 id="org70db35f"><span class="section-number-3">35.2.</span> reduse size</h3>
<div class="outline-text-3" id="text-35-2">
<pre class="example">
for f in /home/u/Desktop/* ; do convert $f -resize 1000x1000 -quality 90% /home/u/Desktop/conv/$(basename $f) ; done
</pre>


<p>
enhance size:
</p>
<pre class="example">
f="/home/u/Desktop/conf2/a.jpg" ; convert /home/u/Desktop/conf/$(basename "$f") -resize 2000x2000 -quality 93% "$f"
</pre>


<p>
<b>change resolution and keep aspect ration</b>
</p>
<pre class="example">
convert a.jpg -geometry 300x300 a2.jpg
</pre>
</div>
</div>
<div id="outline-container-orgf1d9329" class="outline-3">
<h3 id="orgf1d9329"><span class="section-number-3">35.3.</span> hidden data</h3>
<div class="outline-text-3" id="text-35-3">
<p>
<b>get hidden data</b>
</p>
<ul class="org-ul">
<li>feh &#x2013;draw-exif</li>
<li>exiv2 / exifgrep</li>
<li>exiftool -auU -g1 image</li>
</ul>
<p>
<b>clear hidden data</b>
</p>
<ul class="org-ul">
<li>exiftool -all= image</li>
</ul>
<pre class="example">
for f in /home/u/Desktop/conf2/* ; do exiftool -all= $f ; done
</pre>
</div>
</div>
<div id="outline-container-org6a1b89e" class="outline-3">
<h3 id="org6a1b89e"><span class="section-number-3">35.4.</span> images slideshow</h3>
<div class="outline-text-3" id="text-35-4">
<ul class="org-ul">
<li>feh -D 2 /dir</li>
</ul>
</div>
</div>

<div id="outline-container-org4220184" class="outline-3">
<h3 id="org4220184"><span class="section-number-3">35.5.</span> <span class="todo TODO">TODO</span> one image inside of onether</h3>
<div class="outline-text-3" id="text-35-5">
<p>
<a href="https://stackoverflow.com/questions/38476804/insert-one-image-into-another-using-convert">https://stackoverflow.com/questions/38476804/insert-one-image-into-another-using-convert</a>
</p>
</div>
</div>
<div id="outline-container-org5483099" class="outline-3">
<h3 id="org5483099"><span class="section-number-3">35.6.</span> merge several to one</h3>
<div class="outline-text-3" id="text-35-6">
<p>
montage -mode concatenate -tile 1x v[1-9].jpg out.jpg
</p>
</div>
</div>
</div>
<div id="outline-container-org2a05633" class="outline-2">
<h2 id="org2a05633"><span class="section-number-2">36.</span> imageMagic</h2>
<div class="outline-text-2" id="text-36">
</div>
<div id="outline-container-org03262d8" class="outline-3">
<h3 id="org03262d8"><span class="section-number-3">36.1.</span> troubles</h3>
<div class="outline-text-3" id="text-36-1">
<p>
convert: attempt to perform an operation not allowed by the security policy `PDF' @ error/constitute.c/IsCoderAuthorized/449.
</p>
<ul class="org-ul">
<li>/etc/ImageMagick-7/policy.xml: &lt;policy domain="coder" rights="read | write" pattern="PDF" /&gt;</li>
<li>security vulnerability that caused distributions to implement the policy: can allow an attacker to execute
arbitrary commands with arbitrary arguments. in Ghostscript</li>
</ul>

<p>
sh: line 1: gs: command not found \n convert: FailedToExecuteCommand `'gs'
</p>
<ul class="org-ul">
<li></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org4ffce28" class="outline-2">
<h2 id="org4ffce28"><span class="section-number-2">37.</span> Firefox</h2>
<div class="outline-text-2" id="text-37">
<p>
startup:
</p>
<ul class="org-ul">
<li>emerge x11-apps/xhost app-admin/sudo</li>
<li>/etc/sudoers.d/ff
<ul class="org-ul">
<li>user ALL=(ff) NOPASSWD: ALL</li>
</ul></li>
<li>xhost si:localuser:ff ; sudo -u ff firefox -width 1366 -height 768 $@</li>

<li>privacy.resistFingerprinting to true - fix screen resolution 1000 × 900 with errors possible, replace user-agent</li>
</ul>

<p>
browser.cache.disk.enable - to false ?
</p>
</div>
<div id="outline-container-orgc437584" class="outline-3">
<h3 id="orgc437584"><span class="section-number-3">37.1.</span> keys</h3>
<div class="outline-text-3" id="text-37-1">
<p>
Alt, e, n, Alt+Shift+e, Alt+Shift+e - proxy settings, arrow to choose
</p>
</div>
</div>
<div id="outline-container-org3fea804" class="outline-3">
<h3 id="org3fea804"><span class="section-number-3">37.2.</span> fingerprints</h3>
<div class="outline-text-3" id="text-37-2">
<p>
articles:
</p>
<ul class="org-ul">
<li>article <a href="https://pixelprivacy.com/resources/browser-fingerprinting/">https://pixelprivacy.com/resources/browser-fingerprinting/</a></li>
<li>1 <a href="https://habr.com/ru/company/selectel/blog/521550/">https://habr.com/ru/company/selectel/blog/521550/</a></li>
<li>2 <a href="https://habr.com/ru/company/selectel/blog/523462/">https://habr.com/ru/company/selectel/blog/523462/</a></li>
<li>entropy <a href="https://habr.com/ru/post/357238/">https://habr.com/ru/post/357238/</a></li>
<li><a href="https://webkay.robinlinus.com/">https://webkay.robinlinus.com/</a></li>
</ul>

<p>
recommended Firefox Plugins <a href="https://amiunique.org/privacy-tools">https://amiunique.org/privacy-tools</a>
</p>


<p>
<a href="https://browserleaks.com/">https://browserleaks.com/</a>
</p>

<ul class="org-ul">
<li><a href="https://whoer.net/en">https://whoer.net/en</a></li>
</ul>
</div>

<div id="outline-container-org8fe6f36" class="outline-4">
<h4 id="org8fe6f36"><span class="section-number-4">37.2.1.</span> <a href="https://coveryourtracks.eff.org/">https://coveryourtracks.eff.org/</a></h4>
<div class="outline-text-4" id="text-37-2-1">
<p>
Hash of canvas fingerprint
e9c63d7fe3a3f9cc2687d88cff61506e
Hash of WebGL fingerprint
cf316a71a991aced31cfbf8a043fa324
WebGL Vendor &amp; Renderer
Mesa/X.org~llvmpipe (LLVM 11.0.0, 128 bits)
</p>

<p>
Screen Size and Color Depth
1366x768x24
One in x browsers have this value: 14.24
</p>

<p>
System Fonts
Arial, Courier New, Times New Roman (via javascript)
One in x browsers have this value: 759.86
</p>


<p>
User Agent
Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0
One in x browsers have this value: 6.79
</p>

<p>
Hash of WebGL fingerprint (disabled)
d928a8c2420ac1b95e719f20d5d93341
<a href="https://coveryourtracks.eff.org">https://coveryourtracks.eff.org</a>
</p>
</div>
</div>
<div id="outline-container-orgf8a1b36" class="outline-4">
<h4 id="orgf8a1b36"><span class="section-number-4">37.2.2.</span> <a href="http://uniquemachine.org/">http://uniquemachine.org/</a> with source code</h4>
<div class="outline-text-4" id="text-37-2-2">
<p>
Browser fingerprint
707b6f3c0e81118309c95b165772ddbc
</p>

<p>
Computer fingerprint (Developing, not finished)
1c1d5d28a5423225bd29d898d1c5c551
</p>
</div>
</div>

<div id="outline-container-org0b4765f" class="outline-4">
<h4 id="org0b4765f"><span class="section-number-4">37.2.3.</span> <a href="https://browserleaks.com/fonts">https://browserleaks.com/fonts</a></h4>
<div class="outline-text-4" id="text-37-2-3">
<p>
286,568 tested
</p>

<p>
✔ 2e8d42d63e7a992891473b0e92b935c7
Report	60 fonts and 15 unique metrics found
</p>

<p>
Fingerprint	✔ f11f4549
</p>
</div>
</div>
</div>
<div id="outline-container-orge1dcd59" class="outline-3">
<h3 id="orge1dcd59"><span class="section-number-3">37.3.</span> screen</h3>
<div class="outline-text-3" id="text-37-3">
<p>
Никогда не развертывать на весь экран
</p>
<ul class="org-ul">
<li>stats <a href="https://www.w3schools.com/browsers/browsers_display.asp">https://www.w3schools.com/browsers/browsers_display.asp</a>
<ul class="org-ul">
<li>most common 1366x768</li>
</ul></li>
<li>get current <a href="https://whatismyresolution.com/">https://whatismyresolution.com/</a></li>
</ul>

<p>
firefox -width 1366 -height 768 ( do not work with resistFingerprinting)
add-on Window Resizer by antwhere.com <a href="https://addons.mozilla.org/en-US/firefox/addon/window-resizer-antwhere/">https://addons.mozilla.org/en-US/firefox/addon/window-resizer-antwhere/</a>
</p>
<ul class="org-ul">
<li>870 - 666 = 102 = 768 + 102 = 1366x870</li>
</ul>
</div>
</div>
<div id="outline-container-org5697dc5" class="outline-3">
<h3 id="org5697dc5"><span class="section-number-3">37.4.</span> disable GPU fingerprint(hardware acceleration)</h3>
<div class="outline-text-3" id="text-37-4">
<p>
to true:
gfx.direct2d.disabled
layers.acceleration.disabled
</p>
</div>
</div>

<div id="outline-container-org5abf4ef" class="outline-3">
<h3 id="org5abf4ef"><span class="section-number-3">37.5.</span> fonts</h3>
<div class="outline-text-3" id="text-37-5">
<p>
Font Fingerprint Defender by ilGur <a href="https://addons.mozilla.org/en-US/firefox/addon/font-fingerprint-defender/">https://addons.mozilla.org/en-US/firefox/addon/font-fingerprint-defender/</a>
</p>

<p>
or
</p>

<p>
browser.display.use<sub>document</sub><sub>fonts</sub>  - 0
</p>
</div>
</div>
<div id="outline-container-orga043a56" class="outline-3">
<h3 id="orga043a56"><span class="section-number-3">37.6.</span> TLS</h3>
<div class="outline-text-3" id="text-37-6">
<ul class="org-ul">
<li>check <a href="https://browserleaks.com/ssl">https://browserleaks.com/ssl</a></li>
<li>config <a href="https://wiki.gentoo.org/wiki/Firefox">https://wiki.gentoo.org/wiki/Firefox</a></li>
</ul>

<p>
security.tls.version.min - 3
</p>
</div>
</div>
<div id="outline-container-org8850f56" class="outline-3">
<h3 id="org8850f56"><span class="section-number-3">37.7.</span> User-Agent</h3>
<div class="outline-text-3" id="text-37-7">
<p>
Good Plugin: User Agent by SandVPN
</p>

<p>
Random User-Agent by Paramtamtam
</p>

<p>
require privacy.resistFingerprinting to be disabled
</p>

<p>
Plugins:
</p>
<ul class="org-ul">
<li>User-Agent Switcher (GPLv3) <a href="https://gitlab.com/ntninja/user-agent-switcher">https://gitlab.com/ntninja/user-agent-switcher</a></li>
<li>MIT <a href="http://www.whatuseragent.com/">http://www.whatuseragent.com/</a> - github.com -  alert(window.navigator.userAgent) - not hide</li>
</ul>

<p>
<b>check User-Agent inside of JavaScript</b>
</p>
<ul class="org-ul">
<li>alert(window.navigator.userAgent)</li>
</ul>
</div>
<div id="outline-container-orgc2d5413" class="outline-4">
<h4 id="orgc2d5413"><span class="section-number-4">37.7.1.</span> testers</h4>
</div>
</div>
<div id="outline-container-org0d76efd" class="outline-3">
<h3 id="org0d76efd"><span class="section-number-3">37.8.</span> user agent ( net required)</h3>
<div class="outline-text-3" id="text-37-8">
<ul class="org-ul">
<li>about:config  general.useragent.override</li>
</ul>

<p>
popular:
</p>
<ul class="org-ul">
<li><a href="https://beamtic.com/user-agents/?browser=FireFox">https://beamtic.com/user-agents/?browser=FireFox</a></li>
<li><a href="https://whatmyuseragent.com/browser/firefox/ff">https://whatmyuseragent.com/browser/firefox/ff</a></li>
<li>Mozilla/5.0 (Linux x86<sub>64</sub>; rv:79.0) Gecko/20100101 Firefox/79.0</li>
<li>Mozilla/5.0 (Linux x86<sub>64</sub>; rv:79.0) Gecko/20100101 Firefox/79.0</li>
<li>Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0</li>
</ul>
</div>
</div>

<div id="outline-container-orgbab7814" class="outline-3">
<h3 id="orgbab7814"><span class="section-number-3">37.9.</span> User-Agent checkers</h3>
<div class="outline-text-3" id="text-37-9">
<ul class="org-ul">
<li><a href="https://amiunique.org/stats">https://amiunique.org/stats</a></li>
<li><a href="https://amiunique.org/fingerprint">https://amiunique.org/fingerprint</a></li>
<li><a href="https://webbrowsertools.com/useragent/">https://webbrowsertools.com/useragent/</a></li>
<li><a href="https://www.whatismyip.com/user-agent/">https://www.whatismyip.com/user-agent/</a></li>
<li><a href="https://tools.iplocation.net/http-browser-header">https://tools.iplocation.net/http-browser-header</a></li>
</ul>
</div>
</div>
<div id="outline-container-org526fd8f" class="outline-3">
<h3 id="org526fd8f"><span class="section-number-3">37.10.</span> disable webgl</h3>
<div class="outline-text-3" id="text-37-10">
<p>
to true
</p>
<ul class="org-ul">
<li>webgl.disabled</li>
<li>privacy.firstparty.isolate</li>
</ul>
<p>
to false
</p>
<ul class="org-ul">
<li>geo.enabled</li>
</ul>
<p>
FOR VPN:
media.peerconnection.enabled
</p>
</div>
</div>
<div id="outline-container-org10faec7" class="outline-3">
<h3 id="org10faec7"><span class="section-number-3">37.11.</span> plugins</h3>
<div class="outline-text-3" id="text-37-11">
<p>
Disable JavaScript <a href="https://github.com/dpacassi/disable-javascript">https://github.com/dpacassi/disable-javascript</a>
Font Fingerprint Defender <a href="https://addons.mozilla.org/en-US/firefox/addon/window-resizer-antwhere/">https://addons.mozilla.org/en-US/firefox/addon/window-resizer-antwhere/</a>
WindowResizer
CanvasBlocker by Korbinian Kapsner github.com/kkapsner
</p>

<p>
all in in:
</p>
<ul class="org-ul">
<li>CanvasBlocker</li>
<li>User-Agent Switcher (with 3 persons on image)</li>
<li></li>
</ul>

<p>
3
</p>
<ul class="org-ul">
<li>disable-javascript <a href="https://addons.mozilla.org/en-US/firefox/addon/disable-javascript/">https://addons.mozilla.org/en-US/firefox/addon/disable-javascript/</a></li>
<li>User-agent switcher</li>
<li>canvas blocker <a href="https://addons.mozilla.org/en-US/firefox/addon/canvasblocker/">https://addons.mozilla.org/en-US/firefox/addon/canvasblocker/</a></li>
</ul>
</div>
</div>
<div id="outline-container-org6510793" class="outline-3">
<h3 id="org6510793"><span class="section-number-3">37.12.</span> disable javaScript</h3>
<div class="outline-text-3" id="text-37-12">
<p>
javascript.enabled
</p>
</div>
</div>


<div id="outline-container-orgea9454f" class="outline-3">
<h3 id="orgea9454f"><span class="section-number-3">37.13.</span> profile</h3>
<div class="outline-text-3" id="text-37-13">
<p>
about:profiles
</p>

<p>
firefox -width 1366 -height 768 -P -no-remote second
</p>
</div>
</div>
<div id="outline-container-org79ff43f" class="outline-3">
<h3 id="org79ff43f"><span class="section-number-3">37.14.</span> GNU JS Trap</h3>
<div class="outline-text-3" id="text-37-14">
<p>
<a href="https://www.gnu.org/philosophy/javascript-trap.html">https://www.gnu.org/philosophy/javascript-trap.html</a>
</p>
</div>
</div>

<div id="outline-container-orgb7a88a9" class="outline-3">
<h3 id="orgb7a88a9"><span class="section-number-3">37.15.</span> xpi extensions</h3>
<div class="outline-text-3" id="text-37-15">
<p>
<a href="https://wiki.mozilla.org/Add-ons/Extension_Signing#Unbranded_Builds">https://wiki.mozilla.org/Add-ons/Extension_Signing#Unbranded_Builds</a>
</p>

<p>
Extension must be
</p>
<ol class="org-ol">
<li>zipped:
<ul class="org-ul">
<li>zip -r -FS a.zip mouseless-plugin-master/* &#x2013;exclude '<b>.git</b>'</li>
<li>7z a a.xpi librejs-7.20.2/* -r</li>
</ul></li>
<li>zip must be signed with api or web-ext sign to xpi format</li>
</ol>

<p>
xpinstall.signatures.required false - but not working
</p>
</div>
</div>

<div id="outline-container-orgf8a9156" class="outline-3">
<h3 id="orgf8a9156"><span class="section-number-3">37.16.</span> check xpi extension</h3>
<div class="outline-text-3" id="text-37-16">
<p>
diff -Z mouseless-plugin-master/ mouseless<sub>jk</sub>-0.12.2-an+fx-linux/
</p>
</div>
</div>
<div id="outline-container-org80986c6" class="outline-3">
<h3 id="org80986c6"><span class="section-number-3">37.17.</span> Mouse and links</h3>
<div class="outline-text-3" id="text-37-17">
<p>
<a href="https://github.com/mortie/mouseless-plugin">https://github.com/mortie/mouseless-plugin</a>
with krita images extracted <a href="https://github.com/aaact-aatia/mouseless-plugin">https://github.com/aaact-aatia/mouseless-plugin</a>
<a href="https://addons.mozilla.org/en-US/firefox/addon/mouseless-plugin/">https://addons.mozilla.org/en-US/firefox/addon/mouseless-plugin/</a>
</p>

<p>
not working
</p>
<ul class="org-ul">
<li>alt</li>
<li>meta</li>
<li>go forward</li>
<li>page up,page down , fast ones</li>
</ul>
</div>
</div>

<div id="outline-container-orga9e735c" class="outline-3">
<h3 id="orga9e735c"><span class="section-number-3">37.18.</span> Mouse and links complex</h3>
<div class="outline-text-3" id="text-37-18">
<p>
<a href="https://github.com/brookhong/Surfingkeys">https://github.com/brookhong/Surfingkeys</a>
<a href="https://addons.mozilla.org/en-US/firefox/addon/surfingkeys_ff/">https://addons.mozilla.org/en-US/firefox/addon/surfingkeys_ff/</a>
</p>
</div>
</div>
<div id="outline-container-org5d1be1d" class="outline-3">
<h3 id="org5d1be1d"><span class="section-number-3">37.19.</span> Gentoo specific</h3>
<div class="outline-text-3" id="text-37-19">
<p>
USE="-gmp-autoupdate" has disabled the following plugins from updating or installing into new profiles:
</p>
<ul class="org-ul">
<li>gmp-gmpopenh264</li>
<li>gmp-widevinecdm</li>
</ul>
</div>
<div id="outline-container-orge0fef21" class="outline-4">
<h4 id="orge0fef21"><span class="section-number-4">37.19.1.</span> Normandy</h4>
<div class="outline-text-4" id="text-37-19-1">
<ul class="org-ul">
<li>service which allow Mozilla to push changes for default settings or even install new add-ons remotely</li>
<li>app.normandy.enable=false
<ul class="org-ul">
<li>disabled in gentoo</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgfd0836a" class="outline-3">
<h3 id="orgfd0836a"><span class="section-number-3">37.20.</span> Tor compatibility</h3>
<div class="outline-text-3" id="text-37-20">
<p>
network.proxy.socks<sub>remote</sub><sub>dns</sub>    true
network.dns.disablePrefetch       true
network.dns.disableIPv6           true
media.peerconnection.enabled    false
</p>
</div>
</div>

<div id="outline-container-orgc4e7096" class="outline-3">
<h3 id="orgc4e7096"><span class="section-number-3">37.21.</span> user.js - Firefox configuration hardening</h3>
<div class="outline-text-3" id="text-37-21">
<ul class="org-ul">
<li><a href="https://github.com/pyllyukko/user.js/">https://github.com/pyllyukko/user.js/</a></li>
<li><a href="https://github.com/arkenfox/user.js/">https://github.com/arkenfox/user.js/</a>
<ul class="org-ul">
<li>app.update.enabled false</li>
<li>extensions.update.enabled false</li>
<li>security.OCSP.enabled 1 - for normal 0 - for tor</li>
<li>dom.security.https<sub>only</sub><sub>mode</sub> - true for normal, false for tor</li>
<li>plugins.update.notifyUser false</li>
<li>dom.event.contextmenu.enabled - uncomment</li>
<li>places.history.enabled - true for normal false for tor</li>
<li>may request something
<ul class="org-ul">
<li>browser.safebrowsing.enabled - false</li>
<li>browser.safebrowsing.phishing.enabled - false</li>
<li>browser.safebrowsing.malware.enabled - false</li>
</ul></li>
<li>keyword.enabled true</li>
<li>image.webp.enabled false - by hands now</li>
</ul></li>
</ul>
</div>

<div id="outline-container-orgd839d86" class="outline-4">
<h4 id="orgd839d86"><span class="section-number-4">37.21.1.</span> own config from two sources</h4>
<div class="outline-text-4" id="text-37-21-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/usr/bin/</span><span style="color: #8ac6f2; font-weight: bold;">env</span><span style="color: #99968b; font-style: italic;"> bash</span>
wget -O /tmp/user_arkenfox.js https://raw.githubusercontent.com/arkenfox/user.js/master/user.js
wget -O /tmp/user_pyllyukko.js https://raw.githubusercontent.com/pyllyukko/user.js/master/user.js
sleep 1
rm /tmp/user.js 2&gt;/dev/null
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">filter uncomment lines to user.js</span>
cat /tmp/user_arkenfox.js | grep ^user_pref &gt;&gt; /tmp/user.js
cat /tmp/user_pyllyukko.js | grep ^user_pref &gt;&gt; /tmp/user.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">uncomment some lines to user.js</span>
cat /tmp/user_arkenfox.js | grep -i -e account -e dom.event.contextmenu.enabled &gt;&gt; /tmp/user.js
cat /tmp/user_pyllyukko.js | grep -i -e account -e dom.event.contextmenu.enabled &gt;&gt; /tmp/user.js
sleep 1
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">remove dublicates and commented strings</span>
sort /tmp/user.js | uniq | sed <span style="color: #95e454;">"s#^\ \ \ //\ ##"</span> &gt; /tmp/user1.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">filter important</span>
cat /tmp/user1.js | grep -v -e _user.js.parrot<span style="color: #95e454;">\</span>
                         -e plugins.update.notifyUser <span style="color: #95e454;">\</span>
                         -e app.update.enabled <span style="color: #95e454;">\</span>
                         -e extensions.update.enabled <span style="color: #95e454;">\</span>
                         -e plugins.update.notifyUser <span style="color: #95e454;">\</span>
                         -e browser.safebrowsing.enabled <span style="color: #95e454;">\</span>
                         -e browser.safebrowsing.phishing.enabled <span style="color: #95e454;">\</span>
                         -e browser.safebrowsing.malware.enabled <span style="color: #95e454;">\</span>
                         -e keyword.enabled <span style="color: #95e454;">\</span>
                         -e security.OCSP.enabled <span style="color: #95e454;">\</span>
                         -e dom.security.https_only_mode <span style="color: #95e454;">\</span>
                         -e places.history.enabled <span style="color: #95e454;">\</span>
                         &gt; /tmp/user_filtered.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">all false</span>
cp /tmp/user_filtered.js /tmp/user_common.js
cat /tmp/user1.js | grep -e app.update.enabled <span style="color: #95e454;">\</span>
                                 -e extensions.update.enabled <span style="color: #95e454;">\</span>
                                 -e plugins.update.notifyUser <span style="color: #95e454;">\</span>
                                 -e browser.safebrowsing.enabled <span style="color: #95e454;">\</span>
                                 -e browser.safebrowsing.phishing.enabled <span style="color: #95e454;">\</span>
                                 -e browser.safebrowsing.malware.enabled <span style="color: #95e454;">\</span>
    | sed s/true/false/ &gt;&gt; /tmp/user_common.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">all true</span>
cat /tmp/user1.js | grep -e keyword.enabled | sed s/false/true/ &gt;&gt; /tmp/user_common.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">normal 1</span>
cp /tmp/user_common.js user_normal.js
cat /tmp/user1.js | grep -e security.OCSP.enabled | sed s/0/1/ &gt;&gt; user_normal.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">normal true</span>
cat /tmp/user1.js | grep -e dom.security.https_only_mode <span style="color: #95e454;">\</span>
                            -e places.history.enabled | sed s/false/true/ &gt;&gt; user_normal.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">tor 0</span>
cp /tmp/user_common.js user_tor.js
cat /tmp/user1.js | grep -e security.OCSP.enabled | sed s/1/0/ &gt;&gt; user_tor.js
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">tor false</span>
cat /tmp/user1.js | grep -e dom.security.https_only_mode <span style="color: #95e454;">\</span>
                                 -e places.history.enabled <span style="color: #95e454;">\</span>
    | sed s/true/false/ &gt;&gt; user_tor.js
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org10efc19" class="outline-3">
<h3 id="org10efc19"><span class="section-number-3">37.22.</span> certificates</h3>
<div class="outline-text-3" id="text-37-22">
<p>
By default your browser trusts 100's of Certificate Authorities (CAs)
</p>

<p>
Settings -&gt; Privacy &amp; Security -&gt; Certificates
</p>

<p>
<b>allow self signed</b>:
</p>
<ul class="org-ul">
<li>network.stricttransportsecurity.preloadlist to False</li>
</ul>
</div>
</div>
<div id="outline-container-orga6e3c75" class="outline-3">
<h3 id="orga6e3c75"><span class="section-number-3">37.23.</span> images loading</h3>
<div class="outline-text-3" id="text-37-23">
<p>
permissions.default.image
</p>
<ul class="org-ul">
<li>1 &#x2013; Always load the images</li>
<li>2 &#x2013; Never load the images</li>
<li>3 &#x2013; Don't load third images</li>
</ul>
</div>
</div>

<div id="outline-container-orgab0a7a9" class="outline-3">
<h3 id="orgab0a7a9"><span class="section-number-3">37.24.</span> Debugging remote Firefox instances and headless</h3>
<div class="outline-text-3" id="text-37-24">
<ul class="org-ul">
<li>/path/to/firefox &#x2013;start-debugger-server 6000 -headless</li>
<li>/path/to/firefox &#x2013;start-debugger-server ws:6000 -headless</li>
<li>about:debugging</li>
<li><a href="https://github.com/mozilla/node-firefox">https://github.com/mozilla/node-firefox</a></li>
<li><a href="https://github.com/saucelabs/foxdriver">https://github.com/saucelabs/foxdriver</a></li>
</ul>

<p>
<a href="https://pythonbasics.org/selenium-firefox-headless/">https://pythonbasics.org/selenium-firefox-headless/</a>
</p>
</div>
</div>
<div id="outline-container-orgc927254" class="outline-3">
<h3 id="orgc927254"><span class="section-number-3">37.25.</span> proxy switcher</h3>
<div class="outline-text-3" id="text-37-25">
<ul class="org-ul">
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/switcher_proxy/">https://addons.mozilla.org/en-US/firefox/addon/switcher_proxy/</a></li>
<li><a href="https://github.com/vheidari/switcher">https://github.com/vheidari/switcher</a></li>
</ul>
</div>
</div>
<div id="outline-container-org8b6d5df" class="outline-3">
<h3 id="org8b6d5df"><span class="section-number-3">37.26.</span> troubleshooting</h3>
<div class="outline-text-3" id="text-37-26">
<p>
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at <a href="https://play.google.com/log?format=json&amp;hasfast=true&amp;authuser=0">https://play.google.com/log?format=json&amp;hasfast=true&amp;authuser=0</a>. (Reason: CORS header ‘Access-Control-Allow-Origin’ missing). Status code: 503.
</p>
<ul class="org-ul">
<li>about:config
<ul class="org-ul">
<li>security.fileuri.strict<sub>origin</sub><sub>policy</sub></li>
</ul></li>
</ul>

<p>
no microphone - alsa - type asym - pcm.capture
</p>
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/ALSA#Soundcard_only_available_for_one_application">https://wiki.gentoo.org/wiki/ALSA#Soundcard_only_available_for_one_application</a></li>
<li><a href="https://forums.gentoo.org/viewtopic-t-1112016-start-0.html">https://forums.gentoo.org/viewtopic-t-1112016-start-0.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-orga31e0c9" class="outline-3">
<h3 id="orga31e0c9"><span class="section-number-3">37.27.</span> microphone</h3>
<div class="outline-text-3" id="text-37-27">
<p>
<a href="https://mymictest.com/headphone-mic-test">https://mymictest.com/headphone-mic-test</a>
<a href="https://www.onlinemictest.com/tuners/pitch-detector/">https://www.onlinemictest.com/tuners/pitch-detector/</a>
</p>
</div>
</div>
<div id="outline-container-org256b90f" class="outline-3">
<h3 id="org256b90f"><span class="section-number-3">37.28.</span> cache</h3>
<div class="outline-text-3" id="text-37-28">
<p>
browser.cache.check<sub>doc</sub><sub>frequency</sub>
</p>
<dl class="org-dl">
<dt>0</dt><dd>Check for a new version of a page once per session (a session starts when the first application window
opens and ends when the last application window closes).</dd>
<dt>1</dt><dd>Check for a new version every time a page is loaded.</dd>
<dt>2</dt><dd>Never check for a new version - always load the page from cache.</dd>
<dt>3</dt><dd><p>
Check for a new version when the page is out of date. (Default)
</p>

<p>
browser.cache.disk.enable or browser.cache.memory.enable must be set to true for this preference to work as
mentioned above.
</p></dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-org397283e" class="outline-2">
<h2 id="org397283e"><span class="section-number-2">38.</span> Stumpmw - window manager</h2>
<div class="outline-text-2" id="text-38">
<p>
tiling window manager -  entirely in Common Lisp. License: GNU GPL v2.0
</p>

<p>
highly customizable while relying entirely on the keyboard for input.
</p>
<ul class="org-ul">
<li>Allows rebinding of keys to other commands.</li>
<li>Shell scripting. ??</li>
<li>Virtual desktops.</li>
<li>Write commands.</li>
<li>Emacs keybindings</li>
</ul>
</div>


<div id="outline-container-orgab54e93" class="outline-3">
<h3 id="orgab54e93"><span class="section-number-3">38.1.</span> links</h3>
<div class="outline-text-3" id="text-38-1">
<ul class="org-ul">
<li><a href="https://stumpwm.github.io/">https://stumpwm.github.io/</a></li>
<li><a href="https://github.com/stumpwm/stumpwm">https://github.com/stumpwm/stumpwm</a></li>
<li>doc <a href="https://stumpwm.github.io/documentation.html">https://stumpwm.github.io/documentation.html</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7b09591" class="outline-2">
<h2 id="org7b09591"><span class="section-number-2">39.</span> Nyxt</h2>
<div class="outline-text-2" id="text-39">
<p>
<a href="https://nyxt.atlas.engineer/">https://nyxt.atlas.engineer/</a>
</p>
</div>
</div>
<div id="outline-container-orgd3086ed" class="outline-2">
<h2 id="orgd3086ed"><span class="section-number-2">40.</span> suckless tools</h2>
<div class="outline-text-2" id="text-40">
<p>
<a href="https://suckless.org/">https://suckless.org/</a>
</p>
<ul class="org-ul">
<li><b>Dwm</b> window manager   <a href="https://en.wikipedia.org/wiki/Dwm">https://en.wikipedia.org/wiki/Dwm</a>
<ul class="org-ul">
<li>configuration in C</li>
</ul></li>
<li><b>surf</b> is a simple web browser based on WebKit2/GTK+</li>
<li>*</li>
</ul>
</div>
</div>
<div id="outline-container-org3f76ac6" class="outline-2">
<h2 id="org3f76ac6"><span class="section-number-2">41.</span> rtorrent</h2>
<div class="outline-text-2" id="text-41">
<ul class="org-ul">
<li><a href="https://github.com/rakshasa/rtorrent">https://github.com/rakshasa/rtorrent</a></li>
<li><a href="https://github.com/rakshasa/rtorrent/wiki">https://github.com/rakshasa/rtorrent/wiki</a></li>
</ul>
</div>

<div id="outline-container-org482c835" class="outline-3">
<h3 id="org482c835"><span class="section-number-3">41.1.</span> install from sources</h3>
<div class="outline-text-3" id="text-41-1">
<p>
may be need <a href="#org66457bb">24.9</a>
</p>

<div class="org-src-container">
<pre class="src src-bash">apt install --no-install-recommends -y sudo autoconf automake g++ make libtool libtorrent-dev libcurl4-openssl-dev libncurses-dev cmake tmux wget
<span style="color: #e5786d;">cd</span> /usr/local/src/
wget https://github.com/rakshasa/rtorrent/releases/download/v0.9.8/rtorrent-0.9.8.tar.gz
tar xpf rtorrent-0.9.8.tar.gz
<span style="color: #e5786d;">cd</span> rtorrent-0.9.8
ldconfig
autoconf
make clear
./autogen.sh
./configure
make
make install
useradd --home=/home/rtorrent --create-home --shell /bin/bash --user-group rtorrent
touch /home/rtorrent/.rtorrent.rc
chown rtorrent:rtorrent /home/rtorrent/.rtorrent.rc
mkdir /home/rtorrent/downloads
chown rtorrent:rtorrent /home/rtorrent/downloads
mkdir /home/rtorrent/session
chown rtorrent:rtorrent /home/rtorrent/session
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'alias rt="sudo -u rtorrent bash -c tmux"'</span> &gt;&gt; /root/.bashrc
</pre>
</div>
</div>
</div>

<div id="outline-container-orga96aa0a" class="outline-3">
<h3 id="orga96aa0a"><span class="section-number-3">41.2.</span> keys</h3>
<div class="outline-text-3" id="text-41-2">
<p>
Throttling
</p>
<ul class="org-ul">
<li>a/s/d 	Increase the upload throttle by 1/5/50 KB.</li>
<li>z/x/c 	Decrease the upload throttle by 1/5/50 KB.</li>
<li>A/S/D 	Increase the download throttle by 1/5/50 KB.</li>
<li>Z/X/C 	Decrease the download throttle by 1/5/50 KB.</li>
</ul>

<p>
main
</p>
<ul class="org-ul">
<li>^q 	quit</li>
<li>^s 	Start download. Runs hash first unless already done.</li>
<li>^d 	Stop an active download, or remove a stopped download.</li>
<li>^k 	Stop and close the files of an active download.</li>
<li>backspace 	Add torrent using an URL or file path. Use tab to view directory content and do auto-complete. Also, wildcards can be used. For example: ~/torrent/*</li>
<li>return Same as backspace, except the torrent remains inactive. (Use ^s to activate)</li>
<li>l 	View log. Exit by pressing the space-bar.</li>
<li>+/- 	Change priority of torrent.</li>
<li>^r 	Initiate hash check of torrent. Without starting to download/upload.</li>
<li>alt+shift+r - filter</li>
<li>shift+L - toggle view layout</li>
</ul>

<p>
keys
</p>
<ul class="org-ul">
<li>1 	Show all downloads</li>
<li>2 	Show all downloads, ordered by name</li>
<li>3 	Show started downloads</li>
<li>4 	Show stopped downloads</li>
<li>5 	Show complete downloads</li>
<li>6 	Show incomplete downloads</li>
<li>7 	Show hashing downloads</li>
<li>8 	Show seeding downloads</li>
<li>9 	Show leeching downloads</li>
<li>0 	Show active downloads</li>

<li>* 	Change the priority of all files</li>
<li>/ 	Collapse directories. While collapsed, press right to expand the selected directory.</li>
<li>space 	Change the file priority; applies recursively when done on a directory</li>
</ul>
</div>
</div>
<div id="outline-container-orgfa31ebe" class="outline-3">
<h3 id="orgfa31ebe"><span class="section-number-3">41.3.</span> screen</h3>
<div class="outline-text-3" id="text-41-3">
<p>
[Throttle 500/600 KB]
</p>
<ul class="org-ul">
<li>500/600 - upload/download</li>
</ul>

<p>
[D 15/0]
</p>
<ul class="org-ul">
<li>Current number of download slots in use/the maximum (the maximum is shown as 0 if unlimited).</li>
</ul>

<p>
[H 1/32]
</p>
<ul class="org-ul">
<li>Current number of active HTTP requests (for tracker announces and downloads of .torrent files)/the maximum.</li>
</ul>

<p>
[U 3/14]
</p>
<ul class="org-ul">
<li>Current number of upload slots in use/the maximum, which depends on the global upload rate limit.</li>
</ul>

<p>
[S 6/40/768]
</p>
<ul class="org-ul">
<li>The three numbers represent handshakes/open sockets/max open sockets.</li>
</ul>

<p>
[F 4/128]
</p>
<ul class="org-ul">
<li>The two numbers represent open files/max open files. The library dynamically closes the least used files as needed.</li>
</ul>
</div>
</div>
<div id="outline-container-org8db9c73" class="outline-3">
<h3 id="org8db9c73"><span class="section-number-3">41.4.</span> lags probles</h3>
<div class="outline-text-3" id="text-41-4">
<p>
lags because of http dns request - they are single-threaded
</p>
</div>
</div>
<div id="outline-container-orgf49b222" class="outline-3">
<h3 id="orgf49b222"><span class="section-number-3">41.5.</span> To turn off DHT connection tracking on Linux,</h3>
<div class="outline-text-3" id="text-41-5">
<p>
iptables -t raw -I PREROUTING -p udp &#x2013;dport 6881 -j CT &#x2013;notrack
iptables -t raw -I OUTPUT -p udp &#x2013;sport 6881 -j CT &#x2013;notrack
</p>

<p>
in gernel:
</p>
<ul class="org-ul">
<li>Network options -&gt; Network packet filtering framework -&gt; IP: Netfiltering configuration -&gt; [*] raw table support</li>
</ul>
</div>
</div>
<div id="outline-container-orgdaace0d" class="outline-3">
<h3 id="orgdaace0d"><span class="section-number-3">41.6.</span> config</h3>
<div class="outline-text-3" id="text-41-6">
<p>
#+name <i>home/rtorrent</i>.rtorrent.rc
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">https://github.com/prog-it/rtorrent-rutorrent-setup-guide/blob/master/.rtorrent.rc</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">rtorrent will not start without IPv6 support in your kernel</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">bind=0.0.0.0</span>


<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Global upload and download rate in KiB. "0" for unlimited.</span>
<span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">throttle.global_down.max_rate.set_kb = 0</span>
<span style="color: #cae682;">throttle.global_up.max_rate.set_kb</span> = 1575
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">throttle.max_uploads.set = 8</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Default directory to save the downloaded torrents.</span>
<span style="color: #cae682;">directory.default.set</span> = /home/rtorrent/downloads

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Default session directory. When restarting rtorrent, the torrents from this directory will be restarted.</span>
<span style="color: #cae682;">session.path.set</span> = /home/rtorrent/session

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">system.daemon.set = true</span>

<span style="color: #cae682;">pieces.hash.on_completion.set</span> = yes

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">network</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">network.port_range.set = 49333-49333</span>
<span style="color: #cae682;">network.port_range.set</span> = 6381-6389
<span style="color: #cae682;">protocol.encryption.set</span> = allow_incoming,try_outgoing,enable_retry
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">dht:</span>
<span style="color: #cae682;">dht.mode.set</span> = auto
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">6881</span>
<span style="color: #cae682;">dht.port.set</span> = 6981
<span style="color: #cae682;">protocol.pex.set</span>= yes

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">use a http proxy. [url] ;an empty string disables this setting</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">To connect torrent Trackers</span>
<span style="color: #fa8072;">#</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">network.http.proxy_address.set = 127.0.0.1:9040</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Proxy for all traffic. Include torrent traffic peers</span>
<span style="color: #fa8072;">#</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">network.proxy_address.set = 127.0.0.1:9050</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Maximum number of connections rtorrent can accept/make (`sockets`)</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">number of sockets to simultaneously keep open</span>
<span style="color: #fa8072;">#</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">network.max_open_sockets.set = 999</span>


<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- LOGGING</span>
<span style="color: #cae682;">log.open_file</span> = <span style="color: #95e454;">"rtorrent"</span>, /home/rtorrent/rtorrent.log
<span style="color: #cae682;">log.open_file</span> = <span style="color: #95e454;">"tracker"</span>, /home/rtorrent/tracker.log

<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"info"</span>, <span style="color: #95e454;">"rtorrent"</span>
<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"critical"</span>, <span style="color: #95e454;">"rtorrent"</span>
<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"error"</span>, <span style="color: #95e454;">"rtorrent"</span>
<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"warn"</span>, <span style="color: #95e454;">"rtorrent"</span>
<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"notice"</span>, <span style="color: #95e454;">"rtorrent"</span>
<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"debug"</span>, <span style="color: #95e454;">"rtorrent"</span>

<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"dht_debug"</span>, <span style="color: #95e454;">"tracker"</span>
<span style="color: #cae682;">log.add_output</span> = <span style="color: #95e454;">"tracker_debug"</span>, <span style="color: #95e454;">"tracker"</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- throttle</span>
<span style="color: #cae682;">throttle.max_uploads.set</span> = 3
<span style="color: #cae682;">throttle.max_uploads.global.set</span> = 7

<span style="color: #cae682;">throttle.min_peers.normal.set</span> = 3
<span style="color: #cae682;">throttle.max_peers.normal.set</span> = 8

<span style="color: #cae682;">throttle.min_peers.seed.set</span> = 3
<span style="color: #cae682;">throttle.max_peers.seed.set</span> = 8
<span style="color: #cae682;">trackers.numwant.set</span> = 18

<span style="color: #cae682;">network.http.max_open.set</span> = 3
<span style="color: #cae682;">network.max_open_files.set</span> = 120
<span style="color: #cae682;">network.max_open_sockets.set</span> = 126

<span style="color: #cae682;">pieces.memory.max.set</span> = 800M
<span style="color: #cae682;">network.xmlrpc.size_limit.set</span> = 4M
<span style="color: #cae682;">encoding.add</span> = utf8
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">system.umask.set = 0027</span>

<span style="color: #cae682;">trackers.use_udp.set</span> = yes
<span style="color: #cae682;">network.http.dns_cache_timeout.set</span> = 125

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Save all the sessions in every 6 hours instead of the default 20 minutes.</span>
<span style="color: #cae682;">schedule2</span> = session_save, 1200, 21600, ((session.save))

</pre>
</div>
</div>
</div>
<div id="outline-container-org6fb196e" class="outline-3">
<h3 id="org6fb196e"><span class="section-number-3">41.7.</span> service systemd</h3>
<div class="outline-text-3" id="text-41-7">
<p>
/etc/systemd/system/rtorrent.service
</p>
<div class="org-src-container">
<pre class="src src-conf">cat &lt;&lt;EOF &gt; /etc/systemd/system/rtorrent.service
[<span style="color: #92a65e; font-weight: bold;">Unit</span>]
<span style="color: #cae682;">Description</span>=My daemon

[<span style="color: #92a65e; font-weight: bold;">Service</span>]
<span style="color: #cae682;">Type</span>=forking
<span style="color: #cae682;">User</span>=rtorrent
<span style="color: #cae682;">Group</span>=rtorrent

<span style="color: #cae682;">ExecStartPre</span>=-/bin/rm -f /home/rtorrent/session/rtorrent.lock
<span style="color: #cae682;">ExecStart</span>=/usr/bin/tmux new-session -d rtorrent /usr/local/bin/rtorrent -n -o import=/home/rtorrent/.rtorrent.rc

<span style="color: #cae682;">ExecStop</span>=/usr/bin/killall -w -s INT /usr/local/bin/rtorrent
<span style="color: #cae682;">Restart</span>=on-failure
<span style="color: #cae682;">RestartSec</span>=15
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">After=network.target</span>

[<span style="color: #92a65e; font-weight: bold;">Install</span>]
<span style="color: #cae682;">WantedBy</span>=multi-user.target
EOF
systemctl daemon-reload
systemctl start rtorrent
</pre>
</div>
</div>
</div>

<div id="outline-container-org8cc5f89" class="outline-3">
<h3 id="org8cc5f89"><span class="section-number-3">41.8.</span> aliases</h3>
<div class="outline-text-3" id="text-41-8">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'alias rtstatus="systemctl status rtorrent"'</span> &gt;&gt; .bashrc
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'alias rtstart="systemctl start rtorrent"'</span> &gt;&gt; .bashrc
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'alias rtstop="systemctl stop rtorrent"'</span> &gt;&gt; .bashrc
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'alias rtnew="sudo -u rtorrent /usr/local/bin/rtorrent -n -o import=/home/rtorrent/.rtorrent.rc"'</span> &gt;&gt; .bashrc
apt install sudo
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'alias rt="sudo -u rtorrent bash -c tmux"'</span> &gt;&gt; .bashrc
<span style="color: #e5786d;">source</span> .bashrc
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgaacbe53" class="outline-2">
<h2 id="orgaacbe53"><span class="section-number-2">42.</span> email</h2>
<div class="outline-text-2" id="text-42">
</div>
<div id="outline-container-org12769f5" class="outline-3">
<h3 id="org12769f5"><span class="section-number-3">42.1.</span> theory</h3>
<div class="outline-text-3" id="text-42-1">
<p>
mail is sent from mail host to mail host using SMTP.  Every mail host runs a <b>mail transfer agent (MTA)</b>.
</p>
<ul class="org-ul">
<li>sending: MUA will pipe outgoing mail to the /usr/lib/sendmail application. It will take care of your mail
and pass it on to the next mail host.</li>
<li>receiving: <b>mail delivery agent (MDA)</b> keeps files. When your computer is that mail host, this file is called
a spool, and sometimes located in the directory <i>var/spool/mail</i>. All your MUA has to do is read mail from
the spool, then.</li>
</ul>

<p>
When your computer is not always connected to the internet, you must get the mail from the remote mail host
 using a protocol such as POP3 or IMAP.
</p>
</div>

<div id="outline-container-orgab44d62" class="outline-4">
<h4 id="orgab44d62"><span class="section-number-4">42.1.1.</span> soft:</h4>
<div class="outline-text-4" id="text-42-1-1">
<p>
MTA:
</p>
<ul class="org-ul">
<li>Exim</li>
<li>sendmail</li>
<li>postfix</li>
</ul>
<p>
MDA:
</p>
<ul class="org-ul">
<li>procmail</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb900680" class="outline-3">
<h3 id="orgb900680"><span class="section-number-3">42.2.</span> protocols</h3>
<div class="outline-text-3" id="text-42-2">
<ul class="org-ul">
<li>IMAP - to retrieve email messages from a mail server over a TCP/IP connection. IMAP is defined by
RFC 9051. Leaving email content on the server.
<ul class="org-ul">
<li>143 – this is the default port which does not provide any encryption</li>
<li>993 - IMAP over SSL/TLS (IMAPS)</li>
</ul></li>
<li><p>
POP3 -  POP3 (Post Office Protocol) - older than IMAP, delete message from server after download.
</p>
<ul class="org-ul">
<li>Port 110 is the default POP3 port and it is not encrypted.</li>
<li>Port 995 – SSL/TLS port, also known as POP3S</li>
<li>Modern POP3 clients allow you to keep a copy of your messages on the server if you explicitly select this</li>
</ul>
<p>
option.
</p></li>
<li><p>
SMTP - Simple Mail Transfer Protocol (SMTP)
</p>
<ul class="org-ul">
<li>25 - send messages in plain text, although if the mail server supports it, it can be encrypted with</li>
</ul>
<p>
TLS. Therefore, many Internet service providers block it, as it represents a security risk.
</p>
<ul class="org-ul">
<li>Port 2525 is an alternative to the SMTP port 25 and can be encrypted over TLS.</li>
<li>587 – This is the port IANA registered as the secure SMTP port, and it requires an explicit TLS</li>
</ul>
<p>
connection. However, if the email server does not support TLS, the message will be sent in plain text.
</p>
<ul class="org-ul">
<li>Port 465 – SSL/TLS port, also known as SMTPS</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf865056" class="outline-3">
<h3 id="orgf865056"><span class="section-number-3">42.3.</span> isync <a id="orgcb94fec"></a></h3>
<div class="outline-text-3" id="text-42-3">
<ul class="org-ul">
<li>support Maildir and IMAP4 mailboxes</li>
<li>New messages, message deletions and flag changes can be propagated both ways.</li>
</ul>
</div>
<div id="outline-container-org156ddc5" class="outline-4">
<h4 id="org156ddc5"><span class="section-number-4">42.3.1.</span> cur, new, tmp</h4>
<div class="outline-text-4" id="text-42-3-1">
<ul class="org-ul">
<li>tmp - This subdirectory stores email messages that are in the process of being delivered. It may also store
other kinds of temporary files.</li>
<li>new - This subdirectory stores messages that have been delivered but have not yet been seen by any mail
application, such as webmail or Outlook.</li>
<li>cur - This subdirectory stores messages that have already been viewed by mail applications, like webmail or
Outlook.</li>
</ul>
</div>
</div>
<div id="outline-container-orge2d6620" class="outline-4">
<h4 id="orge2d6620"><span class="section-number-4">42.3.2.</span> usage:</h4>
<div class="outline-text-4" id="text-42-3-2">
<p>
make any folders that were specified as Maildirs
</p>
<pre class="example">
mkdir -p ~/.mail/gmail
</pre>

<p>
to retrieve the mail:
</p>
<pre class="example">
mbsync gmail or mbsync -a
</pre>
</div>
</div>
<div id="outline-container-org6b9a476" class="outline-4">
<h4 id="org6b9a476"><span class="section-number-4">42.3.3.</span> links</h4>
<div class="outline-text-4" id="text-42-3-3">
<p>
<a href="https://wiki.archlinux.org/title/Isync">https://wiki.archlinux.org/title/Isync</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgd415196" class="outline-3">
<h3 id="orgd415196"><span class="section-number-3">42.4.</span> notmuch</h3>
<div class="outline-text-3" id="text-42-4">
<p>
Thread-based e-mail indexer, supporting quick search and tagging
</p>

<p>
You must tag your folders by hands with "notmuch tag". (maildir.synchronize<sub>flags</sub> do only base tagging.)
  <a href="https://github.com/notmuch/notmuch-wiki/blob/master/initial_tagging.mdwn">https://github.com/notmuch/notmuch-wiki/blob/master/initial_tagging.mdwn</a>
</p>

<p>
sync with isyc:
</p>
<pre class="example">
mbsync -aV &amp;&amp; notmuch new &amp;&amp; notmuch tag --input=filename
</pre>

<p>
+saved &#x2013; folder:SAVED
+sent &#x2013; folder:Sent
+spam &#x2013; folder:Spam
+bks &#x2013; folder:bks
+book &#x2013; folder:book
+pol &#x2013; folder:pol
</p>
</div>
<div id="outline-container-org61856a6" class="outline-4">
<h4 id="org61856a6"><span class="section-number-4">42.4.1.</span> tags</h4>
<div class="outline-text-4" id="text-42-4-1">
<ul class="org-ul">
<li>"new" - messages that are new to it, so you'll want to clean that up.</li>
<li>tag:unread - unread messages;</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-org0604ad3" class="outline-4">
<h4 id="org0604ad3"><span class="section-number-4">42.4.2.</span> queries</h4>
<div class="outline-text-4" id="text-42-4-2">
<p>
search for all messages without the "unread" tag and remove the "new" tag
</p>
<pre class="example">
notmuch tag -new not tag:unread
</pre>


<p>
notmuch tag &#x2013;input=filename
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Manage sent, spam, and trash folders</span>
-unread -new folder:Trash
-unread -new folder:Spam
-unread -new folder:Sent

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Note mail sent specifically to me (excluding bug mail)</span>
+to-me to:kevin at sonney.com and tag:new and not tag:to-me

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">And note all mail sent from me</span>
+sent from:kevin at sonney.com and tag:new and not tag:sent

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Remove the new tag from messages</span>
-new tag:new
</pre>
</div>
</div>
</div>
<div id="outline-container-org58eee9f" class="outline-4">
<h4 id="org58eee9f"><span class="section-number-4">42.4.3.</span> links</h4>
<div class="outline-text-4" id="text-42-4-3">
<ul class="org-ul">
<li><a href="https://notmuch.readthedocs.io/en/latest/man1/notmuch-config.html">https://notmuch.readthedocs.io/en/latest/man1/notmuch-config.html</a></li>
<li><a href="https://github.com/notmuch/notmuch-wiki">https://github.com/notmuch/notmuch-wiki</a></li>
<li><a href="https://github.com/notmuch/notmuch-wiki">https://github.com/notmuch/notmuch-wiki</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgad5bf4b" class="outline-3">
<h3 id="orgad5bf4b"><span class="section-number-3">42.5.</span> neomutt</h3>
<div class="outline-text-3" id="text-42-5">
<p>
installation steps see <a href="emacsh#MissingReference">emacsh#MissingReference</a>
</p>
</div>
<div id="outline-container-org3dcd655" class="outline-4">
<h4 id="org3dcd655"><span class="section-number-4">42.5.1.</span> keys</h4>
<div class="outline-text-4" id="text-42-5-1">
<ul class="org-ul">
<li>M - logs</li>
</ul>
</div>
</div>
<div id="outline-container-org07ddcde" class="outline-4">
<h4 id="org07ddcde"><span class="section-number-4">42.5.2.</span> examples</h4>
<div class="outline-text-4" id="text-42-5-2">
<p>
<a href="https://github.com/neomutt/samples/tree/main/config">https://github.com/neomutt/samples/tree/main/config</a>
</p>
</div>
</div>
<div id="outline-container-org91a9197" class="outline-4">
<h4 id="org91a9197"><span class="section-number-4">42.5.3.</span> mutt and neomutt - clients</h4>
<div class="outline-text-4" id="text-42-5-3">
<p>
GPL-2.0-or-later
</p>

<p>
mutt - 1995
</p>
<ul class="org-ul">
<li>Original author(s)	Michael Elkins</li>
<li>Developer(s)	Kevin McCarthy <a href="https://github.com/kevin8t8">https://github.com/kevin8t8</a> <a href="https://www.8t8.us/">https://www.8t8.us/</a> <a href="https://www.8t8.us/blog/">https://www.8t8.us/blog/</a>
<ul class="org-ul">
<li>vim user, study Chinese</li>
</ul></li>
</ul>

<p>
neomutt - It’s a fork of Mutt with added features. Mar 7, 2016 - First NeoMutt release.
</p>
<ul class="org-ul">
<li>Rich Russon (@flatcap) - vim user</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org5284e1a"></a>links<br />
<div class="outline-text-5" id="text-42-5-3-1">
<ul class="org-ul">
<li><a href="https://gitlab.com/muttmua/mutt">https://gitlab.com/muttmua/mutt</a>
<ul class="org-ul">
<li><a href="http://www.mutt.org/">http://www.mutt.org/</a></li>
<li>mirror <a href="https://github.com/muttmua/mutt">https://github.com/muttmua/mutt</a></li>
</ul></li>
<li><a href="https://github.com/neomutt/neomutt">https://github.com/neomutt/neomutt</a>
<ul class="org-ul">
<li><a href="https://neomutt.org/2022/06/13/news">https://neomutt.org/2022/06/13/news</a></li>
</ul></li>
<li>From Mutt to Neomutt <a href="https://www.guckes.net/neomutt/">https://www.guckes.net/neomutt/</a></li>
</ul>

<p>
gentoo
</p>
<ul class="org-ul">
<li><a href="https://packages.gentoo.org/packages/mail-client/neomutt">https://packages.gentoo.org/packages/mail-client/neomutt</a></li>
</ul>
</div>
</li>
</ol>
</div>


<div id="outline-container-org70b8577" class="outline-4">
<h4 id="org70b8577"><span class="section-number-4">42.5.4.</span> links</h4>
<div class="outline-text-4" id="text-42-5-4">
<p>
<a href="https://neomutt.org/guide/configuration.html">https://neomutt.org/guide/configuration.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org844d818" class="outline-3">
<h3 id="org844d818"><span class="section-number-3">42.6.</span> emailutils</h3>
<div class="outline-text-3" id="text-42-6">
<ul class="org-ul">
<li>/var/spool/mail or /var/mail</li>
<li>net-mail/mailutils</li>
</ul>

<p>
forward email destined for the root user to another email (say a postfix mail account)
</p>
<ul class="org-ul">
<li>All you need to do is create a file named ".forward" in the "<i>root</i>" directory and on the first line enter
the email address you want to forward to.</li>
</ul>
</div>
</div>

<div id="outline-container-org870d442" class="outline-3">
<h3 id="org870d442"><span class="section-number-3">42.7.</span> DKIM</h3>
<div class="outline-text-3" id="text-42-7">
<p>
It is a email header generated at sending email server. private/public key pair. sign each message as it is
 sent. When a message is sent, we create a hash from the content of the message headers and then use your
 private key to sign the hash.  the public key is added to the DNS records for your domain to broadcast it to
 the world to help verify your messages.
</p>

<pre class="example">
dig +short _spf.mail.yahoo.com TXT
</pre>


<p>
Receiving Mail Server:
</p>
<ul class="org-ul">
<li>extract dkim-signature from email header</li>
<li>validate message using public key from DKIM DNS entry to answer: <b>Was message unchanged?</b></li>
</ul>


<p>
contains encrypted hash value of email body and headers
</p>
<ul class="org-ul">
<li>DKIM domain -  nslookup -q=TXT brisbane.<sub>domainkey.example.net</sub>
<ul class="org-ul">
<li>_domainkey - is fixed</li>
</ul></li>
</ul>

<p>
DKIM record together with DMARC (and even SPF) you can also protect your domain against malicious emails sent
on behalf of your domains
</p>

<p>
DKIM Selectors - specified in the DKIM-Signature header and indicates where the public key portion of the DKIM
 keypair exists in DNS. “s=”
</p>
<ul class="org-ul">
<li>Domains can have multiple public DKIM keys, and the selector value makes sure recipient servers are using
the correct public key.</li>
</ul>
</div>
<div id="outline-container-orge696d18" class="outline-4">
<h4 id="orge696d18"><span class="section-number-4">42.7.1.</span> how it looks like:</h4>
<div class="outline-text-4" id="text-42-7-1">
<div class="org-src-container">
<pre class="src src-text">DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; s=20130519032151pm; d=postmarkapp.com;
h=From:Date:Subject:MIME-Version:Content-Type:Content-Transfer-Encoding:To:Message-ID;
i=support@postmarkapp.com; bh=vYFvy46eesUDGJ45hyBTH30JfN4=;
b=iHeFQ+7rCiSQs3DPjR2eUSZSv4i/Kp+sipURfVH7BGf+SxcwOkX7X8R1RVObMQsFcbIxnrq7Ba2QCf0YZlL9iqJf32V+baDI8IykuDztuoNUF2Kk0pawZkbSPNHYRtLxV2CTOtc+x4eIeSeYptaiu7g7GupekLZ2DE1ODHhuP4I=
</pre>
</div>

<p>
each part of the header means:
</p>
<ul class="org-ul">
<li>DKIM-Signature: The header registered for DKIM-signed messages.</li>
<li>v=1; The version of DKIM being used by the sending server.</li>
<li>a=rsa-sha1; The algorithm used to generate the hash for the private/public key. There are two officially supported signature algorithms for this hash, rsa-sha1 and rsa-sha256.</li>
<li>c=relaxed/relaxed; Sets the canonicalization posture for the sending domain. This regulates whitespace and text wrapping changes in a message. There are two canonicalized postures: 'simple' doesn’t allow any changes, and 'relaxed' allows common changes to whitespace and header line-wrapping. Canonicalization in the header and body can be managed individually and uses a header/body format.</li>
<li>s=20130519032151pm; Used as a DKIM selector for the public DKIM key for verification. Domains can have multiple public DKIM keys, and the selector value makes sure recipient servers are using the correct public key.</li>
<li>d=postmarkapp.com; The email domain that signed the message. It’s important that your DKIM signature use your domain name here because this bolsters your domain’s reputation with ISPs as you send valid email, regardless of the Email Service Provider you use.</li>
<li>From:Date:Subject:MIME-Version:Content-Type:Content-Transfer-Encoding:To:Message-ID; The headers included with the message when it was cryptographically signed.</li>
<li>i=support@postmarkapp.com; The identity of the signer and is usually provided as an email address.</li>
<li>bh=vYFvy46eesUDGJ45hyBTH30JfN4=; The value of a body hash generated before the message headers are signed.</li>
<li>b=iHeFQ+7rCiSQs3DPjR2eUSZSv4i/Kp+sipURfVH7BGf+SxcwOkX7X8R1RVObMQsFcbIxnrq7Ba2QCf0YZlL9iqJf32V+baDI8IykuDztuoNUF2Kk0pawZkbSPNHYRtLxV2CTOtc+x4eIeSeYptaiu7g7GupekLZ2DE1ODHhuP4I=The cryptographic signature of all the preceding information from the DKIM-Signature field. This entry is treated as an empty string during the verification process.</li>
</ul>
</div>
</div>
<div id="outline-container-org46d584c" class="outline-4">
<h4 id="org46d584c"><span class="section-number-4">42.7.2.</span> DKIM Key Rotation</h4>
<div class="outline-text-4" id="text-42-7-2">
<p>
DKIM key rotation is the process of updating your DKIM keys.
</p>

<p>
it’s a security measure that helps prevent attackers from impersonating your domain and sending spam or
 phishing emails.
</p>

<p>
Why is this important? Well, if somebody were able to get access to your private key, they could actually use
 it to send fraudulent emails that appear to be from you! To prevent this kind of malicious activity, it’s
 best practice to rotate your keys every few months.
</p>

<p>
bad actors may eventually intercept and decode one of them, since each message uses the same cryptographic
 hash algorithm. Once they’ve got your public key, they can start signing their phishing emails with it
 without you even knowing! That’s why periodic DKIM key rotation is crucial to the security of your domain.
</p>
</div>
</div>
<div id="outline-container-org2dc92c7" class="outline-4">
<h4 id="org2dc92c7"><span class="section-number-4">42.7.3.</span> links</h4>
<div class="outline-text-4" id="text-42-7-3">
<p>
<a href="https://postmarkapp.com/guides/dkim/how-does-dkim-work">https://postmarkapp.com/guides/dkim/how-does-dkim-work</a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org7fc6ef0" class="outline-2">
<h2 id="org7fc6ef0"><span class="section-number-2">43.</span> Midnight Commander</h2>
<div class="outline-text-2" id="text-43">
<ul class="org-ul">
<li>app-misc/mc</li>
<li>panel - frame of direcotry list</li>
<li>dependson slang text display library (it's like ncurses, but different)</li>
</ul>

<p>
unique features:
</p>
<ul class="org-ul">
<li>hexdump with unicode support</li>
<li>sftp, ftp support</li>
</ul>
</div>
<div id="outline-container-org0c8b4d8" class="outline-3">
<h3 id="org0c8b4d8"><span class="section-number-3">43.1.</span> options</h3>
<div class="outline-text-3" id="text-43-1">
<p>
size options
Options -&gt; Panel options &#x2026; -&gt; Use SI size units
[New Left Panel]
user<sub>format</sub>=half type name mark size:4 space mtime
</p>

<p>
Options -&gt; Panel options &#x2026; -&gt; Lynx-like motion - lift to parrent, right go in directory
</p>
</div>
</div>
<div id="outline-container-org42db89c" class="outline-3">
<h3 id="org42db89c"><span class="section-number-3">43.2.</span> keys</h3>
<div class="outline-text-3" id="text-43-2">
<p>
navigation
</p>
<ul class="org-ul">
<li>C-up/C-down - up down</li>
<li>page-up/page-down - C/A-v</li>
<li>C - page-up/page-down 	down/up by directory</li>

<li>Tab		switch frame</li>
<li>Alt-1 	help</li>
<li>F4		open in default editor (env EDITOR) or Emacs Dired (env PAGER)</li>
<li>Enter		open in system (mime type) editor</li>
<li>F9 		top menu
<ul class="org-ul">
<li>F9 l g	file listing</li>
</ul></li>
<li>Alt + . 	hiddent files</li>

<li>Ctrl+Space	size of directory</li>
<li>Alt/Ctrl + s	Quick search</li>
<li>Alt + ?	Opens search dialog</li>
<li>Alt + U/Y	move to the next/\previous directory in the history</li>
<li>Alt+Shift+h	history</li>
<li>Alt + i	Sync panels</li>

<li>Shift + F3	raw preview</li>
<li>Alt + t	loop panel list mode</li>
<li>Ctrl + u 	swap panels</li>
<li>Alt + o 	load directory to other panel</li>
</ul>

<p>
select files
</p>
<ul class="org-ul">
<li>Indert/C-t	tag file</li>
<li>+/-<i>*</i>\ - select/unselect/inverse<sub>selected</sub>/unselect</li>
</ul>

<p>
console
</p>
<ul class="org-ul">
<li>Alt + Tab		autocompletion in console</li>
<li>Ctrl + o		switch to console and back</li>
<li>Ctrl/Alt + Enter	copy file name to console</li>
<li>Cltr + Shift + Enter		Copy full path to console</li>
<li>C - H			show console history</li>
</ul>
<p>
advanced
</p>
<ul class="org-ul">
<li>Alt+e		change charset of panel</li>
<li>Alt + ,	top bottom for long file names</li>
</ul>
</div>
</div>
<div id="outline-container-orgcd633d9" class="outline-3">
<h3 id="orgcd633d9"><span class="section-number-3">43.3.</span> links</h3>
<div class="outline-text-3" id="text-43-3">
<p>
<a href="https://klimer.eu/2015/05/01/use-midnight-commander-like-a-pro/">https://klimer.eu/2015/05/01/use-midnight-commander-like-a-pro/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org40859a4" class="outline-2">
<h2 id="org40859a4"><span class="section-number-2">44.</span> Thunar - file manager</h2>
<div class="outline-text-2" id="text-44">
<ul class="org-ul">
<li>Shortcuts: cat ~/.config/Thunar/accels.scm</li>

<li>Shift + Tab - to side panel, Tab - to main list</li>
<li>Alt + up	to parrent</li>
<li>C + 1/2/3	thumbnails, list, small lists</li>
<li>Ctrl+Shift+N	new folder</li>

<li>C + t		new tab</li>
<li>C + Page<sub>up</sub>/Page<sub>down</sub> - scroll tabs</li>
<li>Alt + 1/2/3	go to tab 1, to tab 2</li>
<li>C + w 	close tab</li>
</ul>
</div>
</div>

<div id="outline-container-org035c40f" class="outline-2">
<h2 id="org035c40f"><span class="section-number-2">45.</span> LibreOffice vs Microsoft</h2>
<div class="outline-text-2" id="text-45">
<p>
keys
</p>
<ul class="org-ul">
<li>Ctrl+M - clear formatting</li>
</ul>
</div>

<div id="outline-container-orgc1be383" class="outline-3">
<h3 id="orgc1be383"><span class="section-number-3">45.1.</span> LibreOffice (Microsoft)</h3>
<div class="outline-text-3" id="text-45-1">
<ul class="org-ul">
<li>Writer (Word)</li>
<li>Calc (Excel)</li>
<li>Impress (PowerPoint)</li>
<li>Draw (Visio)</li>
<li>Math</li>
<li>Base (Access)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf4090ce" class="outline-2">
<h2 id="orgf4090ce"><span class="section-number-2">46.</span> Gimp</h2>
<div class="outline-text-2" id="text-46">
<ul class="org-ul">
<li>Alt+Return - Image-&gt;Image Properties</li>
</ul>
</div>
</div>
<div id="outline-container-orgaf06948" class="outline-2">
<h2 id="orgaf06948"><span class="section-number-2">47.</span> coreboot</h2>
<div class="outline-text-2" id="text-47">
<p>
System Firmware: An Essential Guide to Open Source and Embedded Solutions
</p>
<ul class="org-ul">
<li>ubuntu install <a href="https://www.coreboot.org/Lesson1">https://www.coreboot.org/Lesson1</a></li>
<li>common usage <a href="https://www.coreboot.org/Build_HOWTO">https://www.coreboot.org/Build_HOWTO</a></li>
</ul>
<p>
<a href="https://www.instructables.com/Lenovo-T420-Coreboot-WRaspberry-Pi/">https://www.instructables.com/Lenovo-T420-Coreboot-WRaspberry-Pi/</a>
<a href="https://review.coreboot.org/plugins/gitiles/coreboot/+/refs/heads/master">https://review.coreboot.org/plugins/gitiles/coreboot/+/refs/heads/master</a>
<a href="https://doc.coreboot.org/tutorial/part1.html">https://doc.coreboot.org/tutorial/part1.html</a>
</p>
</div>

<div id="outline-container-orgc290df9" class="outline-3">
<h3 id="orgc290df9"><span class="section-number-3">47.1.</span> usage</h3>
<div class="outline-text-3" id="text-47-1">
<ul class="org-ul">
<li>git clone &#x2013;depth 1 <a href="https://review.coreboot.org/coreboot.git">https://review.coreboot.org/coreboot.git</a></li>
</ul>
<p>
Download the required submodules:
</p>
<ul class="org-ul">
<li>git submodule update &#x2013;depth 1 &#x2013;init &#x2013;checkout &#x2013;recursive</li>
<li>or git clone &#x2013;recursive <a href="https://review.coreboot.org/coreboot">https://review.coreboot.org/coreboot</a></li>
</ul>

<p>
mkdir -p ~/work/coreboot/3rdparty/blobs/mainboard/lenovo/t420
</p>

<p>
cd util/ifdtool
make
</p>

<p>
print a partition table, and extract some blobs.
</p>
<ul class="org-ul">
<li>ifdtool -x flash.bin</li>
<li>mv flashregion<sub>3</sub><sub>gbe.bin</sub> gbe.bin</li>
<li>mv flashregion<sub>2</sub><sub>intel</sub><sub>me.bin</sub> me.bin</li>
<li>mv flashregion<sub>0</sub><sub>flashdescriptor.bin</sub> descriptor.bin</li>
<li>mv gbe.bin me.bin  descriptor.bin coreboot/3rdparty/blobs/mainboard/lenovo/t420/</li>
</ul>

<p>
core:
</p>
<ul class="org-ul">
<li>make distclean</li>
<li>make nconfig</li>
<li>make crossgcc-i386 CPUS=${nproc}</li>
<li>make iasl</li>
<li>make</li>
<li>build/coreboot.rom and .config</li>
</ul>

<p>
flash only bios:
</p>
<ul class="org-ul">
<li>$./util/ifdtool/ifdtool -f t420.layout t420.bin</li>
<li>flashrom -p linux<sub>spi</sub>:dev=/dev/spidev0.0,spispeed=22000 -l t420.layout -i bios &#x2013;noverify -w coreboot.rom</li>
</ul>


<p>
configuration in nvramcui
</p>
<ul class="org-ul">
<li>secondary payloads -&gt; nvramcui</li>
<li>general setup -&gt; option backend to use -&gt; use CMOD for cinfiguration values</li>
</ul>
</div>
</div>
<div id="outline-container-org818fb39" class="outline-3">
<h3 id="org818fb39"><span class="section-number-3">47.2.</span> requirements</h3>
<div class="outline-text-3" id="text-47-2">
<ul class="org-ul">
<li>make - already have</li>
<li>gcc - already have</li>
<li>iasl - sys-power/iasl</li>
<li>pkg-config -  dev-util/pkgconf - already have</li>
<li>libssl-dev (openssl) - dev-libs/openssl - already have</li>
<li>dev-lang/gnat-gpl</li>
</ul>
<p>
optional
</p>
<ul class="org-ul">
<li>sys-libs/ncurses</li>
<li>flex and bison</li>
</ul>
</div>
</div>
<div id="outline-container-org3840905" class="outline-3">
<h3 id="org3840905"><span class="section-number-3">47.3.</span> SPI Flash</h3>
<div class="outline-text-3" id="text-47-3">
<p>
You need to connect CS# (Pin 1 for the W25Q32BV, goes to CS0# on the Raspberry Pi), SO (Pin 2, MISO
on RaspberryPi), GND (Pin 4), SI (Pin5, MOSI on Raspberry Pi), SCLK (Pin 6) and Vcc (Pin 8, 3.3V on
RaspberryPi, connect before RaspberryPi is powered on!)
</p>

<p>
My S430 has two of them. The bigger one (8MByte) contains the flash descriptor table and the Intel
ME firmware. The smaller one (4MByte) is for the BIOS.
</p>
</div>

<div id="outline-container-orge73854a" class="outline-4">
<h4 id="orge73854a"><span class="section-number-4">47.3.1.</span> general GPIO</h4>
<div class="outline-text-4" id="text-47-3-1">
<p>
<a href="https://www.egr.msu.edu/classes/ece480/capstone/fall09/group03/AN_balachandran.pdf">https://www.egr.msu.edu/classes/ece480/capstone/fall09/group03/AN_balachandran.pdf</a>
General Purpose Input/output (GPIO) is an interface available on most modern
microcontrollers (MCU) to provide an ease of access to the devices internal properties.
</p>

<ul class="org-ul">
<li>The pins are usually arranged into groups of 8 pins where signals can be sent or received to and</li>
</ul>
<p>
from other devices.
</p>
<ul class="org-ul">
<li>Each GPIO should be able to define either an input mode or an output mode for individual pins on the chip.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf51ba85" class="outline-3">
<h3 id="orgf51ba85"><span class="section-number-3">47.4.</span> debug console</h3>
<div class="outline-text-3" id="text-47-4">
<p>
<a href="https://www.coreboot.org/Network_console">https://www.coreboot.org/Network_console</a>
<a href="http://pcengines.github.io/apu2-documentation/generating_coreboot_support_logs/">http://pcengines.github.io/apu2-documentation/generating_coreboot_support_logs/</a>
</p>

<p>
network console
</p>

<ul class="org-ul">
<li># openvpn &#x2013;mktun &#x2013;dev tap0</li>
<li># ip addr add 10.0.1.27/24 dev tap0
(00:13:d4:76:a2:ac) Destination MAC address of remote system (NEW)     │
│     (10.0.1.27) Destination IP of logging system (NEW)                     │
│     (10.0.1.253) IP address of coreboot system (NEW)</li>
</ul>
</div>
</div>
<div id="outline-container-org7840d3e" class="outline-3">
<h3 id="org7840d3e"><span class="section-number-3">47.5.</span> Coreinfo libpayload</h3>
<div class="outline-text-3" id="text-47-5">
<ul class="org-ul">
<li>coreinfo is a small payload which can display system information such as PCI info, or an NVRAM dump.</li>
<li>libpayload used as a basis for coreboot payloads.</li>
</ul>

<p>
<a href="https://www.coreboot.org/Coreinfo">https://www.coreboot.org/Coreinfo</a>
<a href="https://www.coreboot.org/Libpayload">https://www.coreboot.org/Libpayload</a>
</p>
</div>
</div>

<div id="outline-container-org3e3ca23" class="outline-3">
<h3 id="org3e3ca23"><span class="section-number-3">47.6.</span> <a href="https://www.instructables.com/Lenovo-T420-Coreboot-WRaspberry-Pi/">https://www.instructables.com/Lenovo-T420-Coreboot-WRaspberry-Pi/</a></h3>
<div class="outline-text-3" id="text-47-6">
<ul class="org-ul">
<li>Ponoma 5250 Test Clip - For connecting to the bios chip.</li>
<li>Female to Female Breadboard Jumper Cables - Also known as Dupont wires.</li>
<li>Raspberry Pi(3 or 4) - running the latest version or Raspberry Pi OS</li>
<li>flashrom - on R PI</li>
<li>coreboot</li>

<li>It is a good idea to update the Embedded Controller to the latest version. The easiest way to do this is
install the latest version of the factory bios. Coreboot is unable to touch the EC. You will be unable to
update it after flashing unless you revert to the factory bios.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga54e241" class="outline-2">
<h2 id="orga54e241"><span class="section-number-2">48.</span> qemu</h2>
<div class="outline-text-2" id="text-48">
<p>
app-emulation/qemu
</p>
<ul class="org-ul">
<li>nvramcui payload will allow setting this and other options</li>
</ul>
</div>
<div id="outline-container-org3538408" class="outline-3">
<h3 id="org3538408"><span class="section-number-3">48.1.</span> theory</h3>
<div class="outline-text-3" id="text-48-1">
<ul class="org-ul">
<li>used in conjunction with acceleration in the form of a Type-I hypervisor such as KVM (Kernel-based Virtual
Machine) or Xen.
<ul class="org-ul">
<li>Type 1 hypervisor has direct access to the hardware resources.</li>
</ul></li>
<li>KVM as the accelerator of choice due to its GPL licensing and availability</li>
<li>KVM resides in Linux kernel and there is a little configuration for it</li>
</ul>

<p>
SoftMMU is an overloaded term in QEMU. In terms of features the SoftMMU is the mechanism by which the TCG
allows the emulation of virtual memory.
</p>
</div>
</div>

<div id="outline-container-orgc3260e3" class="outline-3">
<h3 id="orgc3260e3"><span class="section-number-3">48.2.</span> modes</h3>
<div class="outline-text-3" id="text-48-2">
<ul class="org-ul">
<li>"system emulation" - rovides a virtual model of an entire machine (CPU, memory and emulated devices) to run
a guest OS.  In this mode the CPU may be fully emulated, or it may work with a hypervisor such as KVM, Xen,
Hax or Hypervisor.Framework to allow the guest to run directly on the host CPU.
<ul class="org-ul">
<li>A softmmu target is the standard qemu use-case of emulating an entire system (like VirtualBox or VMWare,
but with optional support for emulating CPU hardware along with peripherals)</li>
</ul></li>
<li>“user mode emulation”, where QEMU can launch processes compiled for one CPU on another CPU. In this mode the</li>
</ul>
<p>
CPU is always emulated. CPU is always emulated.
</p>
<ul class="org-ul">
<li>user targets execute user-mode code only; the (somewhat shockingly ambitious) purpose of these targets is
to "magically" allow importing user-space linux ELF binaries from a different architecture into the native
system (that is, they are like multilib, without the awkward need for a software stack or CPU capable of
running it).</li>
</ul>
</div>
</div>

<div id="outline-container-org38fdd63" class="outline-3">
<h3 id="org38fdd63"><span class="section-number-3">48.3.</span> usage</h3>
<div class="outline-text-3" id="text-48-3">
<ul class="org-ul">
<li>qemu-system-x86<sub>64</sub> is the binary or command for Qemu which is used to create 64-bit x86 VMs.</li>
</ul>

<p>
Set RAM or Memory Size For Qemu VM:
</p>
<ul class="org-ul">
<li>qemu-system-x86<sub>64</sub> -m 256</li>
</ul>

<p>
qemu-system-x86<sub>64</sub> -cdrom iso<sub>image</sub> -cpu host -enable-kvm -m 256 -smp cores=2 -m 256 -name poftut.com
-nographic file=fedoraraw.qcow2,if=virtio,format=qcow2
</p>
<ul class="org-ul">
<li>-smp option which will enable multiple CPU cores with the core=2</li>
<li>-m 256 - w56 MiB</li>
<li>-name - VM name will be displayed in the Window header of the Qemu</li>
<li>-nographic - if you need console only</li>
<li>file=fedoraraw.qcow2,if=virtio - "if" is used to provide the driver or interface type for the disk.
<ul class="org-ul">
<li>virtio - Virtio was chosen to be the main platform for IO virtualization in KVM</li>
</ul></li>
<li>-enable-kvm - starts QEMU in KVM mode</li>
<li>-cpu host is to emulate the host processor. There is a list of supported architectures available –
qemu-system-x86<sub>64</sub> -cpu ?</li>
</ul>

<p>
qemu-system-x86<sub>64</sub> -drive if=pflash,format=raw,readonly,file=build/coreboot.rom -drive file=~/example.img -serial stdio -m 1G
</p>


<p>
exit:
</p>
<ul class="org-ul">
<li>Ctrl-A X</li>
<li>ALT-2 instead of CTRL-ALT-2, then type quit</li>
</ul>
</div>
</div>
<div id="outline-container-org8d0ee18" class="outline-3">
<h3 id="org8d0ee18"><span class="section-number-3">48.4.</span> boot</h3>
<div class="outline-text-3" id="text-48-4">
<p>
iso
qemu-system-x86<sub>64</sub> -drive format=raw,media=cdrom,readonly,file=debian-8.2.0-amd64-DVD-1.iso
</p>

<p>
img
qemu-system-x86<sub>64</sub> -drive format=raw,file=x86-64.img
</p>
</div>
</div>
<div id="outline-container-org9de1314" class="outline-3">
<h3 id="org9de1314"><span class="section-number-3">48.5.</span> Graphic card</h3>
<div class="outline-text-3" id="text-48-5">
<p>
text mode:
</p>
<ul class="org-ul">
<li>-curses - ALT-2 instead of CTRL-ALT-2, then type quit</li>
<li>-nographic</li>
</ul>
<p>
graphic -vga type:
</p>
<ul class="org-ul">
<li>std</li>
</ul>
</div>
</div>
<div id="outline-container-orgdbcaef5" class="outline-3">
<h3 id="orgdbcaef5"><span class="section-number-3">48.6.</span> create image</h3>
<div class="outline-text-3" id="text-48-6">
<p>
qemu-img create -f qcow2 example.img 100M
</p>
<ul class="org-ul">
<li>-f qcow2 - recommended since it is dynamically allocated</li>
<li>100M size of image</li>
</ul>

<p>
get info:
</p>
<ul class="org-ul">
<li>qemu-img info example.img</li>
</ul>

<p>
resize
</p>
<ul class="org-ul">
<li>qemu-img resize ubuntu.qcow2 +5GB</li>
</ul>
<p>
chech for errors
</p>
<ul class="org-ul">
<li>qemu-img check ubuntu.qcow2</li>
</ul>
</div>
<div id="outline-container-org290497d" class="outline-4">
<h4 id="org290497d"><span class="section-number-4">48.6.1.</span> file formats</h4>
<div class="outline-text-4" id="text-48-6-1">
<dl class="org-dl">
<dt>qcow2</dt><dd>The recommended file format. It is fast, dynamically allocated, and has decent support in
QEMU. However it does have a minor speed loss compared to raw, but this is unnoticeable in normal use.</dd>
<dt>qcow</dt><dd>This is an older version of the qcow2 file format. The main difference between the qcow2 and qcow file
formats is that qcow2 supports multiple snapshots through a newer, flexible model for storing snapshots. It
is recommended to use qcow2 instead.</dd>
<dt>raw</dt><dd>As the name suggests - it is a "raw" file format, which means it will allocate all the space to the disk
immediately, e.g. if you formatted a file named raw with 2G as the size, it would take up 2 gigabytes of
space on the disk. This is the fastest option, and is recommended if you have a lot of disk space to spare.</dd>
<dt>vdi</dt><dd>A file format which is also compatible with VirtualBox 1.1. Recommended only if you are going to be
switching through VirtualBox and QEMU frequently.
<ul class="org-ul">
<li>static - If set, the image will be created with metadata preallocation.</li>
</ul></dd>
<dt>vmdk</dt><dd>A file format which is compatible with VMWare 3 and 4. Recommended only if you are going to be
switching through VMWare and QEMU frequently. It supports the following arguments:</dd>
<dt>compat6</dt><dd>Create a VMDK 6 image, instead of the default VMDK 4.</dd>
<dt>hwversion</dt><dd>Specify the vmdk virtual hardware version. If set, the Compat6 flag cannot be enabled.</dd>
<dt>vpc</dt><dd>A file format which is compatible with Windows Virtual PC. Recommended only if you are going to be
switching through Windows Virtual PC and QEMU frequently.</dd>
<dt>vhdx</dt><dd>A Hyper-V compatible image format. Not recommended unless you're going to switch between Hyper-V and
QEMU frequently.</dd>
<dt>parallels</dt><dd>A Parallels compatible image format. Not recommended unless you're going to switch between
Parallels and QEMU frequently.</dd>
<dt>file</dt><dd>Not a file with any format - just a plain raw file.</dd>
<dt>cow</dt><dd>Ancient, depreciated QEMU file format that is not present in newer versions. Like qcow2 and qcow, it is
a dynamically allocated file format. This cannot be used in Win32. Not recommended.</dd>
</dl>
<p>
Read only file formats
</p>
<ul class="org-ul">
<li>bochs - Bochs image file</li>
<li>cloop - Linux Compressed Loop image, useful only to reuse directly compressed CD-ROM images present for
example in the Knoppix CD-ROMs.</li>
<li>dmg - Apple disk image</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgb5e4378" class="outline-3">
<h3 id="orgb5e4378"><span class="section-number-3">48.7.</span> OTHER</h3>
<div class="outline-text-3" id="text-48-7">
</div>
<div id="outline-container-org1634056" class="outline-4">
<h4 id="org1634056"><span class="section-number-4">48.7.1.</span> remote disk image with ssh</h4>
<div class="outline-text-4" id="text-48-7-1">
<p>
qemu-system-x86<sub>64</sub> -drive file=ssh://ismail@baydan.com/disk.img
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org557262e" class="outline-2">
<h2 id="org557262e"><span class="section-number-2">49.</span> systemd</h2>
<div class="outline-text-2" id="text-49">
<p>
/lib/systemd/system - path of units
</p>

<p>
"-" in front of the path means "ignore errors"
</p>
</div>
<div id="outline-container-org2cd0177" class="outline-3">
<h3 id="org2cd0177"><span class="section-number-3">49.1.</span> terms</h3>
<div class="outline-text-3" id="text-49-1">
<ul class="org-ul">
<li><b>Units</b> - are the objects that systemd knows how to manage</li>
<li><b>section</b> - denoted by [ and ]</li>
</ul>
</div>
</div>

<div id="outline-container-org7e8b057" class="outline-3">
<h3 id="org7e8b057"><span class="section-number-3">49.2.</span> types of units</h3>
<div class="outline-text-3" id="text-49-2">
<ul class="org-ul">
<li>.service: A service unit describes how to manage a service or application on the server. This will include
how to start or stop the service, under which circumstances it should be automatically started, and the
dependency and ordering information for related software.</li>
<li>.socket: A socket unit file describes a network or IPC socket, or a FIFO buffer that systemd uses for
socket-based activation. These always have an associated .service file that will be started when activity is
seen on the socket that this unit defines.</li>
<li>.device: A unit that describes a device that has been designated as needing systemd management by udev or
the sysfs filesystem. Not all devices will have .device files. Some scenarios where .device units may be
necessary are for ordering, mounting, and accessing the devices.</li>
<li>.mount: This unit defines a mountpoint on the system to be managed by systemd. These are named after the
mount path, with slashes changed to dashes. Entries within /etc/fstab can have units created automatically.</li>
<li>.automount: An .automount unit configures a mountpoint that will be automatically mounted. These must be named after the mount point they refer to and must have a matching .mount unit to define the specifics of the mount.</li>
<li>.swap: This unit describes swap space on the system. The name of these units must reflect the device or file
path of the space.</li>
<li>.target: A target unit is used to provide synchronization points for other units when booting up or changing
states. They also can be used to bring the system to a new state. Other units specify their relation to
targets to become tied to the target’s operations.</li>
<li>.path: This unit defines a path that can be used for path-based activation. By default, a .service unit of
the same base name will be started when the path reaches the specified state. This uses inotify to monitor
the path for changes.</li>
<li>.timer: A .timer unit defines a timer that will be managed by systemd, similar to a cron job for delayed or
scheduled activation. A matching unit will be started when the timer is reached.</li>
<li>.snapshot: A .snapshot unit is created automatically by the systemctl snapshot command. It allows you to
reconstruct the current state of the system after making changes. Snapshots do not survive across sessions
and are used to roll back temporary states.</li>
<li>.slice: A .slice unit is associated with Linux Control Group nodes, allowing resources to be restricted or
assigned to any processes associated with the slice. The name reflects its hierarchical position within the
cgroup tree. Units are placed in certain slices by default depending on their type.</li>
<li>.scope: Scope units are created automatically by systemd from information received from its bus
interfaces. These are used to manage sets of system processes that are created externally.</li>
</ul>
</div>
</div>

<div id="outline-container-orgb0d542d" class="outline-3">
<h3 id="orgb0d542d"><span class="section-number-3">49.3.</span> create .service</h3>
<div class="outline-text-3" id="text-49-3">
<p>
unit
</p>
<pre class="example">
/etc/systemd/system/my.service
</pre>


<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #92a65e; font-weight: bold;">Unit</span>]
<span style="color: #cae682;">Description</span>=My daemon

[<span style="color: #92a65e; font-weight: bold;">Service</span>]
<span style="color: #cae682;">ExecStart</span>=/usr/bin/mydaemon
<span style="color: #cae682;">Restart</span>=on-failure

[<span style="color: #92a65e; font-weight: bold;">Install</span>]
<span style="color: #cae682;">WantedBy</span>=multi-user.target

</pre>
</div>
</div>
</div>
<div id="outline-container-org9368f87" class="outline-3">
<h3 id="org9368f87"><span class="section-number-3">49.4.</span> Unit files</h3>
<div class="outline-text-3" id="text-49-4">
<ul class="org-ul">
<li>X- prefix to the section name - non-standard sections to be parsed by applications other than systemd</li>
<li>section order does not matter</li>
<li>1, yes, on, and true for affirmative and 0, no off, and false for the opposite answer</li>
</ul>

<pre class="example">
[Section]
Directive1=value
Directive2=value
</pre>
</div>
</div>

<div id="outline-container-org96f0c16" class="outline-3">
<h3 id="org96f0c16"><span class="section-number-3">49.5.</span> sections - common</h3>
<div class="outline-text-3" id="text-49-5">
<p>
[Unit] - first section
</p>
<ul class="org-ul">
<li>for
<ul class="org-ul">
<li>defining metadata for the unit</li>
<li>configuring the relationship of the unit to other units</li>
</ul></li>
<li>Description=</li>
<li>Documentation=: This directive provides a location for a list of URIs for documentation.</li>
<li>Requires=: This directive lists any units upon which this unit essentially depends</li>
<li>Wants=: This directive is similar to Requires=, but less strict.</li>
<li>BindsTo=: This directive is similar to Requires=, but also causes the current unit to stop when the associated unit terminates.</li>
<li>Before=: The units listed in this directive will not be started until the current unit is marked as started
if they are activated at the same time.</li>
<li>After=: The units listed in this directive will be started before starting the current unit.</li>
<li>Conflicts=: This can be used to list units that cannot be run at the same time as the current unit</li>
<li>Condition&#x2026;=: There are a number of directives that start with Condition which allow the administrator to
test certain conditions prior to starting the unit</li>
<li>Assert&#x2026;=: Similar to the directives that start with <b>Condition</b>, these directives check for different
aspects of the running environment to decide whether the unit should activate</li>
</ul>

<p>
[Install] - last section (optional) - define the behavior or a unit if it is enabled or disabled
</p>
<ul class="org-ul">
<li>WantedBy= The difference is that this directive is included in the ancillary unit allowing the primary unit listed to remain relatively clean.</li>
<li>RequiredBy=: This directive is very similar to the WantedBy= directive, but instead specifies a required dependency that will cause the activation to fail if not met</li>
<li>Alias=: This directive allows the unit to be enabled under another name as well.</li>
<li>Also=: This directive allows units to be enabled or disabled as a set.</li>
<li>DefaultInstance=: For template units (covered later) which can produce unit instances with unpredictable
names, this can be used as a fallback value for the name if an appropriate name is not provided.</li>
</ul>
</div>
</div>

<div id="outline-container-org8e27d5d" class="outline-3">
<h3 id="org8e27d5d"><span class="section-number-3">49.6.</span> setions - unit specific</h3>
<div class="outline-text-3" id="text-49-6">
<p>
[Service]
</p>

<p>
Type=
</p>
<dl class="org-dl">
<dt>simple</dt><dd>The main process of the service is specified in the start line. This is the default if the Type=
and Busname= directives are not set, but the ExecStart= is set. Any communication should be handled outside
of the unit through a second unit of the appropriate type (like through a .socket unit if this unit must
communicate using sockets).</dd>
<dt>forking</dt><dd>This service type is used when the service forks a child process, exiting the parent process
almost immediately. This tells systemd that the process is still running even though the parent exited.</dd>
<dt>oneshot</dt><dd>This type indicates that the process will be short-lived and that systemd should wait for the
process to exit before continuing on with other units. This is the default Type= and ExecStart= are not
set. It is used for one-off tasks.</dd>
<dt>dbus</dt><dd>This indicates that unit will take a name on the D-Bus bus. When this happens, systemd will continue
to process the next unit.</dd>
<dt>notify</dt><dd>This indicates that the service will issue a notification when it has finished starting up. The
systemd process will wait for this to happen before proceeding to other units.</dd>
<dt>idle</dt><dd>This indicates that the service will not be run until all jobs are dispatched.</dd>
</dl>

<p>
type specific dericitves:
</p>
<ul class="org-ul">
<li>RemainAfterExit=: This directive is commonly used with the oneshot type. It indicates that the service should be considered active even after the process exits.</li>
<li>PIDFile=: If the service type is marked as “forking”, this directive is used to set the path of the file that should contain the process ID number of the main child that should be monitored.</li>
<li>BusName=: This directive should be set to the D-Bus bus name that the service will attempt to acquire when using the “dbus” service type.</li>
<li>NotifyAccess=: This specifies access to the socket that should be used to listen for notifications when the “notify” service type is selected This can be “none”, “main”, or "all. The default, “none”, ignores all status messages. The “main” option will listen to messages from the main process and the “all” option will cause all members of the service’s control group to be processed.</li>
</ul>

<p>
User=, Group= and SupplementaryGroups= -
</p>

<p>
ExecStart=: This specifies the full path and the arguments of the command to be executed to start the
 process. This may only be specified once (except for “oneshot” services). If the path to the command is
 preceded by a dash “-” character, non-zero exit statuses will be accepted without marking the unit activation
 as failed.
</p>

<p>
executable prefixes:
</p>
<ul class="org-ul">
<li>@ second specified token will be passed as "argv[0]" to the executed process (instead of the actual filename), followed by the further arguments specified</li>
<li>- non-zero exit code is recorded, but has no further effect and is considered equivalent to success</li>
<li>: environment variable substitution is not applied.</li>
<li>+ the process is executed with full privileges. User=, Group=, CapabilityBoundingSet=, PrivateDevices=, PrivateTmp= not applied</li>
<li>! Similar to the "+" but &#x2026;</li>
<li>!!  similar to "!" only has an effect on systems lacking support for ambient process capabilities.</li>
</ul>

<p>
other
</p>
<ul class="org-ul">
<li>ExecStartPre=: This can be used to provide additional commands that should be executed before the main process is started. This can be used multiple times. Again, commands must specify a full path and they can be preceded by “-” to indicate that the failure of the command will be tolerated.</li>
<li>ExecStartPost=: This has the same exact qualities as ExecStartPre= except that it specifies commands that will be run after the main process is started.</li>
<li>ExecReload=: This optional directive indicates the command necessary to reload the configuration of the service if available.</li>
<li>ExecStop=: This indicates the command needed to stop the service. If this is not given, the process will be killed immediately when the service is stopped.</li>
<li>ExecStopPost=: This can be used to specify commands to execute following the stop command.</li>
<li>RestartSec=: If automatically restarting the service is enabled, this specifies the amount of time to wait before attempting to restart the service.</li>
<li>Restart=: This indicates the circumstances under which systemd will attempt to automatically restart the service. This can be set to values like “always”, “on-success”, “on-failure”, “on-abnormal”, “on-abort”, or “on-watchdog”. These will trigger a restart according to the way that the service was stopped.</li>
<li>TimeoutSec=: This configures the amount of time that systemd will wait when stopping or stopping the service before marking it as failed or forcefully killing it. You can set separate timeouts with TimeoutStartSec= and TimeoutStopSec= as well.</li>
</ul>

<p>
[Socket]
</p>

<p>
[Automount]
</p>

<p>
[Swap]
</p>

<p>
[Path]
</p>

<p>
[Timer]
</p>

<p>
[Slice]
</p>
</div>
</div>
<div id="outline-container-orgddea730" class="outline-3">
<h3 id="orgddea730"><span class="section-number-3">49.7.</span> tamplate and instance unit names</h3>
<div class="outline-text-3" id="text-49-7">
<p>
A template unit file:
</p>
<pre class="example">
example@.service
</pre>

<p>
Instance of template:
</p>
<pre class="example">
example@instance1.service
</pre>
</div>
</div>
<div id="outline-container-org428162a" class="outline-3">
<h3 id="org428162a"><span class="section-number-3">49.8.</span> systemctl command</h3>
<div class="outline-text-3" id="text-49-8">
<p>
main component - init system
</p>
<ul class="org-ul">
<li>device management</li>
<li>login management</li>
<li>network connection management</li>
<li>event logging</li>
</ul>

<p>
systemctl daemon-reload - reload configs
</p>
</div>
<div id="outline-container-orga1a08cd" class="outline-4">
<h4 id="orga1a08cd"><span class="section-number-4">49.8.1.</span> own service</h4>
<div class="outline-text-4" id="text-49-8-1">
<p>
/etc/systemd/system/my.service
</p>
<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #92a65e; font-weight: bold;">Unit</span>]
<span style="color: #cae682;">Description</span>=My daemon

[<span style="color: #92a65e; font-weight: bold;">Service</span>]
<span style="color: #cae682;">Type</span>=simple
<span style="color: #cae682;">ExecStart</span>=/usr/bin/ssh -NT -o ServerAliveInterval=60 -o ExitOnForwardFailure=ye\
s -L 0.0.0.0:80:linux.org:80 -i /root/.ssh/id_rsa -p 8080 root@localhost
<span style="color: #cae682;">Restart</span>=on-failure

[<span style="color: #92a65e; font-weight: bold;">Install</span>]
<span style="color: #cae682;">WantedBy</span>=multi-user.target
</pre>
</div>
</div>
</div>
<div id="outline-container-orgab1fcf5" class="outline-4">
<h4 id="orgab1fcf5"><span class="section-number-4">49.8.2.</span> VIEWING-SYSTEMD-INFORMATION</h4>
<div class="outline-text-4" id="text-49-8-2">
<ul class="org-ul">
<li>systemctl list-dependencies ==&gt; Show a unit’s dependencies</li>
<li>systemctl list-sockets ==&gt; List sockets and what activates</li>
<li>systemctl list-jobs ==&gt; View active systemd jobs</li>
<li>systemctl list-unit-files ==&gt; See unit files and their states</li>
<li>systemctl list-units ==&gt; Show if units are loaded/active</li>
<li>systemctl get – default ==&gt; List default target (like run level)</li>
<li>ls /etc/systemd/system/*.wants/SERVICE<sub>NAME.service</sub> ==&gt; TO-LIST-WHAT-LEVELS-THIS-SERVICE-IS-CONFIGURED-ON-OR-OFF</li>
</ul>
</div>
</div>
<div id="outline-container-orgb6a06fa" class="outline-4">
<h4 id="orgb6a06fa"><span class="section-number-4">49.8.3.</span> WORKING WITH SERVICES</h4>
<div class="outline-text-4" id="text-49-8-3">
<ul class="org-ul">
<li>systemctl stop service ===&gt; Stop a running service</li>
<li>systemctl start service ===&gt; Start a service</li>
<li>systemctl restart service ===&gt; Restart a running service</li>
<li>systemctl reload service ===&gt; Reload all config files in service</li>
<li>systemctl status service ===&gt;See if service is running/enabled</li>
<li>systemctl enable service ===&gt; Enable a service to start on boot</li>
<li>systemctl disable service ===&gt; Disable service–won’t start at boot</li>
<li>systemctl show service ===&gt; Show properties of a service (or other unit)</li>
<li>systemctl -H host status network ===&gt; Run any systemctl command remotely</li>
<li>systemctl condrestart SERVICE<sub>NAME</sub> ==&gt; RESTARTS-IF-THE-SERVICE-IS-ALREADY-RUNNING.</li>
<li>systemctl is-enabled SERVICE<sub>NAME</sub> ==&gt; CHECK-IF-THE-SERVICEIS-CONFIGURED-TO-START-OR-NOT-IN-THE-CURRENT-ENVIRONMENT.</li>
<li>systemctl daemon-reload ==&gt; USED-WHEN-YOU-CREATE-A-NEW-SERVICE-FILE-OR-MODIFY-ANY-CONFIGURATION.</li>
<li>systemctl isolate multi-user.target (OR systemctl isolate runlevel3.target OR telinit 3) ==&gt; CHANGING-RUNLEVELS ==&gt; Change to multi-user run level.</li>
<li>ln -sf /lib/systemd/system/multi-user.target /etc/systemd/system/default.target ==&gt; SET-TO-USE-MULTI-USER-RUNLEVEL-ON-THE-NEXT-REBOOT.</li>
</ul>
</div>
</div>
<div id="outline-container-org5394c32" class="outline-4">
<h4 id="org5394c32"><span class="section-number-4">49.8.4.</span> run levels</h4>
<div class="outline-text-4" id="text-49-8-4">
<ul class="org-ul">
<li>runlevel0.target, poweroff.target ==&gt; HALT-THE-SYSTEM</li>
<li>runlevel1.target, rescue.target ==&gt; SINGLE-USER-MODE</li>
<li>User-defined/Site-specific runlevels. By default, identical to 3. ==&gt; Sysvinit: 2, 4</li>
<li>Multi-user, non-graphical. Users can usually login via multiple consoles or via the network. ==&gt; 3</li>
<li>runlevel5.target, graphical.target ==&gt; Multi-user, graphical. Usually has all the services of runlevel 3 plus a graphical login.MULTI-USER,GRAPHICAL.</li>
<li>runlevel6.target, reboot.target ==&gt; reboot</li>
<li>emergency.target ==&gt;emergency-shell</li>
</ul>
</div>
</div>
<div id="outline-container-org2654b44" class="outline-4">
<h4 id="org2654b44"><span class="section-number-4">49.8.5.</span> Changing-System-States</h4>
<div class="outline-text-4" id="text-49-8-5">
<ul class="org-ul">
<li>systemctl reboot ===&gt; Reboot the system (reboot.target)</li>
<li>systemctl poweroff ===&gt; Power off the system (poweroff.target)</li>
<li>systemctl emergency ===&gt; Put in emergency mode (emergency.target)</li>
<li>systemctl default ===&gt; Back to default target (multi-user.target)</li>
</ul>
</div>
</div>
<div id="outline-container-orgabbdf7d" class="outline-4">
<h4 id="orgabbdf7d"><span class="section-number-4">49.8.6.</span> Viewing-log-messages</h4>
<div class="outline-text-4" id="text-49-8-6">
<ul class="org-ul">
<li>journalctl ===&gt; Show all collected log messages</li>
<li>journalctl -u network.service ===&gt; See network service messages</li>
<li>journalctl -f ===&gt; Follow messages as they appear</li>
<li>journalctl -k ===&gt; Show only kernel messages</li>
</ul>
</div>
</div>
<div id="outline-container-org951acda" class="outline-4">
<h4 id="org951acda"><span class="section-number-4">49.8.7.</span> SYSVINIT</h4>
<div class="outline-text-4" id="text-49-8-7">
<ul class="org-ul">
<li>service SERVICE<sub>NAME</sub> start</li>
<li>service SERVICE<sub>NAME</sub> stop</li>
<li>service SERVICE<sub>NAME</sub> restart</li>
<li>service SERVICE<sub>NAME</sub> reload</li>
<li>service SERVICE<sub>NAME</sub> condrestart # restart if service already running</li>
<li>service SERVICE<sub>NAME</sub> status</li>
<li>chkconfig SERVICE<sub>NAME</sub> on # TURN-THE-SERVICE-SERVICE-ON-FOR-START-AT-NEXT-BOOT-OR-OTHER-TRIGGER.</li>
<li>chkconfig SERVICE<sub>NAME</sub> off # TURN-THE-SERVICE-SERVICE-OFF-FOR-THE-NEXT-REBOOT-OR-OTHER-TRIGGERS.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org4626373" class="outline-3">
<h3 id="org4626373"><span class="section-number-3">49.9.</span> usage</h3>
<div class="outline-text-3" id="text-49-9">
<p>
<b>systemct status/start/stop</b>
</p>

<p>
Enable a service to start on boot: <b>systemctl enable/disable service</b>
</p>

<p>
log: <b>journalctl -u rtorrent</b>
</p>
</div>
</div>
<div id="outline-container-orgfb84afc" class="outline-3">
<h3 id="orgfb84afc"><span class="section-number-3">49.10.</span> links</h3>
<div class="outline-text-3" id="text-49-10">
<ul class="org-ul">
<li><a href="https://www.digitalocean.com/community/tutorials/understanding-systemd-units-and-unit-files">https://www.digitalocean.com/community/tutorials/understanding-systemd-units-and-unit-files</a></li>
<li><a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">https://www.freedesktop.org/software/systemd/man/systemd.service.html</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgfd9e996" class="outline-2">
<h2 id="orgfd9e996"><span class="section-number-2">50.</span> LibreOffice</h2>
<div class="outline-text-2" id="text-50">
</div>
<div id="outline-container-orga3d1e1e" class="outline-3">
<h3 id="orga3d1e1e"><span class="section-number-3">50.1.</span> Formula field</h3>
<div class="outline-text-3" id="text-50-1">
<p>
Excel Formulas Introduction Formula Basics
</p>
<ul class="org-ul">
<li>=: Equal sign, starts a formula</li>
<li>Cell References: A1, $A$1, A$1, $A1 (relative, absolute, mixed)</li>
<li>Operators: +, -, *, /, ^, &amp; (arithmetic, concatenation)</li>
<li>Functions: Built-in formulas, e.g., SUM, AVERAGE, IF</li>
</ul>

<p>
Arithmetic Operators
</p>
<ul class="org-ul">
<li>+: Addition</li>
<li>-: Subtraction</li>
<li>*: Multiplication</li>
<li>/: Division</li>
<li>^: Exponentiation</li>
<li>%: Percentage</li>
</ul>

<p>
Comparison Operators
</p>
<ul class="org-ul">
<li>=: Equal to</li>
<li>&lt;&gt;: Not equal to</li>
<li>&gt;: Greater than</li>
<li>&lt;: Less than</li>
<li>&gt;=: Greater than or equal to</li>
<li>&lt;=: Less than or equal to</li>
</ul>

<p>
Logical Operators
</p>
<ul class="org-ul">
<li>AND: Logical and</li>
<li>OR: Logical or -</li>
<li>NOT: Logical not - =NOT(A1 = B1) Returns NOT(1 = 2) which is TRUE</li>
<li>XOR</li>
</ul>

<p>
Functions
</p>
<ul class="org-ul">
<li>SUM: Sum of values  =SUM(1, 2, 3, 4, 5) -&gt; 15</li>
<li>AVERAGE: Average of values</li>
<li>COUNT: Count of values</li>
<li>IF: Conditional statement =IF(A1&gt;10, "Greater than 10", "Less than or equal to 10") -&gt; Greater than 10
<ul class="org-ul">
<li>=IF(A1&gt;10, "Greater than 10", "Less than or equal to 10") - Returns "Greater than 10" if the value in
cell A1 is greater than 10, otherwise returns "Less than or equal to 10".</li>
</ul></li>
<li>VLOOKUP: Vertical lookup
<ul class="org-ul">
<li>=VLOOKUP(A2, B:C, 2, FALSE) - Looks up the value in cell A2 in the first column of the range B:C and
returns the corresponding value in the second column.</li>
<li>Input: =VLOOKUP(A2, B:C, 2, FALSE)</li>
<li>Input value in A2: John</li>
<li>Input range B:C: | Name | Age |</li>
<li>| John | 25 |</li>
<li>| Jane | 30 |</li>
<li>Output: 25</li>
</ul></li>
<li>INDEX/MATCH: Flexible lookup</li>
<li>MAX/MIN: Maximum/minimum value
<ul class="org-ul">
<li>=MAX(D1:D10) - Returns the maximum value in cells D1 through D10. =MIN(D1:D10) - Returns the minimum
value in cells D1 through D10.</li>
</ul></li>
<li>DATEDIF: Date difference
<ul class="org-ul">
<li>=DATEDIF(A1, B1, "D") - Returns the number of days between the dates in cells A1 and B1.</li>
</ul></li>
</ul>

<p>
Text Functions
</p>
<ul class="org-ul">
<li>CONCATENATE: Join text strings
<ul class="org-ul">
<li>CONCATENATE: =CONCATENATE(A1, " ", B1) - Joins the text in cells A1 and B1 with a space in between.</li>
</ul></li>
<li>LOWER/UPPER: Convert text case
<ul class="org-ul">
<li>LOWER/UPPER: =LOWER(A1) - Converts the text in cell A1 to lowercase. =UPPER(A1) - Converts the text in
cell A1 to uppercase.</li>
</ul></li>
<li>PROPER: Capitalize first letter. : =PROPER(A1)</li>
<li>TRIM: Remove spaces</li>
<li>REPLACE: Replace text
<ul class="org-ul">
<li>=REPLACE(A1, "old text", "new text") - Replaces the text "old text" with "new text" in the text in cell A1.</li>
</ul></li>
</ul>

<p>
Date and Time Functions
</p>
<ul class="org-ul">
<li>TODAY: Current date.  =TODAY()</li>
<li>NOW: Current date and time =NOW()</li>
<li>DATEDIF: Date difference =DATEDIF(A1, B1, "M")</li>
<li>HOUR/MINUTE/SECOND: Extract time components =HOUR(A1)</li>
</ul>

<p>
Lookup and Reference Functions
</p>
<ul class="org-ul">
<li>VLOOKUP: Vertical lookup</li>
<li>MATCH: Returns the relative position of a value in a range.
<ul class="org-ul">
<li>Syntax: MATCH(lookup<sub>value</sub>, lookup<sub>array</sub>, [match<sub>type</sub>])
<ul class="org-ul">
<li>[match<sub>type</sub>]: Optional. 0 for exact match, 1 for approximate match.</li>
</ul></li>
<li>Example: =MATCH("John", A:A, 0) returns the relative position of "John" in column A. = 1</li>
</ul></li>
<li>INDEX: Returns a value from a range based on a row and column number.
<ul class="org-ul">
<li>INDEX(range, row<sub>num</sub>, [column<sub>num</sub>])</li>
<li>Example: =INDEX(B:B, 2) returns the value in the 2nd row of column B.</li>
</ul></li>
<li>INDEX/MATCH: Flexible lookup
<ul class="org-ul">
<li>Example: =INDEX(B:B, MATCH("John", A:A, 0)) returns the value in column B corresponding to "John" in
column A.</li>
<li>Input: =INDEX(C:C, MATCH(A2, B:B, 0))</li>
<li>Input value in A2: John</li>
<li>Input range B:B: | Name |
<ul class="org-ul">
<li>| John |</li>
<li>| Jane |</li>
</ul></li>
<li>Input range C:C: | Age |
<ul class="org-ul">
<li>| 25 |</li>
<li>| 30 |</li>
</ul></li>
<li>Output: 25</li>
</ul></li>

<li>HLOOKUP: Horizontal lookup</li>
<li>LOOKUP: Simple lookup</li>
</ul>

<p>
Error Handling
</p>
<ul class="org-ul">
<li>#N/A: Not available</li>
<li>#VALUE: Invalid value</li>
<li>#REF: Invalid reference</li>
<li>#NAME?: Unknown name</li>
<li>#NUM: Invalid number</li>
<li>#DIV/0: Division by zero</li>
</ul>

<p>
Data types
</p>
<ul class="org-ul">
<li>=ISNUMBER(A1) Checks if a cell is a number. This will return TRUE</li>
<li>=ISTEXT(D1) Checks if a cell is a text. This will return TRUE</li>
<li>=ISLOGICAL(A1) Checks if a cell is a boolean. This will return FALSE</li>
</ul>

<p>
Formula Tips
</p>
<ul class="org-ul">
<li>Use absolute references: $A$1 instead of A1</li>
<li>Use named ranges: Define names for ranges</li>
<li>Use functions: Instead of manual calculations</li>
<li>Test formulas: Verify results before using</li>
<li>Document formulas: Use comments and notes</li>
</ul>
</div>
</div>


<div id="outline-container-orge905524" class="outline-3">
<h3 id="orge905524"><span class="section-number-3">50.2.</span> Cell Reference</h3>
<div class="outline-text-3" id="text-50-2">
<p>
Notation
</p>
<ul class="org-ul">
<li>"A", "B", or "C" - Column Letter</li>
<li>"1", "2", or "3" - Row Number</li>
<li>"Sheet1" or "Sheet2" - Worksheet Name</li>
<li>"Book1.xlsx" or "Book2.xlsx" - Workbook Name</li>
<li>(:) - Range Operator</li>
<li>($) - indicates an absolute reference.</li>
</ul>

<p>
Types:
</p>
<ul class="org-ul">
<li>Relative Reference: =A1 (refers to cell A1 in the same worksheet)</li>
<li>Absolute Reference: =$A$1 (refers to cell A1 in the same worksheet, always) - works like fixer for copying.
<ul class="org-ul">
<li>absolute references: When referring to a specific cell or range, use absolute references to ensure that
the reference doesn't change when the formula is copied.</li>
</ul></li>
<li>Mixed Reference: =A$1 (refers to cell A1 in the same worksheet, with relative column and absolute row)</li>
<li>3D Reference: =Sheet2A1 (refers to cell A1 in the worksheet named "Sheet2")</li>
<li>Range Reference: =A1:B2 (refers to the range of cells from A1 to B2 in the same worksheet)</li>
</ul>
</div>
</div>

<div id="outline-container-org46b33cf" class="outline-3">
<h3 id="org46b33cf"><span class="section-number-3">50.3.</span> troubleshooting</h3>
<div class="outline-text-3" id="text-50-3">
<p>
Band encoding of text or How to change encoding?
</p>
<ul class="org-ul">
<li>close and open file again, you will prompt to choose encoding</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf044a2f" class="outline-2">
<h2 id="orgf044a2f"><span class="section-number-2">51.</span> mercurial</h2>
<div class="outline-text-2" id="text-51">
<ul class="org-ul">
<li>hg log -</li>
<li>hg summary - git status</li>
<li>hg up branchname - git checkout branchname</li>
</ul>
</div>
</div>
<div id="outline-container-orga71e918" class="outline-2">
<h2 id="orga71e918"><span class="section-number-2">52.</span> wineHQ</h2>
<div class="outline-text-2" id="text-52">
<ul class="org-ul">
<li>видит всю систему, нужно устанавливать отдельным пользователем и убрать диск с /</li>
<li>Garbage - not supported!</li>
<li>WINEARCH=win32 winecfg</li>
<li>WINEARCH=win64 winecfg</li>
<li>WINEPREFIX=~/.wine/prefix # где будет папка конфигурацией и C: диск</li>
</ul>


<ul class="org-ul">
<li>wine explorer</li>
<li>apt-get install winbind # winbindd - Name Service Switch daemon for resolving names from NT servers # part of the samba(7)</li>
</ul>

<p>
addons:
</p>
<ul class="org-ul">
<li>wine-gecko for applications that depend on Internet Explorer</li>
<li>wine-mono - .NET
<ul class="org-ul">
<li>open-source and cross-platform implementation</li>
</ul></li>
</ul>

<p>
config:
</p>
<ul class="org-ul">
<li>winecfg</li>
<li>regedit is Wine's registry editing</li>
<li>wine control - Wine's implementation of the Windows Control Panel,</li>
</ul>
</div>

<div id="outline-container-org1c6f34d" class="outline-3">
<h3 id="org1c6f34d"><span class="section-number-3">52.1.</span> create index</h3>
<div class="outline-text-3" id="text-52-1">
<p>
Create a new Wine prefix (for most applications, it's better to set its own prefix):
</p>
<pre class="example">
$ env WINEPREFIX=$HOME/winedotnet wineboot --init
</pre>
</div>
</div>
<div id="outline-container-org9c2b85a" class="outline-3">
<h3 id="org9c2b85a"><span class="section-number-3">52.2.</span> env variables</h3>
<div class="outline-text-3" id="text-52-2">
<ul class="org-ul">
<li>WINEPREFIX=~/.wine - default, contains a tree which your Windows programs will see as C: (the C-drive).</li>
<li>WINEARCH</li>
</ul>
</div>
</div>
<div id="outline-container-org543e278" class="outline-3">
<h3 id="org543e278"><span class="section-number-3">52.3.</span> mono</h3>
<div class="outline-text-3" id="text-52-3">
<ul class="org-ul">
<li><a href="https://github.com/madewokherd/wine-mono/releases">https://github.com/madewokherd/wine-mono/releases</a></li>
<li>doc <a href="https://wiki.winehq.org/Mono">https://wiki.winehq.org/Mono</a></li>
<li>mono version in wine sources <a href="https://github.com/wine-mirror/wine/blob/master/dlls/appwiz.cpl/Makefile.in">https://github.com/wine-mirror/wine/blob/master/dlls/appwiz.cpl/Makefile.in</a></li>
</ul>

<p>
C:\windows\mono\mono-2.0&lt;dotnet<sub>version</sub>&gt;&lt;Binaries&amp;dlls&gt;"
</p>

<p>
${prefix}/share/wine/mono/wine-mono-5.0.0
</p>
</div>
<div id="outline-container-org199e5bf" class="outline-4">
<h4 id="org199e5bf"><span class="section-number-4">52.3.1.</span> versions</h4>
<div class="outline-text-4" id="text-52-3-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Wine Version</th>
<th scope="col" class="org-right">Wine Mono Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">8.9</td>
<td class="org-right">8.0.0</td>
</tr>

<tr>
<td class="org-right">7.20</td>
<td class="org-right">7.4.0</td>
</tr>

<tr>
<td class="org-right">7.10</td>
<td class="org-right">7.3.0</td>
</tr>

<tr>
<td class="org-right">7.6</td>
<td class="org-right">7.2.0</td>
</tr>

<tr>
<td class="org-right">7.2</td>
<td class="org-right">7.1.1</td>
</tr>

<tr>
<td class="org-right">6.22</td>
<td class="org-right">7.0.0</td>
</tr>

<tr>
<td class="org-right">6.18</td>
<td class="org-right">6.4.0</td>
</tr>

<tr>
<td class="org-right">6.14</td>
<td class="org-right">6.3.0</td>
</tr>

<tr>
<td class="org-right">6.10</td>
<td class="org-right">6.2.0</td>
</tr>

<tr>
<td class="org-right">6.6</td>
<td class="org-right">6.1.1</td>
</tr>

<tr>
<td class="org-right">6.2</td>
<td class="org-right">6.0.0</td>
</tr>

<tr>
<td class="org-right">5.19</td>
<td class="org-right">5.1.1</td>
</tr>

<tr>
<td class="org-right">5.11</td>
<td class="org-right">5.1.0</td>
</tr>

<tr>
<td class="org-right">5.7</td>
<td class="org-right">5.0.0</td>
</tr>

<tr>
<td class="org-right">4.20</td>
<td class="org-right">4.9.4</td>
</tr>

<tr>
<td class="org-right">4.17</td>
<td class="org-right">4.9.3</td>
</tr>

<tr>
<td class="org-right">4.14</td>
<td class="org-right">4.9.2</td>
</tr>

<tr>
<td class="org-right">4.11</td>
<td class="org-right">4.9.0</td>
</tr>

<tr>
<td class="org-right">4.7</td>
<td class="org-right">4.8.3</td>
</tr>

<tr>
<td class="org-right">4.6</td>
<td class="org-right">4.8.1</td>
</tr>

<tr>
<td class="org-right">4.3</td>
<td class="org-right">4.8.0</td>
</tr>

<tr>
<td class="org-right">4.0-rc6</td>
<td class="org-right">4.7.5</td>
</tr>

<tr>
<td class="org-right">3.13</td>
<td class="org-right">4.7.3</td>
</tr>

<tr>
<td class="org-right">2.14</td>
<td class="org-right">4.7.1</td>
</tr>

<tr>
<td class="org-right">2.4</td>
<td class="org-right">4.7.0</td>
</tr>

<tr>
<td class="org-right">2.0-rc1</td>
<td class="org-right">4.6.4</td>
</tr>

<tr>
<td class="org-right">1.9.12</td>
<td class="org-right">4.6.3</td>
</tr>

<tr>
<td class="org-right">1.9.8</td>
<td class="org-right">4.6.2</td>
</tr>

<tr>
<td class="org-right">1.9.5</td>
<td class="org-right">4.6.0</td>
</tr>

<tr>
<td class="org-right">1.7.37</td>
<td class="org-right">4.5.6</td>
</tr>

<tr>
<td class="org-right">1.7.32</td>
<td class="org-right">4.5.4</td>
</tr>

<tr>
<td class="org-right">1.7.7</td>
<td class="org-right">4.5.2</td>
</tr>

<tr>
<td class="org-right">1.5.16</td>
<td class="org-right">0.0.8</td>
</tr>

<tr>
<td class="org-right">1.5.5</td>
<td class="org-right">0.0.4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org5c8211b" class="outline-3">
<h3 id="org5c8211b"><span class="section-number-3">52.4.</span> components</h3>
<div class="outline-text-3" id="text-52-4">
<ul class="org-ul">
<li>wine uninstaller - Add/Remove Programs control panel applet (appwiz.cpl)</li>
</ul>
</div>
</div>
<div id="outline-container-org6fbdd75" class="outline-3">
<h3 id="org6fbdd75"><span class="section-number-3">52.5.</span> links</h3>
<div class="outline-text-3" id="text-52-5">
<ul class="org-ul">
<li>all commands <a href="https://wiki.winehq.org/List_of_Commands">https://wiki.winehq.org/List_of_Commands</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga3d3f96" class="outline-2">
<h2 id="orga3d3f96"><span class="section-number-2">53.</span> paranoia</h2>
<div class="outline-text-2" id="text-53">
</div>
<div id="outline-container-org48a9d90" class="outline-3">
<h3 id="org48a9d90"><span class="section-number-3">53.1.</span> backdoors</h3>
<div class="outline-text-3" id="text-53-1">
<p>
It has been pointed out time and time again that there is absolutely no practical difference what-so-ever
between intentional vulnerabilities in computer hardware and unintentional vulnerabilities. The only people
with the capacity to do either en masse have the capacity to hire hundreds of scientists and engineers for
entire departments of the sciences. As long as your box is not actively transmitting data without your
permission (it isn't), proper non-attribution techniques will protect you.
</p>
</div>
<div id="outline-container-orga96344b" class="outline-4">
<h4 id="orga96344b"><span class="section-number-4">53.1.1.</span> BIOS/UEFI</h4>
<div class="outline-text-4" id="text-53-1-1">
<ul class="org-ul">
<li>proprietary - close source</li>
<li>by default - may be updated inside OS</li>
</ul>
</div>
</div>
<div id="outline-container-org3c45fed" class="outline-4">
<h4 id="org3c45fed"><span class="section-number-4">53.1.2.</span> save bios</h4>
</div>
<div id="outline-container-orgd4329ee" class="outline-4">
<h4 id="orgd4329ee"><span class="section-number-4">53.1.3.</span> CPU microcode</h4>
<div class="outline-text-4" id="text-53-1-3">
<p>
for
</p>
<ul class="org-ul">
<li>for CPU bugs</li>
<li>Microcode has become more important with the Spectre vulnerability. Intel CPUs need new “microcode” from
Intel to properly defend against Spectre attacks.</li>
</ul>

<p>
facts
</p>
<ul class="org-ul">
<li>Microcode updates do not persist across reboot</li>
</ul>

<p>
Intel Microcode Update Points
</p>
<ul class="org-ul">
<li>BIOS/UEFI</li>
<li>Early OS Microcode Update</li>
<li>Runtime Microcode Update</li>
</ul>

<p>
packages
</p>
<ul class="org-ul">
<li>Ubuntu
<ul class="org-ul">
<li>intel-microcode</li>
<li>amd64-microcode</li>
</ul></li>
<li>Gentoo
<ul class="org-ul">
<li>sys-kernel/linux-firmware</li>
<li>sys-firmware/intel-microcode.</li>
</ul></li>
<li>Fedora, Arch microcode updates are installed by default.</li>
</ul>

<p>
less /proc/cpuinfo
</p>
<ul class="org-ul">
<li><b>microarchitecture</b>:
<ul class="org-ul">
<li>cpu family</li>
<li>model</li>
<li>stepping</li>
</ul></li>
<li>microcode - microcode revision number</li>
</ul>



<p>
kernel
Processor type and features &#x2014;&gt;
   [*] CPU microcode loading support
   [*]   Intel microcode loading support
   [*]   AMD microcode loading support
</p>
</div>
</div>
</div>

<div id="outline-container-org5406a47" class="outline-3">
<h3 id="org5406a47"><span class="section-number-3">53.2.</span> TLS</h3>
<div class="outline-text-3" id="text-53-2">
<ul class="org-ul">
<li>корневые сертификаты SSL, одобренные Роскомнадзором</li>
<li>все мировые центры сертификации – это, как правило, частные компании: GlobalSign, DigiCert и др.</li>
<li>крупнейшие компании — такие как Яндекс, Mail.ru Group, Сбербанк и даже Telegram — обязаны будут в
принудительном порядке внедрить в свои продукты средства шифрования, одобренные Роскомнадзором</li>
<li>браузеры пользователей будут в принудительном порядке «заражать» отечественными сертификатами, которые
позволят ФСБ и иным спецслужбам просматривать любой трафик пользователя.</li>
</ul>
</div>
</div>


<div id="outline-container-org4cf9bfe" class="outline-3">
<h3 id="org4cf9bfe"><span class="section-number-3">53.3.</span> hide data in image</h3>
<div class="outline-text-3" id="text-53-3">
<ul class="org-ul">
<li>echo text &gt;&gt; image.jpg</li>
<li>split -b 464334 image.jpg</li>
</ul>
<p>
progs
</p>
<ul class="org-ul">
<li>last bits of image rgb  <a href="https://github.com/computationalcore/cryptosteganography">https://github.com/computationalcore/cryptosteganography</a></li>
<li><a href="https://steghide.sourceforge.net/">https://steghide.sourceforge.net/</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgaa4567d" class="outline-2">
<h2 id="orgaa4567d"><span class="section-number-2">54.</span> Matrix</h2>
<div class="outline-text-2" id="text-54">
<p>
<a href="https://wiki.installgentoo.com/wiki/Matrix.org">https://wiki.installgentoo.com/wiki/Matrix.org</a>
</p>
</div>
<div id="outline-container-orgf07afbd" class="outline-3">
<h3 id="orgf07afbd"><span class="section-number-3">54.1.</span> <span class="todo TODO">TODO</span> theory</h3>
</div>
<div id="outline-container-orgccfd05a" class="outline-3">
<h3 id="orgccfd05a"><span class="section-number-3">54.2.</span> clients</h3>
<div class="outline-text-3" id="text-54-2">
<ul class="org-ul">
<li>element-desktop <a href="https://packages.gentoo.org/packages/www-apps/element">https://packages.gentoo.org/packages/www-apps/element</a></li>
<li>weechat IRC Command-line client <a href="https://packages.gentoo.org/packages/net-irc/weechat">https://packages.gentoo.org/packages/net-irc/weechat</a>
<ul class="org-ul">
<li>+ Python script <a href="https://github.com/poljar/weechat-matrix">https://github.com/poljar/weechat-matrix</a>
<ul class="org-ul">
<li>matrix-nio - A Python Matrix client library,</li>
</ul></li>
<li>+ Rust plugin <a href="https://github.com/poljar/weechat-matrix-rs">https://github.com/poljar/weechat-matrix-rs</a></li>
</ul></li>
<li>fractal - GNOME client, suitable for desktop and mobile. Rust</li>
<li>nheko -  mainstream chat app.</li>
<li>quaternion - Qt5 and C++ cross-platform desktop Matrix client.</li>
<li>spectral - glossy client for Matrix, written in QtQuick Controls 2 and C++ <a href="https://gitlab.com/b0/spectral">https://gitlab.com/b0/spectral</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org66fd186" class="outline-2">
<h2 id="org66fd186"><span class="section-number-2">55.</span> Irssi</h2>
<div class="outline-text-2" id="text-55">
</div>
<div id="outline-container-orgc6a4d50" class="outline-3">
<h3 id="orgc6a4d50"><span class="section-number-3">55.1.</span> IRC protocol</h3>
<div class="outline-text-3" id="text-55-1">
<p>
6697, SSL (TLS)
</p>
</div>
</div>
<div id="outline-container-org723bc8b" class="outline-3">
<h3 id="org723bc8b"><span class="section-number-3">55.2.</span> irc basic commands - IRC commands cheat sheet</h3>
<div class="outline-text-3" id="text-55-2">
<ul class="org-ul">
<li>/list - list channels - slow</li>
<li>/join #libera  -  Enter the channel #libera.</li>
<li>/leave #libera - leave channel</li>
<li>/part [#libera] [message] - Exit the channel #libera. with message</li>
<li>/nick nickname - Changes your nickname to the one you specify.</li>
<li>/notice nickname message - Sends a private message to nickname without opening a query window for either you or them.</li>
<li>/me action - Use this for emotes. It will appear something like * Nickname action.</li>
<li>/quit [message] - Disconnects you from the network. The optional message will be shown to every channel you are in.</li>
<li>/ignore nickname - May stop you seeing the user talk. Useful if they are being a pest.</li>
<li>/unignore nickname - May allow you to see the user again if you change your mind.</li>
<li>/ignores - May list the current ignores you have set.</li>
</ul>
<p>
advanced
</p>
<ul class="org-ul">
<li>/msg alis list &lt;pattern&gt; [options]. - alis is a network service to search for channels server-side.</li>
<li>/who nick and /whois nick - find out about nick</li>
<li>/say - say to current channel</li>
<li>/NAMES #example - get nicks in current channel</li>
</ul>

<p>
Private message
</p>
<ul class="org-ul">
<li>/query nickname [message] - Open a conversation window with user “nickname”, and optionally include a message.</li>
<li>/msg nickname message -  Sends a private message to user “nickname” without opening a new conversation window.</li>
</ul>

<p>
actions:
/describe &lt;nick|channel&gt; &lt;message&gt; - Sends an action to the specified nickname or channel.
/me message - Sends an action message to the current channel or query window.
</p>
</div>
</div>

<div id="outline-container-orgb58ffa5" class="outline-3">
<h3 id="orgb58ffa5"><span class="section-number-3">55.3.</span> IRC colours</h3>
<div class="outline-text-3" id="text-55-3">
<ul class="org-ul">
<li>Ctrl+[ - for italic</li>
<li>Ctrl+v - for invert</li>
<li>Ctrl+c4 - for color</li>

<li><a href="https://raw.githubusercontent.com/irssi/irssi/master/docs/formats.txt">https://raw.githubusercontent.com/irssi/irssi/master/docs/formats.txt</a></li>
<li><a href="https://www.mirc.com/colors.html">https://www.mirc.com/colors.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-org957e6e9" class="outline-3">
<h3 id="org957e6e9"><span class="section-number-3">55.4.</span> terms</h3>
<div class="outline-text-3" id="text-55-4">
<ul class="org-ul">
<li>network</li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-orga82ade5" class="outline-3">
<h3 id="orga82ade5"><span class="section-number-3">55.5.</span> ui</h3>
<div class="outline-text-3" id="text-55-5">

<div id="org0c30ed7" class="figure">
<p><img src="https://irssi.org/_images/default_irssi_ui_light.svg" alt="default_irssi_ui_light.svg" class="org-svg" />
</p>
</div>

<ul class="org-ul">
<li>root status bar -
<ul class="org-ul">
<li>topic - channel additional info</li>
</ul></li>
<li>window status bar:
<ul class="org-ul">
<li>window number - /&lt;number&gt; (e.g. /2)</li>
<li>area showing chat and status messages</li>
</ul></li>
<li>window status bar:
<ul class="org-ul">
<li>clock</li>
<li>your nick</li>
<li>user mode on the server (+Ziw)</li>
<li>window number [3:</li>
<li>network tag :librechat/</li>
<li>channel name /##chat(+</li>
<li>channel mode ##chat-overflow</li>
<li>activity indicator: show numbers of window with new text/messages [Act:3]</li>
</ul></li>
<li>active window indicator - shows where any text you enter will be sent to</li>
</ul>
</div>
</div>

<div id="outline-container-org755bfa1" class="outline-3">
<h3 id="org755bfa1"><span class="section-number-3">55.6.</span> keys</h3>
<div class="outline-text-3" id="text-55-6">
<p>
To show current bindings:
</p>
<pre class="example">
/bind
</pre>


<p>
to reset:
</p>
<pre class="example">
/bind -reset
</pre>


<pre class="example">
/bind ^L backward_character
/bind ^F forward_character
/bind meta-v scroll_backward
/bind meta-^V scroll_forward
/bind meta-^E next_window
/bind meta-^A previous_window
/bind ^K backward_history
/bind ^N forward_history
/bind meta-^K /scrollback goto -2
/bind meta-^N /scrollback goto +2
</pre>
</div>
<div id="outline-container-orgf160867" class="outline-4">
<h4 id="orgf160867"><span class="section-number-4">55.6.1.</span> windows</h4>
<div class="outline-text-4" id="text-55-6-1">
<ul class="org-ul">
<li>Ctrl+n/p	change between windows</li>
<li>Alt+1/2	change between windows</li>
<li>Alt-↑/↓/←/→	change window in direction</li>
<li>Alt-a	active<sub>window</sub> - Go to next window with the highest activity</li>
</ul>
</div>
</div>
<div id="outline-container-org19ce4bb" class="outline-4">
<h4 id="org19ce4bb"><span class="section-number-4">55.6.2.</span> in window</h4>
<div class="outline-text-4" id="text-55-6-2">
<ul class="org-ul">
<li>Ctrl-X	next<sub>window</sub><sub>item</sub> - Go to the next channel/query. In empty windows change to the next server</li>
<li>Ctrl+x	which network to send commands (in the status window.)</li>
<li>Ctrl-L	refresh<sub>screen</sub> - Redraw screen</li>
<li>Page Up, Alt-p	scroll<sub>backward</sub></li>
<li>Page Down, Alt-n	scroll<sub>forward</sub></li>
</ul>
</div>
</div>

<div id="outline-container-org76820e2" class="outline-4">
<h4 id="org76820e2"><span class="section-number-4">55.6.3.</span> Navigating while typing</h4>
<div class="outline-text-4" id="text-55-6-3">
<ul class="org-ul">
<li>↵, Ctrl-M, Ctrl-J - return</li>
<li>⌫, Ctrl-?, Ctrl-H - backspace</li>

<li>↑/↓ - backward<sub>history</sub>/forward<sub>history</sub></li>
<li>Ctrl-↑/↓ - backward<sub>global</sub><sub>history</sub>/forward<sub>global</sub><sub>history</sub></li>
</ul>
</div>
</div>

<div id="outline-container-org97362ab" class="outline-4">
<h4 id="org97362ab"><span class="section-number-4">55.6.4.</span> rebindin</h4>
<div class="outline-text-4" id="text-55-6-4">
<ul class="org-ul">
<li>/bind ^Z command window last</li>
<li>/bind end command /sb end</li>
<li>/bind home command /sb home</li>
<li>/bind meta-[ active<sub>window</sub></li>
<li>/alias w /window goto</li>
</ul>
</div>
</div>

<div id="outline-container-orgc02e689" class="outline-4">
<h4 id="orgc02e689"><span class="section-number-4">55.6.5.</span> links</h4>
<div class="outline-text-4" id="text-55-6-5">
<ul class="org-ul">
<li><a href="https://irssi.org/documentation/help/bind_-list/">https://irssi.org/documentation/help/bind_-list/</a></li>
<li><a href="https://joost.vunderink.net/blog/2011/12/02/irssi-tricks-navigating-around/">https://joost.vunderink.net/blog/2011/12/02/irssi-tricks-navigating-around/</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgf80a516" class="outline-3">
<h3 id="orgf80a516"><span class="section-number-3">55.7.</span> commands</h3>
<div class="outline-text-3" id="text-55-7">
<p>
&lt;CMDCHAR&gt;[&lt;CMDCHAR&gt;][^]&lt;DATA&gt;
</p>
<ul class="org-ul">
<li>If &lt;CMDCHAR&gt; is repeated two times, alias expansion is disabled</li>
<li>If ^ is present, command output is disabled.</li>
<li>If &lt;DATA&gt; begins with a space, command lookup is inhibited and the data is sent to the active window item
(useful to send a line that begins with &lt;CMDCHAR&gt;).</li>
</ul>

<p>
&lt;DATA&gt; - send to currently active window item (including space + CMDCHAR)
</p>

<p>
&lt;CMDCHAR&gt;&lt;Space&gt;&lt;CMDCHAR&gt;rest of the text&#x2026; - send "/rest of the text&#x2026;"
</p>

<p>
commands
</p>
<ul class="org-ul">
<li>/quit</li>
<li>/set nick whatyouwant</li>
<li>/network</li>
<li>/connect liberachat</li>
<li>/join #irssi</li>
<li>/window hidelevel +joins +parts +quits</li>
<li>/window hidelevel -joins -parts -quits</li>
<li>/network add hackint</li>
<li>/server add -tls -network hackint irc.hackint.org 6697</li>
<li>/connect hackint</li>
<li>/help commandname</li>
<li>/t (short for /topic) to read the full topic</li>
</ul>
<p>
automation
</p>
<ul class="org-ul">
<li>/SERVER LIST</li>
<li>/SERVER MODIFY -auto irc.libera.chat</li>
<li>/CHANNEL ADD -auto #channelname NetworkName</li>
<li>/ADDALLCHANS</li>
<li>/NETWORK ADD -sasl<sub>username</sub> yourname -sasl<sub>password</sub> yourpassword -sasl<sub>mechanism</sub> PLAIN liberachat</li>
<li>/NETWORK MODIFY -autosendcmd "<sup>msg</sup> NickServ identify YOURPASSWORD YOURNICK;wait -OFTC 2000" OFTC</li>
</ul>
</div>
</div>
<div id="outline-container-orgd28f467" class="outline-3">
<h3 id="orgd28f467"><span class="section-number-3">55.8.</span> 1</h3>
<div class="outline-text-3" id="text-55-8">
<p>
/connect &lt;server&gt;
</p>

<p>
/join #&lt;channel&gt;
</p>

<p>
/nick &lt;nickname&gt;
</p>

<p>
/msg &lt;nickname&gt;
</p>

<p>
/wc
</p>

<p>
ALT+&lt;number&gt;, eg. ALT+1, ALT+2
</p>

<p>
/names
</p>

<p>
/topic &lt;description&gt;
</p>

<p>
/ignore #foo,#bar JOINS PARTS QUITS NICKS   # Quieten only channels `#foo`, `#bar`
/ignore * JOINS PARTS QUITS NICKS           # Quieten all channels
</p>

<p>
/save
</p>

<p>
/exit
</p>
</div>
</div>
<div id="outline-container-orgcaca18d" class="outline-3">
<h3 id="orgcaca18d"><span class="section-number-3">55.9.</span> 2</h3>
<div class="outline-text-3" id="text-55-9">
<ol class="org-ol">
<li><p>
To switch between open channels / windows
</p>

<p>
`Alt` + `N` where `N` is the number corresponding to the open window
</p></li>

<li><p>
To ignore joins / quits / nicks changes on a specific channel.
</p>

<p>
`/ignore -channels #chan1,#chan2,#chan3 * JOINS PARTS QUITS NICKS`
</p></li>

<li><p>
Auto Connect to a Server on startup
</p>

<p>
`/SERVER ADD -auto -network IRCnet irc.freenode.net 6667`
</p></li>

<li><p>
Auto Join to Specificed channels
</p>

<p>
`/CHANNEL ADD -auto #doothings IRCnet`
</p></li>

<li><p>
To Keep logging all these conversations
</p>

<p>
`/SET AUTOLOG ON`
</p></li>

<li><p>
To set Nicks and Real Name etc.
</p>

<p>
`/SET` -&gt; This should show all existing configured parameters.
</p>

<p>
To change these just say
</p>

<p>
`/SET param-name value` like `/SET nick nism-pi`
</p></li>

<li><p>
To auto-identify on connecting with NickServ
</p>

<p>
`/network add -autosendcmd "/msg nickserv identify &lt;password&gt; ;wait 2000" IRCnet`
</p></li>

<li>`/SAVE` to save the entire configuration.</li>
</ol>
</div>
</div>
<div id="outline-container-orga9ff554" class="outline-3">
<h3 id="orga9ff554"><span class="section-number-3">55.10.</span> librechat</h3>
<div class="outline-text-3" id="text-55-10">
<ul class="org-ul">
<li><a href="https://github.com/shabble/irssi-docs/wiki/liberachat">https://github.com/shabble/irssi-docs/wiki/liberachat</a></li>
<li><a href="https://github.com/shabble/irssi-docs/wiki/liberachat_certfp">https://github.com/shabble/irssi-docs/wiki/liberachat_certfp</a></li>
<li>cert generation <a href="https://libera.chat/guides/certfp">https://libera.chat/guides/certfp</a></li>
<li>nick registration <a href="https://libera.chat/guides/registration">https://libera.chat/guides/registration</a></li>
</ul>

<p>
steps:
</p>
<div class="org-src-container">
<pre class="src src-bash">openssl req -x509 -new -newkey ed25519 -sha256 -days 1096 -nodes -out libera.pem -keyout libera.pem
mkdir ~/.irssi/certs
mv libera.pem ~/.irssi/certs
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">get fingerprint:</span>
openssl x509 -in .irssi/certs/libera.pem -noout -fingerprint -sha512 | awk -F= <span style="color: #95e454;">'{gsub(":",""); print tolower ($2)}'</span>
</pre>
</div>

<pre class="example">
/server add -tls_cert ~/.irssi/certs/libera.pem -network LiberaChat irc.libera.chat 6697
/connect LiberaChat
/whois or /whois YourOwnNick - should output YourOwnNick has client certificate fingerprint 959c0bdfa9877d3466c5848f55264f72f132c657b002b79fda65dbe36c67f4bb3d2a3e2e9925cb5896a53c76169c5bb71b7853bd90192068dc77f4b20159a1d8
/nick YourNick
/msg NickServ REGISTER YourPassword youremail@example.com
/msg NickServ CERT ADD
/disconnect LiberaChat
</pre>

<p>
switch the authentication to certificates:
</p>
<pre class="example">
/network add -sasl_password '' -sasl_mechanism EXTERNAL LiberaChat
/connect LiberaChat
/msg NickServ regain
</pre>


<p>
SASL with the EXTERNAL mechanism. ? <a href="https://libera.chat/guides/sasl">https://libera.chat/guides/sasl</a>
</p>
</div>
</div>

<div id="outline-container-org8e33998" class="outline-3">
<h3 id="org8e33998"><span class="section-number-3">55.11.</span> automation</h3>
<div class="outline-text-3" id="text-55-11">
<pre class="example">
/SERVER MODIFY -auto irc.libera.chat
/CHANNEL ADD -auto #channelname NetworkName
</pre>


<pre class="example">
/NETWORK ADD -sasl_username Anoncheg -sasl_password '' -sasl_mechanism EXTERNAL liberachat
/CHANNEL ADD -auto #channelname NetworkName
/NETWORK MODIFY -autosendcmd "^nick Anoncheg" liberachat
/CHANNEL ADD -auto #emacs liberachat
</pre>


<p>
show autojoin
</p>
<pre class="example">
/channel list
</pre>


<pre class="example">
/ignore -channels #gentoo * JOINS PARTS QUITS NICKS
/ignore -channels #emacs * JOINS PARTS QUITS NICKS
/ignore * JOINS PARTS QUITS NICKS
/ignore - show list
/unignore &lt;id&gt;
</pre>
</div>
<div id="outline-container-org2408395" class="outline-4">
<h4 id="org2408395"><span class="section-number-4">55.11.1.</span> my</h4>
<div class="outline-text-4" id="text-55-11-1">
<pre class="example">
/CHANNEL ADD -auto #emacs liberachat
/CHANNEL ADD -auto #gentoo-chat liberachat
/CHANNEL ADD -auto #irssi liberachat
/NETWORK MODIFY -autosendcmd "^ignore -channels #gentoo * JOINS PARTS QUITS NICKS" liberachat
/CHANNEL ADD -auto #machinelearning liberachat
/CHANNEL ADD -auto #notmuch liberachat
/CHANNEL ADD -auto #gentoo-hardened liberachat
/CHANNEL ADD -auto #cooking liberachat
/NETWORK MODIFY -autosendcmd "ignore -channels #emacs,#gentoo,#gentoo-chat,#gentoo-hardened,#irssi,##cooking,#notmuch,##machinelearning-general * JOINS PARTS QUITS NICKS ; msg NickServ regain anonch" liberachat
/save
</pre>
</div>
</div>
</div>
<div id="outline-container-org2b53197" class="outline-3">
<h3 id="org2b53197"><span class="section-number-3">55.12.</span> socks</h3>
<div class="outline-text-3" id="text-55-12">
<p>
proxychains irssi
</p>
</div>
</div>
<div id="outline-container-org7d0f9b3" class="outline-3">
<h3 id="org7d0f9b3"><span class="section-number-3">55.13.</span> proxy (HTTP)</h3>
<div class="outline-text-3" id="text-55-13">
<p>
To load the proxy module, type:
</p>
<ul class="org-ul">
<li>/load proxy</li>

<li></li>
</ul>
<p>
<a href="https://github.com/irssi/irssi/blob/master/docs/proxy.txt">https://github.com/irssi/irssi/blob/master/docs/proxy.txt</a>
</p>

<p>
**
</p>
</div>
</div>
<div id="outline-container-orge180106" class="outline-3">
<h3 id="orge180106"><span class="section-number-3">55.14.</span> script: python module</h3>
<div class="outline-text-3" id="text-55-14">
<p>
<a href="https://github.com/irssi-import/irssi-python">https://github.com/irssi-import/irssi-python</a>
</p>

<p>
common installation steps:
</p>
<ul class="org-ul">
<li>make &amp; install</li>
<li>/load matrix</li>
</ul>
</div>
</div>
<div id="outline-container-org838d4db" class="outline-3">
<h3 id="org838d4db"><span class="section-number-3">55.15.</span> script: (Perl)</h3>
<div class="outline-text-3" id="text-55-15">
<ul class="org-ul">
<li><a href="https://irssi.org/documentation/scripting/">https://irssi.org/documentation/scripting/</a></li>
<li><a href="https://codeberg.org/irssi/irssi/src/branch/master/docs/perl.txt">https://codeberg.org/irssi/irssi/src/branch/master/docs/perl.txt</a></li>
<li><a href="https://codeberg.org/irssi/irssi/src/branch/master/docs/signals.txt">https://codeberg.org/irssi/irssi/src/branch/master/docs/signals.txt</a></li>
<li><a href="https://github.com/shabble/irssi-docs/wiki">https://github.com/shabble/irssi-docs/wiki</a></li>
<li><a href="https://juerd.nl/site.plp/irssi">https://juerd.nl/site.plp/irssi</a></li>
<li><a href="https://juerd.nl/site.plp/irssiscripttut">https://juerd.nl/site.plp/irssiscripttut</a></li>
<li><a href="https://scripts.irssi.org/">https://scripts.irssi.org/</a></li>
</ul>
<p>
event based:  signals(events) and commands(user).
</p>
<ul class="org-ul">
<li><i>SCRIPT LOAD command or /RUN alias. /SCRIPT UNLOAD from ~</i>.irssi/scripts/ or <i>usr/local/lib/irssi/scripts</i></li>
<li>Irssi:: namespace.</li>
<li>subs - hook events</li>
<li>Irssi::signal<sub>add</sub> or Irssi::command<sub>bind</sub> (event sub)</li>
<li>Everything you print is printed into Irssi's scrollbuffer, and automatically line terminated.</li>
<li>Irssi::signal<sub>stop</sub>(); - inside sub to stop</li>
<li>add: settings<sub>add</sub><sub>str</sub>, settings<sub>add</sub><sub>int</sub> or settings<sub>add</sub><sub>bool</sub></li>
<li>get: settings<sub>get</sub><sub>str</sub>, settings<sub>get</sub><sub>int</sub> or settings<sub>get</sub><sub>bool</sub></li>
<li>You can also use signal<sub>add</sub><sub>last</sub>() if you wish to let the Irssi's internal functions be run before yours.</li>
</ul>
</div>
<div id="outline-container-orgb782955" class="outline-4">
<h4 id="orgb782955"><span class="section-number-4">55.15.1.</span> command available in script:</h4>
<div class="outline-text-4" id="text-55-15-1">
<p>
Server::send<sub>message</sub>(target, msg, target<sub>type</sub>)
  Sends a message to nick/channel. target<sub>type</sub> 0 = channel, 1 = nick
</p>

<p>
Channel::nicks()
  Return a list of all nicks in channel.
Channel::nick<sub>find</sub>('anon')
</p>
</div>
</div>
<div id="outline-container-org69e5ffc" class="outline-4">
<h4 id="org69e5ffc"><span class="section-number-4">55.15.2.</span> ex</h4>
<div class="outline-text-4" id="text-55-15-2">
<div class="org-src-container">
<pre class="src src-perl"><span style="color: #8ac6f2; font-weight: bold;">use</span> <span style="color: #e5786d; font-weight: bold;">strict</span>;
<span style="color: #8ac6f2; font-weight: bold;">use</span> <span style="color: #e5786d; font-weight: bold;">vars</span> qw<span style="color: #95e454;">($VERSION %IRSSI)</span>;

<span style="color: #8ac6f2; font-weight: bold;">use</span> <span style="color: #e5786d; font-weight: bold;">Irssi</span>;
$<span style="color: #cae682;">VERSION</span> = <span style="color: #95e454;">'1.00'</span>;
%<span style="color: #cae682; text-decoration: underline;">IRSSI</span> = (
    authors     =&gt; <span style="color: #95e454;">'A. U. Thor'</span>,
    contact     =&gt; <span style="color: #95e454;">'author@far.away'</span>,
    name        =&gt; <span style="color: #95e454;">'My First Script'</span>,
    description =&gt; <span style="color: #95e454;">'This script allows '</span> .
                   <span style="color: #95e454;">'you to print Hello '</span> .
                   <span style="color: #95e454;">'World using a command.'</span>,
    license     =&gt; <span style="color: #95e454;">'Public Domain'</span>,
);
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-------- add event handler</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">--- command</span>
<span style="color: #8ac6f2; font-weight: bold;">sub</span> <span style="color: #cae682; font-weight: bold;">testing</span> {
    <span style="color: #8ac6f2; font-weight: bold;">my</span> ($<span style="color: #cae682;">data</span>, $<span style="color: #cae682;">server</span>, $<span style="color: #cae682;">witem</span>) = @<span style="color: #cae682; text-decoration: underline;">_</span>; <span style="color: #99968b; font-style: italic;"># arguments</span>
    <span style="color: #8ac6f2; font-weight: bold;">return</span> <span style="color: #8ac6f2; font-weight: bold;">unless</span> $<span style="color: #cae682;">witem</span>;
    <span style="color: #99968b; font-style: italic;"># $witem (window item) may be undef.</span>

    $<span style="color: #cae682;">witem</span>-&gt;print(<span style="color: #95e454;">'It works!'</span>);
    $<span style="color: #cae682;">witem</span>-&gt;print(<span style="color: #95e454;">'Example'</span>, MSGLEVEL_PUBLIC);
}

Irssi::command_bind test =&gt; \&amp;<span style="color: #cae682; font-weight: bold;">testing</span>;
Irssi::command_bind hello =&gt; <span style="color: #8ac6f2; font-weight: bold;">sub</span> {
    print <span style="color: #95e454;">'Hello, world!'</span>; <span style="color: #99968b; font-style: italic;"># CLIENTCRAP messagelevel is used</span>
};
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">--- signal</span>
<span style="color: #8ac6f2; font-weight: bold;">sub</span> <span style="color: #cae682; font-weight: bold;">event_privmsg</span> {
    <span style="color: #99968b; font-style: italic;"># $data = "nick/#channel :text"</span>
    <span style="color: #8ac6f2; font-weight: bold;">my</span> ($<span style="color: #cae682;">server</span>, $<span style="color: #cae682;">data</span>, $<span style="color: #cae682;">nick</span>, $<span style="color: #cae682;">address</span>) = @<span style="color: #cae682; text-decoration: underline;">_</span>;
    <span style="color: #8ac6f2; font-weight: bold;">my</span> ($<span style="color: #cae682;">target</span>, $<span style="color: #cae682;">text</span>) = split(<span style="color: #95e454;">/ :/</span>, $<span style="color: #cae682;">data</span>, 2);

    Irssi::signal_stop() <span style="color: #8ac6f2; font-weight: bold;">if</span> ($<span style="color: #cae682;">text</span> =~ <span style="color: #95e454;">/free.*porn/</span> || $<span style="color: #cae682;">nick</span> =~ <span style="color: #95e454;">/idiot/</span>);
  }

Irssi::signal_add(<span style="color: #95e454;">"event privmsg"</span>, <span style="color: #95e454;">"event_privmsg"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8595490" class="outline-3">
<h3 id="org8595490"><span class="section-number-3">55.16.</span> links</h3>
<div class="outline-text-3" id="text-55-16">
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/Irssi">https://wiki.gentoo.org/wiki/Irssi</a></li>
<li><a href="https://irssi.org/">https://irssi.org/</a></li>
<li><a href="https://codeberg.org/ticho/irssi-matrix/">https://codeberg.org/ticho/irssi-matrix/</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org94c958b" class="outline-2">
<h2 id="org94c958b"><span class="section-number-2">56.</span> mpv</h2>
<div class="outline-text-2" id="text-56">
<ul class="org-ul">
<li>F8 	show playlist</li>
<li>&gt;/&lt;	playlist</li>
<li>0/9	volume control</li>
</ul>
</div>
</div>
<div id="outline-container-orgb563459" class="outline-2">
<h2 id="orgb563459"><span class="section-number-2">57.</span> TigerVNC</h2>
<div class="outline-text-2" id="text-57">
<p>
alwaysshared - Determine whether multiple users can be connected at the same time
</p>

<ul class="org-ul">
<li>vncconfig</li>
<li>vncpasswd − change the VNC password</li>
<li>vncsession - start a VNC server</li>
<li>vncviewer</li>
<li>x0vncserver</li>
<li>Xvnc</li>
</ul>

<p>
steps:
</p>
<pre class="example">
mkdir .vnc
vncpasswd .vnc/passwd
x0vncserver -PasswordFile ~/.vnc/passwd -localhost
</pre>


<p>
useful options:
</p>
<ul class="org-ul">
<li>-localhost</li>
<li>-SecurityTypes none</li>
<li>-Password password</li>
<li>-AlwaysShared - between clients?</li>
<li>-NeverShared=on - ?</li>
<li>-AcceptKeyEvents=off</li>
<li>-AcceptPointerEvents=off</li>
<li>-AcceptSetDesktopSize=off</li>
<li>-FrameRate=24</li>
<li>-CompareFB=0 # pixel compression 0 (off), 1 (always) or 2 (auto)</li>
<li>-UseSHM=off # Shared Memory</li>
<li>-ZlibLevel=3 #0-9</li>
</ul>

<p>
View only access:
</p>
<pre class="example">
x0vncserver -SecurityTypes none -NeverShared=on -AcceptKeyEvents=off -AcceptPointerEvents=off -AcceptSetDesktopSize=off -FrameRate=20 -UseSHM=off -ZlibLevel=3
</pre>


<p>
links
</p>
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/TigerVNC">https://wiki.gentoo.org/wiki/TigerVNC</a></li>
<li><a href="https://wiki.archlinux.org/title/TigerVNC">https://wiki.archlinux.org/title/TigerVNC</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-tigervnc">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-tigervnc</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgc0b001f" class="outline-2">
<h2 id="orgc0b001f"><span class="section-number-2">58.</span> cloud</h2>
<div class="outline-text-2" id="text-58">
<p>
open source consoles - OpenShift
</p>
</div>
</div>
<div id="outline-container-org3679bf6" class="outline-2">
<h2 id="org3679bf6"><span class="section-number-2">59.</span> openssl</h2>
<div class="outline-text-2" id="text-59">
<ul class="org-ul">
<li>openssl s<sub>client</sub> -showcerts -connect pecl.php.net:443 просмотр сертификатов при соединении схостом</li>
<li>openssl s<sub>client</sub> -tls1 -debug -msg -state -showcerts -connect php.net:443 - более подробный вывод</li>
<li>openssl ciphers|tr ':' '\n'|grep GOST</li>
<li>openssl engine</li>
<li>openssl s<sub>client</sub> -connect pecl.php.net:443 -CAfile RCA.crt - указать свой сертификат</li>
<li>curl &#x2013;trace - <a href="https://gost.cryptopro.ru/">https://gost.cryptopro.ru/</a></li>
</ul>

<p>
inspecting expiration date:
</p>
<pre class="example">
openssl x509 -in libera.pem -noout -enddate
</pre>


<p>
inspecting the fingerprint:
</p>
<pre class="example">
openssl x509 -in libera.pem -noout -fingerprint -sha512 | awk -F= '{gsub(":",""); print tolower ($2)}'
</pre>
</div>
</div>
<div id="outline-container-org5def914" class="outline-2">
<h2 id="org5def914"><span class="section-number-2">60.</span> decentralized Darknet</h2>
<div class="outline-text-2" id="text-60">
<p>
Deep web - parts of the World Wide Web whose contents are not indexed by standard web search-engines
</p>

<p>
Anonymity trilemma: strong anonymity, low bandwidth overhead, low latency overhead (delay between when the
 message is sent and received)
</p>

<p>
Zooko's triangle (names of participants in a network protocol:):
</p>
<ul class="org-ul">
<li>Human-meaningful: Meaningful and memorable (low-entropy) names are provided to the users.</li>
<li>Secure: The amount of damage a malicious entity can inflict on the system should be as low as possible.</li>
<li>Decentralized: Names correctly resolve to their respective entities without the use of a central authority
or service.</li>
<li>secure under Byzantine assumptions</li>
</ul>
</div>
<div id="outline-container-org9b6975e" class="outline-3">
<h3 id="org9b6975e"><span class="section-number-3">60.1.</span> TOR</h3>
<div class="outline-text-3" id="text-60-1">
</div>
<div id="outline-container-org2ae9add" class="outline-4">
<h4 id="org2ae9add"><span class="section-number-4">60.1.1.</span> offical and not official resources</h4>
<div class="outline-text-4" id="text-60-1-1">
<ul class="org-ul">
<li>TOR Node List <a href="https://www.dan.me.uk/tornodes">https://www.dan.me.uk/tornodes</a></li>
<li>ExoneraTor — про­вер­ка IP на исполь­зование в качес­тве нод Tor; <a href="https://metrics.torproject.org/exonerator.html">https://metrics.torproject.org/exonerator.html</a></li>
<li>Onionite — информа­ция о нодах; <a href="https://github.com/lukechilds/onionite">https://github.com/lukechilds/onionite</a></li>
<li>Collector Tor — архив IP и пор­тов узлов. <a href="https://collector.torproject.org/archive/relay-descriptors/microdescs/">https://collector.torproject.org/archive/relay-descriptors/microdescs/</a></li>
<li><a href="https://torwhois.com">https://torwhois.com</a></li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org0ee372b"></a>search engines<br />
<div class="outline-text-5" id="text-60-1-1-1">
<ul class="org-ul">
<li><a href="https://onionengine.com">https://onionengine.com</a></li>
<li><a href="https://www.torry.io">https://www.torry.io</a></li>
<li><a href="https://onionlandsearchengine.net">https://onionlandsearchengine.net</a></li>
<li><a href="https://torsearch.com">https://torsearch.com</a></li>
<li><a href="https://github.com/megadose/OnionSearch">https://github.com/megadose/OnionSearch</a></li>
</ul>

<p>
<a href="https://telegra.ph/Haker---De-onion-Kak-lovyat-administratorov-sajtov-v-Tor-08-08">https://telegra.ph/Haker---De-onion-Kak-lovyat-administratorov-sajtov-v-Tor-08-08</a>
</p>
</div>
</li>
<li><a id="org84902a5"></a>wikis<br />
<div class="outline-text-5" id="text-60-1-1-2">
<p>
• The Hidden Wiki; <a href="https://thehiddenwiki.org">https://thehiddenwiki.org</a>
• IACA DarkWeb; <a href="https://iaca-darkweb-tools.com">https://iaca-darkweb-tools.com</a>
• DarkWeb Links; <a href="https://darkweb-links.co/dark-web-links/">https://darkweb-links.co/dark-web-links/</a>
• The DarkWeb Links. <a href="https://www.thedarkweblinks.com">https://www.thedarkweblinks.com</a>
</p>
</div>
</li>
<li><a id="org823155b"></a>money<br />
<div class="outline-text-5" id="text-60-1-1-3">
<p>
Ви­зуали­зато­ры зачас­тую плат­ные, но есть и нес­коль­ко бес­плат­ных:
</p>
<ul class="org-ul">
<li><a href="https://www.breadcrumbs.app">https://www.breadcrumbs.app</a></li>
<li><a href="https://oxt.me">https://oxt.me</a></li>
<li><a href="https://blockpath.com">https://blockpath.com</a></li>
</ul>

<p>
Ча­ще все­го дар­квеб исполь­зуют для тор­говли зап­рещен­ными товара­ми и услу­гами. Выручен­ные день­ги потом нуж­но как‑то выводить, и здесь тор­говцы зап­рещен­ным изоб­рета­ют самые изощ­ренные схе­мы. Обыч­но — с исполь­зовани­ем крип­товалю­ты. Имен­но на эта­пе вывода денег чаще все­го и попада­ются вла­дель­цы мар­кет­плей­сов.
</p>

<p>
Пред­ставь: кли­ент покупа­ет крип­ту, покупа­ет на нее что‑то в дар­кне­те, крип­товалю­та хра­нит­ся на депози­те мар­кет­плей­са, затем боль­шая часть перехо­дит про­дав­цу, а даль­ше он пыта­ется ее обме­нять на фиат­ную валюту.
</p>

<p>
По­луча­ется, что мож­но уста­новить, каким обменни­ком поль­зует­ся про­давец, если знать адрес его крип­товалют­ного кошель­ка. Для это­го дос­таточ­но визу­али­зиро­вать его активность с помощью спе­циаль­ной прог­раммы. На кошель­ке обменни­ка, конеч­но же, будет огромное чис­ло тран­закций и немалая сум­ма денег.
</p>

<p>
Час­то при отмы­ве денег при­меня­ются крип­товалют­ные мик­серы. Они поз­воля­ют скры­вать крип­товалют­ные акти­вы, рас­пре­деляя их по мно­жес­тву дру­гих кошель­ков, и затем сно­ва перево­дят в один. Это усложня­ет отсле­жива­ние тран­закций, но не дела­ет их пол­ностью ано­ним­ными.
</p>

<p>
Ес­ли визу­али­зиро­вать тран­закции кошель­ка, который исполь­зовал мик­сер, мож­но заметить сле­дующие осо­бен­ности:
</p>

<p>
• мно­жес­тво вхо­дов и выходов в одной тран­закции, вклю­чая
  адре­са, не свя­зан­ные с исходным кошель­ком;
• пе­реме­шива­ние средств меж­ду раз­ными адре­сами и кошель­ками;
• свя­зи с дру­гими тран­закци­ями — цепоч­ки и клас­теры
  тран­закций, свя­зан­ные с бит­коин‑мик­сером;
• не­одно­род­ность сумм тран­закций;
• не­обыч­ные вре­мен­ные интерва­лы меж­ду тран­закци­ями.
</p>

<p>
Най­ти нас­тоящий адрес покупа­теля тяжело, но впол­не реаль­но. Одна­ко ПО для ана­лиза тран­закций мик­серов в откры­том дос­тупе пока что нет. Поэто­му при­ходит­ся прос­то идти по цепоч­ке тран­закций, пока не най­дешь что‑то похожее на кошелек, при­над­лежащий челове­ку.
</p>

<p>
Как ты понял, отмыв денег и их отсле­жива­ние — это отдель­ная боль­шая тема. Но знать о ней нуж­но, хотя бы на базовом уров­не. Сущес­тву­ет огромное количес­тво схем легали­зации средств, получен­ных прес­тупным путем, — от соз­дания офшорных орга­низа­ций до покуп­ки раз­ного иму­щес­тва. Все это, мы, конеч­но, здесь раз­бирать не будем.
</p>
</div>
</li>


<li><a id="org98edc62"></a>sites<br />
<div class="outline-text-5" id="text-60-1-1-4">
<p>
• DuckDuckGo; <a href="https://duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion/">https://duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion/</a>
• Not Evil; <a href="http://notevilmtxf25uw7tskqxj6njlpebyrmlrerfv5hc4tuq7c7hilbyiqd.onion/">http://notevilmtxf25uw7tskqxj6njlpebyrmlrerfv5hc4tuq7c7hilbyiqd.onion/</a>
• Ahmia; <a href="http://juhanurmihxlp77nkq76byazcldy2hlmovfu2epvl5ankdibsot4csyd.onion/">http://juhanurmihxlp77nkq76byazcldy2hlmovfu2epvl5ankdibsot4csyd.onion/</a>
• Haystak; <a href="http://haystak5njsmn2hqkewecpaxetahtwhsbsa64jom2k22z5afxhnpxfid.onion/">http://haystak5njsmn2hqkewecpaxetahtwhsbsa64jom2k22z5afxhnpxfid.onion/</a>
• Torch; <a href="http://torchdeedp3i2jigzjdmfpn5ttjhthh5wbmda2rr3jvqjg5p77c54dqd.onion/">http://torchdeedp3i2jigzjdmfpn5ttjhthh5wbmda2rr3jvqjg5p77c54dqd.onion/</a>
• Demon. <a href="http://srcdemonm74icqjvejew6fprssuolyoc2usjdwflevbdpqoetw4x3ead.onion/">http://srcdemonm74icqjvejew6fprssuolyoc2usjdwflevbdpqoetw4x3ead.onion/</a>
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org34b2d37" class="outline-4">
<h4 id="org34b2d37"><span class="section-number-4">60.1.2.</span> site security audit</h4>
<div class="outline-text-4" id="text-60-1-2">
<p>
Onionscan (аудит onion-сай­та);
 • Onion Nmap (Nmap для onion-сай­та);
 • OWASP ZAP (ска­нер);
 • Nikto (ска­нер);
 • WPScan (ска­нер);
 • Burp Suite (ска­нер);
 • Wapiti (ска­нер);
 • спи­сок уяз­вимос­тей на Mitre.org. <a href="https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=tor">https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=tor</a>
</p>
</div>
</div>
<div id="outline-container-orgafdf893" class="outline-4">
<h4 id="orgafdf893"><span class="section-number-4">60.1.3.</span> types of relays or nodes</h4>
<div class="outline-text-4" id="text-60-1-3">
<ul class="org-ul">
<li>non-exit relays
<ul class="org-ul">
<li>Guard -  first relay in the chain of 3 relays building a Tor circuit -  must be stable and fast (at least 2MByte/s) otherwise it will remain a middle relay.</li>
<li>middle relay - acts as the second hop between Guard and exit relays</li>
</ul></li>
<li>bridge - static IP better - not relay - node - IP not listed in public TOR derectory
<ul class="org-ul">
<li>Pluggable transports, a special kind of bridge, address this by adding an additional layer of obfuscation.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org98bebdb" class="outline-4">
<h4 id="org98bebdb"><span class="section-number-4">60.1.4.</span> torrc</h4>
<div class="outline-text-4" id="text-60-1-4">
</div>
<ol class="org-ol">
<li><a id="org65bb0fc"></a>tor node and dirctionary - gentoo<br />
<div class="outline-text-5" id="text-60-1-4-1">
<ul class="org-ul">
<li>default:
<ul class="org-ul">
<li>User tor</li>
<li>PIDFile /run/tor/tor.pid</li>
<li># Log notice syslog</li>
<li>DataDirectory /var/lib/tor/data</li>
</ul></li>
<li>RunAsDaemon 1</li>
<li>ExitRelay 0</li>
<li>BridgeRelay 0</li>
<li>ORPort 0.0.0.0:xxx</li>
<li>DirPort 0.0.0.0:xxx</li>
<li>Nickname</li>
<li>RelayBandwidthRate 2 MBytes</li>
<li>RelayBandwidthBurst 3 MBytes</li>
<li>ContactInfo xxx &lt;xxx@xxx.xxx&gt;</li>
<li>Sandbox 1</li>
<li>Log notice file /var/log/tor<sub>notices.log</sub></li>
<li>Log warn file /var/log/tor<sub>warn.log</sub></li>
<li>Log debug file /var/log/tor<sub>debug.log</sub></li>
</ul>
</div>
</li>

<li><a id="org7da32a3"></a>tor bridge - gentoo<br />
<div class="outline-text-5" id="text-60-1-4-2">
<ol class="org-ol">
<li>echo "net-vpn/tor caps lzma scrypt seccomp server tor-hardening verify-sig zstd" &gt; /etc/portage/package.use/tor</li>
<li>emerge &#x2013;ask tor net-proxy/obfs4proxy</li>
<li>config:
<ul class="org-ul">
<li>RunAsDaemon 1</li>
<li>SOCKSPort localhost:9050</li>
<li>BridgeRelay 1</li>
<li>ExitRelay 0</li>
<li>ORPort 0.0.0.0:xxx</li>
<li>Sandbox 0 # not compatible with obfs4</li>
<li>ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy</li>
<li>ClientTransportPlugin obfs3 exec /usr/bin/obfs4proxy</li>
</ul></li>
</ol>
</div>
</li>
<li><a id="orge3f477d"></a>tor bridge client<br />
<div class="outline-text-5" id="text-60-1-4-3">
<ol class="org-ol">
<li>echo "net-vpn/tor caps lzma scrypt seccomp server tor-hardening verify-sig zstd" &gt; /etc/portage/package.use/tor</li>
<li>emerge &#x2013;ask tor net-proxy/obfs4proxy</li>
<li>get brideges: <a href="https://bridges.torproject.org/">https://bridges.torproject.org/</a></li>
<li>config:
<ul class="org-ul">
<li>UseBridges 1</li>
<li>ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy</li>
<li>ClientTransportPlugin obfs3 exec /usr/bin/obfs4proxy</li>
<li>Sandbox 0 # not compatible with obfs4</li>
<li>ShutdownWaitLength 5 seconds</li>
<li>bridge obfs4 xxx.xxx.xxx.xxx:xxxx xxxxxxxxx cert=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx iat-mode=0</li>
</ul></li>
</ol>
</div>
</li>
<li><a id="org942fc0c"></a>ControlPort<br />
<div class="outline-text-5" id="text-60-1-4-4">
<ul class="org-ul">
<li>tor &#x2013;hash-password password</li>
<li>/etc/tor/torrc:- HashedControlPassword hashed<sub>password</sub></li>
<li>(echo authenticate '"password"'; echo signal newnym; echo quit) | nc localhost 9051</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org1f298f2" class="outline-4">
<h4 id="org1f298f2"><span class="section-number-4">60.1.5.</span> firefox config</h4>
<div class="outline-text-4" id="text-60-1-5">
<p>
network.proxy.socks<sub>remote</sub><sub>dns</sub>    true
network.dns.disablePrefetch       true
network.dns.disableIPv6           true
javascript.enabled false
</p>

<p>
and all fingerprints disabled
</p>
<ul class="org-ul">
<li>media.peerconnection.enabled    false</li>
</ul>
</div>
</div>
<div id="outline-container-orgd114c40" class="outline-4">
<h4 id="orgd114c40"><span class="section-number-4">60.1.6.</span> route tor through tor</h4>
<div class="outline-text-4" id="text-60-1-6">
<p>
NON<sub>TOR</sub>="192.168.1.0/24 192.168.0.0/24"
		TOR<sub>UID</sub>=$( id -ur debian-tor )
		TRANS<sub>PORT</sub>="9040"
		iptables -F
		iptables -t nat -F
		iptables -t nat -A OUTPUT -m owner &#x2013;uid-owner $TOR<sub>UID</sub> -j RETURN
		iptables -t nat -A OUTPUT -p udp &#x2013;dport 53 -j REDIRECT &#x2013;to-ports 5353
		for NET in $NON<sub>TOR</sub> 127.0.0.0/9 127.128.0.0/10; do
			iptables -t nat -A OUTPUT -d $NET -j RETURN
		done
</p>

<p>
iptables -t nat -A OUTPUT -p tcp &#x2013;syn -j REDIRECT &#x2013;to-ports $TRANS<sub>PORT</sub>
iptables -A OUTPUT -m state &#x2013;state ESTABLISHED,RELATED -j ACCEPT
</p>

<p>
for NET in $NON<sub>TOR</sub> 127.0.0.0/8; do
	iptables -A OUTPUT -d $NET -j ACCEPT
done
iptables -A OUTPUT -m owner &#x2013;uid-owner $TOR<sub>UID</sub> -j ACCEPT
iptables -A OUTPUT -j REJECT
</p>
</div>
</div>

<div id="outline-container-orge9cae37" class="outline-4">
<h4 id="orge9cae37"><span class="section-number-4">60.1.7.</span> theory</h4>
<div class="outline-text-4" id="text-60-1-7">
<p>
consist of
</p>
<ul class="org-ul">
<li>onion routers</li>
</ul>

<p>
Tor relies on a network of volunteer-operated relays and a set of central directory authorities.
</p>

<p>
cons:
</p>
<ul class="org-ul">
<li>Tor’s circuit moderation is bandwidth-weighted, you are much more likely to use high-bandwidth nodes than low-bandwidth ones, meaning that a large percentage of Tor’s 7000+ nodes are underutilised due to having insufficient bandwidth.</li>
</ul>
</div>
</div>
<div id="outline-container-org9241bd2" class="outline-4">
<h4 id="org9241bd2"><span class="section-number-4">60.1.8.</span> dangers</h4>
<div class="outline-text-4" id="text-60-1-8">
<p>
&gt;tor is safe - sure, but it won't last for long if more than 50% of nodes are run by feds, and
remember feds which are controlled by zionists have a lot of money, a lot to rent out entire aws
region domain to host tor nodes and catch you red handed
</p>
</div>
</div>
<div id="outline-container-org8db8bf5" class="outline-4">
<h4 id="org8db8bf5"><span class="section-number-4">60.1.9.</span> Tor vulnerabilities</h4>
<div class="outline-text-4" id="text-60-1-9">
<p>
<b>A</b> access to phisical network and exit-node.
or middle nodes and exit-node
if ISP has exit-node.
correlate attack
Protection
VPN to TOR + generation of non-Tor traffic.
<b>B</b> Bittorrent send UDP without TOR.
Block all UDP packets. TOR only provides a TCP connections.
</p>
</div>
</div>

<div id="outline-container-orgb4b0484" class="outline-4">
<h4 id="orgb4b0484"><span class="section-number-4">60.1.10.</span> Verification</h4>
<div class="outline-text-4" id="text-60-1-10">
<p>
<a href="https://cdimage.debian.org/cdimage/weekly-builds/amd64/iso-cd/debian-testing-amd64-xfce-CD-1.iso">https://cdimage.debian.org/cdimage/weekly-builds/amd64/iso-cd/debian-testing-amd64-xfce-CD-1.iso</a>
gpg &#x2013;keyserver pool.sks-keyservers.net &#x2013;recv-keys 0x4E2C6E8793298290
</p>

<p>
gpg &#x2013;fingerprint 0x4E2C6E8793298290
</p>

<p>
You should see:
</p>

<p>
pub   4096R/93298290 2014-12-15
      Key fingerprint = EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290
uid                  Tor Browser Developers (signing key)
sub   4096R/F65C2036 2014-12-15
sub   4096R/D40814E0 2014-12-15
sub   4096R/C3C07136 2016-08-24
</p>

<p>
gpg &#x2013;verify tor-browser-linux64-8.0.1<sub>en</sub>-US.tar.xz.asc
</p>


<p>
The output should say "Good signature":
</p>

<p>
gpg: Signature made Tue 24 Jan 2015 09:29:09 AM CET using RSA key ID D40814E0
gpg: Good signature from "Tor Browser Developers (signing key) "
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290
</p>

<p>
Currently valid subkey fingerprints are:
</p>

<p>
1107 75B5 D101 FB36 BC6C  911B EB77 4491 D9FF 06E2
</p>
</div>
</div>

<div id="outline-container-orgd0af519" class="outline-4">
<h4 id="orgd0af519"><span class="section-number-4">60.1.11.</span> search engines</h4>
<div class="outline-text-4" id="text-60-1-11">
<p>
<a href="http://darkzzx4avcsuofgfez5zq75cqc4mprjvfqywo45dfcaxrwqg6qrlfid.onion/">http://darkzzx4avcsuofgfez5zq75cqc4mprjvfqywo45dfcaxrwqg6qrlfid.onion/</a>
LeafWiki also seems to be trustworthy by the amount of hentai search queries in it's Comics category:
<a href="http://lljcwddkoyjq3xxtchl7a4i3ig6wqrg7nfxuzbzj4k4tbnb6pnzq7kid.onion/index.php/Main_Page">http://lljcwddkoyjq3xxtchl7a4i3ig6wqrg7nfxuzbzj4k4tbnb6pnzq7kid.onion/index.php/Main_Page</a>
If it lists nanochan, it's probably legit. (This is how you found us on some other link list, right?)
</p>

<p>
Search engines you asked for, use on your own risk:
Ahmia - <a href="http://juhanurmihxlp77nkq76byazcldy2hlmovfu2epvl5ankdibsot4csyd.onion/">http://juhanurmihxlp77nkq76byazcldy2hlmovfu2epvl5ankdibsot4csyd.onion/</a>
Phobos - <a href="http://phobosxilamwcg75xt22id7aywkzol6q6rfl2flipcqoc4e4ahima5id.onion/">http://phobosxilamwcg75xt22id7aywkzol6q6rfl2flipcqoc4e4ahima5id.onion/</a>
Abiko - <a href="http://abikoifawyrftqivkhfxiwdjcdzybumpqrbowtudtwhrhpnykfonyzid.onion/">http://abikoifawyrftqivkhfxiwdjcdzybumpqrbowtudtwhrhpnykfonyzid.onion/</a>
TORCH - <a href="http://torchdeedp3i2jigzjdmfpn5ttjhthh5wbmda2rr3jvqjg5p77c54dqd.onion">http://torchdeedp3i2jigzjdmfpn5ttjhthh5wbmda2rr3jvqjg5p77c54dqd.onion</a>
(you can immediately see it's redeeming quality by abundance of colorful banners offering you all sorts of nice things)
Another (?) Torch - <a href="http://xmh57jrknzkhv6y3ls3ubitzfqnkrwxhopf5aygthi7d6rplyvk3noyd.onion/cgi-bin/omega/omega">http://xmh57jrknzkhv6y3ls3ubitzfqnkrwxhopf5aygthi7d6rplyvk3noyd.onion/cgi-bin/omega/omega</a>
Haystak - <a href="http://haystak5njsmn2hqkewecpaxetahtwhsbsa64jom2k22z5afxhnpxfid.onion/">http://haystak5njsmn2hqkewecpaxetahtwhsbsa64jom2k22z5afxhnpxfid.onion/</a>
Onionland - <a href="http://3bbad7fauom4d6sgppalyqddsqbf5u5p56b5k5uk2zxsy3d6ey2jobad.onion/">http://3bbad7fauom4d6sgppalyqddsqbf5u5p56b5k5uk2zxsy3d6ey2jobad.onion/</a>
</p>
</div>
</div>
<div id="outline-container-orga92b7ab" class="outline-4">
<h4 id="orga92b7ab"><span class="section-number-4">60.1.12.</span> proxies</h4>
<div class="outline-text-4" id="text-60-1-12">
<ol class="org-ol">
<li>torsocks</li>
</ol>
<p>
emerge &#x2013;ask net-proxy/torsocks
</p>
<ul class="org-ul">
<li>$ torsocks application</li>
<li>DNS handled</li>
<li>rejects any traffic other than TCP</li>
<li>WRNING It uses the LD<sub>PRELOAD</sub> mechanism (man ld.so.8) which means that if the application is not using the
libc or for instance uses raw syscalls, torsocks will be useless and the traffic will not go through Tor.</li>

<li>curl &#x2013;socks5-hostname 127.0.0.1:9050 onion</li>
</ul>

<p>
redirect ALL non-tor outgoing trafic to a Tor transparent proxy:
</p>
<ul class="org-ul">
<li>iptables -t nat -A OUTPUT -p TCP -m owner ! &#x2013;uid-owner tor -j DNAT &#x2013;to-destination 127.0.0.1:9040</li>
</ul>
</div>
</div>
<div id="outline-container-org9e26a04" class="outline-4">
<h4 id="org9e26a04"><span class="section-number-4">60.1.13.</span> fstab logging to tmpfs</h4>
<div class="outline-text-4" id="text-60-1-13">
<ul class="org-ul">
<li>tmpfs  /var/logtor  tmpfs uid=43,rw,nosuid,noatime,nodev,noexec,size=20M,mode=1705 0 0</li>
<li>Log notice file /var/logtor/tor<sub>notices.log</sub></li>
</ul>
</div>
</div>
<div id="outline-container-orge6afcbb" class="outline-4">
<h4 id="orge6afcbb"><span class="section-number-4">60.1.14.</span> Debian update tor from official repository</h4>
<div class="outline-text-4" id="text-60-1-14">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #cae682;">CODENAME</span>=$(<span style="color: #fa8072;">lsb_release -cs</span>)
cat &lt;&lt;EOF &gt; /etc/apt/sources.list.d/tor.list
<span style="color: #ffff00; font-weight: bold;">   deb     [signed-by=/usr/share/keyrings/tor-archive-keyring.gpg] https://deb.torproject.org/torproject.org $CODENAME main</span>
<span style="color: #ffff00; font-weight: bold;">   deb-src [signed-by=/usr/share/keyrings/tor-archive-keyring.gpg] https://deb.torproject.org/torproject.org $CODENAME main</span>
<span style="color: #ffff00; font-weight: bold;">EOF</span>
wget -qO- https://deb.torproject.org/torproject.org/A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89.asc | gpg --dearmor | sudo tee /usr/share/keyrings/tor-archive-keyring.gpg &gt;/dev/null
sudo apt update &amp;&amp; sudo apt install tor deb.torproject.org-keyring -y
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc3eca13" class="outline-4">
<h4 id="orgc3eca13"><span class="section-number-4">60.1.15.</span> popular</h4>
<div class="outline-text-4" id="text-60-1-15">
<p>
<a href="https://duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion/">https://duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion/</a>
</p>
</div>
</div>
<div id="outline-container-orgc9db287" class="outline-4">
<h4 id="orgc9db287"><span class="section-number-4">60.1.16.</span> own hidden service</h4>
<div class="outline-text-4" id="text-60-1-16">
</div>
<ol class="org-ol">
<li><a id="orgaa1ae8f"></a>torrc<br />
<div class="outline-text-5" id="text-60-1-16-1">
<p>
running a Tor Onion Service does not result in your IP address being publicly listed anywhere, nor does your
 service relay other Tor traffic.
</p>

<ol class="org-ol">
<li>apache or nginx at localhost:80</li>
<li>torrc:
<ul class="org-ul">
<li>HiddenServiceDir <i>var/lib/tor/my<sub>website</sub></i></li>
<li>HiddenServicePort 80 127.0.0.1:80</li>
<li>or:</li>
<li>HiddenServiceDir <i>var/lib/tor/my-website</i></li>
<li>HiddenServicePort 80 unix:/var/run/tor-my-website.sock</li>
</ul></li>
<li>mkdir &lt;HiddenServiceDir&gt;</li>
<li>chmod go-a &lt;HiddenServiceDir&gt;</li>
</ol>
</div>
</li>
<li><a id="org8eb9d7e"></a>nginx<br />
<div class="outline-text-5" id="text-60-1-16-2">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #92a65e; font-weight: bold;">server</span> {
        listen unix:/var/run/tor-my-website.sock;
        server_name &lt;your-onion-address&gt;.onion;
        access_log /var/log/nginx/my-website.log;
        index index.html;
        root /path/to/htdocs;
}

</pre>
</div>
</div>
</li>

<li><a id="orge0ac7c3"></a>reverse proxy with HTTPS<br />
<div class="outline-text-5" id="text-60-1-16-3">
<p>
<a href="https://tinyproxy.github.io/">https://tinyproxy.github.io/</a>
</p>
<ul class="org-ul">
<li>dont allow HTTPS for reverse</li>
</ul>

<p>
apache option ProxyPassReverse
</p>

<p>
nginx
</p>
<ul class="org-ul">
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-with-ssl-as-a-reverse-proxy-for-jenkins">https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-with-ssl-as-a-reverse-proxy-for-jenkins</a></li>
<li>security <a href="https://www.cyberciti.biz/tips/linux-unix-bsd-nginx-webserver-security.html">https://www.cyberciti.biz/tips/linux-unix-bsd-nginx-webserver-security.html</a></li>
</ul>


<p>
net-proxy/mitmproxy
</p>

<p>
<a href="https://packages.gentoo.org/packages/net-proxy/mitmproxy">https://packages.gentoo.org/packages/net-proxy/mitmproxy</a>
</p>
</div>
</li>
<li><a id="org4e2c78d"></a>generate address<br />
<div class="outline-text-5" id="text-60-1-16-4">
<p>
var/lib/tor/hidden<sub>service</sub>/ -
</p>
<ul class="org-ul">
<li>hostname — your onion address, share it with your friends.</li>
<li>private<sub>key</sub> — your private key, don’t share it with anyone.</li>
</ul>
<p>
<a href="https://medium.com/@yashschandra/practical-things-how-to-generate-pseudorandom-onion-addresses-41153a1a753a">https://medium.com/@yashschandra/practical-things-how-to-generate-pseudorandom-onion-addresses-41153a1a753a</a>
</p>
</div>
</li>
<li><a id="org5242225"></a>links<br />
<div class="outline-text-5" id="text-60-1-16-5">
<p>
<a href="https://community.torproject.org/onion-services/setup/">https://community.torproject.org/onion-services/setup/</a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org797c514" class="outline-4">
<h4 id="org797c514"><span class="section-number-4">60.1.17.</span> email over tor</h4>
<div class="outline-text-4" id="text-60-1-17">
<p>
<a href="https://github.com/ehloonion/onionmx">https://github.com/ehloonion/onionmx</a>
<a href="https://community.torproject.org/onion-services/talk/">https://community.torproject.org/onion-services/talk/</a>
</p>
</div>
</div>
<div id="outline-container-orgc48f152" class="outline-4">
<h4 id="orgc48f152"><span class="section-number-4">60.1.18.</span> countries</h4>
<div class="outline-text-4" id="text-60-1-18">
<p>
Russia military aliance: Armenia, Belarus, Kazakhstan, Kyrgyzstan, Russia, and Tajikistan.
</p>
<ul class="org-ul">
<li>Russia - {ru}</li>
<li>Armenia - {am}</li>
<li>Belarus - {by}</li>
<li>Kazakhstan - {kz}</li>
<li>Kyrgyzstan - {kg}</li>
<li>Tajikistan - {tj}</li>
</ul>

<p>
The Five Eyes – which groups Britain, the United States, Canada, Australia and New Zealand
</p>
<ul class="org-ul">
<li>United States - {us} and {um}</li>
<li>Canada - {ca}</li>
<li>United Kingdom - {gb} and {uk}</li>
<li>Australia - {au}</li>
<li>New Zealand - {nz}</li>
</ul>

<p>
torrc - Country codes are case-insensitive, {??} - country can’t be identified
</p>
<ul class="org-ul">
<li>ExcludeNodes - nodes to avoid when building a circuit</li>
<li>ExcludeExitNodes -</li>
<li>NodeFamily - never use any two of them in the same circuit - can be used multiple times</li>
<li>PathsNeededToBuildCircuits - [0.25 and 0.95], default 0.6 too low = less anonymous, too high = prevent bootstrapping</li>
<li>GeoIPExcludeUnknown 0/1</li>
<li>StrictNodes 0/1 - Tor will treat solely the <b>ExcludeNodes</b> option as a requirement to follow for all the
circuits you generate, even if doing so will break functionality for you.</li>
</ul>

<p>
links
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/ISO_3166-1">https://en.wikipedia.org/wiki/ISO_3166-1</a></li>
</ul>
</div>
</div>
<div id="outline-container-org5659b1e" class="outline-4">
<h4 id="org5659b1e"><span class="section-number-4">60.1.19.</span> snowflake</h4>
<div class="outline-text-4" id="text-60-1-19">
<pre class="example">
UseBridges 1
ClientTransportPlugin snowflake exec /opt/snowflake/client/client
Bridge snowflake 192.0.2.3:80 2B280B23E1107BB62ABFC40DDCC8824814F80A72 fingerprint=2B280B23E1107BB62ABFC40DDCC8824814F80A72 url=https://snowflake-broker.azureedge.net/ front=ajax.aspnetcdn.com ice=stun:stun.voip.blackberry.com:3478,stun:stun.altar.com.pl:3478,stun:stun.antisip.com:3478,stun:stun.bluesip.net:3478,stun:stun.dus.net:3478,stun:stun.epygi.com:3478,stun:stun.sonetel.com:3478,stun:stun.sonetel.net:3478,stun:stun.stunprotocol.org:3478,stun:stun.uls.co.za:3478,stun:stun.voipgate.com:3478,stun:stun.voys.nl:3478
</pre>


<p>
Or
</p>
<pre class="example">
UseBridges 1
ClientTransportPlugin snowflake exec /usr/local/bin/snowflake-client -log /var/log/tor/snowflake.log -url https://snowflake-broker.torproject.net.global.prod.fastly.net/ -front foursquare.com -ice stun:stun.l.google.com:19302,stun:stun.antisip.com:3478,stun:stun.bluesip.net:3478,stun:stun.dus.net:3478,stun:stun.epygi.com:3478,stun:stun.sonetel.com:3478,stun:stun.uls.co.za:3478,stun:stun.voipgate.com:3478,stun:stun.voys.nl:3478 -log /var/log/tor/snowflake-client.log
Bridge snowflake 192.0.2.3:80 2B280B23E1107BB62ABFC40DDCC8824814F80A72
Bridge snowflake 192.0.2.4:80 8838024498816A039FCBBAB14E6F40A0843051FA
</pre>
</div>
</div>

<div id="outline-container-org6a8334e" class="outline-4">
<h4 id="org6a8334e"><span class="section-number-4">60.1.20.</span> obfs4 - lyrebird - Pluggable Transport</h4>
<div class="outline-text-4" id="text-60-1-20">
<p>
Philipp Winter's ScrambleSuit - Python - <a href="https://github.com/NullHypothesis/scramblesuit">https://github.com/NullHypothesis/scramblesuit</a>
</p>
<ul class="org-ul">
<li>Protection against active probing attacks by requiring a shared secret between the client and the
server. This secret is communicated out-of-band via Tor's BridgeDB.</li>
<li>Rudimentary defence against traffic analysis attacks by altering flow features.</li>
<li>payload is computationally indistinguishable from randomness</li>
</ul>

<p>
Lyrebird - Go - GPLv3 - <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/lyrebird">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/lyrebird</a>
</p>
<ul class="org-ul">
<li>The handshake always does a full key exchange (no such thing as a Session Ticket Handshake).</li>
<li>The link layer encryption uses NaCl secret boxes (Poly1305/XSalsa20).</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #cae682;">VERSION_NUMBER</span>=1.19.10
wget https://golang.org/dl/go$<span style="color: #cae682;">VERSION_NUMBER</span>.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go$<span style="color: #cae682;">VERSION_NUMBER</span>.linux-amd64.tar.gz
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"export PATH=$PATH:/usr/local/go/bin"</span> &gt;&gt; ~/.profile
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"export GOPATH=~/.go"</span> &gt;&gt; ~/.profile
<span style="color: #e5786d;">source</span> ~/.profile
go version

wget https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/lyrebird/-/archive/lyrebird-0.1.0/lyrebird-lyrebird-0.1.0.tar.gz
apt install golang


tar xpf  lyrebird-lyrebird-0.1.0.tar.gz --xattrs-include=<span style="color: #95e454;">' *.*'</span> --numeric-owner
go version
<span style="color: #e5786d;">cd</span> lyrebird-lyrebird-0.1.0
go list -m -u all
go build ./cmd/lyrebird
cp lyrebird /usr/local/bin/
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd58204f" class="outline-4">
<h4 id="orgd58204f"><span class="section-number-4">60.1.21.</span> webtunnel - mimic encrypted web traffic (HTTPS)</h4>
<div class="outline-text-4" id="text-60-1-21">
<ul class="org-ul">
<li><a href="https://blog.torproject.org/introducing-webtunnel-evading-censorship-by-hiding-in-plain-sight/">https://blog.torproject.org/introducing-webtunnel-evading-censorship-by-hiding-in-plain-sight/</a></li>
<li><a href="https://metrics.torproject.org/rs.html#search/transport:webtunnel?fields=transports">https://metrics.torproject.org/rs.html#search/transport:webtunnel?fields=transports</a></li>
</ul>
<p>
src
</p>
<ul class="org-ul">
<li><a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/webtunnel">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/webtunnel</a></li>
<li>?? <a href="https://github.com/my-devices/sdk/tree/main/WebTunnel">https://github.com/my-devices/sdk/tree/main/WebTunnel</a></li>
<li>guide install and configure <a href="https://community.torproject.org/fa/relay/setup/webtunnel/source/">https://community.torproject.org/fa/relay/setup/webtunnel/source/</a></li>
</ul>

<p>
steps:
</p>
<ol class="org-ol">
<li>sudo apt install golang</li>
<li>git clone <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/webtunnel">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/webtunnel</a></li>

<li>cd webtunnel/main/server</li>
<li>go build</li>
<li>sudo cp server /usr/local/bin/webtunnel-server</li>
<li>sudo cp client /usr/local/bin/webtunnel-client</li>
</ol>

<p>
Obfs4 vs Webtunnel
</p>
<ul class="org-ul">
<li>Obfs4 traffic, being neither a match for any known allowed protocol nor a text protocol, would be rejected. In
contrast, WebTunnel traffic resembling HTTPS traffic, a permitted protocol, will pass.</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgddd17ed"></a>client config<br />
<div class="outline-text-5" id="text-60-1-21-1">
<div class="org-src-container">
<pre class="src src-text">UseBridges 1
ClientTransportPlugin webtunnel exec /usr/bin/webtunnel-client
Bridge webtunnel &lt;IP&gt;:&lt;PORT&gt; &lt;FINGERPRINT&gt; url=&lt;URL&gt; ver=0.0.1
</pre>
</div>
</div>
</li>

<li><a id="orgb509d9a"></a>server config<br />
<div class="outline-text-5" id="text-60-1-21-2">
<div class="org-src-container">
<pre class="src src-text">BridgeRelay 1
ORPort 127.0.0.1:auto
AssumeReachable 1
ServerTransportPlugin webtunnel exec /usr/local/bin/webtunnel
ServerTransportListenAddr webtunnel 127.0.0.1:15000
ServerTransportOptions webtunnel url=https://yourdomain/path
ExtORPort auto
&#1575;&#1591;&#1604;&#1575;&#1593;&#1575;&#1578; &#1605;&#1582;&#1575;&#1591;&#1576; <a href="mailto:address%40email.com">&lt;address@email.com&gt;</a>
Nickname WebTunnelTest
SocksPort 0
</pre>
</div>
<pre class="example">
sudo -u debian-tor tor -f /etc/tor/torrc # to check config
systemctl enable --now tor.service
</pre>
</div>
</li>
</ol>
</div>

<div id="outline-container-org937dcfb" class="outline-4">
<h4 id="org937dcfb"><span class="section-number-4">60.1.22.</span> webrtc proxies</h4>
<div class="outline-text-4" id="text-60-1-22">
<p>
<a href="https://github.com/jsmouret/grpc-over-webrtc">https://github.com/jsmouret/grpc-over-webrtc</a>
<a href="https://github.com/duality-solutions/web-bridge">https://github.com/duality-solutions/web-bridge</a>
<a href="https://github.com/rtctunnel/rtctunnel">https://github.com/rtctunnel/rtctunnel</a>
<a href="https://github.com/keroserene/snowflake">https://github.com/keroserene/snowflake</a>
<a href="https://github.com/decentraland/webrtc-broker">https://github.com/decentraland/webrtc-broker</a>
<a href="https://github.com/ailabstw/webrtc-socket-proxy">https://github.com/ailabstw/webrtc-socket-proxy</a>
<a href="https://github.com/muka/peerjs-go">https://github.com/muka/peerjs-go</a>
</p>

<p>
<a href="https://github.com/libp2p/go-libp2p-http">https://github.com/libp2p/go-libp2p-http</a>
</p>
</div>
</div>
<div id="outline-container-org6009c1a" class="outline-4">
<h4 id="org6009c1a"><span class="section-number-4">60.1.23.</span> webrtc-socket-proxy - working</h4>
<div class="outline-text-4" id="text-60-1-23">
<p>
<a href="https://github.com/centrifugal/centrifugom">https://github.com/centrifugal/centrifugom</a>
<a href="https://github.com/ailabstw/webrtc-socket-proxy">https://github.com/ailabstw/webrtc-socket-proxy</a>
</p>

<p>
install on remote:
</p>
<div class="org-src-container">
<pre class="src src-text">wget https://go.dev/dl/go1.22.1.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin
go version # print
git clone --depth=1 https://github.com/rtctunnel/rtctunnel
cd rtctunnel/
go build
./rtctunnel init
./rtctunnel info

</pre>
</div>
</div>
</div>
<div id="outline-container-orgf19da6a" class="outline-4">
<h4 id="orgf19da6a"><span class="section-number-4">60.1.24.</span> Snowflake - Pluggable Transport using WebRTC</h4>
<div class="outline-text-4" id="text-60-1-24">
<ul class="org-ul">
<li><a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/Technical%20Overview">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/Technical%20Overview</a></li>
<li><a href="https://github.com/keroserene/snowflake">https://github.com/keroserene/snowflake</a></li>
<li><a href="https://snowflake.torproject.org/">https://snowflake.torproject.org/</a></li>
<li><a href="https://community.torproject.org/relay/setup/snowflake/standalone/">https://community.torproject.org/relay/setup/snowflake/standalone/</a></li>
<li><a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake</a></li>
<li><a href="https://gpo.zugaina.org/net-proxy/snowflake">https://gpo.zugaina.org/net-proxy/snowflake</a></li>
<li>count per country <a href="https://snowflake-broker.torproject.net/metrics">https://snowflake-broker.torproject.net/metrics</a></li>
<li>install guide <a href="https://gitlab.torproject.org/tpo/anti-censorship/team/-/wikis/Survival-Guides/Snowflake-Broker-Installation-Guide">https://gitlab.torproject.org/tpo/anti-censorship/team/-/wikis/Survival-Guides/Snowflake-Broker-Installation-Guide</a></li>
<li>wiki <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/home">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/home</a></li>
<li>run from sources ClientTransportPlugin snowflake exec <i>usr/bin/or-wherever-it-gets-installed/snowflake-client -url &#x2026;.etchttps://community.torproject.org/relay/setup/snowflake/standalone/source</i></li>
<li><a href="https://en.wikipedia.org/wiki/Domain_fronting">https://en.wikipedia.org/wiki/Domain_fronting</a></li>
<li>technical overview <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/Technical%20Overview">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/Technical%20Overview</a></li>
<li>intergration with tor browser <a href="https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/home#IntegrationwithTorBrowser">https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake/-/wikis/home#IntegrationwithTorBrowser</a></li>
<li>broker installation <a href="https://gitlab.torproject.org/tpo/anti-censorship/team/-/wikis/Survival-Guides/Snowflake-Broker-Installation-Guide">https://gitlab.torproject.org/tpo/anti-censorship/team/-/wikis/Survival-Guides/Snowflake-Broker-Installation-Guide</a></li>
<li>WebRTC fingerprintability</li>
</ul>
</div>
</div>
<div id="outline-container-orgd0a67d8" class="outline-4">
<h4 id="orgd0a67d8"><span class="section-number-4">60.1.25.</span> theory</h4>
<div class="outline-text-4" id="text-60-1-25">
<ul class="org-ul">
<li>snowflake client -</li>
<li>snowflake proxy - WebRTC proxy.It conveys data between snowflake clients and some destination — for Tor,
this would be a Tor Relay
<ul class="org-ul">
<li>Communication to the Broker is over HTTPS / Domain Fronting.</li>
<li>WebRTC serves as the transport crossing the filter boundary</li>
<li>communication from the proxy to the destination is currently via <b>websocket</b>. - server</li>
</ul></li>
</ul>

<p>
In Snowflake, the client connects to the proxy using WebRTC, and the proxy connects to the server (this
 program) using WebSocket.
</p>
</div>
</div>

<div id="outline-container-org01c8c7a" class="outline-4">
<h4 id="org01c8c7a"><span class="section-number-4">60.1.26.</span> get bridges by email</h4>
<div class="outline-text-4" id="text-60-1-26">
<p>
I send "get bridges" to bridges@torproject.org.
</p>
<ul class="org-ul">
<li>get transport [TYPE]   Request a Pluggable Transport by TYPE.</li>
<li>get help               Displays this message.</li>
<li>get key                Get a copy of BridgeDB's public GnuPG key.</li>
<li>get ipv6               Request IPv6 bridges.</li>
</ul>
</div>
</div>

<div id="outline-container-orgba7dd14" class="outline-4">
<h4 id="orgba7dd14"><span class="section-number-4">60.1.27.</span> links</h4>
<div class="outline-text-4" id="text-60-1-27">
<ul class="org-ul">
<li><a href="https://github.com/torproject/tor/blob/main/src/config/torrc.sample.in">https://github.com/torproject/tor/blob/main/src/config/torrc.sample.in</a></li>
<li>The Internet censorship bibliography. <a href="https://censorbib.nymity.ch/">https://censorbib.nymity.ch/</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgb182a33" class="outline-4">
<h4 id="orgb182a33"><span class="section-number-4">60.1.28.</span> installation Debian</h4>
<div class="outline-text-4" id="text-60-1-28">
<ul class="org-ul">
<li>apt install golang</li>
<li>apt install git</li>
<li>git clone &#x2013;depth=1 <a href="https://git.torproject.org/pluggable-transports/snowflake.git">https://git.torproject.org/pluggable-transports/snowflake.git</a></li>
<li>git clone &#x2013;depth=1 <a href="https://github.com/keroserene/snowflake.git">https://github.com/keroserene/snowflake.git</a></li>
<li>cd snowflake/proxy</li>
<li>go build</li>
</ul>
</div>
</div>
<div id="outline-container-org29b3ccb" class="outline-4">
<h4 id="org29b3ccb"><span class="section-number-4">60.1.29.</span> install gentoo</h4>
<div class="outline-text-4" id="text-60-1-29">
<ul class="org-ul">
<li><a href="https://gitweb.gentoo.org/repo/proj/guru.git">https://gitweb.gentoo.org/repo/proj/guru.git</a></li>
<li><a href="https://gitweb.gentoo.org/repo/proj/guru.git/tree/net-proxy/snowflake">https://gitweb.gentoo.org/repo/proj/guru.git/tree/net-proxy/snowflake</a></li>
<li>eselect repository enable guru</li>
</ul>
</div>
</div>
<div id="outline-container-org5d56bf7" class="outline-4">
<h4 id="org5d56bf7"><span class="section-number-4">60.1.30.</span> client configuration examples</h4>
<div class="outline-text-4" id="text-60-1-30">
<div class="org-src-container">
<pre class="src src-text">ClientTransportPlugin snowflake exec /usr/bin/or-wherever-it-gets-installed/snowflake-client -url ....etc


On newer versions, after installing tor, install the snowflake-client
- sudo apt install snowflake-client


UseBridges 1, ClientTransportPlugin snowflake exec /usr/bin/snowflake-client, as well as Bridge snowflake 0.0.3.0:1 2B280B23E1107BB62ABFC40DDCC8824814F80A72 to torrc.
sudo service tor restart



UseBridges 1

ClientTransportPlugin snowflake exec /opt/snowflake/client/client

Bridge snowflake 192.0.2.3:1 url=https://snowflake-broker.torproject.net.global.prod.fastly.net/ front=cdn.sstatic.net ice=stun:stun.voip.blackberry.com:3478,stun:stun.altar.com.pl:3478,stun:stun.antisip.com:3478,stun:stun.bluesip.net:3478,stun:stun.dus.net:3478,stun:stun.epygi.com:3478,stun:stun.sonetel.com:3478,stun:stun.sonetel.net:3478,stun:stun.stunprotocol.org:3478,stun:stun.uls.co.za:3478,stun:stun.voipgate.com:3478,stun:stun.voys.nl:3478



UseBridges 1

ClientTransportPlugin snowflake exec /usr/local/bin/snowflake-client -log /var/log/tor/snowflake.log -url https://snowflake-broker.torproject.net.global.prod.fastly.net/ -front foursquare.com -ice stun:stun.l.google.com:19302,stun:stun.antisip.com:3478,stun:stun.bluesip.net:3478,stun:stun.dus.net:3478,stun:stun.epygi.com:3478,stun:stun.sonetel.com:3478,stun:stun.uls.co.za:3478,stun:stun.voipgate.com:3478,stun:stun.voys.nl:3478 -log /var/log/tor/snowflake-client.log

Bridge snowflake 192.0.2.3:80 2B280B23E1107BB62ABFC40DDCC8824814F80A72
Bridge snowflake 192.0.2.4:80 8838024498816A039FCBBAB14E6F40A0843051FA

</pre>
</div>
</div>
</div>
<div id="outline-container-org4837710" class="outline-4">
<h4 id="org4837710"><span class="section-number-4">60.1.31.</span> ssh hidden service configuration example</h4>
<div class="outline-text-4" id="text-60-1-31">
<pre class="example">
apt install cron
systemctl enable cron
systemctl start cron
crontab -e
0 0 * * * systemctl restart tor
systemctl restart cron
</pre>


<div class="org-src-container">
<pre class="src src-conf" id="orgea39425">RunAsDaemon 1

ShutdownWaitLength 5 seconds

HiddenServiceDir /var/lib/tor/hidden_service2/
HiddenServicePort 443 127.0.0.1:22

Nickname none

RelayBandwidthRate 1100 KB  <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Throttle traffic to 100KB/s (800Kbps)</span>
RelayBandwidthBurst 5200 KB <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">But allow bursts up to 200KB/s (1600Kbps)</span>

ContactInfo Random no@none.com

Log notice file /var/log/tor/tor_notices.log
Log warn file /var/log/tor/tor_warn.log
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Log debug file /var/log/tor_debug.log</span>

DNSPort localhost:53

UseBridges 1

ClientTransportPlugin snowflake exec /usr/local/bin/client -log /var/log/tor/snowflake.log \
-url https://snowflake-broker.torproject.net.global.prod.fastly.net/ \
-front cdn.sstatic.net \
-ice stun:stun.voip.blackberry.com:3478,stun:stun.altar.com.pl:3478,stun:stun.antisip.com:3478,stun:stun.bluesip.net:3478,stun:stun\
.dus.net:3478,stun:stun.epygi.com:3478,stun:stun.sonetel.com:3478,stun:stun.sonetel.net:3478,stun:stun.stunprotocol.org:3478,stun:s\
tun.uls.co.za:3478,stun:stun.voipgate.com:3478,stun:stun.voys.nl:3478

<span style="color: #cae682;">Bridge snowflake 192.0.2.3:80 2B280B23E1107BB62ABFC40DDCC8824814F80A72 fingerprint</span>=2B280B23E1107BB62ABFC40DDCC8824814F80A72 url=https://snowflake-broker.azureedge.net/ front=ajax.aspnetcdn.com ice=stun:stun.voip.blackberry.com:3478,stun:stun.altar.com.pl:3478,stun:stun.antisip.com:3478,stun:stun.bluesip.net:3478,stun:stun.dus.net:3478,stun:stun.epygi.com:3478,stun:stun.sonetel.com:3478,stun:stun.sonetel.net:3478,stun:stun.stunprotocol.org:3478,stun:stun.uls.co.za:3478,stun:stun.voipgate.com:3478,stun:stun.voys.nl:3478
</pre>
</div>
</div>
</div>
<div id="outline-container-org994cef7" class="outline-4">
<h4 id="org994cef7"><span class="section-number-4">60.1.32.</span> bad sites</h4>
<div class="outline-text-4" id="text-60-1-32">
<p>
мега или кракен.
</p>
</div>
</div>
</div>
<div id="outline-container-orga8112d0" class="outline-3">
<h3 id="orga8112d0"><span class="section-number-3">60.2.</span> tunnel techniques</h3>
<div class="outline-text-3" id="text-60-2">
<ul class="org-ul">
<li><a href="https://packages.gentoo.org/packages/net-misc/stunnel">https://packages.gentoo.org/packages/net-misc/stunnel</a></li>
</ul>

<p>
debian server:
</p>
<ul class="org-ul">
<li>apt install stunnel</li>
<li>openssl req -new -x509 -days 99999 -nodes -out stunnel.pem -keyout stunnel.pem</li>
<li>mv stunnel.pem <i>etc/stunnel</i></li>
<li>cp /usr/share/doc/stunnel4/examples/stunnel.conf-sample /etc/stunnel/stunnel.conf</li>
<li>mkdir /var/run/stunnel4</li>
<li>chown stunnel4:stunnel4 /var/run/stunnel4</li>
<li>stunnel # to test</li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">apt install stunnel <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">stunnel4</span>
openssl req -new -x509 -days 99999 -nodes -out stunnel.pem -keyout stunnel.pem <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Enter</span>
cp /usr/share/doc/stunnel4/examples/stunnel.conf-sample /etc/stunnel/stunnel.conf
mkdir -p /etc/tmpfiles.d <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">already exist</span>
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"d /var/run/stunnel4 0755 stunnel4 stunnel4 -"</span> &gt; /etc/tmpfiles.d/stunnel4.conf
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">chown stunnel4:stunnel4 /var/run/stunnel4 # required?</span>
</pre>
</div>

<p>
client:
</p>
<ul class="org-ul">
<li>emerge &#x2013;ask stunnel</li>
<li>stunnel # to test</li>
<li>sudo -u ssh ssh -D 1082 -C -i <i>home/ssh</i>.ssh/id<sub>rsa</sub> -o 'VerifyHostKeyDNS no' -o 'CheckHostIP no' -p 2443 root@127.0.0.1</li>
</ul>
</div>
<div id="outline-container-orgff24d71" class="outline-4">
<h4 id="orgff24d71"><span class="section-number-4">60.2.1.</span> server config</h4>
<div class="outline-text-4" id="text-60-2-1">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #cae682;">setuid</span> = stunnel4
<span style="color: #cae682;">setgid</span> = stunnel4
<span style="color: #cae682;">foreground</span> = no
<span style="color: #cae682;">; output</span> = /tmp/stunnel.log
<span style="color: #cae682;">options</span> = SINGLE_ECDH_USE
<span style="color: #cae682;">options</span> = SINGLE_DH_USE
<span style="color: #cae682;">client</span>=no
<span style="color: #cae682;">cert</span> = /etc/stunnel/stunnel.pem
<span style="color: #cae682;">sslVersion</span> = TLSv1.3
<span style="color: #cae682;">options</span> = NO_SSLv2
<span style="color: #cae682;">options</span> = NO_SSLv3
<span style="color: #cae682;">pid</span> = /var/run/stunnel4/stunnel.pid
<span style="color: #cae682;">socket</span> = l:TCP_NODELAY=1
<span style="color: #cae682;">socket</span> = r:TCP_NODELAY=1
[<span style="color: #92a65e; font-weight: bold;">sshd</span>]
<span style="color: #cae682;">accept</span> = 0.0.0.0:62010 <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">21212</span>
<span style="color: #cae682;">connect</span> = 127.0.0.1:22
<span style="color: #cae682;">TIMEOUTclose</span> = 0
</pre>
</div>
</div>
</div>
<div id="outline-container-org4dde5f9" class="outline-4">
<h4 id="org4dde5f9"><span class="section-number-4">60.2.2.</span> client config</h4>
<div class="outline-text-4" id="text-60-2-2">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #cae682;">setuid</span> = stunnel
<span style="color: #cae682;">setgid</span> = stunnel
<span style="color: #cae682;">pid</span> = /run/stunnel/stunnel.pid
<span style="color: #cae682;">socket</span> = l:TCP_NODELAY=1
<span style="color: #cae682;">socket</span> = r:TCP_NODELAY=1
<span style="color: #cae682;">client</span> = yes

<span style="color: #cae682;">output</span>  = /tmp/stunnel.log
<span style="color: #cae682;">cert</span>    = /etc/stunnel/stunnel.pem
<span style="color: #cae682;">key</span>     = /etc/stunnel/stunnel.pem
<span style="color: #cae682;">pid</span>     = /var/run/stunnel/stunnel.pid
<span style="color: #cae682;">sslVersion</span> = TLSv1.3
<span style="color: #cae682;">options</span> = NO_SSLv2
<span style="color: #cae682;">options</span> = NO_SSLv3

[<span style="color: #92a65e; font-weight: bold;">ssh</span>]
<span style="color: #cae682;">accept</span>=127.0.0.1:2443
<span style="color: #cae682;">connect</span>=217.196.104.210:21212

</pre>
</div>
</div>
</div>
<div id="outline-container-orgaaa85e0" class="outline-4">
<h4 id="orgaaa85e0"><span class="section-number-4">60.2.3.</span> systemd</h4>
<div class="outline-text-4" id="text-60-2-3">
<pre class="example">
systemclt restart stunnel
systemclt status stunnel
systemclt enable stunnel
</pre>


<p>
/etc/systemd/system/stunnel.service
</p>
<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #92a65e; font-weight: bold;">Unit</span>]
<span style="color: #cae682;">Description</span>=SSL tunnel for network daemons
<span style="color: #cae682;">Documentation</span>=man:stunnel https://www.stunnel.org/docs.html
<span style="color: #cae682;">DefaultDependencies</span>=no
<span style="color: #cae682;">After</span>=network.target
<span style="color: #cae682;">After</span>=syslog.target

[<span style="color: #92a65e; font-weight: bold;">Install</span>]
<span style="color: #cae682;">WantedBy</span>=multi-user.target
<span style="color: #cae682;">Alias</span>=stunnel.target

[<span style="color: #92a65e; font-weight: bold;">Service</span>]
<span style="color: #cae682;">Type</span>=forking
<span style="color: #cae682;">EnvironmentFile</span>=-/etc/sysconfig/stunnel.conf
<span style="color: #cae682;">ExecStart</span>=/usr/bin/stunnel /etc/stunnel/stunnel.conf
<span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">LimitNOFILE=infinity            &lt;-- uncomment to increase maximum number of client connections</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga837bfc" class="outline-4">
<h4 id="orga837bfc"><span class="section-number-4">60.2.4.</span> block echo</h4>
<div class="outline-text-4" id="text-60-2-4">
<p>
emacs /etc/sysctl.conf
</p>

<div class="org-src-container">
<pre class="src src-bash">cat &lt;&lt;<span style="color: #95e454;">'EOF'</span> &gt; /etc/sysctl.conf
<span style="color: #ffff00; font-weight: bold;">net.ipv4.icmp_echo_ignore_all=1</span>
<span style="color: #ffff00; font-weight: bold;">net.ipv4.conf.all.accept_redirects = 0</span>
<span style="color: #ffff00; font-weight: bold;">net.ipv6.conf.all.accept_redirects = 0</span>
<span style="color: #ffff00; font-weight: bold;">net.ipv4.conf.all.accept_source_route = 0</span>
<span style="color: #ffff00; font-weight: bold;">net.ipv6.conf.all.accept_source_route = 0</span>
<span style="color: #ffff00; font-weight: bold;">EOF</span>
sysctl -f /etc/sysctl.conf
</pre>
</div>
</div>
</div>

<div id="outline-container-org351f6ae" class="outline-4">
<h4 id="org351f6ae"><span class="section-number-4">60.2.5.</span> nftables</h4>
<div class="outline-text-4" id="text-60-2-5">
<pre class="example">
nft -f /etc/nftables.conf
</pre>



<div class="org-src-container">
<pre class="src src-conf"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/usr/sbin/nft -f</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Flush the ruleset</span>
flush ruleset

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Define the table and chain</span>
<span style="color: #92a65e; font-weight: bold;">table inet filter</span> {
    <span style="color: #92a65e; font-weight: bold;">chain input</span> {
        type filter hook input priority 0;

        iif lo accept;
        <span style="color: #cae682;">iif !</span>= lo ip daddr 127.0.0.1/8 counter drop comment <span style="color: #95e454;">""</span>
        <span style="color: #cae682;">iif !</span>= lo ip6 daddr ::1/8 counter drop comment <span style="color: #95e454;">""</span>

        <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Drop invalid packets</span>
        ct state invalid drop

        <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Accept established and related connections</span>
        ct state established,related accept

        <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Allow incoming connections to TCP port 666</span>
        tcp dport 6010 accept
        tcp dport 22 iif lo accept

        ip saddr 127.0.0.1 ip daddr 127.0.0.1 accept
        ip6 saddr ::1 ip6 daddr ::1 accept

        <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Drop all other incoming traffic</span>
        drop
    }

    <span style="color: #92a65e; font-weight: bold;">chain forward</span> {
        type filter hook forward priority 0;
        drop
    }

    <span style="color: #92a65e; font-weight: bold;">chain output</span> {
        type filter hook output priority 0;
        accept
    }
}
</pre>
</div>


<div class="org-src-container">
<pre class="src src-bash">cat &lt;&lt;<span style="color: #95e454;">'EOF'</span> &gt; /etc/systemd/system/nftables.service
<span style="color: #ffff00; font-weight: bold;">[Unit]</span>
<span style="color: #ffff00; font-weight: bold;">Description=nftables firewall</span>
<span style="color: #ffff00; font-weight: bold;">Before=network.target</span>

<span style="color: #ffff00; font-weight: bold;">[Service]</span>
<span style="color: #ffff00; font-weight: bold;">RemainAfterExit=yes</span>
<span style="color: #ffff00; font-weight: bold;">StandardInput=null</span>
<span style="color: #ffff00; font-weight: bold;">ProtectSystem=full</span>
<span style="color: #ffff00; font-weight: bold;">ProtectHome=true</span>
<span style="color: #ffff00; font-weight: bold;">ExecStart=/sbin/nft -f /etc/sysconfig/nftables.conf</span>
<span style="color: #ffff00; font-weight: bold;">ExecReload=/sbin/nft 'flush ruleset; include "/etc/sysconfig/nftables.conf";'</span>
<span style="color: #ffff00; font-weight: bold;">ExecStop=/sbin/nft flush ruleset</span>
<span style="color: #ffff00; font-weight: bold;">Restart=always</span>

<span style="color: #ffff00; font-weight: bold;">[Install]</span>
<span style="color: #ffff00; font-weight: bold;">WantedBy=multi-user.target</span>
<span style="color: #ffff00; font-weight: bold;">EOF</span>
systemctl daemon-reload
systemctl restart nftables
systemctl status nftables
systemctl enable nftables
</pre>
</div>
</div>
</div>

<div id="outline-container-org72dea22" class="outline-4">
<h4 id="org72dea22"><span class="section-number-4">60.2.6.</span> links</h4>
<div class="outline-text-4" id="text-60-2-6">
<ul class="org-ul">
<li><a href="https://gist.github.com/bwann/82ed679e94972666808d97587d276677">https://gist.github.com/bwann/82ed679e94972666808d97587d276677</a></li>
<li><a href="https://charlesreid1.com/wiki/Stunnel/SSH">https://charlesreid1.com/wiki/Stunnel/SSH</a></li>
<li>stunnel performance with different configurations <a href="https://www.stunnel.org/perf.html">https://www.stunnel.org/perf.html</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc7eaf14" class="outline-3">
<h3 id="orgc7eaf14"><span class="section-number-3">60.3.</span> <span class="todo TODO">TODO</span> i2p</h3>
<div class="outline-text-3" id="text-60-3">
<ul class="org-ul">
<li>i2p doesn't store other people stuff on your hdd</li>
</ul>
</div>
</div>
<div id="outline-container-org62fc337" class="outline-3">
<h3 id="org62fc337"><span class="section-number-3">60.4.</span> <span class="todo TODO">TODO</span> freenet</h3>
<div class="outline-text-3" id="text-60-4">
<ul class="org-ul">
<li>store other people stuff on your hdd</li>
</ul>
</div>
</div>
<div id="outline-container-org04ed872" class="outline-3">
<h3 id="org04ed872"><span class="section-number-3">60.5.</span> <span class="todo TODO">TODO</span> zeronet</h3>
<div class="outline-text-3" id="text-60-5">
<ul class="org-ul">
<li>store other people stuff on your hdd</li>
</ul>
</div>
</div>
<div id="outline-container-orgfe2ae64" class="outline-3">
<h3 id="orgfe2ae64"><span class="section-number-3">60.6.</span> <span class="todo TODO">TODO</span> lokinet</h3>
<div class="outline-text-3" id="text-60-6">
<ul class="org-ul">
<li>lokinet.org</li>
<li>uses the Oxen Service Node network</li>
</ul>
</div>

<div id="outline-container-org2c4979b" class="outline-4">
<h4 id="org2c4979b"><span class="section-number-4">60.6.1.</span> install binary</h4>
<div class="outline-text-4" id="text-60-6-1">
<p>
install debian <a href="https://docs.oxen.io/oxen-docs/products-built-on-oxen/lokinet/guides/installing-on-linux-cli">https://docs.oxen.io/oxen-docs/products-built-on-oxen/lokinet/guides/installing-on-linux-cli</a>
</p>

<p>
<a href="https://github.com/oxen-io/oxen-docs-gitbook/blob/master/products-built-on-oxen/lokinet/guides/installing-on-linux-cli.md">https://github.com/oxen-io/oxen-docs-gitbook/blob/master/products-built-on-oxen/lokinet/guides/installing-on-linux-cli.md</a>
</p>
</div>
</div>
<div id="outline-container-org84b71cb" class="outline-4">
<h4 id="org84b71cb"><span class="section-number-4">60.6.2.</span> links</h4>
<div class="outline-text-4" id="text-60-6-2">
<ul class="org-ul">
<li><a href="https://privsec.dev/posts/qubes/using-lokinet-on-qubes-os/">https://privsec.dev/posts/qubes/using-lokinet-on-qubes-os/</a></li>
<li><a href="https://lokinet.org/">https://lokinet.org/</a></li>
<li><a href="https://github.com/loki-project/loki-network">https://github.com/loki-project/loki-network</a></li>
<li><a href="http://pijdty5otm38tdex6kkh51dkbkegf31dqgryryz3s3tys8wdegxo.loki/">http://pijdty5otm38tdex6kkh51dkbkegf31dqgryryz3s3tys8wdegxo.loki/</a></li>
<li><a href="http://s5swbfcf4joom9tzf8w7ss5fptywwpnnfop3pxcf5ebjnz8ioksy.loki/">http://s5swbfcf4joom9tzf8w7ss5fptywwpnnfop3pxcf5ebjnz8ioksy.loki/</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0d03655" class="outline-3">
<h3 id="org0d03655"><span class="section-number-3">60.7.</span> <span class="todo TODO">TODO</span> <a href="https://yggdrasil-network.github.io/">https://yggdrasil-network.github.io/</a></h3>
</div>
<div id="outline-container-org7c0b720" class="outline-3">
<h3 id="org7c0b720"><span class="section-number-3">60.8.</span> <span class="todo TODO">TODO</span> ipfs</h3>
<div class="outline-text-3" id="text-60-8">
<ul class="org-ul">
<li>store other people stuff on your hdd</li>
</ul>
</div>
</div>

<div id="outline-container-org900083a" class="outline-3">
<h3 id="org900083a"><span class="section-number-3">60.9.</span> <a href="https://urbit.org/">https://urbit.org/</a></h3>
<div class="outline-text-3" id="text-60-9">
<p>
Urbit OS and Urbit ID - MIT licensed
</p>
<ul class="org-ul">
<li>Urbit OS - a program, software stack: a VM, programming language and kernel designed to run software for an
individual.</li>
<li>Urbit ID is an identity and authentication system specifically designed to work with Urbit OS. When you boot
or log in to Urbit OS, you use your Urbit ID. Name (like ~ravmel-ropdyl) that’s a username, network address
and crypto wallet all in one.  built on the Ethereum blockchain ("Azimuth"),</li>
</ul>
</div>
<div id="outline-container-org5000273" class="outline-4">
<h4 id="org5000273"><span class="section-number-4">60.9.1.</span> terms</h4>
<div class="outline-text-4" id="text-60-9-1">
<ul class="org-ul">
<li>urbit -  Urbit OS node - private to you and entirely under your control</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0bdbc15" class="outline-3">
<h3 id="org0bdbc15"><span class="section-number-3">60.10.</span> Rus <a href="https://github.com/number571/go-peer">https://github.com/number571/go-peer</a></h3>
</div>
<div id="outline-container-org813baf3" class="outline-3">
<h3 id="org813baf3"><span class="section-number-3">60.11.</span> decentralazied storage</h3>
<div class="outline-text-3" id="text-60-11">
</div>
<ol class="org-ol">
<li><a id="org7c9ef36"></a>know<br />
<div class="outline-text-5" id="text-60-11-0-1">
<ul class="org-ul">
<li>Git</li>
<li>BitTorrent</li>
<li>Direct Connect</li>
<li>eDonkey</li>
<li>Gnutella</li>
<li>Bitcoin</li>
<li>Perfect Dark</li>
<li>Freenet</li>
<li>Soulseek</li>
<li>GNUnet</li>
<li><a href="https://en.wikipedia.org/wiki/List_of_P2P_protocols">https://en.wikipedia.org/wiki/List_of_P2P_protocols</a></li>
</ul>
</div>
</li>

<li><a id="org3f56858"></a>problems:<br />
<div class="outline-text-5" id="text-60-11-0-2">
<ul class="org-ul">
<li>security</li>
<li>tracking</li>
<li>flood attack</li>
<li>14-18% of all executable programs available for download contained malware</li>
<li>47% of all zero-day malware uses BitTorrent</li>
<li>file search</li>
</ul>
</div>
</li>
<li><a id="org8a15555"></a>Interplanetary File System (IPFS)<br />
<div class="outline-text-5" id="text-60-11-0-3">
<ul class="org-ul">
<li>users - hold a portion of the overall data</li>
<li>if Alice and Bob publish a block of data with the same hash, the peers downloading the content from Alice
will exchange data with the ones downloading it from Bob</li>
<li>IPFS aims to replace WEB using gateways which are accessible with HTTP.</li>
<li>content-based routing instead of address-based</li>
<li>cannot restrict except of encryption</li>
<li>publish to share</li>
<li>Data is stored in chunks of 256 KB, called IPFS objects.</li>
<li>Garbage collection will periodically remove cached IPFS objects. If you want to permanently store a file you
can pin it to your node.</li>
<li></li>
</ul>
</div>
</li>

<li><a id="org9184f05"></a>DHT search<br />
<div class="outline-text-5" id="text-60-11-0-4">
<ul class="org-ul">
<li>BTDigg - in TOR or <a href="https://btdig.com">https://btdig.com</a> btdigggink2pdqzqrik3blmqemsbntpzwxottujilcdjfz56jumzfsyd.onion</li>
<li><a href="https://thepiratebay.org">https://thepiratebay.org</a></li>
<li>Bitmagnet - self-hosted BitTorrent indexer, DHT crawler, content classifier, and torrent search engine</li>
<li>Jackett or Prowlarr</li>
</ul>
</div>
</li>
<li><a id="orgdc5788f"></a>torrents<br />
<div class="outline-text-5" id="text-60-11-0-5">
<ul class="org-ul">
<li><a href="https://anidex.info/">https://anidex.info/</a></li>
<li><a href="https://thepiratebay.org">https://thepiratebay.org</a></li>
<li>rutracker.org</li>
<li><a href="https://www.limetorrents.lol/browse-torrents/Games-Mac/">https://www.limetorrents.lol/browse-torrents/Games-Mac/</a></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgd0ba174" class="outline-3">
<h3 id="orgd0ba174"><span class="section-number-3">60.12.</span> links</h3>
<div class="outline-text-3" id="text-60-12">
<p>
theory <a href="https://defanor.uberspace.net/notes/distributed-systems.xhtml">https://defanor.uberspace.net/notes/distributed-systems.xhtml</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org38ec191" class="outline-2">
<h2 id="org38ec191"><span class="section-number-2">61.</span> search engines</h2>
<div class="outline-text-2" id="text-61">
</div>
<div id="outline-container-orgf885e7c" class="outline-3">
<h3 id="orgf885e7c"><span class="section-number-3">61.1.</span> review</h3>
<div class="outline-text-3" id="text-61-1">
<p>
startpage.com
</p>
<ul class="org-ul">
<li>no javascript not supported</li>
<li>bad no image search without javascript</li>
</ul>

<p>
<a href="https://gibiru.com/">https://gibiru.com/</a>
</p>
<ul class="org-ul">
<li>javascript required</li>
<li>no clear links</li>
</ul>

<p>
qmamu.com
</p>
<ul class="org-ul">
<li>javascript required</li>
<li>no clear links</li>
</ul>

<p>
<a href="https://www.searchencrypt.com/">https://www.searchencrypt.com/</a>
</p>
<ul class="org-ul">
<li>javascript required</li>
<li>no clear links</li>
</ul>

<p>
<a href="https://www.onesearch.com/">https://www.onesearch.com/</a>
</p>
<ul class="org-ul">
<li>blocked</li>
</ul>

<p>
<a href="https://boardreader.com/">https://boardreader.com/</a>
</p>
<ul class="org-ul">
<li>tor blocked</li>
</ul>
</div>
</div>
<div id="outline-container-orge0d4ce2" class="outline-3">
<h3 id="orge0d4ce2"><span class="section-number-3">61.2.</span> duckduckgo</h3>
<div class="outline-text-3" id="text-61-2">
<ul class="org-ul">
<li>ip</li>
<li>dns records xakep.ru</li>
<li>is xakep.ru down # ping</li>
<li>@xakepru # info about tweeter</li>
<li>validate zobnin@gmail.com # validate email</li>
<li>shorten <a href="https://xakep.ru/2017/02/23/bitlocker-hacking/">https://xakep.ru/2017/02/23/bitlocker-hacking/</a> # get short link</li>
<li>expand <a href="https://is.gd/8TIGsL">https://is.gd/8TIGsL</a></li>
<li>qr <a href="https://is.gd/8TIGsL">https://is.gd/8TIGsL</a> # qr-code</li>
<li>password 10 # generate password</li>
<li>random passphrase</li>
<li>base64 encode &lt;текст&gt;</li>
<li>md5 &lt;текст&gt;</li>
<li>sha &lt;текст&gt;</li>
<li>hash &lt;хеш&gt; # detect algorithn</li>
<li>python pyhub # search module in PyPI</li>
<li>jquery .ajaxsuccess # info about method of jQuery</li>
<li>regex <i>(?x: (w+) s (w+) )</i> hacker magazine # check regex</li>
<li>compute Integral Of X<sup>2</sup> Dx Solve X+2&gt;3x # math</li>
<li>python syntax highlighter # open editor</li>
<li>site:linux.org.ru</li>
<li>android security report f:.pdf # search for specific file type</li>
<li>intitle:"iphone 8" # search only in page titles</li>
<li>intitle:"iphone 8" -android # not search</li>
<li>(apple)AND((macos)OR("os x"))</li>
<li></li>
</ul>


<p>
html:
</p>
<ul class="org-ul">
<li>color codes</li>
<li>css colors</li>
<li>html chars</li>
<li>html dollar # get character</li>
<li>file .txt # info about file extension</li>
<li>chmod 755 # decode</li>
<li>uppercase xakep.ru</li>
<li>lowercase XAKEP.RU</li>
<li>calendar</li>
<li>countdown 10m</li>
<li>stopwatch</li>
<li>figlet xakep.ru # create ASCII banner</li>
<li>bang
<ul class="org-ul">
<li>!so Java InterruptedException # search in Stack Overflow (!twitter), на eBay (!ebay), YouTube (!yt),
Facebook (!facebook) and 9000 more</li>
<li>Translation google:
<ul class="org-ul">
<li>!gt-chinese</li>
</ul></li>
<li>languages: !java !python !html !js !php</li>
<li>Gentoo: !emerge !fgentoo !gbugs !gentoopkg !gpackages !gpackages !gpo !gw !gwiki !installgentoo !pfl
<ul class="org-ul">
<li>!gentoo !gentoowiki</li>
</ul></li>
<li>!man</li>
<li>!be - blockchain block explorer</li>
<li></li>
</ul></li>
</ul>



<p>
<a href="https://duckduckgo.com/bang_lite.html">https://duckduckgo.com/bang_lite.html</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org38077d7" class="outline-2">
<h2 id="org38077d7"><span class="section-number-2">62.</span> unicode</h2>
<div class="outline-text-2" id="text-62">
<p>
X11:
</p>
<ul class="org-ul">
<li>Ctrl+Shift+u followed by the Unicode hexadecimal number</li>
</ul>

<p>
emacs: C-x 8 RET
</p>

<p>
codes
</p>
<ul class="org-ul">
<li>wavehand U+1F44B</li>
<li>whitespace U+2000-2003,2007,3000</li>
<li><a href="https://en.wikipedia.org/wiki/Whitespace_character">https://en.wikipedia.org/wiki/Whitespace_character</a></li>
</ul>
</div>
</div>
<div id="outline-container-org6323e3b" class="outline-2">
<h2 id="org6323e3b"><span class="section-number-2">63.</span> questions</h2>
<div class="outline-text-2" id="text-63">
<p>
best place for passwords in linux
</p>
</div>
</div>

<div id="outline-container-org54e70eb" class="outline-2">
<h2 id="org54e70eb"><span class="section-number-2">64.</span> web crawler</h2>
<div class="outline-text-2" id="text-64">
<p>
<a href="https://github.com/jarun/googler/blob/main/googler">https://github.com/jarun/googler/blob/main/googler</a>
<a href="https://packages.gentoo.org/packages/dev-python/beautifulsoup4">https://packages.gentoo.org/packages/dev-python/beautifulsoup4</a>
</p>


<p>
<a href="https://www.geeksforgeeks.org/python-automate-google-search-using-selenium/">https://www.geeksforgeeks.org/python-automate-google-search-using-selenium/</a>
</p>

<p>
WebDriver driver = new FirefoxDriver();
</p>

<p>
driver.manage().window().maximize();
driver.manage().deleteAllCookies();
driver.manage().timeouts().pageLoadTimeout(40, TimeUnit.SECONDS);
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
driver.get("<a href="https://www.google.com/">https://www.google.com/</a>");
</p>
</div>
</div>
<div id="outline-container-org0cc6552" class="outline-2">
<h2 id="org0cc6552"><span class="section-number-2">65.</span> obfs4 standalone</h2>
<div class="outline-text-2" id="text-65">
<p>
required: USE=ncat net-analyzer/nmap
</p>
</div>

<div id="outline-container-org0ef9e08" class="outline-3">
<h3 id="org0ef9e08"><span class="section-number-3">65.1.</span> Server:</h3>
<div class="outline-text-3" id="text-65-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_BROWSER_TOR_DATA_DIR</span>=obfsproxy
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_CLIENT_TRANSPORTS</span>=obfs4
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_EXIT_ON_STDIN_CLOSE</span>=1
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_MANAGED_TRANSPORT_VER</span>=1
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_STATE_LOCATION</span>=obfsproxy
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_SERVER_BINDADDR</span>=obfs4-0.0.0.0:12345
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_ORPORT</span>=127.0.0.1:4433

env <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_MANAGED_TRANSPORT_VER</span>=<span style="color: #95e454;">"1"</span> <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_STATE_LOCATION</span>=<span style="color: #95e454;">"obfs4proxy"</span> <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_SERVER_TRANSPORTS</span>=<span style="color: #95e454;">"obfs4"</span> <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_SERVER_BINDADDR</span>=<span style="color: #95e454;">"obfs4-0.0.0.0:8888"</span> <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_ORPORT</span>=<span style="color: #95e454;">"127.0.0.1:9067"</span> <span style="color: #95e454;">\</span>
obfs4proxy -enableLogging -logLevel DEBUG
</pre>
</div>
<p>
to watch serverlogs :
</p>
<pre class="example">
watch tail obfsproxy/obfs4proxy.log
</pre>


<p>
cert:
</p>
<pre class="example">
cat /var/lib/tor/pt_state/obfs4_bridgeline.txt
</pre>
</div>
</div>

<div id="outline-container-org9af4a16" class="outline-3">
<h3 id="org9af4a16"><span class="section-number-3">65.2.</span> Client:</h3>
<div class="outline-text-3" id="text-65-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_CLIENT_TRANSPORTS</span>=obfs4
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">&lt;proxy_type&gt;://[&lt;user_name&gt;[:&lt;password&gt;][@]&lt;ip&gt;:&lt;port&gt;</span>
<span style="color: #e5786d;">export</span> <span style="color: #cae682;">TOR_PT_PROXY</span>=socks5://127.0.0.1:45357

env <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_MANAGED_TRANSPORT_VER</span>=<span style="color: #95e454;">"1"</span> <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_STATE_LOCATION</span>=<span style="color: #95e454;">"obfsproxy"</span> <span style="color: #95e454;">\</span>
<span style="color: #cae682;">TOR_PT_CLIENT_TRANSPORTS</span>=<span style="color: #95e454;">"obfs4"</span> <span style="color: #95e454;">\</span>
obfs4proxy -enableLogging -logLevel DEBUG

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">to test: (server ip, port from client, cert from server, and TOR_PT_SERVER_BINDADDR</span>
ncat --proxy <span style="color: #95e454;">"127.0.0.1:41143"</span> --proxy-type <span style="color: #95e454;">"socks5"</span> --proxy-auth <span style="color: #95e454;">"cert=W4/bagv6rixxspKRWDnsHb8OrGCTcOc0jOd+YWzdzqkvaSRaNlJDy931roPfopP0bIvgZQ;iat-mode=:0"</span> 127.0.0.1 8888

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">to use:</span>
: ssh -o <span style="color: #95e454;">'ProxyCommand ncat --proxy "127.0.0.1:41143" --proxy-type "socks5" --proxy-auth "cert=W4/bagv6rixxspKRWDnsHb8OrGCTcOc0jOd+YWzdzqkvaSRaNlJDy931roPfopP0bIvgZQ;iat-mode=:0" %h %p'</span> -p 8888 user@127.0.0.1

ssh -vv <span style="color: #95e454;">\</span>
-o <span style="color: #95e454;">'ProxyCommand ncat \</span>
<span style="color: #95e454;"> --proxy "45.87.247.254:8080" \</span>
<span style="color: #95e454;"> --proxy-type "socks5" \</span>
<span style="color: #95e454;"> --proxy-auth "cert=2Wu/eUx7n6SCoyTz7TkjgGx55uY+VXa7SL4DR25+plkT23jG9fG/2P0Ii9H1caBTeOveWw;iat-mode=:0" %h %p'</span> <span style="color: #95e454;">\</span>
-p 9067 root@127.0.0.1
</pre>
</div>

<p>
/usr/bin/obfs4proxy -enableLogging true -logLevelStr INFO
</p>
</div>
</div>

<div id="outline-container-org1cc6818" class="outline-3">
<h3 id="org1cc6818"><span class="section-number-3">65.3.</span> systemd service for server</h3>
<div class="outline-text-3" id="text-65-3">
<p>
/etc/systemd/system/obfsmy.service
</p>
<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #92a65e; font-weight: bold;">Unit</span>]
<span style="color: #cae682;">Description</span>=obfs4proxy Server

[<span style="color: #92a65e; font-weight: bold;">Service</span>]
<span style="color: #cae682;">EnvironmentFile</span>=/var/lib/tor/pt_state/obfs4/obfs4.config
<span style="color: #cae682;">ExecStart</span>=/usr/bin/obfs4proxy -enableLogging true -logLevelStr INFO

[<span style="color: #92a65e; font-weight: bold;">Install</span>]
<span style="color: #cae682;">WantedBy</span>=multi-user.target
</pre>
</div>

<p>
/var/lib/tor/pt<sub>state</sub>/obfs4/obfs4.config
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #cae682;">TOR_PT_MANAGED_TRANSPORT_VER</span>=<span style="color: #95e454;">"1"</span>
<span style="color: #cae682;">TOR_PT_STATE_LOCATION</span>=<span style="color: #95e454;">"/var/lib/tor/pt_state/"</span>
<span style="color: #cae682;">TOR_PT_SERVER_TRANSPORTS</span>=<span style="color: #95e454;">"obfs4"</span>
<span style="color: #cae682;">TOR_PT_SERVER_BINDADDR</span>=<span style="color: #95e454;">"obfs4-0.0.0.0:443"</span>
<span style="color: #cae682;">TOR_PT_ORPORT</span>=<span style="color: #95e454;">"127.0.0.1:9067"</span>
</pre>
</div>

<p>
cert:
</p>
<pre class="example">
cat /var/lib/tor/pt_state/obfs4_bridgeline.txt
</pre>


<p>
log:
</p>
<pre class="example">
watch tail  /var/lib/tor/pt_state/obfs4proxy.log
</pre>


<p>
to test:
</p>
<pre class="example">
ncat -vv --proxy "45.87.247.254:8080" --proxy-type "socks5" --proxy-auth "cert=2Wu/eUx7n6SCoyTz7TkjgGx55uY+VXa7SL4DR25+plkT23jG9fG/2P0Ii9H1caBTeOveWw;iat-mode=:0"  google.com 80
</pre>
</div>
</div>

<div id="outline-container-orgcf903dd" class="outline-3">
<h3 id="orgcf903dd"><span class="section-number-3">65.4.</span> full</h3>
<div class="outline-text-3" id="text-65-4">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">!/usr/bin/</span><span style="color: #8ac6f2; font-weight: bold;">env</span><span style="color: #99968b; font-style: italic;"> bash</span>
<span style="color: #e5786d;">set</span> -u <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">Report Non-Existent Variables</span>
<span style="color: #e5786d;">set</span> -e <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">It terminates the execution when the error occurs. (does not work with piped commands. use Set -eo pipefail)</span>
<span style="color: #e5786d;">set</span> -o pipefail <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">exit execution if one of the commands in the pipe fails.</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">set -x # write to standard error a trace for each  command</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">set -n # do not execute only check syntax</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">------------- installation of lyrebird ----------</span>
<span style="color: #cae682;">VERSION_NUMBER</span>=1.19.10
wget https://golang.org/dl/go${<span style="color: #cae682;">VERSION_NUMBER</span>}.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go${<span style="color: #cae682;">VERSION_NUMBER</span>}.linux-amd64.tar.gz
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"export PATH=$PATH:/usr/local/go/bin"</span> &gt;&gt; ~/.profile
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"export GOPATH=~/.go"</span> &gt;&gt; ~/.profile
<span style="color: #e5786d;">source</span> ~/.profile
go version

<span style="color: #cae682;">LYREBIRD_VERSION</span>=0.1.0
wget https://gitlab.torproject.org/tpo/anti-censorship/pluggable-transports/lyrebird/-/archive/lyrebird-${<span style="color: #cae682;">LYREBIRD_VERSION</span>}/lyrebird-lyrebird-${<span style="color: #cae682;">LYREBIRD_VERSION</span>}.tar.gz
apt install golang


tar xpf  lyrebird-lyrebird-${<span style="color: #cae682;">LYREBIRD_VERSION</span>}.tar.gz --xattrs-include=<span style="color: #95e454;">' *.*'</span> --numeric-owner
go version
<span style="color: #e5786d;">cd</span> lyrebird-lyrebird-${<span style="color: #cae682;">LYREBIRD_VERSION</span>}
go list -m -u all
go build ./cmd/lyrebird
cp lyrebird /usr/local/bin/
<span style="color: #e5786d;">cd</span> ..
rm -rf lyrebird-lyrebird-${<span style="color: #cae682;">LYREBIRD_VERSION</span>}
rm -rf lyrebird-lyrebird-${<span style="color: #cae682;">LYREBIRD_VERSION</span>}.tar.gz
rm -f go${<span style="color: #cae682;">VERSION_NUMBER</span>}.linux-amd64.tar.gz
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">------------------- obfs4 server --------------</span>
sudo adduser <span style="color: #95e454;">\</span>
  --system <span style="color: #95e454;">\</span>
  --home <span style="color: #95e454;">"/var/lib/obfs4proxy-ssh/"</span> <span style="color: #95e454;">\</span>
  --shell <span style="color: #95e454;">"/usr/sbin/nologin"</span> <span style="color: #95e454;">\</span>
  --group <span style="color: #95e454;">\</span>
  --gecos <span style="color: #95e454;">"obfs4proxy for ssh"</span> <span style="color: #95e454;">\</span>
  obfs4-ssh

cat &lt;&lt;<span style="color: #95e454;">'EOF'</span> &gt; /etc/systemd/system/obfsmy.service
<span style="color: #ffff00; font-weight: bold;">[Unit]</span>
<span style="color: #ffff00; font-weight: bold;">Description=obfs4proxy Server</span>

<span style="color: #ffff00; font-weight: bold;">[Service]</span>
<span style="color: #ffff00; font-weight: bold;">User=obfs4-ssh</span>
<span style="color: #ffff00; font-weight: bold;">EnvironmentFile=/var/lib/obfs4proxy-ssh/obfs4.config</span>
<span style="color: #ffff00; font-weight: bold;">ExecStart=/usr/local/bin/lyrebird -enableLogging true -logLevelStr INFO</span>

<span style="color: #ffff00; font-weight: bold;">[Install]</span>
<span style="color: #ffff00; font-weight: bold;">WantedBy=multi-user.target</span>
<span style="color: #ffff00; font-weight: bold;">EOF</span>

cat &lt;&lt;<span style="color: #95e454;">'EOF'</span> &gt; /var/lib/obfs4proxy-ssh/obfs4.config
<span style="color: #ffff00; font-weight: bold;">TOR_PT_MANAGED_TRANSPORT_VER="1"</span>
<span style="color: #ffff00; font-weight: bold;">TOR_PT_STATE_LOCATION="/var/lib/obfs4proxy-ssh/"</span>
<span style="color: #ffff00; font-weight: bold;">TOR_PT_SERVER_TRANSPORTS="obfs4"</span>
<span style="color: #ffff00; font-weight: bold;">TOR_PT_SERVER_BINDADDR="obfs4-0.0.0.0:8080"</span>
<span style="color: #ffff00; font-weight: bold;">TOR_PT_ORPORT="127.0.0.1:22"</span>
<span style="color: #ffff00; font-weight: bold;">EOF</span>

systemctl daemon-reload
systemctl restart obfsmy
cat /var/lib/obfs4proxy-ssh/obfs4_bridgeline.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-org6dfca1d" class="outline-3">
<h3 id="org6dfca1d"><span class="section-number-3">65.5.</span> full client</h3>
<div class="outline-text-3" id="text-65-5">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #cae682; font-weight: bold;">obfs4client</span>() {
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">background process attached to file discriptor 3</span>
    <span style="color: #8ac6f2; font-weight: bold;">exec</span> 3&lt; &lt;( env <span style="color: #95e454;">\</span>
        <span style="color: #cae682;">TOR_PT_MANAGED_TRANSPORT_VER</span>=<span style="color: #95e454;">"1"</span> <span style="color: #95e454;">\</span>
        <span style="color: #cae682;">TOR_PT_STATE_LOCATION</span>=<span style="color: #95e454;">"obfsproxy"</span> <span style="color: #95e454;">\</span>
        <span style="color: #cae682;">TOR_PT_CLIENT_TRANSPORTS</span>=<span style="color: #95e454;">"obfs4"</span> <span style="color: #95e454;">\</span>
        lyrebird -enableLogging -logLevel DEBUG )
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">read first 3 lines from file descriptor 3</span>
    <span style="color: #cae682;">hostport</span>=$(<span style="color: #fa8072;">head -n3 &lt;&amp;3 | grep -o "127.0.0.1:[[:digit:]]*"</span>)
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">certificate from remote obfs4 server</span>
    <span style="color: #cae682;">cert</span>=<span style="color: #95e454;">'LEyKNDLvbQlLwAahcayJQBFkYzPEd6tWdMUBTuEDqaHjxXWPf5/2v63BKkQVEDMp4Wy2aA'</span>
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">attach to remote server obfs4 through local obfs4 client proxy</span>
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">sudo -u ssh killall ssh</span>
    <span style="color: #cae682;">v</span>=<span style="color: #95e454;">"ssh -vv -o 'ProxyCommand ncat --proxy ${hostport} --proxy-type socks5 --proxy-auth \\\"cert=${cert};iat-mode=:0\\\" %h %p' -p 8080 root@10.2.1.3 ;"</span>
    xfce4-terminal --initial-title <span style="color: #95e454;">"remote"</span> -e <span style="color: #95e454;">"bash -c \"${v}\""</span>
    sleep 2
    <span style="color: #8ac6f2; font-weight: bold;">exit</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a6f328" class="outline-3">
<h3 id="org9a6f328"><span class="section-number-3">65.6.</span> links</h3>
<div class="outline-text-3" id="text-65-6">
<ul class="org-ul">
<li><a href="https://www.sparklabs.com/support/kb/article/setting-up-an-obfuscation-server-with-obfsproxy-and-viscosity/">https://www.sparklabs.com/support/kb/article/setting-up-an-obfuscation-server-with-obfsproxy-and-viscosity/</a></li>
<li><a href="https://hamy.io/post/000d/how-to-hide-obfuscate-any-traffic-using-obfs4/">https://hamy.io/post/000d/how-to-hide-obfuscate-any-traffic-using-obfs4/</a></li>
<li><a href="https://hamy.io/post/000e/how-to-hide-obfuscate-ssh-traffic-using-obfs4/">https://hamy.io/post/000e/how-to-hide-obfuscate-ssh-traffic-using-obfs4/</a></li>
<li><a href="https://github.com/torproject/torspec/blob/main/pt-spec.txt">https://github.com/torproject/torspec/blob/main/pt-spec.txt</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org4123160" class="outline-2">
<h2 id="org4123160"><span class="section-number-2">66.</span> VPS configuration</h2>
<div class="outline-text-2" id="text-66">
<p>
client:
</p>
<ul class="org-ul">
<li>TOR SSH see <a href="shell#MissingReference">shell#MissingReference</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #fa8072;">#</span><span style="color: #99968b; font-style: italic;">-*- eval: (outline-minor-mode 1) -*-</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- CONFIG --</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">---- SWAP</span>
<span style="color: #cae682;">SWAP</span>=1500MB
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">---- TOR SSH</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- SWAP --</span>
fallocate -l $<span style="color: #cae682;">SWAP</span> /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
cp /etc/fstab /etc/fstab.back
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'/swapfile none swap sw 0 0'</span> | tee -a /etc/fstab
cp /etc/sysctl.conf /etc/sysctl.conf.back
<span style="color: #e5786d;">echo</span> <span style="color: #95e454;">'vm.swappiness=10'</span> | tee -a /etc/sysctl.conf
sysctl -p /etc/sysctl.conf

swapon --show
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- TOR SSH --</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- APT config --</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">disable recommended</span>
apt-config dump | grep -we Recommends -e Suggests | sed s/1/0/ | sudo tee /etc/apt/apt.conf.d/999norecommend
</pre>
</div>
</div>
</div>
<div id="outline-container-org2dd6c4c" class="outline-2">
<h2 id="org2dd6c4c"><span class="section-number-2">67.</span> markdown</h2>
<div class="outline-text-2" id="text-67">
<p>
to html:
</p>
<pre class="example">
dev-python/markdown-it-py
</pre>
</div>
</div>
<div id="outline-container-org3478ea1" class="outline-2">
<h2 id="org3478ea1"><span class="section-number-2">68.</span> <span class="todo TODO">TODO</span> mount<sub>cifs</sub></h2>
<div class="outline-text-2" id="text-68">
<p>
How to Mount Windows Share on Linux
</p>
</div>
</div>
<div id="outline-container-orgd27bbe6" class="outline-2">
<h2 id="orgd27bbe6"><span class="section-number-2">69.</span> suites of utils</h2>
<div class="outline-text-2" id="text-69">
<p>
Core Utilities
</p>
<ul class="org-ul">
<li>GNU Core Utilities (coreutils) - A collection of basic file, shell, and text manipulation utilities[2]. GNU
Project.  GPL-3.0-or-later</li>
</ul>

<p>
System Administration and File System Utilities
</p>
<ul class="org-ul">
<li>util-linux - for Linux systems, including tools for managing block devices, filesystems, and system
administration tasks. Linux Kernel Organization. Own licensing terms. advanced tools for system
administration and resource management.</li>
<li>sysstat - collecting and reporting system statistics: sar, sadf, mpstat, iostat, and pidstat.</li>
</ul>

<p>
Lightweight and Embedded System Utilities
</p>
<ul class="org-ul">
<li>BusyBox - A single binary that combines many common UNIX utilities, designed for embedded and small systems[2][3].</li>
</ul>

<p>
File and Directory Navigation
</p>
<ul class="org-ul">
<li>GNU Find Utilities (findutils) -  find, locate, updatedb, and xargs for searching and manipulating files[2].</li>
</ul>

<p>
Text Processing and Shell Utilities
</p>
<ul class="org-ul">
<li>GNU Shell Utilities (shellutils) - basename, chroot, date, dirname, echo, and others for shell-related tasks[2].</li>
<li>GNU Text Utilities (textutils) - cat, cksum, comm, csplit, and others for text manipulation[2].</li>
</ul>

<p>
Network and System Information Utilities
</p>
<ul class="org-ul">
<li>procps - free, kill, ps, top, uptime, and others for managing processes and system information[2].</li>
<li>iproute2 - managing network interfaces, routing, and traffic control: ip, ss, nstat, and lnstat.</li>
<li>net-tools (old) -  ifconfig, netstat, route, and arp.</li>
<li>NetworkManager - managing network connections. It includes tools like nmcli and nmtui</li>
<li>tcpdump</li>
</ul>


<p>
Desktop and User Interface Utilities
</p>
<ul class="org-ul">
<li>Widget Toolkits -  libraries like GTK, Qt, and Enlightenment Foundation Libraries (EFL) for building graphical user interfaces</li>
</ul>

<p>
Init Systems: SysVinit, systemd, OpenRC
</p>
</div>
<div id="outline-container-org759fae6" class="outline-3">
<h3 id="org759fae6"><span class="section-number-3">69.1.</span> util-linux</h3>
<div class="outline-text-3" id="text-69-1">
<ol class="org-ol">
<li>blkid: Displays information about block devices (e.g., hard drives,
SSDs, USB drives). Example: blkid -c /dev/null (display all block
devices)</li>
<li>chrt: Changes the scheduling priority of a
process. Example: chrt -p 19 1234 (set the priority of process 1234
to 19)</li>
<li>dmesg: Displays kernel messages (e.g., boot messages,
error messages). Example: dmesg | grep -i error (display all error
messages)</li>
<li>fdisk: Manipulates disk partitions (e.g., creates,
deletes, lists partitions). Example: fdisk -l /dev/sda (display
partition table of /dev/sda)</li>
<li>findmnt: Displays information about
mounted filesystems. Example: findmnt -t ext4 (display all ext4
filesystems)</li>
<li>fstrim: Trims (discards) unused blocks on a
filesystem. Example: fstrim -v / (trim unused blocks on the root
filesystem)</li>
<li>getopt: Parses command-line options. Example: getopt
-o "hf:" -n "myprogram" &#x2013; "$@" (parse options for
myprogram)</li>
<li>hexdump: Displays a file in hexadecimal
format. Example: hexdump -C /bin/ls (display the contents of
/bin/ls in hexadecimal)</li>
<li>ionice: Sets the I/O scheduling priority of a process. Example:
ionice -c 3 -p 1234 (set the I/O priority of process 1234 to 3)</li>
<li>lsblk: Displays information about block
devices (e.g., hard drives, SSDs, USB drives). Example: lsblk -d -o
NAME,FSTYPE,SIZE,MOUNTPOINT (display block devices with their
filesystem type, size, and mountpoint)</li>
<li>lsusb: Displays
information about USB devices. Example: lsusb -t (display USB
devices in a tree-like format)</li>
<li>mountpoint: Checks if a directory is a mountpoint. Example:
mountpoint /mnt (check if /mnt is a mountpoint)</li>
<li>nsenter: Enters a namespace (e.g., mounts,
network, PID). Example: nsenter -t 1234 -m (enter the mount
namespace of process 1234)</li>
<li>partx: Displays information about disk partitions. Example: partx
-s /dev/sda (display partition sizes of /dev/sda)</li>
<li>readprofile: Displays kernel profiling information. Example:
readprofile -v (display kernel profiling information in a verbose
format)</li>
<li>renice: Changes the nice value of a process. Example: renice -n 10
-p 1234 (set the nice value of process 1234 to 10)</li>
<li>setterm: Sets terminal attributes (e.g.,
baud rate, parity). Example: setterm -baud 9600 (set the baud rate
to 9600)</li>
<li>swapon:/swapoff: Disables swap space. Example: swapoff -a
(disable all swap space)</li>
<li>taskset: Sets the CPU affinity of a process. Example: taskset -c
0-3 1234 (set the CPU affinity of process 1234 to CPUs 0-3) These
are just a few examples of the many useful commands in util-linux.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orge0a0bbe" class="outline-2">
<h2 id="orge0a0bbe"><span class="section-number-2">70.</span> translate-shell</h2>
<div class="outline-text-2" id="text-70">
<p>
/etc/hosts:
</p>
<pre class="example">
172.217.13.106	translate.googleapis.com
</pre>
</div>
</div>
<div id="outline-container-orgfcc4aab" class="outline-2">
<h2 id="orgfcc4aab"><span class="section-number-2">71.</span> linkedin create post</h2>
<div class="outline-text-2" id="text-71">
<ul class="org-ul">
<li>developer.linkedin.com</li>
<li>create company page</li>
<li>creat app</li>
</ul>

<p>
secret r2kwzb1UAm9gMv12
client id 78e41n602hoa3r
<a href="https://www.linkedin.com/developers/apps/verification/7115293d-2b5a-46f9-845f-dc8eaa88e646">https://www.linkedin.com/developers/apps/verification/7115293d-2b5a-46f9-845f-dc8eaa88e646</a>
</p>

<p>
GET <a href="https://api.linkedin.com/v2/userinfo">https://api.linkedin.com/v2/userinfo</a>
Authorization: Bearer &lt;access token&gt;
</p>
</div>
</div>
<div id="outline-container-orgc5bd03e" class="outline-2">
<h2 id="orgc5bd03e"><span class="section-number-2">72.</span> whatsapp</h2>
<div class="outline-text-2" id="text-72">
<ul class="org-ul">
<li><a href="https://web.whatsapp.com/">https://web.whatsapp.com/</a></li>
<li><a href="https://whatsapp.com/android/current/whatsapp.apk">https://whatsapp.com/android/current/whatsapp.apk</a></li>
</ul>
</div>
<div id="outline-container-orgc50c9c9" class="outline-3">
<h3 id="orgc50c9c9"><span class="section-number-3">72.1.</span> whatsie - C++ client</h3>
<div class="outline-text-3" id="text-72-1">
<p>
<a href="https://github.com/keshavbhatt/whatsie">https://github.com/keshavbhatt/whatsie</a>
</p>

<pre class="example">
emerge --ask net-im/whatsie-4.16.3
</pre>


<p>
Unwanted connections:
</p>
<ul class="org-ul">
<li>raw.githubusercontent.com</li>
<li>dashboard.snapcraft.io</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org2f1197d" class="outline-2">
<h2 id="org2f1197d"><span class="section-number-2">73.</span> Affiliate marketing</h2>
<div class="outline-text-2" id="text-73">
</div>
<div id="outline-container-orgb5db22c" class="outline-3">
<h3 id="orgb5db22c"><span class="section-number-3">73.1.</span> terms:</h3>
<div class="outline-text-3" id="text-73-1">
<dl class="org-dl">
<dt>affiliate marketing</dt><dd>by spreading the responsibilities of product marketing and creation across parties.
by paying affiliate sites to promote their products.</dd>
<dt>Seller and product creators or brand</dt><dd>a solo entrepreneur or large enterprise, is a vendor, merchant, product
creator or retailer with a product to market.</dd>
<dt>affiliate marketers or The affiliate or advertiser  or a publisher</dt><dd>convince consumers them to purchase the product.</dd>
<dt>(no term)</dt><dd>The consumer</dd>
<dt>(no term)</dt><dd>product marketing</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2025-01-14 Tue 12:49</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
